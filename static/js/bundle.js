!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=102)}([function(t,e,i){var n=i(40)("wks"),r=i(29),s=i(1).Symbol,o="function"==typeof s;(t.exports=function(t){return n[t]||(n[t]=o&&s[t]||(o?s:r)("Symbol."+t))}).store=n},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e,i){var n=i(8);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,i){t.exports=!i(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,i){var n=i(2),r=i(99),s=i(39),o=Object.defineProperty;e.f=i(3)?Object.defineProperty:function(t,e,i){if(n(t),e=s(e,!0),n(i),r)try{return o(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){var n=i(1),r=i(13),s=i(12),o=i(9),a=i(18),l=function(t,e,i){var c,u,h,d,p=t&l.F,f=t&l.G,m=t&l.S,g=t&l.P,y=t&l.B,v=f?n:m?n[e]||(n[e]={}):(n[e]||{}).prototype,b=f?r:r[e]||(r[e]={}),x=b.prototype||(b.prototype={});for(c in f&&(i=e),i)h=((u=!p&&v&&void 0!==v[c])?v:i)[c],d=y&&u?a(h,n):g&&"function"==typeof h?a(Function.call,h):h,v&&o(v,c,h,t&l.U),b[c]!=h&&s(b,c,d),g&&x[c]!=h&&(x[c]=h)};n.core=r,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e,i){t.exports=function(){"use strict";var t=navigator.userAgent,e=navigator.platform,i=/gecko\/\d/i.test(t),n=/MSIE \d/.test(t),r=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),s=/Edge\/(\d+)/.exec(t),o=n||r||s,a=o&&(n?document.documentMode||6:+(s||r)[1]),l=!s&&/WebKit\//.test(t),c=l&&/Qt\/\d+\.\d+/.test(t),u=!s&&/Chrome\//.test(t),h=/Opera\//.test(t),d=/Apple Computer/.test(navigator.vendor),p=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),f=/PhantomJS/.test(t),m=!s&&/AppleWebKit/.test(t)&&/Mobile\/\w+/.test(t),g=/Android/.test(t),y=m||g||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),v=m||/Mac/.test(e),b=/\bCrOS\b/.test(t),x=/win/i.test(e),k=h&&t.match(/Version\/(\d*\.\d*)/);k&&(k=Number(k[1])),k&&k>=15&&(h=!1,l=!0);var w=v&&(c||h&&(null==k||k<12.11)),S=i||o&&a>=9;function C(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}var A,T=function(t,e){var i=t.className,n=C(e).exec(i);if(n){var r=i.slice(n.index+n[0].length);t.className=i.slice(0,n.index)+(r?n[1]+r:"")}};function _(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function M(t,e){return _(t).appendChild(e)}function L(t,e,i,n){var r=document.createElement(t);if(i&&(r.className=i),n&&(r.style.cssText=n),"string"==typeof e)r.appendChild(document.createTextNode(e));else if(e)for(var s=0;s<e.length;++s)r.appendChild(e[s]);return r}function F(t,e,i,n){var r=L(t,e,i,n);return r.setAttribute("role","presentation"),r}function D(t,e){if(3==e.nodeType&&(e=e.parentNode),t.contains)return t.contains(e);do{if(11==e.nodeType&&(e=e.host),e==t)return!0}while(e=e.parentNode)}function E(){var t;try{t=document.activeElement}catch(e){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function O(t,e){var i=t.className;C(e).test(i)||(t.className+=(i?" ":"")+e)}function I(t,e){for(var i=t.split(" "),n=0;n<i.length;n++)i[n]&&!C(i[n]).test(e)&&(e+=" "+i[n]);return e}A=document.createRange?function(t,e,i,n){var r=document.createRange();return r.setEnd(n||t,i),r.setStart(t,e),r}:function(t,e,i){var n=document.body.createTextRange();try{n.moveToElementText(t.parentNode)}catch(t){return n}return n.collapse(!0),n.moveEnd("character",i),n.moveStart("character",e),n};var N=function(t){t.select()};function z(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function P(t,e,i){for(var n in e||(e={}),t)!t.hasOwnProperty(n)||!1===i&&e.hasOwnProperty(n)||(e[n]=t[n]);return e}function R(t,e,i,n,r){null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var s=n||0,o=r||0;;){var a=t.indexOf("\t",s);if(a<0||a>=e)return o+(e-s);o+=a-s,o+=i-o%i,s=a+1}}m?N=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:o&&(N=function(t){try{t.select()}catch(t){}});var B=function(){this.id=null,this.f=null,this.time=0,this.handler=z(this.onTimeout,this)};function q(t,e){for(var i=0;i<t.length;++i)if(t[i]==e)return i;return-1}B.prototype.onTimeout=function(t){t.id=0,t.time<=+new Date?t.f():setTimeout(t.handler,t.time-+new Date)},B.prototype.set=function(t,e){this.f=e;var i=+new Date+t;(!this.id||i<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,t),this.time=i)};var $=30,H={toString:function(){return"CodeMirror.Pass"}},W={scroll:!1},j={origin:"*mouse"},K={origin:"+move"};function U(t,e,i){for(var n=0,r=0;;){var s=t.indexOf("\t",n);-1==s&&(s=t.length);var o=s-n;if(s==t.length||r+o>=e)return n+Math.min(o,e-r);if(r+=s-n,n=s+1,(r+=i-r%i)>=e)return n}}var V=[""];function G(t){for(;V.length<=t;)V.push(X(V)+" ");return V[t]}function X(t){return t[t.length-1]}function Z(t,e){for(var i=[],n=0;n<t.length;n++)i[n]=e(t[n],n);return i}function Y(){}function J(t,e){var i;return Object.create?i=Object.create(t):(Y.prototype=t,i=new Y),e&&P(e,i),i}var Q=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function tt(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||Q.test(t))}function et(t,e){return e?!!(e.source.indexOf("\\w")>-1&&tt(t))||e.test(t):tt(t)}function it(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}var nt=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function rt(t){return t.charCodeAt(0)>=768&&nt.test(t)}function st(t,e,i){for(;(i<0?e>0:e<t.length)&&rt(t.charAt(e));)e+=i;return e}function ot(t,e,i){for(var n=e>i?-1:1;;){if(e==i)return e;var r=(e+i)/2,s=n<0?Math.ceil(r):Math.floor(r);if(s==e)return t(s)?e:i;t(s)?i=s:e=s+n}}var at=null;function lt(t,e,i){var n;at=null;for(var r=0;r<t.length;++r){var s=t[r];if(s.from<e&&s.to>e)return r;s.to==e&&(s.from!=s.to&&"before"==i?n=r:at=r),s.from==e&&(s.from!=s.to&&"before"!=i?n=r:at=r)}return null!=n?n:at}var ct=function(){var t="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",e="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";var i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,n=/[stwN]/,r=/[LRr]/,s=/[Lb1n]/,o=/[1n]/;function a(t,e,i){this.level=t,this.from=e,this.to=i}return function(l,c){var u,h="ltr"==c?"L":"R";if(0==l.length||"ltr"==c&&!i.test(l))return!1;for(var d=l.length,p=[],f=0;f<d;++f)p.push((u=l.charCodeAt(f))<=247?t.charAt(u):1424<=u&&u<=1524?"R":1536<=u&&u<=1785?e.charAt(u-1536):1774<=u&&u<=2220?"r":8192<=u&&u<=8203?"w":8204==u?"b":"L");for(var m=0,g=h;m<d;++m){var y=p[m];"m"==y?p[m]=g:g=y}for(var v=0,b=h;v<d;++v){var x=p[v];"1"==x&&"r"==b?p[v]="n":r.test(x)&&(b=x,"r"==x&&(p[v]="R"))}for(var k=1,w=p[0];k<d-1;++k){var S=p[k];"+"==S&&"1"==w&&"1"==p[k+1]?p[k]="1":","!=S||w!=p[k+1]||"1"!=w&&"n"!=w||(p[k]=w),w=S}for(var C=0;C<d;++C){var A=p[C];if(","==A)p[C]="N";else if("%"==A){var T=void 0;for(T=C+1;T<d&&"%"==p[T];++T);for(var _=C&&"!"==p[C-1]||T<d&&"1"==p[T]?"1":"N",M=C;M<T;++M)p[M]=_;C=T-1}}for(var L=0,F=h;L<d;++L){var D=p[L];"L"==F&&"1"==D?p[L]="L":r.test(D)&&(F=D)}for(var E=0;E<d;++E)if(n.test(p[E])){var O=void 0;for(O=E+1;O<d&&n.test(p[O]);++O);for(var I="L"==(E?p[E-1]:h),N="L"==(O<d?p[O]:h),z=I==N?I?"L":"R":h,P=E;P<O;++P)p[P]=z;E=O-1}for(var R,B=[],q=0;q<d;)if(s.test(p[q])){var $=q;for(++q;q<d&&s.test(p[q]);++q);B.push(new a(0,$,q))}else{var H=q,W=B.length;for(++q;q<d&&"L"!=p[q];++q);for(var j=H;j<q;)if(o.test(p[j])){H<j&&B.splice(W,0,new a(1,H,j));var K=j;for(++j;j<q&&o.test(p[j]);++j);B.splice(W,0,new a(2,K,j)),H=j}else++j;H<q&&B.splice(W,0,new a(1,H,q))}return"ltr"==c&&(1==B[0].level&&(R=l.match(/^\s+/))&&(B[0].from=R[0].length,B.unshift(new a(0,0,R[0].length))),1==X(B).level&&(R=l.match(/\s+$/))&&(X(B).to-=R[0].length,B.push(new a(0,d-R[0].length,d)))),"rtl"==c?B.reverse():B}}();function ut(t,e){var i=t.order;return null==i&&(i=t.order=ct(t.text,e)),i}var ht=[],dt=function(t,e,i){if(t.addEventListener)t.addEventListener(e,i,!1);else if(t.attachEvent)t.attachEvent("on"+e,i);else{var n=t._handlers||(t._handlers={});n[e]=(n[e]||ht).concat(i)}};function pt(t,e){return t._handlers&&t._handlers[e]||ht}function ft(t,e,i){if(t.removeEventListener)t.removeEventListener(e,i,!1);else if(t.detachEvent)t.detachEvent("on"+e,i);else{var n=t._handlers,r=n&&n[e];if(r){var s=q(r,i);s>-1&&(n[e]=r.slice(0,s).concat(r.slice(s+1)))}}}function mt(t,e){var i=pt(t,e);if(i.length)for(var n=Array.prototype.slice.call(arguments,2),r=0;r<i.length;++r)i[r].apply(null,n)}function gt(t,e,i){return"string"==typeof e&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}}),mt(t,i||e.type,t,e),wt(e)||e.codemirrorIgnore}function yt(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var i=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),n=0;n<e.length;++n)-1==q(i,e[n])&&i.push(e[n])}function vt(t,e){return pt(t,e).length>0}function bt(t){t.prototype.on=function(t,e){dt(this,t,e)},t.prototype.off=function(t,e){ft(this,t,e)}}function xt(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function kt(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function wt(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function St(t){xt(t),kt(t)}function Ct(t){return t.target||t.srcElement}function At(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),v&&t.ctrlKey&&1==e&&(e=3),e}var Tt,_t,Mt=function(){if(o&&a<9)return!1;var t=L("div");return"draggable"in t||"dragDrop"in t}();function Lt(t){if(null==Tt){var e=L("span","​");M(t,L("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(Tt=e.offsetWidth<=1&&e.offsetHeight>2&&!(o&&a<8))}var i=Tt?L("span","​"):L("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return i.setAttribute("cm-text",""),i}function Ft(t){if(null!=_t)return _t;var e=M(t,document.createTextNode("AخA")),i=A(e,0,1).getBoundingClientRect(),n=A(e,1,2).getBoundingClientRect();return _(t),!(!i||i.left==i.right)&&(_t=n.right-i.right<3)}var Dt,Et=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,i=[],n=t.length;e<=n;){var r=t.indexOf("\n",e);-1==r&&(r=t.length);var s=t.slice(e,"\r"==t.charAt(r-1)?r-1:r),o=s.indexOf("\r");-1!=o?(i.push(s.slice(0,o)),e+=o+1):(i.push(s),e=r+1)}return i}:function(t){return t.split(/\r\n?|\n/)},Ot=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){var e;try{e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},It="oncopy"in(Dt=L("div"))||(Dt.setAttribute("oncopy","return;"),"function"==typeof Dt.oncopy),Nt=null,zt={},Pt={};function Rt(t){if("string"==typeof t&&Pt.hasOwnProperty(t))t=Pt[t];else if(t&&"string"==typeof t.name&&Pt.hasOwnProperty(t.name)){var e=Pt[t.name];"string"==typeof e&&(e={name:e}),(t=J(e,t)).name=e.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return Rt("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return Rt("application/json")}return"string"==typeof t?{name:t}:t||{name:"null"}}function Bt(t,e){e=Rt(e);var i=zt[e.name];if(!i)return Bt(t,"text/plain");var n=i(t,e);if(qt.hasOwnProperty(e.name)){var r=qt[e.name];for(var s in r)r.hasOwnProperty(s)&&(n.hasOwnProperty(s)&&(n["_"+s]=n[s]),n[s]=r[s])}if(n.name=e.name,e.helperType&&(n.helperType=e.helperType),e.modeProps)for(var o in e.modeProps)n[o]=e.modeProps[o];return n}var qt={};function $t(t,e){var i=qt.hasOwnProperty(t)?qt[t]:qt[t]={};P(e,i)}function Ht(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var i={};for(var n in e){var r=e[n];r instanceof Array&&(r=r.concat([])),i[n]=r}return i}function Wt(t,e){for(var i;t.innerMode&&(i=t.innerMode(e))&&i.mode!=t;)e=i.state,t=i.mode;return i||{mode:t,state:e}}function jt(t,e,i){return!t.startState||t.startState(e,i)}var Kt=function(t,e,i){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=i};function Ut(t,e){if((e-=t.first)<0||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var i=t;!i.lines;)for(var n=0;;++n){var r=i.children[n],s=r.chunkSize();if(e<s){i=r;break}e-=s}return i.lines[e]}function Vt(t,e,i){var n=[],r=e.line;return t.iter(e.line,i.line+1,function(t){var s=t.text;r==i.line&&(s=s.slice(0,i.ch)),r==e.line&&(s=s.slice(e.ch)),n.push(s),++r}),n}function Gt(t,e,i){var n=[];return t.iter(e,i,function(t){n.push(t.text)}),n}function Xt(t,e){var i=e-t.height;if(i)for(var n=t;n;n=n.parent)n.height+=i}function Zt(t){if(null==t.parent)return null;for(var e=t.parent,i=q(e.lines,t),n=e.parent;n;e=n,n=n.parent)for(var r=0;n.children[r]!=e;++r)i+=n.children[r].chunkSize();return i+e.first}function Yt(t,e){var i=t.first;t:do{for(var n=0;n<t.children.length;++n){var r=t.children[n],s=r.height;if(e<s){t=r;continue t}e-=s,i+=r.chunkSize()}return i}while(!t.lines);for(var o=0;o<t.lines.length;++o){var a=t.lines[o],l=a.height;if(e<l)break;e-=l}return i+o}function Jt(t,e){return e>=t.first&&e<t.first+t.size}function Qt(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function te(t,e,i){if(void 0===i&&(i=null),!(this instanceof te))return new te(t,e,i);this.line=t,this.ch=e,this.sticky=i}function ee(t,e){return t.line-e.line||t.ch-e.ch}function ie(t,e){return t.sticky==e.sticky&&0==ee(t,e)}function ne(t){return te(t.line,t.ch)}function re(t,e){return ee(t,e)<0?e:t}function se(t,e){return ee(t,e)<0?t:e}function oe(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function ae(t,e){if(e.line<t.first)return te(t.first,0);var i=t.first+t.size-1;return e.line>i?te(i,Ut(t,i).text.length):function(t,e){var i=t.ch;return null==i||i>e?te(t.line,e):i<0?te(t.line,0):t}(e,Ut(t,e.line).text.length)}function le(t,e){for(var i=[],n=0;n<e.length;n++)i[n]=ae(t,e[n]);return i}Kt.prototype.eol=function(){return this.pos>=this.string.length},Kt.prototype.sol=function(){return this.pos==this.lineStart},Kt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Kt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Kt.prototype.eat=function(t){var e=this.string.charAt(this.pos);if("string"==typeof t?e==t:e&&(t.test?t.test(e):t(e)))return++this.pos,e},Kt.prototype.eatWhile=function(t){for(var e=this.pos;this.eat(t););return this.pos>e},Kt.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},Kt.prototype.skipToEnd=function(){this.pos=this.string.length},Kt.prototype.skipTo=function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},Kt.prototype.backUp=function(t){this.pos-=t},Kt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=R(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?R(this.string,this.lineStart,this.tabSize):0)},Kt.prototype.indentation=function(){return R(this.string,null,this.tabSize)-(this.lineStart?R(this.string,this.lineStart,this.tabSize):0)},Kt.prototype.match=function(t,e,i){if("string"!=typeof t){var n=this.string.slice(this.pos).match(t);return n&&n.index>0?null:(n&&!1!==e&&(this.pos+=n[0].length),n)}var r=function(t){return i?t.toLowerCase():t},s=this.string.substr(this.pos,t.length);if(r(s)==r(t))return!1!==e&&(this.pos+=t.length),!0},Kt.prototype.current=function(){return this.string.slice(this.start,this.pos)},Kt.prototype.hideFirstChars=function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}},Kt.prototype.lookAhead=function(t){var e=this.lineOracle;return e&&e.lookAhead(t)},Kt.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};var ce=function(t,e){this.state=t,this.lookAhead=e},ue=function(t,e,i,n){this.state=e,this.doc=t,this.line=i,this.maxLookAhead=n||0,this.baseTokens=null,this.baseTokenPos=1};function he(t,e,i,n){var r=[t.state.modeGen],s={};xe(t,e.text,t.doc.mode,i,function(t,e){return r.push(t,e)},s,n);for(var o=i.state,a=function(n){i.baseTokens=r;var a=t.state.overlays[n],l=1,c=0;i.state=!0,xe(t,e.text,a.mode,i,function(t,e){for(var i=l;c<t;){var n=r[l];n>t&&r.splice(l,1,t,r[l+1],n),l+=2,c=Math.min(t,n)}if(e)if(a.opaque)r.splice(i,l-i,t,"overlay "+e),l=i+2;else for(;i<l;i+=2){var s=r[i+1];r[i+1]=(s?s+" ":"")+"overlay "+e}},s),i.state=o,i.baseTokens=null,i.baseTokenPos=1},l=0;l<t.state.overlays.length;++l)a(l);return{styles:r,classes:s.bgClass||s.textClass?s:null}}function de(t,e,i){if(!e.styles||e.styles[0]!=t.state.modeGen){var n=pe(t,Zt(e)),r=e.text.length>t.options.maxHighlightLength&&Ht(t.doc.mode,n.state),s=he(t,e,n);r&&(n.state=r),e.stateAfter=n.save(!r),e.styles=s.styles,s.classes?e.styleClasses=s.classes:e.styleClasses&&(e.styleClasses=null),i===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return e.styles}function pe(t,e,i){var n=t.doc,r=t.display;if(!n.mode.startState)return new ue(n,!0,e);var s=function(t,e,i){for(var n,r,s=t.doc,o=i?-1:e-(t.doc.mode.innerMode?1e3:100),a=e;a>o;--a){if(a<=s.first)return s.first;var l=Ut(s,a-1),c=l.stateAfter;if(c&&(!i||a+(c instanceof ce?c.lookAhead:0)<=s.modeFrontier))return a;var u=R(l.text,null,t.options.tabSize);(null==r||n>u)&&(r=a-1,n=u)}return r}(t,e,i),o=s>n.first&&Ut(n,s-1).stateAfter,a=o?ue.fromSaved(n,o,s):new ue(n,jt(n.mode),s);return n.iter(s,e,function(i){fe(t,i.text,a);var n=a.line;i.stateAfter=n==e-1||n%5==0||n>=r.viewFrom&&n<r.viewTo?a.save():null,a.nextLine()}),i&&(n.modeFrontier=a.line),a}function fe(t,e,i,n){var r=t.doc.mode,s=new Kt(e,t.options.tabSize,i);for(s.start=s.pos=n||0,""==e&&me(r,i.state);!s.eol();)ge(r,s,i.state),s.start=s.pos}function me(t,e){if(t.blankLine)return t.blankLine(e);if(t.innerMode){var i=Wt(t,e);return i.mode.blankLine?i.mode.blankLine(i.state):void 0}}function ge(t,e,i,n){for(var r=0;r<10;r++){n&&(n[0]=Wt(t,i).mode);var s=t.token(e,i);if(e.pos>e.start)return s}throw new Error("Mode "+t.name+" failed to advance stream.")}ue.prototype.lookAhead=function(t){var e=this.doc.getLine(this.line+t);return null!=e&&t>this.maxLookAhead&&(this.maxLookAhead=t),e},ue.prototype.baseToken=function(t){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)this.baseTokenPos+=2;var e=this.baseTokens[this.baseTokenPos+1];return{type:e&&e.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},ue.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ue.fromSaved=function(t,e,i){return e instanceof ce?new ue(t,Ht(t.mode,e.state),i,e.lookAhead):new ue(t,Ht(t.mode,e),i)},ue.prototype.save=function(t){var e=!1!==t?Ht(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ce(e,this.maxLookAhead):e};var ye=function(t,e,i){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=e||null,this.state=i};function ve(t,e,i,n){var r,s=t.doc,o=s.mode;e=ae(s,e);var a,l=Ut(s,e.line),c=pe(t,e.line,i),u=new Kt(l.text,t.options.tabSize,c);for(n&&(a=[]);(n||u.pos<e.ch)&&!u.eol();)u.start=u.pos,r=ge(o,u,c.state),n&&a.push(new ye(u,r,Ht(s.mode,c.state)));return n?a:new ye(u,r,c.state)}function be(t,e){if(t)for(;;){var i=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;t=t.slice(0,i.index)+t.slice(i.index+i[0].length);var n=i[1]?"bgClass":"textClass";null==e[n]?e[n]=i[2]:new RegExp("(?:^|s)"+i[2]+"(?:$|s)").test(e[n])||(e[n]+=" "+i[2])}return t}function xe(t,e,i,n,r,s,o){var a=i.flattenSpans;null==a&&(a=t.options.flattenSpans);var l,c=0,u=null,h=new Kt(e,t.options.tabSize,n),d=t.options.addModeClass&&[null];for(""==e&&be(me(i,n.state),s);!h.eol();){if(h.pos>t.options.maxHighlightLength?(a=!1,o&&fe(t,e,n,h.pos),h.pos=e.length,l=null):l=be(ge(i,h,n.state,d),s),d){var p=d[0].name;p&&(l="m-"+(l?p+" "+l:p))}if(!a||u!=l){for(;c<h.start;)c=Math.min(h.start,c+5e3),r(c,u);u=l}h.start=h.pos}for(;c<h.pos;){var f=Math.min(h.pos,c+5e3);r(f,u),c=f}}var ke=!1,we=!1;function Se(t,e,i){this.marker=t,this.from=e,this.to=i}function Ce(t,e){if(t)for(var i=0;i<t.length;++i){var n=t[i];if(n.marker==e)return n}}function Ae(t,e){for(var i,n=0;n<t.length;++n)t[n]!=e&&(i||(i=[])).push(t[n]);return i}function Te(t,e){if(e.full)return null;var i=Jt(t,e.from.line)&&Ut(t,e.from.line).markedSpans,n=Jt(t,e.to.line)&&Ut(t,e.to.line).markedSpans;if(!i&&!n)return null;var r=e.from.ch,s=e.to.ch,o=0==ee(e.from,e.to),a=function(t,e,i){var n;if(t)for(var r=0;r<t.length;++r){var s=t[r],o=s.marker,a=null==s.from||(o.inclusiveLeft?s.from<=e:s.from<e);if(a||s.from==e&&"bookmark"==o.type&&(!i||!s.marker.insertLeft)){var l=null==s.to||(o.inclusiveRight?s.to>=e:s.to>e);(n||(n=[])).push(new Se(o,s.from,l?null:s.to))}}return n}(i,r,o),l=function(t,e,i){var n;if(t)for(var r=0;r<t.length;++r){var s=t[r],o=s.marker,a=null==s.to||(o.inclusiveRight?s.to>=e:s.to>e);if(a||s.from==e&&"bookmark"==o.type&&(!i||s.marker.insertLeft)){var l=null==s.from||(o.inclusiveLeft?s.from<=e:s.from<e);(n||(n=[])).push(new Se(o,l?null:s.from-e,null==s.to?null:s.to-e))}}return n}(n,s,o),c=1==e.text.length,u=X(e.text).length+(c?r:0);if(a)for(var h=0;h<a.length;++h){var d=a[h];if(null==d.to){var p=Ce(l,d.marker);p?c&&(d.to=null==p.to?null:p.to+u):d.to=r}}if(l)for(var f=0;f<l.length;++f){var m=l[f];if(null!=m.to&&(m.to+=u),null==m.from){var g=Ce(a,m.marker);g||(m.from=u,c&&(a||(a=[])).push(m))}else m.from+=u,c&&(a||(a=[])).push(m)}a&&(a=_e(a)),l&&l!=a&&(l=_e(l));var y=[a];if(!c){var v,b=e.text.length-2;if(b>0&&a)for(var x=0;x<a.length;++x)null==a[x].to&&(v||(v=[])).push(new Se(a[x].marker,null,null));for(var k=0;k<b;++k)y.push(v);y.push(l)}return y}function _e(t){for(var e=0;e<t.length;++e){var i=t[e];null!=i.from&&i.from==i.to&&!1!==i.marker.clearWhenEmpty&&t.splice(e--,1)}return t.length?t:null}function Me(t){var e=t.markedSpans;if(e){for(var i=0;i<e.length;++i)e[i].marker.detachLine(t);t.markedSpans=null}}function Le(t,e){if(e){for(var i=0;i<e.length;++i)e[i].marker.attachLine(t);t.markedSpans=e}}function Fe(t){return t.inclusiveLeft?-1:0}function De(t){return t.inclusiveRight?1:0}function Ee(t,e){var i=t.lines.length-e.lines.length;if(0!=i)return i;var n=t.find(),r=e.find(),s=ee(n.from,r.from)||Fe(t)-Fe(e);if(s)return-s;var o=ee(n.to,r.to)||De(t)-De(e);return o||e.id-t.id}function Oe(t,e){var i,n=we&&t.markedSpans;if(n)for(var r=void 0,s=0;s<n.length;++s)(r=n[s]).marker.collapsed&&null==(e?r.from:r.to)&&(!i||Ee(i,r.marker)<0)&&(i=r.marker);return i}function Ie(t){return Oe(t,!0)}function Ne(t){return Oe(t,!1)}function ze(t,e){var i,n=we&&t.markedSpans;if(n)for(var r=0;r<n.length;++r){var s=n[r];s.marker.collapsed&&(null==s.from||s.from<e)&&(null==s.to||s.to>e)&&(!i||Ee(i,s.marker)<0)&&(i=s.marker)}return i}function Pe(t,e,i,n,r){var s=Ut(t,e),o=we&&s.markedSpans;if(o)for(var a=0;a<o.length;++a){var l=o[a];if(l.marker.collapsed){var c=l.marker.find(0),u=ee(c.from,i)||Fe(l.marker)-Fe(r),h=ee(c.to,n)||De(l.marker)-De(r);if(!(u>=0&&h<=0||u<=0&&h>=0)&&(u<=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?ee(c.to,i)>=0:ee(c.to,i)>0)||u>=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?ee(c.from,n)<=0:ee(c.from,n)<0)))return!0}}}function Re(t){for(var e;e=Ie(t);)t=e.find(-1,!0).line;return t}function Be(t,e){var i=Ut(t,e),n=Re(i);return i==n?e:Zt(n)}function qe(t,e){if(e>t.lastLine())return e;var i,n=Ut(t,e);if(!$e(t,n))return e;for(;i=Ne(n);)n=i.find(1,!0).line;return Zt(n)+1}function $e(t,e){var i=we&&e.markedSpans;if(i)for(var n=void 0,r=0;r<i.length;++r)if((n=i[r]).marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&He(t,e,n))return!0}}function He(t,e,i){if(null==i.to){var n=i.marker.find(1,!0);return He(t,n.line,Ce(n.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==e.text.length)return!0;for(var r=void 0,s=0;s<e.markedSpans.length;++s)if((r=e.markedSpans[s]).marker.collapsed&&!r.marker.widgetNode&&r.from==i.to&&(null==r.to||r.to!=i.from)&&(r.marker.inclusiveLeft||i.marker.inclusiveRight)&&He(t,e,r))return!0}function We(t){for(var e=0,i=(t=Re(t)).parent,n=0;n<i.lines.length;++n){var r=i.lines[n];if(r==t)break;e+=r.height}for(var s=i.parent;s;s=(i=s).parent)for(var o=0;o<s.children.length;++o){var a=s.children[o];if(a==i)break;e+=a.height}return e}function je(t){if(0==t.height)return 0;for(var e,i=t.text.length,n=t;e=Ie(n);){var r=e.find(0,!0);n=r.from.line,i+=r.from.ch-r.to.ch}for(n=t;e=Ne(n);){var s=e.find(0,!0);i-=n.text.length-s.from.ch,n=s.to.line,i+=n.text.length-s.to.ch}return i}function Ke(t){var e=t.display,i=t.doc;e.maxLine=Ut(i,i.first),e.maxLineLength=je(e.maxLine),e.maxLineChanged=!0,i.iter(function(t){var i=je(t);i>e.maxLineLength&&(e.maxLineLength=i,e.maxLine=t)})}var Ue=function(t,e,i){this.text=t,Le(this,e),this.height=i?i(this):1};function Ve(t){t.parent=null,Me(t)}Ue.prototype.lineNo=function(){return Zt(this)},bt(Ue);var Ge={},Xe={};function Ze(t,e){if(!t||/^\s*$/.test(t))return null;var i=e.addModeClass?Xe:Ge;return i[t]||(i[t]=t.replace(/\S+/g,"cm-$&"))}function Ye(t,e){var i=F("span",null,null,l?"padding-right: .1px":null),n={pre:F("pre",[i],"CodeMirror-line"),content:i,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:t.getOption("lineWrapping")};e.measure={};for(var r=0;r<=(e.rest?e.rest.length:0);r++){var s=r?e.rest[r-1]:e.line,o=void 0;n.pos=0,n.addToken=Qe,Ft(t.display.measure)&&(o=ut(s,t.doc.direction))&&(n.addToken=ti(n.addToken,o)),n.map=[];var a=e!=t.display.externalMeasured&&Zt(s);ii(s,n,de(t,s,a)),s.styleClasses&&(s.styleClasses.bgClass&&(n.bgClass=I(s.styleClasses.bgClass,n.bgClass||"")),s.styleClasses.textClass&&(n.textClass=I(s.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(Lt(t.display.measure))),0==r?(e.measure.map=n.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(n.map),(e.measure.caches||(e.measure.caches=[])).push({}))}if(l){var c=n.content.lastChild;(/\bcm-tab\b/.test(c.className)||c.querySelector&&c.querySelector(".cm-tab"))&&(n.content.className="cm-tab-wrap-hack")}return mt(t,"renderLine",t,e.line,n.pre),n.pre.className&&(n.textClass=I(n.pre.className,n.textClass||"")),n}function Je(t){var e=L("span","•","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e.setAttribute("aria-label",e.title),e}function Qe(t,e,i,n,r,s,l){if(e){var c,u=t.splitSpaces?function(t,e){if(t.length>1&&!/  /.test(t))return t;for(var i=e,n="",r=0;r<t.length;r++){var s=t.charAt(r);" "!=s||!i||r!=t.length-1&&32!=t.charCodeAt(r+1)||(s=" "),n+=s,i=" "==s}return n}(e,t.trailingSpace):e,h=t.cm.state.specialChars,d=!1;if(h.test(e)){c=document.createDocumentFragment();for(var p=0;;){h.lastIndex=p;var f=h.exec(e),m=f?f.index-p:e.length-p;if(m){var g=document.createTextNode(u.slice(p,p+m));o&&a<9?c.appendChild(L("span",[g])):c.appendChild(g),t.map.push(t.pos,t.pos+m,g),t.col+=m,t.pos+=m}if(!f)break;p+=m+1;var y=void 0;if("\t"==f[0]){var v=t.cm.options.tabSize,b=v-t.col%v;(y=c.appendChild(L("span",G(b),"cm-tab"))).setAttribute("role","presentation"),y.setAttribute("cm-text","\t"),t.col+=b}else"\r"==f[0]||"\n"==f[0]?((y=c.appendChild(L("span","\r"==f[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",f[0]),t.col+=1):((y=t.cm.options.specialCharPlaceholder(f[0])).setAttribute("cm-text",f[0]),o&&a<9?c.appendChild(L("span",[y])):c.appendChild(y),t.col+=1);t.map.push(t.pos,t.pos+1,y),t.pos++}}else t.col+=e.length,c=document.createTextNode(u),t.map.push(t.pos,t.pos+e.length,c),o&&a<9&&(d=!0),t.pos+=e.length;if(t.trailingSpace=32==u.charCodeAt(e.length-1),i||n||r||d||s){var x=i||"";n&&(x+=n),r&&(x+=r);var k=L("span",[c],x,s);if(l)for(var w in l)l.hasOwnProperty(w)&&"style"!=w&&"class"!=w&&k.setAttribute(w,l[w]);return t.content.appendChild(k)}t.content.appendChild(c)}}function ti(t,e){return function(i,n,r,s,o,a,l){r=r?r+" cm-force-border":"cm-force-border";for(var c=i.pos,u=c+n.length;;){for(var h=void 0,d=0;d<e.length&&!((h=e[d]).to>c&&h.from<=c);d++);if(h.to>=u)return t(i,n,r,s,o,a,l);t(i,n.slice(0,h.to-c),r,s,null,a,l),s=null,n=n.slice(h.to-c),c=h.to}}}function ei(t,e,i,n){var r=!n&&i.widgetNode;r&&t.map.push(t.pos,t.pos+e,r),!n&&t.cm.display.input.needsContentAttribute&&(r||(r=t.content.appendChild(document.createElement("span"))),r.setAttribute("cm-marker",i.id)),r&&(t.cm.display.input.setUneditable(r),t.content.appendChild(r)),t.pos+=e,t.trailingSpace=!1}function ii(t,e,i){var n=t.markedSpans,r=t.text,s=0;if(n)for(var o,a,l,c,u,h,d,p=r.length,f=0,m=1,g="",y=0;;){if(y==f){l=c=u=a="",d=null,h=null,y=1/0;for(var v=[],b=void 0,x=0;x<n.length;++x){var k=n[x],w=k.marker;if("bookmark"==w.type&&k.from==f&&w.widgetNode)v.push(w);else if(k.from<=f&&(null==k.to||k.to>f||w.collapsed&&k.to==f&&k.from==f)){if(null!=k.to&&k.to!=f&&y>k.to&&(y=k.to,c=""),w.className&&(l+=" "+w.className),w.css&&(a=(a?a+";":"")+w.css),w.startStyle&&k.from==f&&(u+=" "+w.startStyle),w.endStyle&&k.to==y&&(b||(b=[])).push(w.endStyle,k.to),w.title&&((d||(d={})).title=w.title),w.attributes)for(var S in w.attributes)(d||(d={}))[S]=w.attributes[S];w.collapsed&&(!h||Ee(h.marker,w)<0)&&(h=k)}else k.from>f&&y>k.from&&(y=k.from)}if(b)for(var C=0;C<b.length;C+=2)b[C+1]==y&&(c+=" "+b[C]);if(!h||h.from==f)for(var A=0;A<v.length;++A)ei(e,0,v[A]);if(h&&(h.from||0)==f){if(ei(e,(null==h.to?p+1:h.to)-f,h.marker,null==h.from),null==h.to)return;h.to==f&&(h=!1)}}if(f>=p)break;for(var T=Math.min(p,y);;){if(g){var _=f+g.length;if(!h){var M=_>T?g.slice(0,T-f):g;e.addToken(e,M,o?o+l:l,u,f+M.length==y?c:"",a,d)}if(_>=T){g=g.slice(T-f),f=T;break}f=_,u=""}g=r.slice(s,s=i[m++]),o=Ze(i[m++],e.cm.options)}}else for(var L=1;L<i.length;L+=2)e.addToken(e,r.slice(s,s=i[L]),Ze(i[L+1],e.cm.options))}function ni(t,e,i){this.line=e,this.rest=function(t){for(var e,i;e=Ne(t);)t=e.find(1,!0).line,(i||(i=[])).push(t);return i}(e),this.size=this.rest?Zt(X(this.rest))-i+1:1,this.node=this.text=null,this.hidden=$e(t,e)}function ri(t,e,i){for(var n,r=[],s=e;s<i;s=n){var o=new ni(t.doc,Ut(t.doc,s),s);n=s+o.size,r.push(o)}return r}var si=null,oi=null;function ai(t,e){var i=pt(t,e);if(i.length){var n,r=Array.prototype.slice.call(arguments,2);si?n=si.delayedCallbacks:oi?n=oi:(n=oi=[],setTimeout(li,0));for(var s=function(t){n.push(function(){return i[t].apply(null,r)})},o=0;o<i.length;++o)s(o)}}function li(){var t=oi;oi=null;for(var e=0;e<t.length;++e)t[e]()}function ci(t,e,i,n){for(var r=0;r<e.changes.length;r++){var s=e.changes[r];"text"==s?di(t,e):"gutter"==s?fi(t,e,i,n):"class"==s?pi(t,e):"widget"==s&&mi(t,e,n)}e.changes=null}function ui(t){return t.node==t.text&&(t.node=L("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),o&&a<8&&(t.node.style.zIndex=2)),t.node}function hi(t,e){var i=t.display.externalMeasured;return i&&i.line==e.line?(t.display.externalMeasured=null,e.measure=i.measure,i.built):Ye(t,e)}function di(t,e){var i=e.text.className,n=hi(t,e);e.text==e.node&&(e.node=n.pre),e.text.parentNode.replaceChild(n.pre,e.text),e.text=n.pre,n.bgClass!=e.bgClass||n.textClass!=e.textClass?(e.bgClass=n.bgClass,e.textClass=n.textClass,pi(t,e)):i&&(e.text.className=i)}function pi(t,e){!function(t,e){var i=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(i&&(i+=" CodeMirror-linebackground"),e.background)i?e.background.className=i:(e.background.parentNode.removeChild(e.background),e.background=null);else if(i){var n=ui(e);e.background=n.insertBefore(L("div",null,i),n.firstChild),t.display.input.setUneditable(e.background)}}(t,e),e.line.wrapClass?ui(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var i=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=i||""}function fi(t,e,i,n){if(e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null),e.gutterBackground&&(e.node.removeChild(e.gutterBackground),e.gutterBackground=null),e.line.gutterClass){var r=ui(e);e.gutterBackground=L("div",null,"CodeMirror-gutter-background "+e.line.gutterClass,"left: "+(t.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px; width: "+n.gutterTotalWidth+"px"),t.display.input.setUneditable(e.gutterBackground),r.insertBefore(e.gutterBackground,e.text)}var s=e.line.gutterMarkers;if(t.options.lineNumbers||s){var o=ui(e),a=e.gutter=L("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px");if(t.display.input.setUneditable(a),o.insertBefore(a,e.text),e.line.gutterClass&&(a.className+=" "+e.line.gutterClass),!t.options.lineNumbers||s&&s["CodeMirror-linenumbers"]||(e.lineNumber=a.appendChild(L("div",Qt(t.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),s)for(var l=0;l<t.display.gutterSpecs.length;++l){var c=t.display.gutterSpecs[l].className,u=s.hasOwnProperty(c)&&s[c];u&&a.appendChild(L("div",[u],"CodeMirror-gutter-elt","left: "+n.gutterLeft[c]+"px; width: "+n.gutterWidth[c]+"px"))}}}function mi(t,e,i){e.alignable&&(e.alignable=null);for(var n=e.node.firstChild,r=void 0;n;n=r)r=n.nextSibling,"CodeMirror-linewidget"==n.className&&e.node.removeChild(n);yi(t,e,i)}function gi(t,e,i,n){var r=hi(t,e);return e.text=e.node=r.pre,r.bgClass&&(e.bgClass=r.bgClass),r.textClass&&(e.textClass=r.textClass),pi(t,e),fi(t,e,i,n),yi(t,e,n),e.node}function yi(t,e,i){if(vi(t,e.line,e,i,!0),e.rest)for(var n=0;n<e.rest.length;n++)vi(t,e.rest[n],e,i,!1)}function vi(t,e,i,n,r){if(e.widgets)for(var s=ui(i),o=0,a=e.widgets;o<a.length;++o){var l=a[o],c=L("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),bi(l,c,i,n),t.display.input.setUneditable(c),r&&l.above?s.insertBefore(c,i.gutter||i.text):s.appendChild(c),ai(l,"redraw")}}function bi(t,e,i,n){if(t.noHScroll){(i.alignable||(i.alignable=[])).push(e);var r=n.wrapperWidth;e.style.left=n.fixedPos+"px",t.coverGutter||(r-=n.gutterTotalWidth,e.style.paddingLeft=n.gutterTotalWidth+"px"),e.style.width=r+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-n.gutterTotalWidth+"px"))}function xi(t){if(null!=t.height)return t.height;var e=t.doc.cm;if(!e)return 0;if(!D(document.body,t.node)){var i="position: relative;";t.coverGutter&&(i+="margin-left: -"+e.display.gutters.offsetWidth+"px;"),t.noHScroll&&(i+="width: "+e.display.wrapper.clientWidth+"px;"),M(e.display.measure,L("div",[t.node],null,i))}return t.height=t.node.parentNode.offsetHeight}function ki(t,e){for(var i=Ct(e);i!=t.wrapper;i=i.parentNode)if(!i||1==i.nodeType&&"true"==i.getAttribute("cm-ignore-events")||i.parentNode==t.sizer&&i!=t.mover)return!0}function wi(t){return t.lineSpace.offsetTop}function Si(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Ci(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=M(t.measure,L("pre","x","CodeMirror-line-like")),i=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,n={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return isNaN(n.left)||isNaN(n.right)||(t.cachedPaddingH=n),n}function Ai(t){return $-t.display.nativeBarWidth}function Ti(t){return t.display.scroller.clientWidth-Ai(t)-t.display.barWidth}function _i(t){return t.display.scroller.clientHeight-Ai(t)-t.display.barHeight}function Mi(t,e,i){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};for(var n=0;n<t.rest.length;n++)if(t.rest[n]==e)return{map:t.measure.maps[n],cache:t.measure.caches[n]};for(var r=0;r<t.rest.length;r++)if(Zt(t.rest[r])>i)return{map:t.measure.maps[r],cache:t.measure.caches[r],before:!0}}function Li(t,e,i,n){return Ei(t,Di(t,e),i,n)}function Fi(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[ln(t,e)];var i=t.display.externalMeasured;return i&&e>=i.lineN&&e<i.lineN+i.size?i:void 0}function Di(t,e){var i=Zt(e),n=Fi(t,i);n&&!n.text?n=null:n&&n.changes&&(ci(t,n,i,nn(t)),t.curOp.forceUpdate=!0),n||(n=function(t,e){var i=Zt(e=Re(e)),n=t.display.externalMeasured=new ni(t.doc,e,i);n.lineN=i;var r=n.built=Ye(t,n);return n.text=r.pre,M(t.display.lineMeasure,r.pre),n}(t,e));var r=Mi(n,e,i);return{line:e,view:n,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function Ei(t,e,i,n,r){e.before&&(i=-1);var s,l=i+(n||"");return e.cache.hasOwnProperty(l)?s=e.cache[l]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(function(t,e,i){var n=t.options.lineWrapping,r=n&&Ti(t);if(!e.measure.heights||n&&e.measure.width!=r){var s=e.measure.heights=[];if(n){e.measure.width=r;for(var o=e.text.firstChild.getClientRects(),a=0;a<o.length-1;a++){var l=o[a],c=o[a+1];Math.abs(l.bottom-c.bottom)>2&&s.push((l.bottom+c.top)/2-i.top)}}s.push(i.bottom-i.top)}}(t,e.view,e.rect),e.hasHeights=!0),(s=function(t,e,i,n){var r,s=Ni(e.map,i,n),l=s.node,c=s.start,u=s.end,h=s.collapse;if(3==l.nodeType){for(var d=0;d<4;d++){for(;c&&rt(e.line.text.charAt(s.coverStart+c));)--c;for(;s.coverStart+u<s.coverEnd&&rt(e.line.text.charAt(s.coverStart+u));)++u;if((r=o&&a<9&&0==c&&u==s.coverEnd-s.coverStart?l.parentNode.getBoundingClientRect():zi(A(l,c,u).getClientRects(),n)).left||r.right||0==c)break;u=c,c-=1,h="right"}o&&a<11&&(r=function(t,e){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(t){if(null!=Nt)return Nt;var e=M(t,L("span","x")),i=e.getBoundingClientRect(),n=A(e,0,1).getBoundingClientRect();return Nt=Math.abs(i.left-n.left)>1}(t))return e;var i=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:e.left*i,right:e.right*i,top:e.top*n,bottom:e.bottom*n}}(t.display.measure,r))}else{var p;c>0&&(h=n="right"),r=t.options.lineWrapping&&(p=l.getClientRects()).length>1?p["right"==n?p.length-1:0]:l.getBoundingClientRect()}if(o&&a<9&&!c&&(!r||!r.left&&!r.right)){var f=l.parentNode.getClientRects()[0];r=f?{left:f.left,right:f.left+en(t.display),top:f.top,bottom:f.bottom}:Ii}for(var m=r.top-e.rect.top,g=r.bottom-e.rect.top,y=(m+g)/2,v=e.view.measure.heights,b=0;b<v.length-1&&!(y<v[b]);b++);var x=b?v[b-1]:0,k=v[b],w={left:("right"==h?r.right:r.left)-e.rect.left,right:("left"==h?r.left:r.right)-e.rect.left,top:x,bottom:k};return r.left||r.right||(w.bogus=!0),t.options.singleCursorHeightPerLine||(w.rtop=m,w.rbottom=g),w}(t,e,i,n)).bogus||(e.cache[l]=s)),{left:s.left,right:s.right,top:r?s.rtop:s.top,bottom:r?s.rbottom:s.bottom}}var Oi,Ii={left:0,right:0,top:0,bottom:0};function Ni(t,e,i){for(var n,r,s,o,a,l,c=0;c<t.length;c+=3)if(a=t[c],l=t[c+1],e<a?(r=0,s=1,o="left"):e<l?s=1+(r=e-a):(c==t.length-3||e==l&&t[c+3]>e)&&(r=(s=l-a)-1,e>=l&&(o="right")),null!=r){if(n=t[c+2],a==l&&i==(n.insertLeft?"left":"right")&&(o=i),"left"==i&&0==r)for(;c&&t[c-2]==t[c-3]&&t[c-1].insertLeft;)n=t[2+(c-=3)],o="left";if("right"==i&&r==l-a)for(;c<t.length-3&&t[c+3]==t[c+4]&&!t[c+5].insertLeft;)n=t[(c+=3)+2],o="right";break}return{node:n,start:r,end:s,collapse:o,coverStart:a,coverEnd:l}}function zi(t,e){var i=Ii;if("left"==e)for(var n=0;n<t.length&&(i=t[n]).left==i.right;n++);else for(var r=t.length-1;r>=0&&(i=t[r]).left==i.right;r--);return i}function Pi(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function Ri(t){t.display.externalMeasure=null,_(t.display.lineMeasure);for(var e=0;e<t.display.view.length;e++)Pi(t.display.view[e])}function Bi(t){Ri(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function qi(){return u&&g?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function $i(){return u&&g?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Hi(t){var e=0;if(t.widgets)for(var i=0;i<t.widgets.length;++i)t.widgets[i].above&&(e+=xi(t.widgets[i]));return e}function Wi(t,e,i,n,r){if(!r){var s=Hi(e);i.top+=s,i.bottom+=s}if("line"==n)return i;n||(n="local");var o=We(e);if("local"==n?o+=wi(t.display):o-=t.display.viewOffset,"page"==n||"window"==n){var a=t.display.lineSpace.getBoundingClientRect();o+=a.top+("window"==n?0:$i());var l=a.left+("window"==n?0:qi());i.left+=l,i.right+=l}return i.top+=o,i.bottom+=o,i}function ji(t,e,i){if("div"==i)return e;var n=e.left,r=e.top;if("page"==i)n-=qi(),r-=$i();else if("local"==i||!i){var s=t.display.sizer.getBoundingClientRect();n+=s.left,r+=s.top}var o=t.display.lineSpace.getBoundingClientRect();return{left:n-o.left,top:r-o.top}}function Ki(t,e,i,n,r){return n||(n=Ut(t.doc,e.line)),Wi(t,n,Li(t,n,e.ch,r),i)}function Ui(t,e,i,n,r,s){function o(e,o){var a=Ei(t,r,e,o?"right":"left",s);return o?a.left=a.right:a.right=a.left,Wi(t,n,a,i)}n=n||Ut(t.doc,e.line),r||(r=Di(t,n));var a=ut(n,t.doc.direction),l=e.ch,c=e.sticky;if(l>=n.text.length?(l=n.text.length,c="before"):l<=0&&(l=0,c="after"),!a)return o("before"==c?l-1:l,"before"==c);function u(t,e,i){var n=a[e],r=1==n.level;return o(i?t-1:t,r!=i)}var h=lt(a,l,c),d=at,p=u(l,h,"before"==c);return null!=d&&(p.other=u(l,d,"before"!=c)),p}function Vi(t,e){var i=0;e=ae(t.doc,e),t.options.lineWrapping||(i=en(t.display)*e.ch);var n=Ut(t.doc,e.line),r=We(n)+wi(t.display);return{left:i,right:i,top:r,bottom:r+n.height}}function Gi(t,e,i,n,r){var s=te(t,e,i);return s.xRel=r,n&&(s.outside=n),s}function Xi(t,e,i){var n=t.doc;if((i+=t.display.viewOffset)<0)return Gi(n.first,0,null,-1,-1);var r=Yt(n,i),s=n.first+n.size-1;if(r>s)return Gi(n.first+n.size-1,Ut(n,s).text.length,null,1,1);e<0&&(e=0);for(var o=Ut(n,r);;){var a=Qi(t,o,r,e,i),l=ze(o,a.ch+(a.xRel>0||a.outside>0?1:0));if(!l)return a;var c=l.find(1);if(c.line==r)return c;o=Ut(n,r=c.line)}}function Zi(t,e,i,n){n-=Hi(e);var r=e.text.length,s=ot(function(e){return Ei(t,i,e-1).bottom<=n},r,0);return r=ot(function(e){return Ei(t,i,e).top>n},s,r),{begin:s,end:r}}function Yi(t,e,i,n){i||(i=Di(t,e));var r=Wi(t,e,Ei(t,i,n),"line").top;return Zi(t,e,i,r)}function Ji(t,e,i,n){return!(t.bottom<=i)&&(t.top>i||(n?t.left:t.right)>e)}function Qi(t,e,i,n,r){r-=We(e);var s=Di(t,e),o=Hi(e),a=0,l=e.text.length,c=!0,u=ut(e,t.doc.direction);if(u){var h=(t.options.lineWrapping?function(t,e,i,n,r,s,o){var a=Zi(t,e,n,o),l=a.begin,c=a.end;/\s/.test(e.text.charAt(c-1))&&c--;for(var u=null,h=null,d=0;d<r.length;d++){var p=r[d];if(!(p.from>=c||p.to<=l)){var f=1!=p.level,m=Ei(t,n,f?Math.min(c,p.to)-1:Math.max(l,p.from)).right,g=m<s?s-m+1e9:m-s;(!u||h>g)&&(u=p,h=g)}}return u||(u=r[r.length-1]),u.from<l&&(u={from:l,to:u.to,level:u.level}),u.to>c&&(u={from:u.from,to:c,level:u.level}),u}:function(t,e,i,n,r,s,o){var a=ot(function(a){var l=r[a],c=1!=l.level;return Ji(Ui(t,te(i,c?l.to:l.from,c?"before":"after"),"line",e,n),s,o,!0)},0,r.length-1),l=r[a];if(a>0){var c=1!=l.level,u=Ui(t,te(i,c?l.from:l.to,c?"after":"before"),"line",e,n);Ji(u,s,o,!0)&&u.top>o&&(l=r[a-1])}return l})(t,e,i,s,u,n,r);c=1!=h.level,a=c?h.from:h.to-1,l=c?h.to:h.from-1}var d,p,f=null,m=null,g=ot(function(e){var i=Ei(t,s,e);return i.top+=o,i.bottom+=o,!!Ji(i,n,r,!1)&&(i.top<=r&&i.left<=n&&(f=e,m=i),!0)},a,l),y=!1;if(m){var v=n-m.left<m.right-n,b=v==c;g=f+(b?0:1),p=b?"after":"before",d=v?m.left:m.right}else{c||g!=l&&g!=a||g++,p=0==g?"after":g==e.text.length?"before":Ei(t,s,g-(c?1:0)).bottom+o<=r==c?"after":"before";var x=Ui(t,te(i,g,p),"line",e,s);d=x.left,y=r<x.top?-1:r>=x.bottom?1:0}return g=st(e.text,g,1),Gi(i,g,p,y,n-d)}function tn(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==Oi){Oi=L("pre",null,"CodeMirror-line-like");for(var e=0;e<49;++e)Oi.appendChild(document.createTextNode("x")),Oi.appendChild(L("br"));Oi.appendChild(document.createTextNode("x"))}M(t.measure,Oi);var i=Oi.offsetHeight/50;return i>3&&(t.cachedTextHeight=i),_(t.measure),i||1}function en(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=L("span","xxxxxxxxxx"),i=L("pre",[e],"CodeMirror-line-like");M(t.measure,i);var n=e.getBoundingClientRect(),r=(n.right-n.left)/10;return r>2&&(t.cachedCharWidth=r),r||10}function nn(t){for(var e=t.display,i={},n={},r=e.gutters.clientLeft,s=e.gutters.firstChild,o=0;s;s=s.nextSibling,++o){var a=t.display.gutterSpecs[o].className;i[a]=s.offsetLeft+s.clientLeft+r,n[a]=s.clientWidth}return{fixedPos:rn(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:i,gutterWidth:n,wrapperWidth:e.wrapper.clientWidth}}function rn(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function sn(t){var e=tn(t.display),i=t.options.lineWrapping,n=i&&Math.max(5,t.display.scroller.clientWidth/en(t.display)-3);return function(r){if($e(t.doc,r))return 0;var s=0;if(r.widgets)for(var o=0;o<r.widgets.length;o++)r.widgets[o].height&&(s+=r.widgets[o].height);return i?s+(Math.ceil(r.text.length/n)||1)*e:s+e}}function on(t){var e=t.doc,i=sn(t);e.iter(function(t){var e=i(t);e!=t.height&&Xt(t,e)})}function an(t,e,i,n){var r=t.display;if(!i&&"true"==Ct(e).getAttribute("cm-not-content"))return null;var s,o,a=r.lineSpace.getBoundingClientRect();try{s=e.clientX-a.left,o=e.clientY-a.top}catch(e){return null}var l,c=Xi(t,s,o);if(n&&1==c.xRel&&(l=Ut(t.doc,c.line).text).length==c.ch){var u=R(l,l.length,t.options.tabSize)-l.length;c=te(c.line,Math.max(0,Math.round((s-Ci(t.display).left)/en(t.display))-u))}return c}function ln(t,e){if(e>=t.display.viewTo)return null;if((e-=t.display.viewFrom)<0)return null;for(var i=t.display.view,n=0;n<i.length;n++)if((e-=i[n].size)<0)return n}function cn(t,e,i,n){null==e&&(e=t.doc.first),null==i&&(i=t.doc.first+t.doc.size),n||(n=0);var r=t.display;if(n&&i<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>e)&&(r.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=r.viewTo)we&&Be(t.doc,e)<r.viewTo&&hn(t);else if(i<=r.viewFrom)we&&qe(t.doc,i+n)>r.viewFrom?hn(t):(r.viewFrom+=n,r.viewTo+=n);else if(e<=r.viewFrom&&i>=r.viewTo)hn(t);else if(e<=r.viewFrom){var s=dn(t,i,i+n,1);s?(r.view=r.view.slice(s.index),r.viewFrom=s.lineN,r.viewTo+=n):hn(t)}else if(i>=r.viewTo){var o=dn(t,e,e,-1);o?(r.view=r.view.slice(0,o.index),r.viewTo=o.lineN):hn(t)}else{var a=dn(t,e,e,-1),l=dn(t,i,i+n,1);a&&l?(r.view=r.view.slice(0,a.index).concat(ri(t,a.lineN,l.lineN)).concat(r.view.slice(l.index)),r.viewTo+=n):hn(t)}var c=r.externalMeasured;c&&(i<c.lineN?c.lineN+=n:e<c.lineN+c.size&&(r.externalMeasured=null))}function un(t,e,i){t.curOp.viewChanged=!0;var n=t.display,r=t.display.externalMeasured;if(r&&e>=r.lineN&&e<r.lineN+r.size&&(n.externalMeasured=null),!(e<n.viewFrom||e>=n.viewTo)){var s=n.view[ln(t,e)];if(null!=s.node){var o=s.changes||(s.changes=[]);-1==q(o,i)&&o.push(i)}}}function hn(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function dn(t,e,i,n){var r,s=ln(t,e),o=t.display.view;if(!we||i==t.doc.first+t.doc.size)return{index:s,lineN:i};for(var a=t.display.viewFrom,l=0;l<s;l++)a+=o[l].size;if(a!=e){if(n>0){if(s==o.length-1)return null;r=a+o[s].size-e,s++}else r=a-e;e+=r,i+=r}for(;Be(t.doc,i)!=i;){if(s==(n<0?0:o.length-1))return null;i+=n*o[s-(n<0?1:0)].size,s+=n}return{index:s,lineN:i}}function pn(t){for(var e=t.display.view,i=0,n=0;n<e.length;n++){var r=e[n];r.hidden||r.node&&!r.changes||++i}return i}function fn(t){t.display.input.showSelection(t.display.input.prepareSelection())}function mn(t,e){void 0===e&&(e=!0);for(var i=t.doc,n={},r=n.cursors=document.createDocumentFragment(),s=n.selection=document.createDocumentFragment(),o=0;o<i.sel.ranges.length;o++)if(e||o!=i.sel.primIndex){var a=i.sel.ranges[o];if(!(a.from().line>=t.display.viewTo||a.to().line<t.display.viewFrom)){var l=a.empty();(l||t.options.showCursorWhenSelecting)&&gn(t,a.head,r),l||vn(t,a,s)}}return n}function gn(t,e,i){var n=Ui(t,e,"div",null,null,!t.options.singleCursorHeightPerLine),r=i.appendChild(L("div"," ","CodeMirror-cursor"));if(r.style.left=n.left+"px",r.style.top=n.top+"px",r.style.height=Math.max(0,n.bottom-n.top)*t.options.cursorHeight+"px",n.other){var s=i.appendChild(L("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));s.style.display="",s.style.left=n.other.left+"px",s.style.top=n.other.top+"px",s.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function yn(t,e){return t.top-e.top||t.left-e.left}function vn(t,e,i){var n=t.display,r=t.doc,s=document.createDocumentFragment(),o=Ci(t.display),a=o.left,l=Math.max(n.sizerWidth,Ti(t)-n.sizer.offsetLeft)-o.right,c="ltr"==r.direction;function u(t,e,i,n){e<0&&(e=0),e=Math.round(e),n=Math.round(n),s.appendChild(L("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px;\n                             top: "+e+"px; width: "+(null==i?l-t:i)+"px;\n                             height: "+(n-e)+"px"))}function h(e,i,n){var s,o,h=Ut(r,e),d=h.text.length;function p(i,n){return Ki(t,te(e,i),"div",h,n)}function f(e,i,n){var r=Yi(t,h,null,e),s="ltr"==i==("after"==n)?"left":"right",o="after"==n?r.begin:r.end-(/\s/.test(h.text.charAt(r.end-1))?2:1);return p(o,s)[s]}var m=ut(h,r.direction);return function(t,e,i,n){if(!t)return n(e,i,"ltr",0);for(var r=!1,s=0;s<t.length;++s){var o=t[s];(o.from<i&&o.to>e||e==i&&o.to==e)&&(n(Math.max(o.from,e),Math.min(o.to,i),1==o.level?"rtl":"ltr",s),r=!0)}r||n(e,i,"ltr")}(m,i||0,null==n?d:n,function(t,e,r,h){var g="ltr"==r,y=p(t,g?"left":"right"),v=p(e-1,g?"right":"left"),b=null==i&&0==t,x=null==n&&e==d,k=0==h,w=!m||h==m.length-1;if(v.top-y.top<=3){var S=(c?b:x)&&k,C=(c?x:b)&&w,A=S?a:(g?y:v).left,T=C?l:(g?v:y).right;u(A,y.top,T-A,y.bottom)}else{var _,M,L,F;g?(_=c&&b&&k?a:y.left,M=c?l:f(t,r,"before"),L=c?a:f(e,r,"after"),F=c&&x&&w?l:v.right):(_=c?f(t,r,"before"):a,M=!c&&b&&k?l:y.right,L=!c&&x&&w?a:v.left,F=c?f(e,r,"after"):l),u(_,y.top,M-_,y.bottom),y.bottom<v.top&&u(a,y.bottom,null,v.top),u(L,v.top,F-L,v.bottom)}(!s||yn(y,s)<0)&&(s=y),yn(v,s)<0&&(s=v),(!o||yn(y,o)<0)&&(o=y),yn(v,o)<0&&(o=v)}),{start:s,end:o}}var d=e.from(),p=e.to();if(d.line==p.line)h(d.line,d.ch,p.ch);else{var f=Ut(r,d.line),m=Ut(r,p.line),g=Re(f)==Re(m),y=h(d.line,d.ch,g?f.text.length+1:null).end,v=h(p.line,g?0:null,p.ch).start;g&&(y.top<v.top-2?(u(y.right,y.top,null,y.bottom),u(a,v.top,v.left,v.bottom)):u(y.right,y.top,v.left-y.right,y.bottom)),y.bottom<v.top&&u(a,y.bottom,null,v.top)}i.appendChild(s)}function bn(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var i=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval(function(){return e.cursorDiv.style.visibility=(i=!i)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function xn(t){t.state.focused||(t.display.input.focus(),wn(t))}function kn(t){t.state.delayingBlurEvent=!0,setTimeout(function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,Sn(t))},100)}function wn(t,e){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(mt(t,"focus",t,e),t.state.focused=!0,O(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(t.display.input.reset(),l&&setTimeout(function(){return t.display.input.reset(!0)},20)),t.display.input.receivedFocus()),bn(t))}function Sn(t,e){t.state.delayingBlurEvent||(t.state.focused&&(mt(t,"blur",t,e),t.state.focused=!1,T(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150))}function Cn(t){for(var e=t.display,i=e.lineDiv.offsetTop,n=0;n<e.view.length;n++){var r=e.view[n],s=t.options.lineWrapping,l=void 0,c=0;if(!r.hidden){if(o&&a<8){var u=r.node.offsetTop+r.node.offsetHeight;l=u-i,i=u}else{var h=r.node.getBoundingClientRect();l=h.bottom-h.top,!s&&r.text.firstChild&&(c=r.text.firstChild.getBoundingClientRect().right-h.left-1)}var d=r.line.height-l;if((d>.005||d<-.005)&&(Xt(r.line,l),An(r.line),r.rest))for(var p=0;p<r.rest.length;p++)An(r.rest[p]);if(c>t.display.sizerWidth){var f=Math.ceil(c/en(t.display));f>t.display.maxLineLength&&(t.display.maxLineLength=f,t.display.maxLine=r.line,t.display.maxLineChanged=!0)}}}}function An(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e){var i=t.widgets[e],n=i.node.parentNode;n&&(i.height=n.offsetHeight)}}function Tn(t,e,i){var n=i&&null!=i.top?Math.max(0,i.top):t.scroller.scrollTop;n=Math.floor(n-wi(t));var r=i&&null!=i.bottom?i.bottom:n+t.wrapper.clientHeight,s=Yt(e,n),o=Yt(e,r);if(i&&i.ensure){var a=i.ensure.from.line,l=i.ensure.to.line;a<s?(s=a,o=Yt(e,We(Ut(e,a))+t.wrapper.clientHeight)):Math.min(l,e.lastLine())>=o&&(s=Yt(e,We(Ut(e,l))-t.wrapper.clientHeight),o=l)}return{from:s,to:Math.max(o,s+1)}}function _n(t,e){var i=t.display,n=tn(t.display);e.top<0&&(e.top=0);var r=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:i.scroller.scrollTop,s=_i(t),o={};e.bottom-e.top>s&&(e.bottom=e.top+s);var a=t.doc.height+Si(i),l=e.top<n,c=e.bottom>a-n;if(e.top<r)o.scrollTop=l?0:e.top;else if(e.bottom>r+s){var u=Math.min(e.top,(c?a:e.bottom)-s);u!=r&&(o.scrollTop=u)}var h=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:i.scroller.scrollLeft,d=Ti(t)-(t.options.fixedGutter?i.gutters.offsetWidth:0),p=e.right-e.left>d;return p&&(e.right=e.left+d),e.left<10?o.scrollLeft=0:e.left<h?o.scrollLeft=Math.max(0,e.left-(p?0:10)):e.right>d+h-3&&(o.scrollLeft=e.right+(p?0:10)-d),o}function Mn(t,e){null!=e&&(Dn(t),t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+e)}function Ln(t){Dn(t);var e=t.getCursor();t.curOp.scrollToPos={from:e,to:e,margin:t.options.cursorScrollMargin}}function Fn(t,e,i){null==e&&null==i||Dn(t),null!=e&&(t.curOp.scrollLeft=e),null!=i&&(t.curOp.scrollTop=i)}function Dn(t){var e=t.curOp.scrollToPos;if(e){t.curOp.scrollToPos=null;var i=Vi(t,e.from),n=Vi(t,e.to);En(t,i,n,e.margin)}}function En(t,e,i,n){var r=_n(t,{left:Math.min(e.left,i.left),top:Math.min(e.top,i.top)-n,right:Math.max(e.right,i.right),bottom:Math.max(e.bottom,i.bottom)+n});Fn(t,r.scrollLeft,r.scrollTop)}function On(t,e){Math.abs(t.doc.scrollTop-e)<2||(i||sr(t,{top:e}),In(t,e,!0),i&&sr(t),tr(t,100))}function In(t,e,i){e=Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,e),(t.display.scroller.scrollTop!=e||i)&&(t.doc.scrollTop=e,t.display.scrollbars.setScrollTop(e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e))}function Nn(t,e,i,n){e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),(i?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)&&!n||(t.doc.scrollLeft=e,lr(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbars.setScrollLeft(e))}function zn(t){var e=t.display,i=e.gutters.offsetWidth,n=Math.round(t.doc.height+Si(t.display));return{clientHeight:e.scroller.clientHeight,viewHeight:e.wrapper.clientHeight,scrollWidth:e.scroller.scrollWidth,clientWidth:e.scroller.clientWidth,viewWidth:e.wrapper.clientWidth,barLeft:t.options.fixedGutter?i:0,docHeight:n,scrollHeight:n+Ai(t)+e.barHeight,nativeBarWidth:e.nativeBarWidth,gutterWidth:i}}var Pn=function(t,e,i){this.cm=i;var n=this.vert=L("div",[L("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r=this.horiz=L("div",[L("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");n.tabIndex=r.tabIndex=-1,t(n),t(r),dt(n,"scroll",function(){n.clientHeight&&e(n.scrollTop,"vertical")}),dt(r,"scroll",function(){r.clientWidth&&e(r.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,o&&a<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Pn.prototype.update=function(t){var e=t.scrollWidth>t.clientWidth+1,i=t.scrollHeight>t.clientHeight+1,n=t.nativeBarWidth;if(i){this.vert.style.display="block",this.vert.style.bottom=e?n+"px":"0";var r=t.viewHeight-(e?n:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+r)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(e){this.horiz.style.display="block",this.horiz.style.right=i?n+"px":"0",this.horiz.style.left=t.barLeft+"px";var s=t.viewWidth-t.barLeft-(i?n:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+s)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(0==n&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:i?n:0,bottom:e?n:0}},Pn.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Pn.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Pn.prototype.zeroWidthHack=function(){var t=v&&!p?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new B,this.disableVert=new B},Pn.prototype.enableZeroWidthBar=function(t,e,i){t.style.pointerEvents="auto",e.set(1e3,function n(){var r=t.getBoundingClientRect(),s="vert"==i?document.elementFromPoint(r.right-1,(r.top+r.bottom)/2):document.elementFromPoint((r.right+r.left)/2,r.bottom-1);s!=t?t.style.pointerEvents="none":e.set(1e3,n)})},Pn.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var Rn=function(){};function Bn(t,e){e||(e=zn(t));var i=t.display.barWidth,n=t.display.barHeight;qn(t,e);for(var r=0;r<4&&i!=t.display.barWidth||n!=t.display.barHeight;r++)i!=t.display.barWidth&&t.options.lineWrapping&&Cn(t),qn(t,zn(t)),i=t.display.barWidth,n=t.display.barHeight}function qn(t,e){var i=t.display,n=i.scrollbars.update(e);i.sizer.style.paddingRight=(i.barWidth=n.right)+"px",i.sizer.style.paddingBottom=(i.barHeight=n.bottom)+"px",i.heightForcer.style.borderBottom=n.bottom+"px solid transparent",n.right&&n.bottom?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=n.bottom+"px",i.scrollbarFiller.style.width=n.right+"px"):i.scrollbarFiller.style.display="",n.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=n.bottom+"px",i.gutterFiller.style.width=e.gutterWidth+"px"):i.gutterFiller.style.display=""}Rn.prototype.update=function(){return{bottom:0,right:0}},Rn.prototype.setScrollLeft=function(){},Rn.prototype.setScrollTop=function(){},Rn.prototype.clear=function(){};var $n={native:Pn,null:Rn};function Hn(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&T(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new $n[t.options.scrollbarStyle](function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),dt(e,"mousedown",function(){t.state.focused&&setTimeout(function(){return t.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,i){"horizontal"==i?Nn(t,e):On(t,e)},t),t.display.scrollbars.addClass&&O(t.display.wrapper,t.display.scrollbars.addClass)}var Wn=0;function jn(t){var e;t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Wn},e=t.curOp,si?si.ops.push(e):e.ownsGroup=si={ops:[e],delayedCallbacks:[]}}function Kn(t){var e=t.curOp;e&&function(t,e){var i=t.ownsGroup;if(i)try{!function(t){var e=t.delayedCallbacks,i=0;do{for(;i<e.length;i++)e[i].call(null);for(var n=0;n<t.ops.length;n++){var r=t.ops[n];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++].call(null,r.cm)}}while(i<e.length)}(i)}finally{si=null,e(i)}}(e,function(t){for(var e=0;e<t.ops.length;e++)t.ops[e].cm.curOp=null;!function(t){for(var e=t.ops,i=0;i<e.length;i++)Un(e[i]);for(var n=0;n<e.length;n++)(r=e[n]).updatedDisplay=r.mustUpdate&&nr(r.cm,r.update);for(var r,s=0;s<e.length;s++)Vn(e[s]);for(var o=0;o<e.length;o++)Gn(e[o]);for(var a=0;a<e.length;a++)Xn(e[a])}(t)})}function Un(t){var e=t.cm,i=e.display;!function(t){var e=t.display;!e.scrollbarsClipped&&e.scroller.offsetWidth&&(e.nativeBarWidth=e.scroller.offsetWidth-e.scroller.clientWidth,e.heightForcer.style.height=Ai(t)+"px",e.sizer.style.marginBottom=-e.nativeBarWidth+"px",e.sizer.style.borderRightWidth=Ai(t)+"px",e.scrollbarsClipped=!0)}(e),t.updateMaxLine&&Ke(e),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<i.viewFrom||t.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&e.options.lineWrapping,t.update=t.mustUpdate&&new ir(e,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function Vn(t){var e=t.cm,i=e.display;t.updatedDisplay&&Cn(e),t.barMeasure=zn(e),i.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=Li(e,i.maxLine,i.maxLine.text.length).left+3,e.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(i.scroller.clientWidth,i.sizer.offsetLeft+t.adjustWidthTo+Ai(e)+e.display.barWidth),t.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+t.adjustWidthTo-Ti(e))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=i.input.prepareSelection())}function Gn(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&Nn(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1);var i=t.focus&&t.focus==E();t.preparedSelection&&e.display.input.showSelection(t.preparedSelection,i),(t.updatedDisplay||t.startHeight!=e.doc.height)&&Bn(e,t.barMeasure),t.updatedDisplay&&ar(e,t.barMeasure),t.selectionChanged&&bn(e),e.state.focused&&t.updateInput&&e.display.input.reset(t.typing),i&&xn(t.cm)}function Xn(t){var e=t.cm,i=e.display,n=e.doc;if(t.updatedDisplay&&rr(e,t.update),null==i.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(i.wheelStartX=i.wheelStartY=null),null!=t.scrollTop&&In(e,t.scrollTop,t.forceScroll),null!=t.scrollLeft&&Nn(e,t.scrollLeft,!0,!0),t.scrollToPos){var r=function(t,e,i,n){var r;null==n&&(n=0),t.options.lineWrapping||e!=i||(e=e.ch?te(e.line,"before"==e.sticky?e.ch-1:e.ch,"after"):e,i="before"==e.sticky?te(e.line,e.ch+1,"before"):e);for(var s=0;s<5;s++){var o=!1,a=Ui(t,e),l=i&&i!=e?Ui(t,i):a;r={left:Math.min(a.left,l.left),top:Math.min(a.top,l.top)-n,right:Math.max(a.left,l.left),bottom:Math.max(a.bottom,l.bottom)+n};var c=_n(t,r),u=t.doc.scrollTop,h=t.doc.scrollLeft;if(null!=c.scrollTop&&(On(t,c.scrollTop),Math.abs(t.doc.scrollTop-u)>1&&(o=!0)),null!=c.scrollLeft&&(Nn(t,c.scrollLeft),Math.abs(t.doc.scrollLeft-h)>1&&(o=!0)),!o)break}return r}(e,ae(n,t.scrollToPos.from),ae(n,t.scrollToPos.to),t.scrollToPos.margin);!function(t,e){if(!gt(t,"scrollCursorIntoView")){var i=t.display,n=i.sizer.getBoundingClientRect(),r=null;if(e.top+n.top<0?r=!0:e.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!f){var s=L("div","​",null,"position: absolute;\n                         top: "+(e.top-i.viewOffset-wi(t.display))+"px;\n                         height: "+(e.bottom-e.top+Ai(t)+i.barHeight)+"px;\n                         left: "+e.left+"px; width: "+Math.max(2,e.right-e.left)+"px;");t.display.lineSpace.appendChild(s),s.scrollIntoView(r),t.display.lineSpace.removeChild(s)}}}(e,r)}var s=t.maybeHiddenMarkers,o=t.maybeUnhiddenMarkers;if(s)for(var a=0;a<s.length;++a)s[a].lines.length||mt(s[a],"hide");if(o)for(var l=0;l<o.length;++l)o[l].lines.length&&mt(o[l],"unhide");i.wrapper.offsetHeight&&(n.scrollTop=e.display.scroller.scrollTop),t.changeObjs&&mt(e,"changes",e,t.changeObjs),t.update&&t.update.finish()}function Zn(t,e){if(t.curOp)return e();jn(t);try{return e()}finally{Kn(t)}}function Yn(t,e){return function(){if(t.curOp)return e.apply(t,arguments);jn(t);try{return e.apply(t,arguments)}finally{Kn(t)}}}function Jn(t){return function(){if(this.curOp)return t.apply(this,arguments);jn(this);try{return t.apply(this,arguments)}finally{Kn(this)}}}function Qn(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);jn(e);try{return t.apply(this,arguments)}finally{Kn(e)}}}function tr(t,e){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(e,z(er,t))}function er(t){var e=t.doc;if(!(e.highlightFrontier>=t.display.viewTo)){var i=+new Date+t.options.workTime,n=pe(t,e.highlightFrontier),r=[];e.iter(n.line,Math.min(e.first+e.size,t.display.viewTo+500),function(s){if(n.line>=t.display.viewFrom){var o=s.styles,a=s.text.length>t.options.maxHighlightLength?Ht(e.mode,n.state):null,l=he(t,s,n,!0);a&&(n.state=a),s.styles=l.styles;var c=s.styleClasses,u=l.classes;u?s.styleClasses=u:c&&(s.styleClasses=null);for(var h=!o||o.length!=s.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass),d=0;!h&&d<o.length;++d)h=o[d]!=s.styles[d];h&&r.push(n.line),s.stateAfter=n.save(),n.nextLine()}else s.text.length<=t.options.maxHighlightLength&&fe(t,s.text,n),s.stateAfter=n.line%5==0?n.save():null,n.nextLine();if(+new Date>i)return tr(t,t.options.workDelay),!0}),e.highlightFrontier=n.line,e.modeFrontier=Math.max(e.modeFrontier,n.line),r.length&&Zn(t,function(){for(var e=0;e<r.length;e++)un(t,r[e],"text")})}}var ir=function(t,e,i){var n=t.display;this.viewport=e,this.visible=Tn(n,t.doc,e),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldDisplayWidth=Ti(t),this.force=i,this.dims=nn(t),this.events=[]};function nr(t,e){var i=t.display,n=t.doc;if(e.editorIsHidden)return hn(t),!1;if(!e.force&&e.visible.from>=i.viewFrom&&e.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&0==pn(t))return!1;cr(t)&&(hn(t),e.dims=nn(t));var r=n.first+n.size,s=Math.max(e.visible.from-t.options.viewportMargin,n.first),o=Math.min(r,e.visible.to+t.options.viewportMargin);i.viewFrom<s&&s-i.viewFrom<20&&(s=Math.max(n.first,i.viewFrom)),i.viewTo>o&&i.viewTo-o<20&&(o=Math.min(r,i.viewTo)),we&&(s=Be(t.doc,s),o=qe(t.doc,o));var a=s!=i.viewFrom||o!=i.viewTo||i.lastWrapHeight!=e.wrapperHeight||i.lastWrapWidth!=e.wrapperWidth;!function(t,e,i){var n=t.display;0==n.view.length||e>=n.viewTo||i<=n.viewFrom?(n.view=ri(t,e,i),n.viewFrom=e):(n.viewFrom>e?n.view=ri(t,e,n.viewFrom).concat(n.view):n.viewFrom<e&&(n.view=n.view.slice(ln(t,e))),n.viewFrom=e,n.viewTo<i?n.view=n.view.concat(ri(t,n.viewTo,i)):n.viewTo>i&&(n.view=n.view.slice(0,ln(t,i)))),n.viewTo=i}(t,s,o),i.viewOffset=We(Ut(t.doc,i.viewFrom)),t.display.mover.style.top=i.viewOffset+"px";var c=pn(t);if(!a&&0==c&&!e.force&&i.renderedView==i.view&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo))return!1;var u=function(t){if(t.hasFocus())return null;var e=E();if(!e||!D(t.display.lineDiv,e))return null;var i={activeElt:e};if(window.getSelection){var n=window.getSelection();n.anchorNode&&n.extend&&D(t.display.lineDiv,n.anchorNode)&&(i.anchorNode=n.anchorNode,i.anchorOffset=n.anchorOffset,i.focusNode=n.focusNode,i.focusOffset=n.focusOffset)}return i}(t);return c>4&&(i.lineDiv.style.display="none"),function(t,e,i){var n=t.display,r=t.options.lineNumbers,s=n.lineDiv,o=s.firstChild;function a(e){var i=e.nextSibling;return l&&v&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),i}for(var c=n.view,u=n.viewFrom,h=0;h<c.length;h++){var d=c[h];if(d.hidden);else if(d.node&&d.node.parentNode==s){for(;o!=d.node;)o=a(o);var p=r&&null!=e&&e<=u&&d.lineNumber;d.changes&&(q(d.changes,"gutter")>-1&&(p=!1),ci(t,d,u,i)),p&&(_(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(Qt(t.options,u)))),o=d.node.nextSibling}else{var f=gi(t,d,u,i);s.insertBefore(f,o)}u+=d.size}for(;o;)o=a(o)}(t,i.updateLineNumbers,e.dims),c>4&&(i.lineDiv.style.display=""),i.renderedView=i.view,function(t){if(t&&t.activeElt&&t.activeElt!=E()&&(t.activeElt.focus(),t.anchorNode&&D(document.body,t.anchorNode)&&D(document.body,t.focusNode))){var e=window.getSelection(),i=document.createRange();i.setEnd(t.anchorNode,t.anchorOffset),i.collapse(!1),e.removeAllRanges(),e.addRange(i),e.extend(t.focusNode,t.focusOffset)}}(u),_(i.cursorDiv),_(i.selectionDiv),i.gutters.style.height=i.sizer.style.minHeight=0,a&&(i.lastWrapHeight=e.wrapperHeight,i.lastWrapWidth=e.wrapperWidth,tr(t,400)),i.updateLineNumbers=null,!0}function rr(t,e){for(var i=e.viewport,n=!0;(n&&t.options.lineWrapping&&e.oldDisplayWidth!=Ti(t)||(i&&null!=i.top&&(i={top:Math.min(t.doc.height+Si(t.display)-_i(t),i.top)}),e.visible=Tn(t.display,t.doc,i),!(e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)))&&nr(t,e);n=!1){Cn(t);var r=zn(t);fn(t),Bn(t,r),ar(t,r),e.force=!1}e.signal(t,"update",t),t.display.viewFrom==t.display.reportedViewFrom&&t.display.viewTo==t.display.reportedViewTo||(e.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function sr(t,e){var i=new ir(t,e);if(nr(t,i)){Cn(t),rr(t,i);var n=zn(t);fn(t),Bn(t,n),ar(t,n),i.finish()}}function or(t){var e=t.gutters.offsetWidth;t.sizer.style.marginLeft=e+"px"}function ar(t,e){t.display.sizer.style.minHeight=e.docHeight+"px",t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=e.docHeight+t.display.barHeight+Ai(t)+"px"}function lr(t){var e=t.display,i=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var n=rn(e)-e.scroller.scrollLeft+t.doc.scrollLeft,r=e.gutters.offsetWidth,s=n+"px",o=0;o<i.length;o++)if(!i[o].hidden){t.options.fixedGutter&&(i[o].gutter&&(i[o].gutter.style.left=s),i[o].gutterBackground&&(i[o].gutterBackground.style.left=s));var a=i[o].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=s}t.options.fixedGutter&&(e.gutters.style.left=n+r+"px")}}function cr(t){if(!t.options.lineNumbers)return!1;var e=t.doc,i=Qt(t.options,e.first+e.size-1),n=t.display;if(i.length!=n.lineNumChars){var r=n.measure.appendChild(L("div",[L("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),s=r.firstChild.offsetWidth,o=r.offsetWidth-s;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(s,n.lineGutter.offsetWidth-o)+1,n.lineNumWidth=n.lineNumInnerWidth+o,n.lineNumChars=n.lineNumInnerWidth?i.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",or(t.display),!0}return!1}function ur(t,e){for(var i=[],n=!1,r=0;r<t.length;r++){var s=t[r],o=null;if("string"!=typeof s&&(o=s.style,s=s.className),"CodeMirror-linenumbers"==s){if(!e)continue;n=!0}i.push({className:s,style:o})}return e&&!n&&i.push({className:"CodeMirror-linenumbers",style:null}),i}function hr(t){var e=t.gutters,i=t.gutterSpecs;_(e),t.lineGutter=null;for(var n=0;n<i.length;++n){var r=i[n],s=r.className,o=r.style,a=e.appendChild(L("div",null,"CodeMirror-gutter "+s));o&&(a.style.cssText=o),"CodeMirror-linenumbers"==s&&(t.lineGutter=a,a.style.width=(t.lineNumWidth||1)+"px")}e.style.display=i.length?"":"none",or(t)}function dr(t){hr(t.display),cn(t),lr(t)}ir.prototype.signal=function(t,e){vt(t,e)&&this.events.push(arguments)},ir.prototype.finish=function(){for(var t=0;t<this.events.length;t++)mt.apply(null,this.events[t])};var pr=0,fr=null;function mr(t){var e=t.wheelDeltaX,i=t.wheelDeltaY;return null==e&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(e=t.detail),null==i&&t.detail&&t.axis==t.VERTICAL_AXIS?i=t.detail:null==i&&(i=t.wheelDelta),{x:e,y:i}}function gr(t){var e=mr(t);return e.x*=fr,e.y*=fr,e}function yr(t,e){var n=mr(e),r=n.x,s=n.y,o=t.display,a=o.scroller,c=a.scrollWidth>a.clientWidth,u=a.scrollHeight>a.clientHeight;if(r&&c||s&&u){if(s&&v&&l)t:for(var d=e.target,p=o.view;d!=a;d=d.parentNode)for(var f=0;f<p.length;f++)if(p[f].node==d){t.display.currentWheelTarget=d;break t}if(r&&!i&&!h&&null!=fr)return s&&u&&On(t,Math.max(0,a.scrollTop+s*fr)),Nn(t,Math.max(0,a.scrollLeft+r*fr)),(!s||s&&u)&&xt(e),void(o.wheelStartX=null);if(s&&null!=fr){var m=s*fr,g=t.doc.scrollTop,y=g+o.wrapper.clientHeight;m<0?g=Math.max(0,g+m-50):y=Math.min(t.doc.height,y+m+50),sr(t,{top:g,bottom:y})}pr<20&&(null==o.wheelStartX?(o.wheelStartX=a.scrollLeft,o.wheelStartY=a.scrollTop,o.wheelDX=r,o.wheelDY=s,setTimeout(function(){if(null!=o.wheelStartX){var t=a.scrollLeft-o.wheelStartX,e=a.scrollTop-o.wheelStartY,i=e&&o.wheelDY&&e/o.wheelDY||t&&o.wheelDX&&t/o.wheelDX;o.wheelStartX=o.wheelStartY=null,i&&(fr=(fr*pr+i)/(pr+1),++pr)}},200)):(o.wheelDX+=r,o.wheelDY+=s))}}o?fr=-.53:i?fr=15:u?fr=-.7:d&&(fr=-1/3);var vr=function(t,e){this.ranges=t,this.primIndex=e};vr.prototype.primary=function(){return this.ranges[this.primIndex]},vr.prototype.equals=function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++){var i=this.ranges[e],n=t.ranges[e];if(!ie(i.anchor,n.anchor)||!ie(i.head,n.head))return!1}return!0},vr.prototype.deepCopy=function(){for(var t=[],e=0;e<this.ranges.length;e++)t[e]=new br(ne(this.ranges[e].anchor),ne(this.ranges[e].head));return new vr(t,this.primIndex)},vr.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},vr.prototype.contains=function(t,e){e||(e=t);for(var i=0;i<this.ranges.length;i++){var n=this.ranges[i];if(ee(e,n.from())>=0&&ee(t,n.to())<=0)return i}return-1};var br=function(t,e){this.anchor=t,this.head=e};function xr(t,e,i){var n=t&&t.options.selectionsMayTouch,r=e[i];e.sort(function(t,e){return ee(t.from(),e.from())}),i=q(e,r);for(var s=1;s<e.length;s++){var o=e[s],a=e[s-1],l=ee(a.to(),o.from());if(n&&!o.empty()?l>0:l>=0){var c=se(a.from(),o.from()),u=re(a.to(),o.to()),h=a.empty()?o.from()==o.head:a.from()==a.head;s<=i&&--i,e.splice(--s,2,new br(h?u:c,h?c:u))}}return new vr(e,i)}function kr(t,e){return new vr([new br(t,e||t)],0)}function wr(t){return t.text?te(t.from.line+t.text.length-1,X(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function Sr(t,e){if(ee(t,e.from)<0)return t;if(ee(t,e.to)<=0)return wr(e);var i=t.line+e.text.length-(e.to.line-e.from.line)-1,n=t.ch;return t.line==e.to.line&&(n+=wr(e).ch-e.to.ch),te(i,n)}function Cr(t,e){for(var i=[],n=0;n<t.sel.ranges.length;n++){var r=t.sel.ranges[n];i.push(new br(Sr(r.anchor,e),Sr(r.head,e)))}return xr(t.cm,i,t.sel.primIndex)}function Ar(t,e,i){return t.line==e.line?te(i.line,t.ch-e.ch+i.ch):te(i.line+(t.line-e.line),t.ch)}function Tr(t){t.doc.mode=Bt(t.options,t.doc.modeOption),_r(t)}function _r(t){t.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,tr(t,100),t.state.modeGen++,t.curOp&&cn(t)}function Mr(t,e){return 0==e.from.ch&&0==e.to.ch&&""==X(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function Lr(t,e,i,n){function r(t){return i?i[t]:null}function s(t,i,r){!function(t,e,i,n){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Me(t),Le(t,i);var r=n?n(t):1;r!=t.height&&Xt(t,r)}(t,i,r,n),ai(t,"change",t,e)}function o(t,e){for(var i=[],s=t;s<e;++s)i.push(new Ue(c[s],r(s),n));return i}var a=e.from,l=e.to,c=e.text,u=Ut(t,a.line),h=Ut(t,l.line),d=X(c),p=r(c.length-1),f=l.line-a.line;if(e.full)t.insert(0,o(0,c.length)),t.remove(c.length,t.size-c.length);else if(Mr(t,e)){var m=o(0,c.length-1);s(h,h.text,p),f&&t.remove(a.line,f),m.length&&t.insert(a.line,m)}else if(u==h)if(1==c.length)s(u,u.text.slice(0,a.ch)+d+u.text.slice(l.ch),p);else{var g=o(1,c.length-1);g.push(new Ue(d+u.text.slice(l.ch),p,n)),s(u,u.text.slice(0,a.ch)+c[0],r(0)),t.insert(a.line+1,g)}else if(1==c.length)s(u,u.text.slice(0,a.ch)+c[0]+h.text.slice(l.ch),r(0)),t.remove(a.line+1,f);else{s(u,u.text.slice(0,a.ch)+c[0],r(0)),s(h,d+h.text.slice(l.ch),p);var y=o(1,c.length-1);f>1&&t.remove(a.line+1,f-1),t.insert(a.line+1,y)}ai(t,"change",t,e)}function Fr(t,e,i){!function t(n,r,s){if(n.linked)for(var o=0;o<n.linked.length;++o){var a=n.linked[o];if(a.doc!=r){var l=s&&a.sharedHist;i&&!l||(e(a.doc,l),t(a.doc,n,l))}}}(t,null,!0)}function Dr(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,on(t),Tr(t),Er(t),t.options.lineWrapping||Ke(t),t.options.mode=e.modeOption,cn(t)}function Er(t){("rtl"==t.doc.direction?O:T)(t.display.lineDiv,"CodeMirror-rtl")}function Or(t){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t||1}function Ir(t,e){var i={from:ne(e.from),to:wr(e),text:Vt(t,e.from,e.to)};return Br(t,i,e.from.line,e.to.line+1),Fr(t,function(t){return Br(t,i,e.from.line,e.to.line+1)},!0),i}function Nr(t){for(;t.length;){var e=X(t);if(!e.ranges)break;t.pop()}}function zr(t,e,i,n){var r=t.history;r.undone.length=0;var s,o,a=+new Date;if((r.lastOp==n||r.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&r.lastModTime>a-(t.cm?t.cm.options.historyEventDelay:500)||"*"==e.origin.charAt(0)))&&(s=function(t,e){return e?(Nr(t.done),X(t.done)):t.done.length&&!X(t.done).ranges?X(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),X(t.done)):void 0}(r,r.lastOp==n)))o=X(s.changes),0==ee(e.from,e.to)&&0==ee(e.from,o.to)?o.to=wr(e):s.changes.push(Ir(t,e));else{var l=X(r.done);for(l&&l.ranges||Rr(t.sel,r.done),s={changes:[Ir(t,e)],generation:r.generation},r.done.push(s);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(i),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=a,r.lastOp=r.lastSelOp=n,r.lastOrigin=r.lastSelOrigin=e.origin,o||mt(t,"historyAdded")}function Pr(t,e,i,n){var r=t.history,s=n&&n.origin;i==r.lastSelOp||s&&r.lastSelOrigin==s&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==s||function(t,e,i,n){var r=e.charAt(0);return"*"==r||"+"==r&&i.ranges.length==n.ranges.length&&i.somethingSelected()==n.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}(t,s,X(r.done),e))?r.done[r.done.length-1]=e:Rr(e,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=s,r.lastSelOp=i,n&&!1!==n.clearRedo&&Nr(r.undone)}function Rr(t,e){var i=X(e);i&&i.ranges&&i.equals(t)||e.push(t)}function Br(t,e,i,n){var r=e["spans_"+t.id],s=0;t.iter(Math.max(t.first,i),Math.min(t.first+t.size,n),function(i){i.markedSpans&&((r||(r=e["spans_"+t.id]={}))[s]=i.markedSpans),++s})}function qr(t){if(!t)return null;for(var e,i=0;i<t.length;++i)t[i].marker.explicitlyCleared?e||(e=t.slice(0,i)):e&&e.push(t[i]);return e?e.length?e:null:t}function $r(t,e){var i=function(t,e){var i=e["spans_"+t.id];if(!i)return null;for(var n=[],r=0;r<e.text.length;++r)n.push(qr(i[r]));return n}(t,e),n=Te(t,e);if(!i)return n;if(!n)return i;for(var r=0;r<i.length;++r){var s=i[r],o=n[r];if(s&&o)t:for(var a=0;a<o.length;++a){for(var l=o[a],c=0;c<s.length;++c)if(s[c].marker==l.marker)continue t;s.push(l)}else o&&(i[r]=o)}return i}function Hr(t,e,i){for(var n=[],r=0;r<t.length;++r){var s=t[r];if(s.ranges)n.push(i?vr.prototype.deepCopy.call(s):s);else{var o=s.changes,a=[];n.push({changes:a});for(var l=0;l<o.length;++l){var c=o[l],u=void 0;if(a.push({from:c.from,to:c.to,text:c.text}),e)for(var h in c)(u=h.match(/^spans_(\d+)$/))&&q(e,Number(u[1]))>-1&&(X(a)[h]=c[h],delete c[h])}}}return n}function Wr(t,e,i,n){if(n){var r=t.anchor;if(i){var s=ee(e,r)<0;s!=ee(i,r)<0?(r=e,e=i):s!=ee(e,i)<0&&(e=i)}return new br(r,e)}return new br(i||e,e)}function jr(t,e,i,n,r){null==r&&(r=t.cm&&(t.cm.display.shift||t.extend)),Xr(t,new vr([Wr(t.sel.primary(),e,i,r)],0),n)}function Kr(t,e,i){for(var n=[],r=t.cm&&(t.cm.display.shift||t.extend),s=0;s<t.sel.ranges.length;s++)n[s]=Wr(t.sel.ranges[s],e[s],null,r);var o=xr(t.cm,n,t.sel.primIndex);Xr(t,o,i)}function Ur(t,e,i,n){var r=t.sel.ranges.slice(0);r[e]=i,Xr(t,xr(t.cm,r,t.sel.primIndex),n)}function Vr(t,e,i,n){Xr(t,kr(e,i),n)}function Gr(t,e,i){var n=t.history.done,r=X(n);r&&r.ranges?(n[n.length-1]=e,Zr(t,e,i)):Xr(t,e,i)}function Xr(t,e,i){Zr(t,e,i),Pr(t,t.sel,t.cm?t.cm.curOp.id:NaN,i)}function Zr(t,e,i){(vt(t,"beforeSelectionChange")||t.cm&&vt(t.cm,"beforeSelectionChange"))&&(e=function(t,e,i){var n={ranges:e.ranges,update:function(e){this.ranges=[];for(var i=0;i<e.length;i++)this.ranges[i]=new br(ae(t,e[i].anchor),ae(t,e[i].head))},origin:i&&i.origin};return mt(t,"beforeSelectionChange",t,n),t.cm&&mt(t.cm,"beforeSelectionChange",t.cm,n),n.ranges!=e.ranges?xr(t.cm,n.ranges,n.ranges.length-1):e}(t,e,i));var n=i&&i.bias||(ee(e.primary().head,t.sel.primary().head)<0?-1:1);Yr(t,Qr(t,e,n,!0)),i&&!1===i.scroll||!t.cm||Ln(t.cm)}function Yr(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=1,t.cm.curOp.selectionChanged=!0,yt(t.cm)),ai(t,"cursorActivity",t))}function Jr(t){Yr(t,Qr(t,t.sel,null,!1))}function Qr(t,e,i,n){for(var r,s=0;s<e.ranges.length;s++){var o=e.ranges[s],a=e.ranges.length==t.sel.ranges.length&&t.sel.ranges[s],l=es(t,o.anchor,a&&a.anchor,i,n),c=es(t,o.head,a&&a.head,i,n);(r||l!=o.anchor||c!=o.head)&&(r||(r=e.ranges.slice(0,s)),r[s]=new br(l,c))}return r?xr(t.cm,r,e.primIndex):e}function ts(t,e,i,n,r){var s=Ut(t,e.line);if(s.markedSpans)for(var o=0;o<s.markedSpans.length;++o){var a=s.markedSpans[o],l=a.marker,c="selectLeft"in l?!l.selectLeft:l.inclusiveLeft,u="selectRight"in l?!l.selectRight:l.inclusiveRight;if((null==a.from||(c?a.from<=e.ch:a.from<e.ch))&&(null==a.to||(u?a.to>=e.ch:a.to>e.ch))){if(r&&(mt(l,"beforeCursorEnter"),l.explicitlyCleared)){if(s.markedSpans){--o;continue}break}if(!l.atomic)continue;if(i){var h=l.find(n<0?1:-1),d=void 0;if((n<0?u:c)&&(h=is(t,h,-n,h&&h.line==e.line?s:null)),h&&h.line==e.line&&(d=ee(h,i))&&(n<0?d<0:d>0))return ts(t,h,e,n,r)}var p=l.find(n<0?-1:1);return(n<0?c:u)&&(p=is(t,p,n,p.line==e.line?s:null)),p?ts(t,p,e,n,r):null}}return e}function es(t,e,i,n,r){var s=n||1,o=ts(t,e,i,s,r)||!r&&ts(t,e,i,s,!0)||ts(t,e,i,-s,r)||!r&&ts(t,e,i,-s,!0);return o||(t.cantEdit=!0,te(t.first,0))}function is(t,e,i,n){return i<0&&0==e.ch?e.line>t.first?ae(t,te(e.line-1)):null:i>0&&e.ch==(n||Ut(t,e.line)).text.length?e.line<t.first+t.size-1?te(e.line+1,0):null:new te(e.line,e.ch+i)}function ns(t){t.setSelection(te(t.firstLine(),0),te(t.lastLine()),W)}function rs(t,e,i){var n={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return n.canceled=!0}};return i&&(n.update=function(e,i,r,s){e&&(n.from=ae(t,e)),i&&(n.to=ae(t,i)),r&&(n.text=r),void 0!==s&&(n.origin=s)}),mt(t,"beforeChange",t,n),t.cm&&mt(t.cm,"beforeChange",t.cm,n),n.canceled?(t.cm&&(t.cm.curOp.updateInput=2),null):{from:n.from,to:n.to,text:n.text,origin:n.origin}}function ss(t,e,i){if(t.cm){if(!t.cm.curOp)return Yn(t.cm,ss)(t,e,i);if(t.cm.state.suppressEdits)return}if(!(vt(t,"beforeChange")||t.cm&&vt(t.cm,"beforeChange"))||(e=rs(t,e,!0))){var n=ke&&!i&&function(t,e,i){var n=null;if(t.iter(e.line,i.line+1,function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var i=t.markedSpans[e].marker;!i.readOnly||n&&-1!=q(n,i)||(n||(n=[])).push(i)}}),!n)return null;for(var r=[{from:e,to:i}],s=0;s<n.length;++s)for(var o=n[s],a=o.find(0),l=0;l<r.length;++l){var c=r[l];if(!(ee(c.to,a.from)<0||ee(c.from,a.to)>0)){var u=[l,1],h=ee(c.from,a.from),d=ee(c.to,a.to);(h<0||!o.inclusiveLeft&&!h)&&u.push({from:c.from,to:a.from}),(d>0||!o.inclusiveRight&&!d)&&u.push({from:a.to,to:c.to}),r.splice.apply(r,u),l+=u.length-3}}return r}(t,e.from,e.to);if(n)for(var r=n.length-1;r>=0;--r)os(t,{from:n[r].from,to:n[r].to,text:r?[""]:e.text,origin:e.origin});else os(t,e)}}function os(t,e){if(1!=e.text.length||""!=e.text[0]||0!=ee(e.from,e.to)){var i=Cr(t,e);zr(t,e,i,t.cm?t.cm.curOp.id:NaN),cs(t,e,i,Te(t,e));var n=[];Fr(t,function(t,i){i||-1!=q(n,t.history)||(ps(t.history,e),n.push(t.history)),cs(t,e,null,Te(t,e))})}}function as(t,e,i){var n=t.cm&&t.cm.state.suppressEdits;if(!n||i){for(var r,s=t.history,o=t.sel,a="undo"==e?s.done:s.undone,l="undo"==e?s.undone:s.done,c=0;c<a.length&&(r=a[c],i?!r.ranges||r.equals(t.sel):r.ranges);c++);if(c!=a.length){for(s.lastOrigin=s.lastSelOrigin=null;;){if(!(r=a.pop()).ranges){if(n)return void a.push(r);break}if(Rr(r,l),i&&!r.equals(t.sel))return void Xr(t,r,{clearRedo:!1});o=r}var u=[];Rr(o,l),l.push({changes:u,generation:s.generation}),s.generation=r.generation||++s.maxGeneration;for(var h=vt(t,"beforeChange")||t.cm&&vt(t.cm,"beforeChange"),d=function(i){var n=r.changes[i];if(n.origin=e,h&&!rs(t,n,!1))return a.length=0,{};u.push(Ir(t,n));var s=i?Cr(t,n):X(a);cs(t,n,s,$r(t,n)),!i&&t.cm&&t.cm.scrollIntoView({from:n.from,to:wr(n)});var o=[];Fr(t,function(t,e){e||-1!=q(o,t.history)||(ps(t.history,n),o.push(t.history)),cs(t,n,null,$r(t,n))})},p=r.changes.length-1;p>=0;--p){var f=d(p);if(f)return f.v}}}}function ls(t,e){if(0!=e&&(t.first+=e,t.sel=new vr(Z(t.sel.ranges,function(t){return new br(te(t.anchor.line+e,t.anchor.ch),te(t.head.line+e,t.head.ch))}),t.sel.primIndex),t.cm)){cn(t.cm,t.first,t.first-e,e);for(var i=t.cm.display,n=i.viewFrom;n<i.viewTo;n++)un(t.cm,n,"gutter")}}function cs(t,e,i,n){if(t.cm&&!t.cm.curOp)return Yn(t.cm,cs)(t,e,i,n);if(e.to.line<t.first)ls(t,e.text.length-1-(e.to.line-e.from.line));else if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var r=e.text.length-1-(t.first-e.from.line);ls(t,r),e={from:te(t.first,0),to:te(e.to.line+r,e.to.ch),text:[X(e.text)],origin:e.origin}}var s=t.lastLine();e.to.line>s&&(e={from:e.from,to:te(s,Ut(t,s).text.length),text:[e.text[0]],origin:e.origin}),e.removed=Vt(t,e.from,e.to),i||(i=Cr(t,e)),t.cm?function(t,e,i){var n=t.doc,r=t.display,s=e.from,o=e.to,a=!1,l=s.line;t.options.lineWrapping||(l=Zt(Re(Ut(n,s.line))),n.iter(l,o.line+1,function(t){if(t==r.maxLine)return a=!0,!0})),n.sel.contains(e.from,e.to)>-1&&yt(t),Lr(n,e,i,sn(t)),t.options.lineWrapping||(n.iter(l,s.line+e.text.length,function(t){var e=je(t);e>r.maxLineLength&&(r.maxLine=t,r.maxLineLength=e,r.maxLineChanged=!0,a=!1)}),a&&(t.curOp.updateMaxLine=!0)),function(t,e){if(t.modeFrontier=Math.min(t.modeFrontier,e),!(t.highlightFrontier<e-10)){for(var i=t.first,n=e-1;n>i;n--){var r=Ut(t,n).stateAfter;if(r&&(!(r instanceof ce)||n+r.lookAhead<e)){i=n+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,i)}}(n,s.line),tr(t,400);var c=e.text.length-(o.line-s.line)-1;e.full?cn(t):s.line!=o.line||1!=e.text.length||Mr(t.doc,e)?cn(t,s.line,o.line+1,c):un(t,s.line,"text");var u=vt(t,"changes"),h=vt(t,"change");if(h||u){var d={from:s,to:o,text:e.text,removed:e.removed,origin:e.origin};h&&ai(t,"change",t,d),u&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(d)}t.display.selForContextMenu=null}(t.cm,e,n):Lr(t,e,n),Zr(t,i,W),t.cantEdit&&es(t,te(t.firstLine(),0))&&(t.cantEdit=!1)}}function us(t,e,i,n,r){var s;n||(n=i),ee(n,i)<0&&(i=(s=[n,i])[0],n=s[1]),"string"==typeof e&&(e=t.splitLines(e)),ss(t,{from:i,to:n,text:e,origin:r})}function hs(t,e,i,n){i<t.line?t.line+=n:e<t.line&&(t.line=e,t.ch=0)}function ds(t,e,i,n){for(var r=0;r<t.length;++r){var s=t[r],o=!0;if(s.ranges){s.copied||((s=t[r]=s.deepCopy()).copied=!0);for(var a=0;a<s.ranges.length;a++)hs(s.ranges[a].anchor,e,i,n),hs(s.ranges[a].head,e,i,n)}else{for(var l=0;l<s.changes.length;++l){var c=s.changes[l];if(i<c.from.line)c.from=te(c.from.line+n,c.from.ch),c.to=te(c.to.line+n,c.to.ch);else if(e<=c.to.line){o=!1;break}}o||(t.splice(0,r+1),r=0)}}}function ps(t,e){var i=e.from.line,n=e.to.line,r=e.text.length-(n-i)-1;ds(t.done,i,n,r),ds(t.undone,i,n,r)}function fs(t,e,i,n){var r=e,s=e;return"number"==typeof e?s=Ut(t,oe(t,e)):r=Zt(e),null==r?null:(n(s,r)&&t.cm&&un(t.cm,r,i),s)}function ms(t){this.lines=t,this.parent=null;for(var e=0,i=0;i<t.length;++i)t[i].parent=this,e+=t[i].height;this.height=e}function gs(t){this.children=t;for(var e=0,i=0,n=0;n<t.length;++n){var r=t[n];e+=r.chunkSize(),i+=r.height,r.parent=this}this.size=e,this.height=i,this.parent=null}br.prototype.from=function(){return se(this.anchor,this.head)},br.prototype.to=function(){return re(this.anchor,this.head)},br.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},ms.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var i=t,n=t+e;i<n;++i){var r=this.lines[i];this.height-=r.height,Ve(r),ai(r,"delete")}this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,i){this.height+=i,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var n=0;n<e.length;++n)e[n].parent=this},iterN:function(t,e,i){for(var n=t+e;t<n;++t)if(i(this.lines[t]))return!0}},gs.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var i=0;i<this.children.length;++i){var n=this.children[i],r=n.chunkSize();if(t<r){var s=Math.min(e,r-t),o=n.height;if(n.removeInner(t,s),this.height-=o-n.height,r==s&&(this.children.splice(i--,1),n.parent=null),0==(e-=s))break;t=0}else t-=r}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof ms))){var a=[];this.collapse(a),this.children=[new ms(a)],this.children[0].parent=this}},collapse:function(t){for(var e=0;e<this.children.length;++e)this.children[e].collapse(t)},insertInner:function(t,e,i){this.size+=e.length,this.height+=i;for(var n=0;n<this.children.length;++n){var r=this.children[n],s=r.chunkSize();if(t<=s){if(r.insertInner(t,e,i),r.lines&&r.lines.length>50){for(var o=r.lines.length%25+25,a=o;a<r.lines.length;){var l=new ms(r.lines.slice(a,a+=25));r.height-=l.height,this.children.splice(++n,0,l),l.parent=this}r.lines=r.lines.slice(0,o),this.maybeSpill()}break}t-=s}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=t.children.splice(t.children.length-5,5),i=new gs(e);if(t.parent){t.size-=i.size,t.height-=i.height;var n=q(t.parent.children,t);t.parent.children.splice(n+1,0,i)}else{var r=new gs(t.children);r.parent=t,t.children=[r,i],t=r}i.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,i){for(var n=0;n<this.children.length;++n){var r=this.children[n],s=r.chunkSize();if(t<s){var o=Math.min(e,s-t);if(r.iterN(t,o,i))return!0;if(0==(e-=o))break;t=0}else t-=s}}};var ys=function(t,e,i){if(i)for(var n in i)i.hasOwnProperty(n)&&(this[n]=i[n]);this.doc=t,this.node=e};function vs(t,e,i){We(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&Mn(t,i)}ys.prototype.clear=function(){var t=this.doc.cm,e=this.line.widgets,i=this.line,n=Zt(i);if(null!=n&&e){for(var r=0;r<e.length;++r)e[r]==this&&e.splice(r--,1);e.length||(i.widgets=null);var s=xi(this);Xt(i,Math.max(0,i.height-s)),t&&(Zn(t,function(){vs(t,i,-s),un(t,n,"widget")}),ai(t,"lineWidgetCleared",t,this,n))}},ys.prototype.changed=function(){var t=this,e=this.height,i=this.doc.cm,n=this.line;this.height=null;var r=xi(this)-e;r&&($e(this.doc,n)||Xt(n,n.height+r),i&&Zn(i,function(){i.curOp.forceUpdate=!0,vs(i,n,r),ai(i,"lineWidgetChanged",i,t,Zt(n))}))},bt(ys);var bs=0,xs=function(t,e){this.lines=[],this.type=e,this.doc=t,this.id=++bs};function ks(t,e,i,n,r){if(n&&n.shared)return function(t,e,i,n,r){(n=P(n)).shared=!1;var s=[ks(t,e,i,n,r)],o=s[0],a=n.widgetNode;return Fr(t,function(t){a&&(n.widgetNode=a.cloneNode(!0)),s.push(ks(t,ae(t,e),ae(t,i),n,r));for(var l=0;l<t.linked.length;++l)if(t.linked[l].isParent)return;o=X(s)}),new ws(s,o)}(t,e,i,n,r);if(t.cm&&!t.cm.curOp)return Yn(t.cm,ks)(t,e,i,n,r);var s=new xs(t,r),o=ee(e,i);if(n&&P(n,s,!1),o>0||0==o&&!1!==s.clearWhenEmpty)return s;if(s.replacedWith&&(s.collapsed=!0,s.widgetNode=F("span",[s.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||s.widgetNode.setAttribute("cm-ignore-events","true"),n.insertLeft&&(s.widgetNode.insertLeft=!0)),s.collapsed){if(Pe(t,e.line,e,i,s)||e.line!=i.line&&Pe(t,i.line,e,i,s))throw new Error("Inserting collapsed marker partially overlapping an existing one");we=!0}s.addToHistory&&zr(t,{from:e,to:i,origin:"markText"},t.sel,NaN);var a,l=e.line,c=t.cm;if(t.iter(l,i.line+1,function(t){c&&s.collapsed&&!c.options.lineWrapping&&Re(t)==c.display.maxLine&&(a=!0),s.collapsed&&l!=e.line&&Xt(t,0),function(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}(t,new Se(s,l==e.line?e.ch:null,l==i.line?i.ch:null)),++l}),s.collapsed&&t.iter(e.line,i.line+1,function(e){$e(t,e)&&Xt(e,0)}),s.clearOnEnter&&dt(s,"beforeCursorEnter",function(){return s.clear()}),s.readOnly&&(ke=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),s.collapsed&&(s.id=++bs,s.atomic=!0),c){if(a&&(c.curOp.updateMaxLine=!0),s.collapsed)cn(c,e.line,i.line+1);else if(s.className||s.startStyle||s.endStyle||s.css||s.attributes||s.title)for(var u=e.line;u<=i.line;u++)un(c,u,"text");s.atomic&&Jr(c.doc),ai(c,"markerAdded",c,s)}return s}xs.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&jn(t),vt(this,"clear")){var i=this.find();i&&ai(this,"clear",i.from,i.to)}for(var n=null,r=null,s=0;s<this.lines.length;++s){var o=this.lines[s],a=Ce(o.markedSpans,this);t&&!this.collapsed?un(t,Zt(o),"text"):t&&(null!=a.to&&(r=Zt(o)),null!=a.from&&(n=Zt(o))),o.markedSpans=Ae(o.markedSpans,a),null==a.from&&this.collapsed&&!$e(this.doc,o)&&t&&Xt(o,tn(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var c=Re(this.lines[l]),u=je(c);u>t.display.maxLineLength&&(t.display.maxLine=c,t.display.maxLineLength=u,t.display.maxLineChanged=!0)}null!=n&&t&&this.collapsed&&cn(t,n,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&Jr(t.doc)),t&&ai(t,"markerCleared",t,this,n,r),e&&Kn(t),this.parent&&this.parent.clear()}},xs.prototype.find=function(t,e){var i,n;null==t&&"bookmark"==this.type&&(t=1);for(var r=0;r<this.lines.length;++r){var s=this.lines[r],o=Ce(s.markedSpans,this);if(null!=o.from&&(i=te(e?s:Zt(s),o.from),-1==t))return i;if(null!=o.to&&(n=te(e?s:Zt(s),o.to),1==t))return n}return i&&{from:i,to:n}},xs.prototype.changed=function(){var t=this,e=this.find(-1,!0),i=this,n=this.doc.cm;e&&n&&Zn(n,function(){var r=e.line,s=Zt(e.line),o=Fi(n,s);if(o&&(Pi(o),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!$e(i.doc,r)&&null!=i.height){var a=i.height;i.height=null;var l=xi(i)-a;l&&Xt(r,r.height+l)}ai(n,"markerChanged",n,t)})},xs.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=q(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},xs.prototype.detachLine=function(t){if(this.lines.splice(q(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},bt(xs);var ws=function(t,e){this.markers=t,this.primary=e;for(var i=0;i<t.length;++i)t[i].parent=this};function Ss(t){return t.findMarks(te(t.first,0),t.clipPos(te(t.lastLine())),function(t){return t.parent})}function Cs(t){for(var e=function(e){var i=t[e],n=[i.primary.doc];Fr(i.primary.doc,function(t){return n.push(t)});for(var r=0;r<i.markers.length;r++){var s=i.markers[r];-1==q(n,s.doc)&&(s.parent=null,i.markers.splice(r--,1))}},i=0;i<t.length;i++)e(i)}ws.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();ai(this,"clear")}},ws.prototype.find=function(t,e){return this.primary.find(t,e)},bt(ws);var As=0,Ts=function(t,e,i,n,r){if(!(this instanceof Ts))return new Ts(t,e,i,n,r);null==i&&(i=0),gs.call(this,[new ms([new Ue("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=i;var s=te(i,0);this.sel=kr(s),this.history=new Or(null),this.id=++As,this.modeOption=e,this.lineSep=n,this.direction="rtl"==r?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),Lr(this,{from:s,to:s,text:t}),Xr(this,kr(s),W)};Ts.prototype=J(gs.prototype,{constructor:Ts,iter:function(t,e,i){i?this.iterN(t-this.first,e-t,i):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var i=0,n=0;n<e.length;++n)i+=e[n].height;this.insertInner(t-this.first,e,i)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=Gt(this,this.first,this.first+this.size);return!1===t?e:e.join(t||this.lineSeparator())},setValue:Qn(function(t){var e=te(this.first,0),i=this.first+this.size-1;ss(this,{from:e,to:te(i,Ut(this,i).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&Fn(this.cm,0,0),Xr(this,kr(e),W)}),replaceRange:function(t,e,i,n){e=ae(this,e),i=i?ae(this,i):e,us(this,t,e,i,n)},getRange:function(t,e,i){var n=Vt(this,ae(this,t),ae(this,e));return!1===i?n:n.join(i||this.lineSeparator())},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){if(Jt(this,t))return Ut(this,t)},getLineNumber:function(t){return Zt(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=Ut(this,t)),Re(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return ae(this,t)},getCursor:function(t){var e=this.sel.primary();return null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||"to"==t||!1===t?e.to():e.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Qn(function(t,e,i){Vr(this,ae(this,"number"==typeof t?te(t,e||0):t),null,i)}),setSelection:Qn(function(t,e,i){Vr(this,ae(this,t),ae(this,e||t),i)}),extendSelection:Qn(function(t,e,i){jr(this,ae(this,t),e&&ae(this,e),i)}),extendSelections:Qn(function(t,e){Kr(this,le(this,t),e)}),extendSelectionsBy:Qn(function(t,e){var i=Z(this.sel.ranges,t);Kr(this,le(this,i),e)}),setSelections:Qn(function(t,e,i){if(t.length){for(var n=[],r=0;r<t.length;r++)n[r]=new br(ae(this,t[r].anchor),ae(this,t[r].head));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),Xr(this,xr(this.cm,n,e),i)}}),addSelection:Qn(function(t,e,i){var n=this.sel.ranges.slice(0);n.push(new br(ae(this,t),ae(this,e||t))),Xr(this,xr(this.cm,n,n.length-1),i)}),getSelection:function(t){for(var e,i=this.sel.ranges,n=0;n<i.length;n++){var r=Vt(this,i[n].from(),i[n].to());e=e?e.concat(r):r}return!1===t?e:e.join(t||this.lineSeparator())},getSelections:function(t){for(var e=[],i=this.sel.ranges,n=0;n<i.length;n++){var r=Vt(this,i[n].from(),i[n].to());!1!==t&&(r=r.join(t||this.lineSeparator())),e[n]=r}return e},replaceSelection:function(t,e,i){for(var n=[],r=0;r<this.sel.ranges.length;r++)n[r]=t;this.replaceSelections(n,e,i||"+input")},replaceSelections:Qn(function(t,e,i){for(var n=[],r=this.sel,s=0;s<r.ranges.length;s++){var o=r.ranges[s];n[s]={from:o.from(),to:o.to(),text:this.splitLines(t[s]),origin:i}}for(var a=e&&"end"!=e&&function(t,e,i){for(var n=[],r=te(t.first,0),s=r,o=0;o<e.length;o++){var a=e[o],l=Ar(a.from,r,s),c=Ar(wr(a),r,s);if(r=a.to,s=c,"around"==i){var u=t.sel.ranges[o],h=ee(u.head,u.anchor)<0;n[o]=new br(h?c:l,h?l:c)}else n[o]=new br(l,l)}return new vr(n,t.sel.primIndex)}(this,n,e),l=n.length-1;l>=0;l--)ss(this,n[l]);a?Gr(this,a):this.cm&&Ln(this.cm)}),undo:Qn(function(){as(this,"undo")}),redo:Qn(function(){as(this,"redo")}),undoSelection:Qn(function(){as(this,"undo",!0)}),redoSelection:Qn(function(){as(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,i=0,n=0;n<t.done.length;n++)t.done[n].ranges||++e;for(var r=0;r<t.undone.length;r++)t.undone[r].ranges||++i;return{undo:e,redo:i}},clearHistory:function(){this.history=new Or(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Hr(this.history.done),undone:Hr(this.history.undone)}},setHistory:function(t){var e=this.history=new Or(this.history.maxGeneration);e.done=Hr(t.done.slice(0),null,!0),e.undone=Hr(t.undone.slice(0),null,!0)},setGutterMarker:Qn(function(t,e,i){return fs(this,t,"gutter",function(t){var n=t.gutterMarkers||(t.gutterMarkers={});return n[e]=i,!i&&it(n)&&(t.gutterMarkers=null),!0})}),clearGutter:Qn(function(t){var e=this;this.iter(function(i){i.gutterMarkers&&i.gutterMarkers[t]&&fs(e,i,"gutter",function(){return i.gutterMarkers[t]=null,it(i.gutterMarkers)&&(i.gutterMarkers=null),!0})})}),lineInfo:function(t){var e;if("number"==typeof t){if(!Jt(this,t))return null;if(e=t,!(t=Ut(this,t)))return null}else if(null==(e=Zt(t)))return null;return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:Qn(function(t,e,i){return fs(this,t,"gutter"==e?"gutter":"class",function(t){var n="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass";if(t[n]){if(C(i).test(t[n]))return!1;t[n]+=" "+i}else t[n]=i;return!0})}),removeLineClass:Qn(function(t,e,i){return fs(this,t,"gutter"==e?"gutter":"class",function(t){var n="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass",r=t[n];if(!r)return!1;if(null==i)t[n]=null;else{var s=r.match(C(i));if(!s)return!1;var o=s.index+s[0].length;t[n]=r.slice(0,s.index)+(s.index&&o!=r.length?" ":"")+r.slice(o)||null}return!0})}),addLineWidget:Qn(function(t,e,i){return function(t,e,i,n){var r=new ys(t,i,n),s=t.cm;return s&&r.noHScroll&&(s.display.alignWidgets=!0),fs(t,e,"widget",function(e){var i=e.widgets||(e.widgets=[]);if(null==r.insertAt?i.push(r):i.splice(Math.min(i.length-1,Math.max(0,r.insertAt)),0,r),r.line=e,s&&!$e(t,e)){var n=We(e)<t.scrollTop;Xt(e,e.height+xi(r)),n&&Mn(s,r.height),s.curOp.forceUpdate=!0}return!0}),s&&ai(s,"lineWidgetAdded",s,r,"number"==typeof e?e:Zt(e)),r}(this,t,e,i)}),removeLineWidget:function(t){t.clear()},markText:function(t,e,i){return ks(this,ae(this,t),ae(this,e),i,i&&i.type||"range")},setBookmark:function(t,e){var i={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared,handleMouseEvents:e&&e.handleMouseEvents};return ks(this,t=ae(this,t),t,i,"bookmark")},findMarksAt:function(t){var e=[],i=Ut(this,(t=ae(this,t)).line).markedSpans;if(i)for(var n=0;n<i.length;++n){var r=i[n];(null==r.from||r.from<=t.ch)&&(null==r.to||r.to>=t.ch)&&e.push(r.marker.parent||r.marker)}return e},findMarks:function(t,e,i){t=ae(this,t),e=ae(this,e);var n=[],r=t.line;return this.iter(t.line,e.line+1,function(s){var o=s.markedSpans;if(o)for(var a=0;a<o.length;a++){var l=o[a];null!=l.to&&r==t.line&&t.ch>=l.to||null==l.from&&r!=t.line||null!=l.from&&r==e.line&&l.from>=e.ch||i&&!i(l.marker)||n.push(l.marker.parent||l.marker)}++r}),n},getAllMarks:function(){var t=[];return this.iter(function(e){var i=e.markedSpans;if(i)for(var n=0;n<i.length;++n)null!=i[n].from&&t.push(i[n].marker)}),t},posFromIndex:function(t){var e,i=this.first,n=this.lineSeparator().length;return this.iter(function(r){var s=r.text.length+n;if(s>t)return e=t,!0;t-=s,++i}),ae(this,te(i,e))},indexFromPos:function(t){var e=(t=ae(this,t)).ch;if(t.line<this.first||t.ch<0)return 0;var i=this.lineSeparator().length;return this.iter(this.first,t.line,function(t){e+=t.text.length+i}),e},copy:function(t){var e=new Ts(Gt(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,i=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<i&&(i=t.to);var n=new Ts(Gt(this,e,i),t.mode||this.modeOption,e,this.lineSep,this.direction);return t.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:t.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],function(t,e){for(var i=0;i<e.length;i++){var n=e[i],r=n.find(),s=t.clipPos(r.from),o=t.clipPos(r.to);if(ee(s,o)){var a=ks(t,s,o,n.primary,n.primary.type);n.markers.push(a),a.parent=n}}}(n,Ss(this)),n},unlinkDoc:function(t){if(t instanceof So&&(t=t.doc),this.linked)for(var e=0;e<this.linked.length;++e){var i=this.linked[e];if(i.doc==t){this.linked.splice(e,1),t.unlinkDoc(this),Cs(Ss(this));break}}if(t.history==this.history){var n=[t.id];Fr(t,function(t){return n.push(t.id)},!0),t.history=new Or(null),t.history.done=Hr(this.history.done,n),t.history.undone=Hr(this.history.undone,n)}},iterLinkedDocs:function(t){Fr(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):Et(t)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Qn(function(t){var e;"rtl"!=t&&(t="ltr"),t!=this.direction&&(this.direction=t,this.iter(function(t){return t.order=null}),this.cm&&Zn(e=this.cm,function(){Er(e),cn(e)}))})}),Ts.prototype.eachLine=Ts.prototype.iter;var _s=0;function Ms(t){var e=this;if(Ls(e),!gt(e,t)&&!ki(e.display,t)){xt(t),o&&(_s=+new Date);var i=an(e,t,!0),n=t.dataTransfer.files;if(i&&!e.isReadOnly())if(n&&n.length&&window.FileReader&&window.File)for(var r=n.length,s=Array(r),a=0,l=function(t,n){if(!e.options.allowDropFileTypes||-1!=q(e.options.allowDropFileTypes,t.type)){var o=new FileReader;o.onload=Yn(e,function(){var t=o.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(t)&&(t=""),s[n]=t,++a==r){var l={from:i=ae(e.doc,i),to:i,text:e.doc.splitLines(s.join(e.doc.lineSeparator())),origin:"paste"};ss(e.doc,l),Gr(e.doc,kr(i,wr(l)))}}),o.readAsText(t)}},c=0;c<r;++c)l(n[c],c);else{if(e.state.draggingText&&e.doc.sel.contains(i)>-1)return e.state.draggingText(t),void setTimeout(function(){return e.display.input.focus()},20);try{var u=t.dataTransfer.getData("Text");if(u){var h;if(e.state.draggingText&&!e.state.draggingText.copy&&(h=e.listSelections()),Zr(e.doc,kr(i,i)),h)for(var d=0;d<h.length;++d)us(e.doc,"",h[d].anchor,h[d].head,"drag");e.replaceSelection(u,"around","paste"),e.display.input.focus()}}catch(t){}}}}function Ls(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function Fs(t){if(document.getElementsByClassName){for(var e=document.getElementsByClassName("CodeMirror"),i=[],n=0;n<e.length;n++){var r=e[n].CodeMirror;r&&i.push(r)}i.length&&i[0].operation(function(){for(var e=0;e<i.length;e++)t(i[e])})}}var Ds=!1;function Es(){var t;Ds||(dt(window,"resize",function(){null==t&&(t=setTimeout(function(){t=null,Fs(Os)},100))}),dt(window,"blur",function(){return Fs(Sn)}),Ds=!0)}function Os(t){var e=t.display;e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,e.scrollbarsClipped=!1,t.setSize()}for(var Is={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ns=0;Ns<10;Ns++)Is[Ns+48]=Is[Ns+96]=String(Ns);for(var zs=65;zs<=90;zs++)Is[zs]=String.fromCharCode(zs);for(var Ps=1;Ps<=12;Ps++)Is[Ps+111]=Is[Ps+63235]="F"+Ps;var Rs={};function Bs(t){var e,i,n,r,s=t.split(/-(?!$)/);t=s[s.length-1];for(var o=0;o<s.length-1;o++){var a=s[o];if(/^(cmd|meta|m)$/i.test(a))r=!0;else if(/^a(lt)?$/i.test(a))e=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else{if(!/^s(hift)?$/i.test(a))throw new Error("Unrecognized modifier name: "+a);n=!0}}return e&&(t="Alt-"+t),i&&(t="Ctrl-"+t),r&&(t="Cmd-"+t),n&&(t="Shift-"+t),t}function qs(t){var e={};for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];if(/^(name|fallthrough|(de|at)tach)$/.test(i))continue;if("..."==n){delete t[i];continue}for(var r=Z(i.split(" "),Bs),s=0;s<r.length;s++){var o=void 0,a=void 0;s==r.length-1?(a=r.join(" "),o=n):(a=r.slice(0,s+1).join(" "),o="...");var l=e[a];if(l){if(l!=o)throw new Error("Inconsistent bindings for "+a)}else e[a]=o}delete t[i]}for(var c in e)t[c]=e[c];return t}function $s(t,e,i,n){var r=(e=Ks(e)).call?e.call(t,n):e[t];if(!1===r)return"nothing";if("..."===r)return"multi";if(null!=r&&i(r))return"handled";if(e.fallthrough){if("[object Array]"!=Object.prototype.toString.call(e.fallthrough))return $s(t,e.fallthrough,i,n);for(var s=0;s<e.fallthrough.length;s++){var o=$s(t,e.fallthrough[s],i,n);if(o)return o}}}function Hs(t){var e="string"==typeof t?t:Is[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function Ws(t,e,i){var n=t;return e.altKey&&"Alt"!=n&&(t="Alt-"+t),(w?e.metaKey:e.ctrlKey)&&"Ctrl"!=n&&(t="Ctrl-"+t),(w?e.ctrlKey:e.metaKey)&&"Cmd"!=n&&(t="Cmd-"+t),!i&&e.shiftKey&&"Shift"!=n&&(t="Shift-"+t),t}function js(t,e){if(h&&34==t.keyCode&&t.char)return!1;var i=Is[t.keyCode];return null!=i&&!t.altGraphKey&&(3==t.keyCode&&t.code&&(i=t.code),Ws(i,t,e))}function Ks(t){return"string"==typeof t?Rs[t]:t}function Us(t,e){for(var i=t.doc.sel.ranges,n=[],r=0;r<i.length;r++){for(var s=e(i[r]);n.length&&ee(s.from,X(n).to)<=0;){var o=n.pop();if(ee(o.from,s.from)<0){s.from=o.from;break}}n.push(s)}Zn(t,function(){for(var e=n.length-1;e>=0;e--)us(t.doc,"",n[e].from,n[e].to,"+delete");Ln(t)})}function Vs(t,e,i){var n=st(t.text,e+i,i);return n<0||n>t.text.length?null:n}function Gs(t,e,i){var n=Vs(t,e.ch,i);return null==n?null:new te(e.line,n,i<0?"after":"before")}function Xs(t,e,i,n,r){if(t){var s=ut(i,e.doc.direction);if(s){var o,a=r<0?X(s):s[0],l=r<0==(1==a.level),c=l?"after":"before";if(a.level>0||"rtl"==e.doc.direction){var u=Di(e,i);o=r<0?i.text.length-1:0;var h=Ei(e,u,o).top;o=ot(function(t){return Ei(e,u,t).top==h},r<0==(1==a.level)?a.from:a.to-1,o),"before"==c&&(o=Vs(i,o,1))}else o=r<0?a.to:a.from;return new te(n,o,c)}}return new te(n,r<0?i.text.length:0,r<0?"before":"after")}Rs.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Rs.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Rs.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Rs.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Rs.default=v?Rs.macDefault:Rs.pcDefault;var Zs={selectAll:ns,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),W)},killLine:function(t){return Us(t,function(e){if(e.empty()){var i=Ut(t.doc,e.head.line).text.length;return e.head.ch==i&&e.head.line<t.lastLine()?{from:e.head,to:te(e.head.line+1,0)}:{from:e.head,to:te(e.head.line,i)}}return{from:e.from(),to:e.to()}})},deleteLine:function(t){return Us(t,function(e){return{from:te(e.from().line,0),to:ae(t.doc,te(e.to().line+1,0))}})},delLineLeft:function(t){return Us(t,function(t){return{from:te(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(t){return Us(t,function(e){var i=t.charCoords(e.head,"div").top+5,n=t.coordsChar({left:0,top:i},"div");return{from:n,to:e.from()}})},delWrappedLineRight:function(t){return Us(t,function(e){var i=t.charCoords(e.head,"div").top+5,n=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:i},"div");return{from:e.from(),to:n}})},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(te(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(te(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy(function(e){return Ys(t,e.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy(function(e){return Js(t,e.head)},{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy(function(e){return function(t,e){var i=Ut(t.doc,e),n=function(t){for(var e;e=Ne(t);)t=e.find(1,!0).line;return t}(i);return n!=i&&(e=Zt(n)),Xs(!0,t,i,e,-1)}(t,e.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy(function(e){var i=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:i},"div")},K)},goLineLeft:function(t){return t.extendSelectionsBy(function(e){var i=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:i},"div")},K)},goLineLeftSmart:function(t){return t.extendSelectionsBy(function(e){var i=t.cursorCoords(e.head,"div").top+5,n=t.coordsChar({left:0,top:i},"div");return n.ch<t.getLine(n.line).search(/\S/)?Js(t,e.head):n},K)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"char")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],i=t.listSelections(),n=t.options.tabSize,r=0;r<i.length;r++){var s=i[r].from(),o=R(t.getLine(s.line),s.ch,n);e.push(G(n-o%n))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return Zn(t,function(){for(var e=t.listSelections(),i=[],n=0;n<e.length;n++)if(e[n].empty()){var r=e[n].head,s=Ut(t.doc,r.line).text;if(s)if(r.ch==s.length&&(r=new te(r.line,r.ch-1)),r.ch>0)r=new te(r.line,r.ch+1),t.replaceRange(s.charAt(r.ch-1)+s.charAt(r.ch-2),te(r.line,r.ch-2),r,"+transpose");else if(r.line>t.doc.first){var o=Ut(t.doc,r.line-1).text;o&&(r=new te(r.line,1),t.replaceRange(s.charAt(0)+t.doc.lineSeparator()+o.charAt(o.length-1),te(r.line-1,o.length-1),r,"+transpose"))}i.push(new br(r,r))}t.setSelections(i)})},newlineAndIndent:function(t){return Zn(t,function(){for(var e=t.listSelections(),i=e.length-1;i>=0;i--)t.replaceRange(t.doc.lineSeparator(),e[i].anchor,e[i].head,"+input");e=t.listSelections();for(var n=0;n<e.length;n++)t.indentLine(e[n].from().line,null,!0);Ln(t)})},openLine:function(t){return t.replaceSelection("\n","start")},toggleOverwrite:function(t){return t.toggleOverwrite()}};function Ys(t,e){var i=Ut(t.doc,e),n=Re(i);return n!=i&&(e=Zt(n)),Xs(!0,t,n,e,1)}function Js(t,e){var i=Ys(t,e.line),n=Ut(t.doc,i.line),r=ut(n,t.doc.direction);if(!r||0==r[0].level){var s=Math.max(0,n.text.search(/\S/)),o=e.line==i.line&&e.ch<=s&&e.ch;return te(i.line,o?0:s,i.sticky)}return i}function Qs(t,e,i){if("string"==typeof e&&!(e=Zs[e]))return!1;t.display.input.ensurePolled();var n=t.display.shift,r=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),i&&(t.display.shift=!1),r=e(t)!=H}finally{t.display.shift=n,t.state.suppressEdits=!1}return r}var to=new B;function eo(t,e,i,n){var r=t.state.keySeq;if(r){if(Hs(e))return"handled";if(/\'$/.test(e)?t.state.keySeq=null:to.set(50,function(){t.state.keySeq==r&&(t.state.keySeq=null,t.display.input.reset())}),io(t,r+" "+e,i,n))return!0}return io(t,e,i,n)}function io(t,e,i,n){var r=function(t,e,i){for(var n=0;n<t.state.keyMaps.length;n++){var r=$s(e,t.state.keyMaps[n],i,t);if(r)return r}return t.options.extraKeys&&$s(e,t.options.extraKeys,i,t)||$s(e,t.options.keyMap,i,t)}(t,e,n);return"multi"==r&&(t.state.keySeq=e),"handled"==r&&ai(t,"keyHandled",t,e,i),"handled"!=r&&"multi"!=r||(xt(i),bn(t)),!!r}function no(t,e){var i=js(e,!0);return!!i&&(e.shiftKey&&!t.state.keySeq?eo(t,"Shift-"+i,e,function(e){return Qs(t,e,!0)})||eo(t,i,e,function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return Qs(t,e)}):eo(t,i,e,function(e){return Qs(t,e)}))}var ro=null;function so(t){var e=this;if(e.curOp.focus=E(),!gt(e,t)){o&&a<11&&27==t.keyCode&&(t.returnValue=!1);var i=t.keyCode;e.display.shift=16==i||t.shiftKey;var n=no(e,t);h&&(ro=n?i:null,!n&&88==i&&!It&&(v?t.metaKey:t.ctrlKey)&&e.replaceSelection("",null,"cut")),18!=i||/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)||function(t){var e=t.display.lineDiv;function i(t){18!=t.keyCode&&t.altKey||(T(e,"CodeMirror-crosshair"),ft(document,"keyup",i),ft(document,"mouseover",i))}O(e,"CodeMirror-crosshair"),dt(document,"keyup",i),dt(document,"mouseover",i)}(e)}}function oo(t){16==t.keyCode&&(this.doc.sel.shift=!1),gt(this,t)}function ao(t){var e=this;if(!(ki(e.display,t)||gt(e,t)||t.ctrlKey&&!t.altKey||v&&t.metaKey)){var i=t.keyCode,n=t.charCode;if(h&&i==ro)return ro=null,void xt(t);if(!h||t.which&&!(t.which<10)||!no(e,t)){var r=String.fromCharCode(null==n?i:n);"\b"!=r&&(function(t,e,i){return eo(t,"'"+i+"'",e,function(e){return Qs(t,e,!0)})}(e,t,r)||e.display.input.onKeyPress(t))}}}var lo,co,uo=function(t,e,i){this.time=t,this.pos=e,this.button=i};function ho(t){var e=this,i=e.display;if(!(gt(e,t)||i.activeTouch&&i.input.supportsTouch()))if(i.input.ensurePolled(),i.shift=t.shiftKey,ki(i,t))l||(i.scroller.draggable=!1,setTimeout(function(){return i.scroller.draggable=!0},100));else if(!mo(e,t)){var n=an(e,t),r=At(t),s=n?function(t,e){var i=+new Date;return co&&co.compare(i,t,e)?(lo=co=null,"triple"):lo&&lo.compare(i,t,e)?(co=new uo(i,t,e),lo=null,"double"):(lo=new uo(i,t,e),co=null,"single")}(n,r):"single";window.focus(),1==r&&e.state.selectingText&&e.state.selectingText(t),n&&function(t,e,i,n,r){var s="Click";return"double"==n?s="Double"+s:"triple"==n&&(s="Triple"+s),eo(t,Ws(s=(1==e?"Left":2==e?"Middle":"Right")+s,r),r,function(e){if("string"==typeof e&&(e=Zs[e]),!e)return!1;var n=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),n=e(t,i)!=H}finally{t.state.suppressEdits=!1}return n})}(e,r,n,s,t)||(1==r?n?function(t,e,i,n){o?setTimeout(z(xn,t),0):t.curOp.focus=E();var r,s=function(t,e,i){var n=t.getOption("configureMouse"),r=n?n(t,e,i):{};if(null==r.unit){var s=b?i.shiftKey&&i.metaKey:i.altKey;r.unit=s?"rectangle":"single"==e?"char":"double"==e?"word":"line"}return(null==r.extend||t.doc.extend)&&(r.extend=t.doc.extend||i.shiftKey),null==r.addNew&&(r.addNew=v?i.metaKey:i.ctrlKey),null==r.moveOnDrag&&(r.moveOnDrag=!(v?i.altKey:i.ctrlKey)),r}(t,i,n),c=t.doc.sel;t.options.dragDrop&&Mt&&!t.isReadOnly()&&"single"==i&&(r=c.contains(e))>-1&&(ee((r=c.ranges[r]).from(),e)<0||e.xRel>0)&&(ee(r.to(),e)>0||e.xRel<0)?function(t,e,i,n){var r=t.display,s=!1,c=Yn(t,function(e){l&&(r.scroller.draggable=!1),t.state.draggingText=!1,ft(r.wrapper.ownerDocument,"mouseup",c),ft(r.wrapper.ownerDocument,"mousemove",u),ft(r.scroller,"dragstart",h),ft(r.scroller,"drop",c),s||(xt(e),n.addNew||jr(t.doc,i,null,null,n.extend),l||o&&9==a?setTimeout(function(){r.wrapper.ownerDocument.body.focus(),r.input.focus()},20):r.input.focus())}),u=function(t){s=s||Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)>=10},h=function(){return s=!0};l&&(r.scroller.draggable=!0),t.state.draggingText=c,c.copy=!n.moveOnDrag,r.scroller.dragDrop&&r.scroller.dragDrop(),dt(r.wrapper.ownerDocument,"mouseup",c),dt(r.wrapper.ownerDocument,"mousemove",u),dt(r.scroller,"dragstart",h),dt(r.scroller,"drop",c),kn(t),setTimeout(function(){return r.input.focus()},20)}(t,n,e,s):function(t,e,i,n){var r=t.display,s=t.doc;xt(e);var o,a,l=s.sel,c=l.ranges;if(n.addNew&&!n.extend?(a=s.sel.contains(i),o=a>-1?c[a]:new br(i,i)):(o=s.sel.primary(),a=s.sel.primIndex),"rectangle"==n.unit)n.addNew||(o=new br(i,i)),i=an(t,e,!0,!0),a=-1;else{var u=po(t,i,n.unit);o=n.extend?Wr(o,u.anchor,u.head,n.extend):u}n.addNew?-1==a?(a=c.length,Xr(s,xr(t,c.concat([o]),a),{scroll:!1,origin:"*mouse"})):c.length>1&&c[a].empty()&&"char"==n.unit&&!n.extend?(Xr(s,xr(t,c.slice(0,a).concat(c.slice(a+1)),0),{scroll:!1,origin:"*mouse"}),l=s.sel):Ur(s,a,o,j):(a=0,Xr(s,new vr([o],0),j),l=s.sel);var h=i;function d(e){if(0!=ee(h,e))if(h=e,"rectangle"==n.unit){for(var r=[],c=t.options.tabSize,u=R(Ut(s,i.line).text,i.ch,c),d=R(Ut(s,e.line).text,e.ch,c),p=Math.min(u,d),f=Math.max(u,d),m=Math.min(i.line,e.line),g=Math.min(t.lastLine(),Math.max(i.line,e.line));m<=g;m++){var y=Ut(s,m).text,v=U(y,p,c);p==f?r.push(new br(te(m,v),te(m,v))):y.length>v&&r.push(new br(te(m,v),te(m,U(y,f,c))))}r.length||r.push(new br(i,i)),Xr(s,xr(t,l.ranges.slice(0,a).concat(r),a),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else{var b,x=o,k=po(t,e,n.unit),w=x.anchor;ee(k.anchor,w)>0?(b=k.head,w=se(x.from(),k.anchor)):(b=k.anchor,w=re(x.to(),k.head));var S=l.ranges.slice(0);S[a]=function(t,e){var i=e.anchor,n=e.head,r=Ut(t.doc,i.line);if(0==ee(i,n)&&i.sticky==n.sticky)return e;var s=ut(r);if(!s)return e;var o=lt(s,i.ch,i.sticky),a=s[o];if(a.from!=i.ch&&a.to!=i.ch)return e;var l,c=o+(a.from==i.ch==(1!=a.level)?0:1);if(0==c||c==s.length)return e;if(n.line!=i.line)l=(n.line-i.line)*("ltr"==t.doc.direction?1:-1)>0;else{var u=lt(s,n.ch,n.sticky),h=u-o||(n.ch-i.ch)*(1==a.level?-1:1);l=u==c-1||u==c?h<0:h>0}var d=s[c+(l?-1:0)],p=l==(1==d.level),f=p?d.from:d.to,m=p?"after":"before";return i.ch==f&&i.sticky==m?e:new br(new te(i.line,f,m),n)}(t,new br(ae(s,w),b)),Xr(s,xr(t,S,a),j)}}var p=r.wrapper.getBoundingClientRect(),f=0;function m(e){t.state.selectingText=!1,f=1/0,e&&(xt(e),r.input.focus()),ft(r.wrapper.ownerDocument,"mousemove",g),ft(r.wrapper.ownerDocument,"mouseup",y),s.history.lastSelOrigin=null}var g=Yn(t,function(e){0!==e.buttons&&At(e)?function e(i){var o=++f,a=an(t,i,!0,"rectangle"==n.unit);if(a)if(0!=ee(a,h)){t.curOp.focus=E(),d(a);var l=Tn(r,s);(a.line>=l.to||a.line<l.from)&&setTimeout(Yn(t,function(){f==o&&e(i)}),150)}else{var c=i.clientY<p.top?-20:i.clientY>p.bottom?20:0;c&&setTimeout(Yn(t,function(){f==o&&(r.scroller.scrollTop+=c,e(i))}),50)}}(e):m(e)}),y=Yn(t,m);t.state.selectingText=y,dt(r.wrapper.ownerDocument,"mousemove",g),dt(r.wrapper.ownerDocument,"mouseup",y)}(t,n,e,s)}(e,n,s,t):Ct(t)==i.scroller&&xt(t):2==r?(n&&jr(e.doc,n),setTimeout(function(){return i.input.focus()},20)):3==r&&(S?e.display.input.onContextMenu(t):kn(e)))}}function po(t,e,i){if("char"==i)return new br(e,e);if("word"==i)return t.findWordAt(e);if("line"==i)return new br(te(e.line,0),ae(t.doc,te(e.line+1,0)));var n=i(t,e);return new br(n.from,n.to)}function fo(t,e,i,n){var r,s;if(e.touches)r=e.touches[0].clientX,s=e.touches[0].clientY;else try{r=e.clientX,s=e.clientY}catch(e){return!1}if(r>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;n&&xt(e);var o=t.display,a=o.lineDiv.getBoundingClientRect();if(s>a.bottom||!vt(t,i))return wt(e);s-=a.top-o.viewOffset;for(var l=0;l<t.display.gutterSpecs.length;++l){var c=o.gutters.childNodes[l];if(c&&c.getBoundingClientRect().right>=r){var u=Yt(t.doc,s),h=t.display.gutterSpecs[l];return mt(t,i,t,u,h.className,e),wt(e)}}}function mo(t,e){return fo(t,e,"gutterClick",!0)}function go(t,e){ki(t.display,e)||function(t,e){return!!vt(t,"gutterContextMenu")&&fo(t,e,"gutterContextMenu",!1)}(t,e)||gt(t,e,"contextmenu")||S||t.display.input.onContextMenu(e)}function yo(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Bi(t)}uo.prototype.compare=function(t,e,i){return this.time+400>t&&0==ee(e,this.pos)&&i==this.button};var vo={toString:function(){return"CodeMirror.Init"}},bo={},xo={};function ko(t,e,i){var n=i&&i!=vo;if(!e!=!n){var r=t.display.dragFunctions,s=e?dt:ft;s(t.display.scroller,"dragstart",r.start),s(t.display.scroller,"dragenter",r.enter),s(t.display.scroller,"dragover",r.over),s(t.display.scroller,"dragleave",r.leave),s(t.display.scroller,"drop",r.drop)}}function wo(t){t.options.lineWrapping?(O(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(T(t.display.wrapper,"CodeMirror-wrap"),Ke(t)),on(t),cn(t),Bi(t),setTimeout(function(){return Bn(t)},100)}function So(t,e){var n=this;if(!(this instanceof So))return new So(t,e);this.options=e=e?P(e):{},P(bo,e,!1);var r=e.value;"string"==typeof r?r=new Ts(r,e.mode,null,e.lineSeparator,e.direction):e.mode&&(r.modeOption=e.mode),this.doc=r;var s=new So.inputStyles[e.inputStyle](this),c=this.display=new function(t,e,n,r){var s=this;this.input=n,s.scrollbarFiller=L("div",null,"CodeMirror-scrollbar-filler"),s.scrollbarFiller.setAttribute("cm-not-content","true"),s.gutterFiller=L("div",null,"CodeMirror-gutter-filler"),s.gutterFiller.setAttribute("cm-not-content","true"),s.lineDiv=F("div",null,"CodeMirror-code"),s.selectionDiv=L("div",null,null,"position: relative; z-index: 1"),s.cursorDiv=L("div",null,"CodeMirror-cursors"),s.measure=L("div",null,"CodeMirror-measure"),s.lineMeasure=L("div",null,"CodeMirror-measure"),s.lineSpace=F("div",[s.measure,s.lineMeasure,s.selectionDiv,s.cursorDiv,s.lineDiv],null,"position: relative; outline: none");var c=F("div",[s.lineSpace],"CodeMirror-lines");s.mover=L("div",[c],null,"position: relative"),s.sizer=L("div",[s.mover],"CodeMirror-sizer"),s.sizerWidth=null,s.heightForcer=L("div",null,null,"position: absolute; height: "+$+"px; width: 1px;"),s.gutters=L("div",null,"CodeMirror-gutters"),s.lineGutter=null,s.scroller=L("div",[s.sizer,s.heightForcer,s.gutters],"CodeMirror-scroll"),s.scroller.setAttribute("tabIndex","-1"),s.wrapper=L("div",[s.scrollbarFiller,s.gutterFiller,s.scroller],"CodeMirror"),o&&a<8&&(s.gutters.style.zIndex=-1,s.scroller.style.paddingRight=0),l||i&&y||(s.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(s.wrapper):t(s.wrapper)),s.viewFrom=s.viewTo=e.first,s.reportedViewFrom=s.reportedViewTo=e.first,s.view=[],s.renderedView=null,s.externalMeasured=null,s.viewOffset=0,s.lastWrapHeight=s.lastWrapWidth=0,s.updateLineNumbers=null,s.nativeBarWidth=s.barHeight=s.barWidth=0,s.scrollbarsClipped=!1,s.lineNumWidth=s.lineNumInnerWidth=s.lineNumChars=null,s.alignWidgets=!1,s.cachedCharWidth=s.cachedTextHeight=s.cachedPaddingH=null,s.maxLine=null,s.maxLineLength=0,s.maxLineChanged=!1,s.wheelDX=s.wheelDY=s.wheelStartX=s.wheelStartY=null,s.shift=!1,s.selForContextMenu=null,s.activeTouch=null,s.gutterSpecs=ur(r.gutters,r.lineNumbers),hr(s),n.init(s)}(t,r,s,e);for(var u in c.wrapper.CodeMirror=this,yo(this),e.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Hn(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new B,keySeq:null,specialChars:null},e.autofocus&&!y&&c.input.focus(),o&&a<11&&setTimeout(function(){return n.display.input.reset(!0)},20),function(t){var e=t.display;dt(e.scroller,"mousedown",Yn(t,ho)),dt(e.scroller,"dblclick",o&&a<11?Yn(t,function(e){if(!gt(t,e)){var i=an(t,e);if(i&&!mo(t,e)&&!ki(t.display,e)){xt(e);var n=t.findWordAt(i);jr(t.doc,n.anchor,n.head)}}}):function(e){return gt(t,e)||xt(e)}),dt(e.scroller,"contextmenu",function(e){return go(t,e)});var i,n={end:0};function r(){e.activeTouch&&(i=setTimeout(function(){return e.activeTouch=null},1e3),(n=e.activeTouch).end=+new Date)}function s(t,e){if(null==e.left)return!0;var i=e.left-t.left,n=e.top-t.top;return i*i+n*n>400}dt(e.scroller,"touchstart",function(r){if(!gt(t,r)&&!function(t){if(1!=t.touches.length)return!1;var e=t.touches[0];return e.radiusX<=1&&e.radiusY<=1}(r)&&!mo(t,r)){e.input.ensurePolled(),clearTimeout(i);var s=+new Date;e.activeTouch={start:s,moved:!1,prev:s-n.end<=300?n:null},1==r.touches.length&&(e.activeTouch.left=r.touches[0].pageX,e.activeTouch.top=r.touches[0].pageY)}}),dt(e.scroller,"touchmove",function(){e.activeTouch&&(e.activeTouch.moved=!0)}),dt(e.scroller,"touchend",function(i){var n=e.activeTouch;if(n&&!ki(e,i)&&null!=n.left&&!n.moved&&new Date-n.start<300){var o,a=t.coordsChar(e.activeTouch,"page");o=!n.prev||s(n,n.prev)?new br(a,a):!n.prev.prev||s(n,n.prev.prev)?t.findWordAt(a):new br(te(a.line,0),ae(t.doc,te(a.line+1,0))),t.setSelection(o.anchor,o.head),t.focus(),xt(i)}r()}),dt(e.scroller,"touchcancel",r),dt(e.scroller,"scroll",function(){e.scroller.clientHeight&&(On(t,e.scroller.scrollTop),Nn(t,e.scroller.scrollLeft,!0),mt(t,"scroll",t))}),dt(e.scroller,"mousewheel",function(e){return yr(t,e)}),dt(e.scroller,"DOMMouseScroll",function(e){return yr(t,e)}),dt(e.wrapper,"scroll",function(){return e.wrapper.scrollTop=e.wrapper.scrollLeft=0}),e.dragFunctions={enter:function(e){gt(t,e)||St(e)},over:function(e){gt(t,e)||(function(t,e){var i=an(t,e);if(i){var n=document.createDocumentFragment();gn(t,i,n),t.display.dragCursor||(t.display.dragCursor=L("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),M(t.display.dragCursor,n)}}(t,e),St(e))},start:function(e){return function(t,e){if(o&&(!t.state.draggingText||+new Date-_s<100))St(e);else if(!gt(t,e)&&!ki(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setDragImage&&!d)){var i=L("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",h&&(i.width=i.height=1,t.display.wrapper.appendChild(i),i._top=i.offsetTop),e.dataTransfer.setDragImage(i,0,0),h&&i.parentNode.removeChild(i)}}(t,e)},drop:Yn(t,Ms),leave:function(e){gt(t,e)||Ls(t)}};var l=e.input.getField();dt(l,"keyup",function(e){return oo.call(t,e)}),dt(l,"keydown",Yn(t,so)),dt(l,"keypress",Yn(t,ao)),dt(l,"focus",function(e){return wn(t,e)}),dt(l,"blur",function(e){return Sn(t,e)})}(this),Es(),jn(this),this.curOp.forceUpdate=!0,Dr(this,r),e.autofocus&&!y||this.hasFocus()?setTimeout(z(wn,this),20):Sn(this),xo)xo.hasOwnProperty(u)&&xo[u](n,e[u],vo);cr(this),e.finishInit&&e.finishInit(this);for(var p=0;p<Co.length;++p)Co[p](n);Kn(this),l&&e.lineWrapping&&"optimizelegibility"==getComputedStyle(c.lineDiv).textRendering&&(c.lineDiv.style.textRendering="auto")}So.defaults=bo,So.optionHandlers=xo;var Co=[];function Ao(t,e,i,n){var r,s=t.doc;null==i&&(i="add"),"smart"==i&&(s.mode.indent?r=pe(t,e).state:i="prev");var o=t.options.tabSize,a=Ut(s,e),l=R(a.text,null,o);a.stateAfter&&(a.stateAfter=null);var c,u=a.text.match(/^\s*/)[0];if(n||/\S/.test(a.text)){if("smart"==i&&((c=s.mode.indent(r,a.text.slice(u.length),a.text))==H||c>150)){if(!n)return;i="prev"}}else c=0,i="not";"prev"==i?c=e>s.first?R(Ut(s,e-1).text,null,o):0:"add"==i?c=l+t.options.indentUnit:"subtract"==i?c=l-t.options.indentUnit:"number"==typeof i&&(c=l+i),c=Math.max(0,c);var h="",d=0;if(t.options.indentWithTabs)for(var p=Math.floor(c/o);p;--p)d+=o,h+="\t";if(d<c&&(h+=G(c-d)),h!=u)return us(s,h,te(e,0),te(e,u.length),"+input"),a.stateAfter=null,!0;for(var f=0;f<s.sel.ranges.length;f++){var m=s.sel.ranges[f];if(m.head.line==e&&m.head.ch<u.length){var g=te(e,u.length);Ur(s,f,new br(g,g));break}}}So.defineInitHook=function(t){return Co.push(t)};var To=null;function _o(t){To=t}function Mo(t,e,i,n,r){var s=t.doc;t.display.shift=!1,n||(n=s.sel);var o=+new Date-200,a="paste"==r||t.state.pasteIncoming>o,l=Et(e),c=null;if(a&&n.ranges.length>1)if(To&&To.text.join("\n")==e){if(n.ranges.length%To.text.length==0){c=[];for(var u=0;u<To.text.length;u++)c.push(s.splitLines(To.text[u]))}}else l.length==n.ranges.length&&t.options.pasteLinesPerSelection&&(c=Z(l,function(t){return[t]}));for(var h=t.curOp.updateInput,d=n.ranges.length-1;d>=0;d--){var p=n.ranges[d],f=p.from(),m=p.to();p.empty()&&(i&&i>0?f=te(f.line,f.ch-i):t.state.overwrite&&!a?m=te(m.line,Math.min(Ut(s,m.line).text.length,m.ch+X(l).length)):a&&To&&To.lineWise&&To.text.join("\n")==e&&(f=m=te(f.line,0)));var g={from:f,to:m,text:c?c[d%c.length]:l,origin:r||(a?"paste":t.state.cutIncoming>o?"cut":"+input")};ss(t.doc,g),ai(t,"inputRead",t,g)}e&&!a&&Fo(t,e),Ln(t),t.curOp.updateInput<2&&(t.curOp.updateInput=h),t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=-1}function Lo(t,e){var i=t.clipboardData&&t.clipboardData.getData("Text");if(i)return t.preventDefault(),e.isReadOnly()||e.options.disableInput||Zn(e,function(){return Mo(e,i,0,null,"paste")}),!0}function Fo(t,e){if(t.options.electricChars&&t.options.smartIndent)for(var i=t.doc.sel,n=i.ranges.length-1;n>=0;n--){var r=i.ranges[n];if(!(r.head.ch>100||n&&i.ranges[n-1].head.line==r.head.line)){var s=t.getModeAt(r.head),o=!1;if(s.electricChars){for(var a=0;a<s.electricChars.length;a++)if(e.indexOf(s.electricChars.charAt(a))>-1){o=Ao(t,r.head.line,"smart");break}}else s.electricInput&&s.electricInput.test(Ut(t.doc,r.head.line).text.slice(0,r.head.ch))&&(o=Ao(t,r.head.line,"smart"));o&&ai(t,"electricInput",t,r.head.line)}}}function Do(t){for(var e=[],i=[],n=0;n<t.doc.sel.ranges.length;n++){var r=t.doc.sel.ranges[n].head.line,s={anchor:te(r,0),head:te(r+1,0)};i.push(s),e.push(t.getRange(s.anchor,s.head))}return{text:e,ranges:i}}function Eo(t,e,i,n){t.setAttribute("autocorrect",i?"":"off"),t.setAttribute("autocapitalize",n?"":"off"),t.setAttribute("spellcheck",!!e)}function Oo(){var t=L("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),e=L("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return l?t.style.width="1000px":t.setAttribute("wrap","off"),m&&(t.style.border="1px solid black"),Eo(t),e}function Io(t,e,i,n,r){var s=e,o=i,a=Ut(t,e.line);function l(n){var s,o;if(null==(s=r?function(t,e,i,n){var r=ut(e,t.doc.direction);if(!r)return Gs(e,i,n);i.ch>=e.text.length?(i.ch=e.text.length,i.sticky="before"):i.ch<=0&&(i.ch=0,i.sticky="after");var s=lt(r,i.ch,i.sticky),o=r[s];if("ltr"==t.doc.direction&&o.level%2==0&&(n>0?o.to>i.ch:o.from<i.ch))return Gs(e,i,n);var a,l=function(t,i){return Vs(e,t instanceof te?t.ch:t,i)},c=function(i){return t.options.lineWrapping?(a=a||Di(t,e),Yi(t,e,a,i)):{begin:0,end:e.text.length}},u=c("before"==i.sticky?l(i,-1):i.ch);if("rtl"==t.doc.direction||1==o.level){var h=1==o.level==n<0,d=l(i,h?1:-1);if(null!=d&&(h?d<=o.to&&d<=u.end:d>=o.from&&d>=u.begin)){var p=h?"before":"after";return new te(i.line,d,p)}}var f=function(t,e,n){for(var s=function(t,e){return e?new te(i.line,l(t,1),"before"):new te(i.line,t,"after")};t>=0&&t<r.length;t+=e){var o=r[t],a=e>0==(1!=o.level),c=a?n.begin:l(n.end,-1);if(o.from<=c&&c<o.to)return s(c,a);if(c=a?o.from:l(o.to,-1),n.begin<=c&&c<n.end)return s(c,a)}},m=f(s+n,n,u);if(m)return m;var g=n>0?u.end:l(u.begin,-1);return null==g||n>0&&g==e.text.length||!(m=f(n>0?0:r.length-1,n,c(g)))?null:m}(t.cm,a,e,i):Gs(a,e,i))){if(n||((o=e.line+i)<t.first||o>=t.first+t.size||(e=new te(o,e.ch,e.sticky),!(a=Ut(t,o)))))return!1;e=Xs(r,t.cm,a,e.line,i)}else e=s;return!0}if("char"==n)l();else if("column"==n)l(!0);else if("word"==n||"group"==n)for(var c=null,u="group"==n,h=t.cm&&t.cm.getHelper(e,"wordChars"),d=!0;!(i<0)||l(!d);d=!1){var p=a.text.charAt(e.ch)||"\n",f=et(p,h)?"w":u&&"\n"==p?"n":!u||/\s/.test(p)?null:"p";if(!u||d||f||(f="s"),c&&c!=f){i<0&&(i=1,l(),e.sticky="after");break}if(f&&(c=f),i>0&&!l(!d))break}var m=es(t,e,s,o,!0);return ie(s,m)&&(m.hitSide=!0),m}function No(t,e,i,n){var r,s,o=t.doc,a=e.left;if("page"==n){var l=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),c=Math.max(l-.5*tn(t.display),3);r=(i>0?e.bottom:e.top)+i*c}else"line"==n&&(r=i>0?e.bottom+3:e.top-3);for(;(s=Xi(t,a,r)).outside;){if(i<0?r<=0:r>=o.height){s.hitSide=!0;break}r+=5*i}return s}var zo=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new B,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Po(t,e){var i=Fi(t,e.line);if(!i||i.hidden)return null;var n=Ut(t.doc,e.line),r=Mi(i,n,e.line),s=ut(n,t.doc.direction),o="left";if(s){var a=lt(s,e.ch);o=a%2?"right":"left"}var l=Ni(r.map,e.ch,o);return l.offset="right"==l.collapse?l.end:l.start,l}function Ro(t,e){return e&&(t.bad=!0),t}function Bo(t,e,i){var n;if(e==t.display.lineDiv){if(!(n=t.display.lineDiv.childNodes[i]))return Ro(t.clipPos(te(t.display.viewTo-1)),!0);e=null,i=0}else for(n=e;;n=n.parentNode){if(!n||n==t.display.lineDiv)return null;if(n.parentNode&&n.parentNode==t.display.lineDiv)break}for(var r=0;r<t.display.view.length;r++){var s=t.display.view[r];if(s.node==n)return qo(s,e,i)}}function qo(t,e,i){var n=t.text.firstChild,r=!1;if(!e||!D(n,e))return Ro(te(Zt(t.line),0),!0);if(e==n&&(r=!0,e=n.childNodes[i],i=0,!e)){var s=t.rest?X(t.rest):t.line;return Ro(te(Zt(s),s.text.length),r)}var o=3==e.nodeType?e:null,a=e;for(o||1!=e.childNodes.length||3!=e.firstChild.nodeType||(o=e.firstChild,i&&(i=o.nodeValue.length));a.parentNode!=n;)a=a.parentNode;var l=t.measure,c=l.maps;function u(e,i,n){for(var r=-1;r<(c?c.length:0);r++)for(var s=r<0?l.map:c[r],o=0;o<s.length;o+=3){var a=s[o+2];if(a==e||a==i){var u=Zt(r<0?t.line:t.rest[r]),h=s[o]+n;return(n<0||a!=e)&&(h=s[o+(n?1:0)]),te(u,h)}}}var h=u(o,a,i);if(h)return Ro(h,r);for(var d=a.nextSibling,p=o?o.nodeValue.length-i:0;d;d=d.nextSibling){if(h=u(d,d.firstChild,0))return Ro(te(h.line,h.ch-p),r);p+=d.textContent.length}for(var f=a.previousSibling,m=i;f;f=f.previousSibling){if(h=u(f,f.firstChild,-1))return Ro(te(h.line,h.ch+m),r);m+=f.textContent.length}}zo.prototype.init=function(t){var e=this,i=this,n=i.cm,r=i.div=t.lineDiv;function s(t){if(!gt(n,t)){if(n.somethingSelected())_o({lineWise:!1,text:n.getSelections()}),"cut"==t.type&&n.replaceSelection("",null,"cut");else{if(!n.options.lineWiseCopyCut)return;var e=Do(n);_o({lineWise:!0,text:e.text}),"cut"==t.type&&n.operation(function(){n.setSelections(e.ranges,0,W),n.replaceSelection("",null,"cut")})}if(t.clipboardData){t.clipboardData.clearData();var s=To.text.join("\n");if(t.clipboardData.setData("Text",s),t.clipboardData.getData("Text")==s)return void t.preventDefault()}var o=Oo(),a=o.firstChild;n.display.lineSpace.insertBefore(o,n.display.lineSpace.firstChild),a.value=To.text.join("\n");var l=document.activeElement;N(a),setTimeout(function(){n.display.lineSpace.removeChild(o),l.focus(),l==r&&i.showPrimarySelection()},50)}}Eo(r,n.options.spellcheck,n.options.autocorrect,n.options.autocapitalize),dt(r,"paste",function(t){gt(n,t)||Lo(t,n)||a<=11&&setTimeout(Yn(n,function(){return e.updateFromDOM()}),20)}),dt(r,"compositionstart",function(t){e.composing={data:t.data,done:!1}}),dt(r,"compositionupdate",function(t){e.composing||(e.composing={data:t.data,done:!1})}),dt(r,"compositionend",function(t){e.composing&&(t.data!=e.composing.data&&e.readFromDOMSoon(),e.composing.done=!0)}),dt(r,"touchstart",function(){return i.forceCompositionEnd()}),dt(r,"input",function(){e.composing||e.readFromDOMSoon()}),dt(r,"copy",s),dt(r,"cut",s)},zo.prototype.prepareSelection=function(){var t=mn(this.cm,!1);return t.focus=this.cm.state.focused,t},zo.prototype.showSelection=function(t,e){t&&this.cm.display.view.length&&((t.focus||e)&&this.showPrimarySelection(),this.showMultipleSelections(t))},zo.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},zo.prototype.showPrimarySelection=function(){var t=this.getSelection(),e=this.cm,n=e.doc.sel.primary(),r=n.from(),s=n.to();if(e.display.viewTo==e.display.viewFrom||r.line>=e.display.viewTo||s.line<e.display.viewFrom)t.removeAllRanges();else{var o=Bo(e,t.anchorNode,t.anchorOffset),a=Bo(e,t.focusNode,t.focusOffset);if(!o||o.bad||!a||a.bad||0!=ee(se(o,a),r)||0!=ee(re(o,a),s)){var l=e.display.view,c=r.line>=e.display.viewFrom&&Po(e,r)||{node:l[0].measure.map[2],offset:0},u=s.line<e.display.viewTo&&Po(e,s);if(!u){var h=l[l.length-1].measure,d=h.maps?h.maps[h.maps.length-1]:h.map;u={node:d[d.length-1],offset:d[d.length-2]-d[d.length-3]}}if(c&&u){var p,f=t.rangeCount&&t.getRangeAt(0);try{p=A(c.node,c.offset,u.offset,u.node)}catch(t){}p&&(!i&&e.state.focused?(t.collapse(c.node,c.offset),p.collapsed||(t.removeAllRanges(),t.addRange(p))):(t.removeAllRanges(),t.addRange(p)),f&&null==t.anchorNode?t.addRange(f):i&&this.startGracePeriod()),this.rememberSelection()}else t.removeAllRanges()}}},zo.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation(function(){return t.cm.curOp.selectionChanged=!0})},20)},zo.prototype.showMultipleSelections=function(t){M(this.cm.display.cursorDiv,t.cursors),M(this.cm.display.selectionDiv,t.selection)},zo.prototype.rememberSelection=function(){var t=this.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},zo.prototype.selectionInEditor=function(){var t=this.getSelection();if(!t.rangeCount)return!1;var e=t.getRangeAt(0).commonAncestorContainer;return D(this.div,e)},zo.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},zo.prototype.blur=function(){this.div.blur()},zo.prototype.getField=function(){return this.div},zo.prototype.supportsTouch=function(){return!0},zo.prototype.receivedFocus=function(){var t=this;this.selectionInEditor()?this.pollSelection():Zn(this.cm,function(){return t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))})},zo.prototype.selectionChanged=function(){var t=this.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},zo.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=this.getSelection(),e=this.cm;if(g&&u&&this.cm.display.gutterSpecs.length&&function(t){for(var e=t;e;e=e.parentNode)if(/CodeMirror-gutter-wrapper/.test(e.className))return!0;return!1}(t.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var i=Bo(e,t.anchorNode,t.anchorOffset),n=Bo(e,t.focusNode,t.focusOffset);i&&n&&Zn(e,function(){Xr(e.doc,kr(i,n),W),(i.bad||n.bad)&&(e.curOp.selectionChanged=!0)})}}},zo.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var t,e,i,n=this.cm,r=n.display,s=n.doc.sel.primary(),o=s.from(),a=s.to();if(0==o.ch&&o.line>n.firstLine()&&(o=te(o.line-1,Ut(n.doc,o.line-1).length)),a.ch==Ut(n.doc,a.line).text.length&&a.line<n.lastLine()&&(a=te(a.line+1,0)),o.line<r.viewFrom||a.line>r.viewTo-1)return!1;o.line==r.viewFrom||0==(t=ln(n,o.line))?(e=Zt(r.view[0].line),i=r.view[0].node):(e=Zt(r.view[t].line),i=r.view[t-1].node.nextSibling);var l,c,u=ln(n,a.line);if(u==r.view.length-1?(l=r.viewTo-1,c=r.lineDiv.lastChild):(l=Zt(r.view[u+1].line)-1,c=r.view[u+1].node.previousSibling),!i)return!1;for(var h=n.doc.splitLines(function(t,e,i,n,r){var s="",o=!1,a=t.doc.lineSeparator(),l=!1;function c(){o&&(s+=a,l&&(s+=a),o=l=!1)}function u(t){t&&(c(),s+=t)}function h(e){if(1==e.nodeType){var i=e.getAttribute("cm-text");if(i)return void u(i);var s,d=e.getAttribute("cm-marker");if(d){var p=t.findMarks(te(n,0),te(r+1,0),(g=+d,function(t){return t.id==g}));return void(p.length&&(s=p[0].find(0))&&u(Vt(t.doc,s.from,s.to).join(a)))}if("false"==e.getAttribute("contenteditable"))return;var f=/^(pre|div|p|li|table|br)$/i.test(e.nodeName);if(!/^br$/i.test(e.nodeName)&&0==e.textContent.length)return;f&&c();for(var m=0;m<e.childNodes.length;m++)h(e.childNodes[m]);/^(pre|p)$/i.test(e.nodeName)&&(l=!0),f&&(o=!0)}else 3==e.nodeType&&u(e.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var g}for(;h(e),e!=i;)e=e.nextSibling,l=!1;return s}(n,i,c,e,l)),d=Vt(n.doc,te(e,0),te(l,Ut(n.doc,l).text.length));h.length>1&&d.length>1;)if(X(h)==X(d))h.pop(),d.pop(),l--;else{if(h[0]!=d[0])break;h.shift(),d.shift(),e++}for(var p=0,f=0,m=h[0],g=d[0],y=Math.min(m.length,g.length);p<y&&m.charCodeAt(p)==g.charCodeAt(p);)++p;for(var v=X(h),b=X(d),x=Math.min(v.length-(1==h.length?p:0),b.length-(1==d.length?p:0));f<x&&v.charCodeAt(v.length-f-1)==b.charCodeAt(b.length-f-1);)++f;if(1==h.length&&1==d.length&&e==o.line)for(;p&&p>o.ch&&v.charCodeAt(v.length-f-1)==b.charCodeAt(b.length-f-1);)p--,f++;h[h.length-1]=v.slice(0,v.length-f).replace(/^\u200b+/,""),h[0]=h[0].slice(p).replace(/\u200b+$/,"");var k=te(e,p),w=te(l,d.length?X(d).length-f:0);return h.length>1||h[0]||ee(k,w)?(us(n.doc,h,k,w,"+input"),!0):void 0},zo.prototype.ensurePolled=function(){this.forceCompositionEnd()},zo.prototype.reset=function(){this.forceCompositionEnd()},zo.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},zo.prototype.readFromDOMSoon=function(){var t=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(t.readDOMTimeout=null,t.composing){if(!t.composing.done)return;t.composing=null}t.updateFromDOM()},80))},zo.prototype.updateFromDOM=function(){var t=this;!this.cm.isReadOnly()&&this.pollContent()||Zn(this.cm,function(){return cn(t.cm)})},zo.prototype.setUneditable=function(t){t.contentEditable="false"},zo.prototype.onKeyPress=function(t){0==t.charCode||this.composing||(t.preventDefault(),this.cm.isReadOnly()||Yn(this.cm,Mo)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0))},zo.prototype.readOnlyChanged=function(t){this.div.contentEditable=String("nocursor"!=t)},zo.prototype.onContextMenu=function(){},zo.prototype.resetPosition=function(){},zo.prototype.needsContentAttribute=!0;var $o=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new B,this.hasSelection=!1,this.composing=null};$o.prototype.init=function(t){var e=this,i=this,n=this.cm;this.createField(t);var r=this.textarea;function s(t){if(!gt(n,t)){if(n.somethingSelected())_o({lineWise:!1,text:n.getSelections()});else{if(!n.options.lineWiseCopyCut)return;var e=Do(n);_o({lineWise:!0,text:e.text}),"cut"==t.type?n.setSelections(e.ranges,null,W):(i.prevInput="",r.value=e.text.join("\n"),N(r))}"cut"==t.type&&(n.state.cutIncoming=+new Date)}}t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),m&&(r.style.width="0px"),dt(r,"input",function(){o&&a>=9&&e.hasSelection&&(e.hasSelection=null),i.poll()}),dt(r,"paste",function(t){gt(n,t)||Lo(t,n)||(n.state.pasteIncoming=+new Date,i.fastPoll())}),dt(r,"cut",s),dt(r,"copy",s),dt(t.scroller,"paste",function(e){if(!ki(t,e)&&!gt(n,e)){if(!r.dispatchEvent)return n.state.pasteIncoming=+new Date,void i.focus();var s=new Event("paste");s.clipboardData=e.clipboardData,r.dispatchEvent(s)}}),dt(t.lineSpace,"selectstart",function(e){ki(t,e)||xt(e)}),dt(r,"compositionstart",function(){var t=n.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:t,range:n.markText(t,n.getCursor("to"),{className:"CodeMirror-composing"})}}),dt(r,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})},$o.prototype.createField=function(t){this.wrapper=Oo(),this.textarea=this.wrapper.firstChild},$o.prototype.prepareSelection=function(){var t=this.cm,e=t.display,i=t.doc,n=mn(t);if(t.options.moveInputWithCursor){var r=Ui(t,i.sel.primary().head,"div"),s=e.wrapper.getBoundingClientRect(),o=e.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,r.top+o.top-s.top)),n.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,r.left+o.left-s.left))}return n},$o.prototype.showSelection=function(t){var e=this.cm,i=e.display;M(i.cursorDiv,t.cursors),M(i.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},$o.prototype.reset=function(t){if(!this.contextMenuPending&&!this.composing){var e=this.cm;if(e.somethingSelected()){this.prevInput="";var i=e.getSelection();this.textarea.value=i,e.state.focused&&N(this.textarea),o&&a>=9&&(this.hasSelection=i)}else t||(this.prevInput=this.textarea.value="",o&&a>=9&&(this.hasSelection=null))}},$o.prototype.getField=function(){return this.textarea},$o.prototype.supportsTouch=function(){return!1},$o.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!y||E()!=this.textarea))try{this.textarea.focus()}catch(t){}},$o.prototype.blur=function(){this.textarea.blur()},$o.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},$o.prototype.receivedFocus=function(){this.slowPoll()},$o.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){t.poll(),t.cm.state.focused&&t.slowPoll()})},$o.prototype.fastPoll=function(){var t=!1,e=this;e.pollingFast=!0,e.polling.set(20,function i(){var n=e.poll();n||t?(e.pollingFast=!1,e.slowPoll()):(t=!0,e.polling.set(60,i))})},$o.prototype.poll=function(){var t=this,e=this.cm,i=this.textarea,n=this.prevInput;if(this.contextMenuPending||!e.state.focused||Ot(i)&&!n&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var r=i.value;if(r==n&&!e.somethingSelected())return!1;if(o&&a>=9&&this.hasSelection===r||v&&/[\uf700-\uf7ff]/.test(r))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var s=r.charCodeAt(0);if(8203!=s||n||(n="​"),8666==s)return this.reset(),this.cm.execCommand("undo")}for(var l=0,c=Math.min(n.length,r.length);l<c&&n.charCodeAt(l)==r.charCodeAt(l);)++l;return Zn(e,function(){Mo(e,r.slice(l),n.length-l,null,t.composing?"*compose":null),r.length>1e3||r.indexOf("\n")>-1?i.value=t.prevInput="":t.prevInput=r,t.composing&&(t.composing.range.clear(),t.composing.range=e.markText(t.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},$o.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},$o.prototype.onKeyPress=function(){o&&a>=9&&(this.hasSelection=null),this.fastPoll()},$o.prototype.onContextMenu=function(t){var e=this,i=e.cm,n=i.display,r=e.textarea;e.contextMenuPending&&e.contextMenuPending();var s=an(i,t),c=n.scroller.scrollTop;if(s&&!h){var u=i.options.resetSelectionOnContextMenu;u&&-1==i.doc.sel.contains(s)&&Yn(i,Xr)(i.doc,kr(s),W);var d,p=r.style.cssText,f=e.wrapper.style.cssText,m=e.wrapper.offsetParent.getBoundingClientRect();if(e.wrapper.style.cssText="position: static",r.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(t.clientY-m.top-5)+"px; left: "+(t.clientX-m.left-5)+"px;\n      z-index: 1000; background: "+(o?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",l&&(d=window.scrollY),n.input.focus(),l&&window.scrollTo(null,d),n.input.reset(),i.somethingSelected()||(r.value=e.prevInput=" "),e.contextMenuPending=v,n.selForContextMenu=i.doc.sel,clearTimeout(n.detectingSelectAll),o&&a>=9&&y(),S){St(t);var g=function(){ft(window,"mouseup",g),setTimeout(v,20)};dt(window,"mouseup",g)}else setTimeout(v,50)}function y(){if(null!=r.selectionStart){var t=i.somethingSelected(),s="​"+(t?r.value:"");r.value="⇚",r.value=s,e.prevInput=t?"":"​",r.selectionStart=1,r.selectionEnd=s.length,n.selForContextMenu=i.doc.sel}}function v(){if(e.contextMenuPending==v&&(e.contextMenuPending=!1,e.wrapper.style.cssText=f,r.style.cssText=p,o&&a<9&&n.scrollbars.setScrollTop(n.scroller.scrollTop=c),null!=r.selectionStart)){(!o||o&&a<9)&&y();var t=0,s=function(){n.selForContextMenu==i.doc.sel&&0==r.selectionStart&&r.selectionEnd>0&&"​"==e.prevInput?Yn(i,ns)(i):t++<10?n.detectingSelectAll=setTimeout(s,500):(n.selForContextMenu=null,n.input.reset())};n.detectingSelectAll=setTimeout(s,200)}}},$o.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled="nocursor"==t},$o.prototype.setUneditable=function(){},$o.prototype.needsContentAttribute=!1,function(t){var e=t.optionHandlers;function i(i,n,r,s){t.defaults[i]=n,r&&(e[i]=s?function(t,e,i){i!=vo&&r(t,e,i)}:r)}t.defineOption=i,t.Init=vo,i("value","",function(t,e){return t.setValue(e)},!0),i("mode",null,function(t,e){t.doc.modeOption=e,Tr(t)},!0),i("indentUnit",2,Tr,!0),i("indentWithTabs",!1),i("smartIndent",!0),i("tabSize",4,function(t){_r(t),Bi(t),cn(t)},!0),i("lineSeparator",null,function(t,e){if(t.doc.lineSep=e,e){var i=[],n=t.doc.first;t.doc.iter(function(t){for(var r=0;;){var s=t.text.indexOf(e,r);if(-1==s)break;r=s+e.length,i.push(te(n,s))}n++});for(var r=i.length-1;r>=0;r--)us(t.doc,e,i[r],te(i[r].line,i[r].ch+e.length))}}),i("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(t,e,i){t.state.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),i!=vo&&t.refresh()}),i("specialCharPlaceholder",Je,function(t){return t.refresh()},!0),i("electricChars",!0),i("inputStyle",y?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),i("spellcheck",!1,function(t,e){return t.getInputField().spellcheck=e},!0),i("autocorrect",!1,function(t,e){return t.getInputField().autocorrect=e},!0),i("autocapitalize",!1,function(t,e){return t.getInputField().autocapitalize=e},!0),i("rtlMoveVisually",!x),i("wholeLineUpdateBefore",!0),i("theme","default",function(t){yo(t),dr(t)},!0),i("keyMap","default",function(t,e,i){var n=Ks(e),r=i!=vo&&Ks(i);r&&r.detach&&r.detach(t,n),n.attach&&n.attach(t,r||null)}),i("extraKeys",null),i("configureMouse",null),i("lineWrapping",!1,wo,!0),i("gutters",[],function(t,e){t.display.gutterSpecs=ur(e,t.options.lineNumbers),dr(t)},!0),i("fixedGutter",!0,function(t,e){t.display.gutters.style.left=e?rn(t.display)+"px":"0",t.refresh()},!0),i("coverGutterNextToScrollbar",!1,function(t){return Bn(t)},!0),i("scrollbarStyle","native",function(t){Hn(t),Bn(t),t.display.scrollbars.setScrollTop(t.doc.scrollTop),t.display.scrollbars.setScrollLeft(t.doc.scrollLeft)},!0),i("lineNumbers",!1,function(t,e){t.display.gutterSpecs=ur(t.options.gutters,e),dr(t)},!0),i("firstLineNumber",1,dr,!0),i("lineNumberFormatter",function(t){return t},dr,!0),i("showCursorWhenSelecting",!1,fn,!0),i("resetSelectionOnContextMenu",!0),i("lineWiseCopyCut",!0),i("pasteLinesPerSelection",!0),i("selectionsMayTouch",!1),i("readOnly",!1,function(t,e){"nocursor"==e&&(Sn(t),t.display.input.blur()),t.display.input.readOnlyChanged(e)}),i("disableInput",!1,function(t,e){e||t.display.input.reset()},!0),i("dragDrop",!0,ko),i("allowDropFileTypes",null),i("cursorBlinkRate",530),i("cursorScrollMargin",0),i("cursorHeight",1,fn,!0),i("singleCursorHeightPerLine",!0,fn,!0),i("workTime",100),i("workDelay",100),i("flattenSpans",!0,_r,!0),i("addModeClass",!1,_r,!0),i("pollInterval",100),i("undoDepth",200,function(t,e){return t.doc.history.undoDepth=e}),i("historyEventDelay",1250),i("viewportMargin",10,function(t){return t.refresh()},!0),i("maxHighlightLength",1e4,_r,!0),i("moveInputWithCursor",!0,function(t,e){e||t.display.input.resetPosition()}),i("tabindex",null,function(t,e){return t.display.input.getField().tabIndex=e||""}),i("autofocus",null),i("direction","ltr",function(t,e){return t.doc.setDirection(e)},!0),i("phrases",null)}(So),function(t){var e=t.optionHandlers,i=t.helpers={};t.prototype={constructor:t,focus:function(){window.focus(),this.display.input.focus()},setOption:function(t,i){var n=this.options,r=n[t];n[t]==i&&"mode"!=t||(n[t]=i,e.hasOwnProperty(t)&&Yn(this,e[t])(this,i,r),mt(this,"optionChange",this,t))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](Ks(t))},removeKeyMap:function(t){for(var e=this.state.keyMaps,i=0;i<e.length;++i)if(e[i]==t||e[i].name==t)return e.splice(i,1),!0},addOverlay:Jn(function(e,i){var n=e.token?e:t.getMode(this.options,e);if(n.startState)throw new Error("Overlays may not be stateful.");!function(t,e,i){for(var n=0,r=i(e);n<t.length&&i(t[n])<=r;)n++;t.splice(n,0,e)}(this.state.overlays,{mode:n,modeSpec:e,opaque:i&&i.opaque,priority:i&&i.priority||0},function(t){return t.priority}),this.state.modeGen++,cn(this)}),removeOverlay:Jn(function(t){for(var e=this.state.overlays,i=0;i<e.length;++i){var n=e[i].modeSpec;if(n==t||"string"==typeof t&&n.name==t)return e.splice(i,1),this.state.modeGen++,void cn(this)}}),indentLine:Jn(function(t,e,i){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),Jt(this.doc,t)&&Ao(this,t,e,i)}),indentSelection:Jn(function(t){for(var e=this.doc.sel.ranges,i=-1,n=0;n<e.length;n++){var r=e[n];if(r.empty())r.head.line>i&&(Ao(this,r.head.line,t,!0),i=r.head.line,n==this.doc.sel.primIndex&&Ln(this));else{var s=r.from(),o=r.to(),a=Math.max(i,s.line);i=Math.min(this.lastLine(),o.line-(o.ch?0:1))+1;for(var l=a;l<i;++l)Ao(this,l,t);var c=this.doc.sel.ranges;0==s.ch&&e.length==c.length&&c[n].from().ch>0&&Ur(this.doc,n,new br(s,c[n].to()),W)}}}),getTokenAt:function(t,e){return ve(this,t,e)},getLineTokens:function(t,e){return ve(this,te(t),e,!0)},getTokenTypeAt:function(t){t=ae(this.doc,t);var e,i=de(this,Ut(this.doc,t.line)),n=0,r=(i.length-1)/2,s=t.ch;if(0==s)e=i[2];else for(;;){var o=n+r>>1;if((o?i[2*o-1]:0)>=s)r=o;else{if(!(i[2*o+1]<s)){e=i[2*o+2];break}n=o+1}}var a=e?e.indexOf("overlay "):-1;return a<0?e:0==a?null:e.slice(0,a-1)},getModeAt:function(e){var i=this.doc.mode;return i.innerMode?t.innerMode(i,this.getTokenAt(e).state).mode:i},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var n=[];if(!i.hasOwnProperty(e))return n;var r=i[e],s=this.getModeAt(t);if("string"==typeof s[e])r[s[e]]&&n.push(r[s[e]]);else if(s[e])for(var o=0;o<s[e].length;o++){var a=r[s[e][o]];a&&n.push(a)}else s.helperType&&r[s.helperType]?n.push(r[s.helperType]):r[s.name]&&n.push(r[s.name]);for(var l=0;l<r._global.length;l++){var c=r._global[l];c.pred(s,this)&&-1==q(n,c.val)&&n.push(c.val)}return n},getStateAfter:function(t,e){var i=this.doc;return pe(this,(t=oe(i,null==t?i.first+i.size-1:t))+1,e).state},cursorCoords:function(t,e){var i=this.doc.sel.primary();return Ui(this,null==t?i.head:"object"==typeof t?ae(this.doc,t):t?i.from():i.to(),e||"page")},charCoords:function(t,e){return Ki(this,ae(this.doc,t),e||"page")},coordsChar:function(t,e){return Xi(this,(t=ji(this,t,e||"page")).left,t.top)},lineAtHeight:function(t,e){return t=ji(this,{top:t,left:0},e||"page").top,Yt(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e,i){var n,r=!1;if("number"==typeof t){var s=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>s&&(t=s,r=!0),n=Ut(this.doc,t)}else n=t;return Wi(this,n,{top:0,left:0},e||"page",i||r).top+(r?this.doc.height-We(n):0)},defaultTextHeight:function(){return tn(this.display)},defaultCharWidth:function(){return en(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,i,n,r){var s,o,a,l=this.display,c=(t=Ui(this,ae(this.doc,t))).bottom,u=t.left;if(e.style.position="absolute",e.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(e),l.sizer.appendChild(e),"over"==n)c=t.top;else if("above"==n||"near"==n){var h=Math.max(l.wrapper.clientHeight,this.doc.height),d=Math.max(l.sizer.clientWidth,l.lineSpace.clientWidth);("above"==n||t.bottom+e.offsetHeight>h)&&t.top>e.offsetHeight?c=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=h&&(c=t.bottom),u+e.offsetWidth>d&&(u=d-e.offsetWidth)}e.style.top=c+"px",e.style.left=e.style.right="","right"==r?(u=l.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==r?u=0:"middle"==r&&(u=(l.sizer.clientWidth-e.offsetWidth)/2),e.style.left=u+"px"),i&&(s=this,o={left:u,top:c,right:u+e.offsetWidth,bottom:c+e.offsetHeight},null!=(a=_n(s,o)).scrollTop&&On(s,a.scrollTop),null!=a.scrollLeft&&Nn(s,a.scrollLeft))},triggerOnKeyDown:Jn(so),triggerOnKeyPress:Jn(ao),triggerOnKeyUp:oo,triggerOnMouseDown:Jn(ho),execCommand:function(t){if(Zs.hasOwnProperty(t))return Zs[t].call(null,this)},triggerElectric:Jn(function(t){Fo(this,t)}),findPosH:function(t,e,i,n){var r=1;e<0&&(r=-1,e=-e);for(var s=ae(this.doc,t),o=0;o<e&&!(s=Io(this.doc,s,r,i,n)).hitSide;++o);return s},moveH:Jn(function(t,e){var i=this;this.extendSelectionsBy(function(n){return i.display.shift||i.doc.extend||n.empty()?Io(i.doc,n.head,t,e,i.options.rtlMoveVisually):t<0?n.from():n.to()},K)}),deleteH:Jn(function(t,e){var i=this.doc.sel,n=this.doc;i.somethingSelected()?n.replaceSelection("",null,"+delete"):Us(this,function(i){var r=Io(n,i.head,t,e,!1);return t<0?{from:r,to:i.head}:{from:i.head,to:r}})}),findPosV:function(t,e,i,n){var r=1,s=n;e<0&&(r=-1,e=-e);for(var o=ae(this.doc,t),a=0;a<e;++a){var l=Ui(this,o,"div");if(null==s?s=l.left:l.left=s,(o=No(this,l,r,i)).hitSide)break}return o},moveV:Jn(function(t,e){var i=this,n=this.doc,r=[],s=!this.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy(function(o){if(s)return t<0?o.from():o.to();var a=Ui(i,o.head,"div");null!=o.goalColumn&&(a.left=o.goalColumn),r.push(a.left);var l=No(i,a,t,e);return"page"==e&&o==n.sel.primary()&&Mn(i,Ki(i,l,"div").top-a.top),l},K),r.length)for(var o=0;o<n.sel.ranges.length;o++)n.sel.ranges[o].goalColumn=r[o]}),findWordAt:function(t){var e=this.doc,i=Ut(e,t.line).text,n=t.ch,r=t.ch;if(i){var s=this.getHelper(t,"wordChars");"before"!=t.sticky&&r!=i.length||!n?++r:--n;for(var o=i.charAt(n),a=et(o,s)?function(t){return et(t,s)}:/\s/.test(o)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!et(t)};n>0&&a(i.charAt(n-1));)--n;for(;r<i.length&&a(i.charAt(r));)++r}return new br(te(t.line,n),te(t.line,r))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?O(this.display.cursorDiv,"CodeMirror-overwrite"):T(this.display.cursorDiv,"CodeMirror-overwrite"),mt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==E()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Jn(function(t,e){Fn(this,t,e)}),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-Ai(this)-this.display.barHeight,width:t.scrollWidth-Ai(this)-this.display.barWidth,clientHeight:_i(this),clientWidth:Ti(this)}},scrollIntoView:Jn(function(t,e){null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:te(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line?function(t,e){Dn(t),t.curOp.scrollToPos=e}(this,t):En(this,t.from,t.to,t.margin)}),setSize:Jn(function(t,e){var i=this,n=function(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t};null!=t&&(this.display.wrapper.style.width=n(t)),null!=e&&(this.display.wrapper.style.height=n(e)),this.options.lineWrapping&&Ri(this);var r=this.display.viewFrom;this.doc.iter(r,this.display.viewTo,function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){un(i,r,"widget");break}++r}),this.curOp.forceUpdate=!0,mt(this,"refresh",this)}),operation:function(t){return Zn(this,t)},startOperation:function(){return jn(this)},endOperation:function(){return Kn(this)},refresh:Jn(function(){var t=this.display.cachedTextHeight;cn(this),this.curOp.forceUpdate=!0,Bi(this),Fn(this,this.doc.scrollLeft,this.doc.scrollTop),or(this.display),(null==t||Math.abs(t-tn(this.display))>.5)&&on(this),mt(this,"refresh",this)}),swapDoc:Jn(function(t){var e=this.doc;return e.cm=null,this.state.selectingText&&this.state.selectingText(),Dr(this,t),Bi(this),this.display.input.reset(),Fn(this,t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,ai(this,"swapDoc",this,e),e}),phrase:function(t){var e=this.options.phrases;return e&&Object.prototype.hasOwnProperty.call(e,t)?e[t]:t},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},bt(t),t.registerHelper=function(e,n,r){i.hasOwnProperty(e)||(i[e]=t[e]={_global:[]}),i[e][n]=r},t.registerGlobalHelper=function(e,n,r,s){t.registerHelper(e,n,s),i[e]._global.push({pred:r,val:s})}}(So);var Ho="iter insert remove copy getEditor constructor".split(" ");for(var Wo in Ts.prototype)Ts.prototype.hasOwnProperty(Wo)&&q(Ho,Wo)<0&&(So.prototype[Wo]=function(t){return function(){return t.apply(this.doc,arguments)}}(Ts.prototype[Wo]));return bt(Ts),So.inputStyles={textarea:$o,contenteditable:zo},So.defineMode=function(t){So.defaults.mode||"null"==t||(So.defaults.mode=t),function(t,e){arguments.length>2&&(e.dependencies=Array.prototype.slice.call(arguments,2)),zt[t]=e}.apply(this,arguments)},So.defineMIME=function(t,e){Pt[t]=e},So.defineMode("null",function(){return{token:function(t){return t.skipToEnd()}}}),So.defineMIME("text/plain","null"),So.defineExtension=function(t,e){So.prototype[t]=e},So.defineDocExtension=function(t,e){Ts.prototype[t]=e},So.fromTextArea=function(t,e){if((e=e?P(e):{}).value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var i=E();e.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}function n(){t.value=a.getValue()}var r;if(t.form&&(dt(t.form,"submit",n),!e.leaveSubmitMethodAlone)){var s=t.form;r=s.submit;try{var o=s.submit=function(){n(),s.submit=r,s.submit(),s.submit=o}}catch(t){}}e.finishInit=function(i){i.save=n,i.getTextArea=function(){return t},i.toTextArea=function(){i.toTextArea=isNaN,n(),t.parentNode.removeChild(i.getWrapperElement()),t.style.display="",t.form&&(ft(t.form,"submit",n),e.leaveSubmitMethodAlone||"function"!=typeof t.form.submit||(t.form.submit=r))}},t.style.display="none";var a=So(function(e){return t.parentNode.insertBefore(e,t.nextSibling)},e);return a},function(t){t.off=ft,t.on=dt,t.wheelEventPixels=gr,t.Doc=Ts,t.splitLines=Et,t.countColumn=R,t.findColumn=U,t.isWordChar=tt,t.Pass=H,t.signal=mt,t.Line=Ue,t.changeEnd=wr,t.scrollbarModel=$n,t.Pos=te,t.cmpPos=ee,t.modes=zt,t.mimeModes=Pt,t.resolveMode=Rt,t.getMode=Bt,t.modeExtensions=qt,t.extendMode=$t,t.copyState=Ht,t.startState=jt,t.innerMode=Wt,t.commands=Zs,t.keyMap=Rs,t.keyName=js,t.isModifierKey=Hs,t.lookupKey=$s,t.normalizeKeyMap=qs,t.StringStream=Kt,t.SharedTextMarker=ws,t.TextMarker=xs,t.LineWidget=ys,t.e_preventDefault=xt,t.e_stopPropagation=kt,t.e_stop=St,t.addClass=O,t.contains=D,t.rmClass=T,t.keyNames=Is}(So),So.version="5.49.2",So}()},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,i){var n=i(1),r=i(12),s=i(11),o=i(29)("src"),a=i(164),l=(""+a).split("toString");i(13).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,i,a){var c="function"==typeof i;c&&(s(i,"name")||r(i,"name",e)),t[e]!==i&&(c&&(s(i,o)||r(i,o,t[e]?""+t[e]:l.join(String(e)))),t===n?t[e]=i:a?t[e]?t[e]=i:r(t,e,i):(delete t[e],r(t,e,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[o]||a.call(this)})},function(t,e,i){"use strict";var n=i(41),r={};r[i(0)("toStringTag")]="z",r+""!="[object z]"&&i(9)(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){var n=i(5),r=i(28);t.exports=i(3)?function(t,e,i){return n.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e){var i=t.exports={version:"2.6.10"};"number"==typeof __e&&(__e=i)},function(t,e,i){var n=i(26);t.exports=function(t){return Object(n(t))}},function(t,e,i){var n=i(54),r=i(26);t.exports=function(t){return n(r(t))}},function(t,e,i){var n=i(38),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e,i){var n=i(42);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,i){"use strict";var n,r,s,o,a=i(30),l=i(1),c=i(18),u=i(41),h=i(6),d=i(8),p=i(42),f=i(163),m=i(162),g=i(60),y=i(95).set,v=i(160)(),b=i(93),x=i(159),k=i(158),w=i(92),S=l.TypeError,C=l.process,A=C&&C.versions,T=A&&A.v8||"",_=l.Promise,M="process"==u(C),L=function(){},F=r=b.f,D=!!function(){try{var t=_.resolve(1),e=(t.constructor={})[i(0)("species")]=function(t){t(L,L)};return(M||"function"==typeof PromiseRejectionEvent)&&t.then(L)instanceof e&&0!==T.indexOf("6.6")&&-1===k.indexOf("Chrome/66")}catch(t){}}(),E=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},O=function(t,e){if(!t._n){t._n=!0;var i=t._c;v(function(){for(var n=t._v,r=1==t._s,s=0,o=function(e){var i,s,o,a=r?e.ok:e.fail,l=e.resolve,c=e.reject,u=e.domain;try{a?(r||(2==t._h&&z(t),t._h=1),!0===a?i=n:(u&&u.enter(),i=a(n),u&&(u.exit(),o=!0)),i===e.promise?c(S("Promise-chain cycle")):(s=E(i))?s.call(i,l,c):l(i)):c(n)}catch(t){u&&!o&&u.exit(),c(t)}};i.length>s;)o(i[s++]);t._c=[],t._n=!1,e&&!t._h&&I(t)})}},I=function(t){y.call(l,function(){var e,i,n,r=t._v,s=N(t);if(s&&(e=x(function(){M?C.emit("unhandledRejection",r,t):(i=l.onunhandledrejection)?i({promise:t,reason:r}):(n=l.console)&&n.error&&n.error("Unhandled promise rejection",r)}),t._h=M||N(t)?2:1),t._a=void 0,s&&e.e)throw e.v})},N=function(t){return 1!==t._h&&0===(t._a||t._c).length},z=function(t){y.call(l,function(){var e;M?C.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},P=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),O(e,!0))},R=function(t){var e,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw S("Promise can't be resolved itself");(e=E(t))?v(function(){var n={_w:i,_d:!1};try{e.call(t,c(R,n,1),c(P,n,1))}catch(t){P.call(n,t)}}):(i._v=t,i._s=1,O(i,!1))}catch(t){P.call({_w:i,_d:!1},t)}}};D||(_=function(t){f(this,_,"Promise","_h"),p(t),n.call(this);try{t(c(R,this,1),c(P,this,1))}catch(t){P.call(this,t)}},(n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=i(157)(_.prototype,{then:function(t,e){var i=F(g(this,_));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=M?C.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&O(this,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),s=function(){var t=new n;this.promise=t,this.resolve=c(R,t,1),this.reject=c(P,t,1)},b.f=F=function(t){return t===_||t===o?new s(t):r(t)}),h(h.G+h.W+h.F*!D,{Promise:_}),i(37)(_,"Promise"),i(91)("Promise"),o=i(13).Promise,h(h.S+h.F*!D,"Promise",{reject:function(t){var e=F(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(a||!D),"Promise",{resolve:function(t){return w(a&&this===o?_:this,t)}}),h(h.S+h.F*!(D&&i(90)(function(t){_.all(t).catch(L)})),"Promise",{all:function(t){var e=this,i=F(e),n=i.resolve,r=i.reject,s=x(function(){var i=[],s=0,o=1;m(t,!1,function(t){var a=s++,l=!1;i.push(void 0),o++,e.resolve(t).then(function(t){l||(l=!0,i[a]=t,--o||n(i))},r)}),--o||n(i)});return s.e&&r(s.v),i.promise},race:function(t){var e=this,i=F(e),n=i.reject,r=x(function(){m(t,!1,function(t){e.resolve(t).then(i.resolve,n)})});return r.e&&n(r.v),i.promise}})},function(t,e){const i=/[&<>"']/,n=/[&<>"']/g,r=/[<>"']|&(?!#?\w+;)/,s=/[<>"']|&(?!#?\w+;)/g,o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},a=t=>o[t];const l=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function c(t){return t.replace(l,(t,e)=>"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):"")}const u=/(^|[^\[])\^/g;const h=/[^\w:]/g,d=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;const p={},f=/^[^:]+:\/*[^/]*$/,m=/^([^:]+:)[\s\S]*$/,g=/^([^:]+:\/*[^/]*)[\s\S]*$/;function y(t,e){p[" "+t]||(f.test(t)?p[" "+t]=t+"/":p[" "+t]=v(t,"/",!0));const i=-1===(t=p[" "+t]).indexOf(":");return"//"===e.substring(0,2)?i?e:t.replace(m,"$1")+e:"/"===e.charAt(0)?i?e:t.replace(g,"$1")+e:t+e}function v(t,e,i){const n=t.length;if(0===n)return"";let r=0;for(;r<n;){const s=t.charAt(n-r-1);if(s!==e||i){if(s===e||!i)break;r++}else r++}return t.substr(0,n-r)}t.exports={escape:function(t,e){if(e){if(i.test(t))return t.replace(n,a)}else if(r.test(t))return t.replace(s,a);return t},unescape:c,edit:function(t,e){t=t.source||t,e=e||"";const i={replace:(e,n)=>(n=(n=n.source||n).replace(u,"$1"),t=t.replace(e,n),i),getRegex:()=>new RegExp(t,e)};return i},cleanUrl:function(t,e,i){if(t){let t;try{t=decodeURIComponent(c(i)).replace(h,"").toLowerCase()}catch(t){return null}if(0===t.indexOf("javascript:")||0===t.indexOf("vbscript:")||0===t.indexOf("data:"))return null}e&&!d.test(i)&&(i=y(e,i));try{i=encodeURI(i).replace(/%25/g,"%")}catch(t){return null}return i},resolveUrl:y,noopTest:{exec:function(){}},merge:function(t){let e,i,n=1;for(;n<arguments.length;n++)for(i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},splitCells:function(t,e){const i=t.replace(/\|/g,(t,e,i)=>{let n=!1,r=e;for(;--r>=0&&"\\"===i[r];)n=!n;return n?"|":" |"}).split(/ \|/);let n=0;if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(/\\\|/g,"|");return i},rtrim:v,findClosingBracket:function(t,e){if(-1===t.indexOf(e[1]))return-1;const i=t.length;let n=0,r=0;for(;r<i;r++)if("\\"===t[r])r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&--n<0)return r;return-1},checkSanitizeDeprecation:function(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}}},function(t,e,i){var n=i(84),r=i(52);t.exports=Object.keys||function(t){return n(t,r)}},function(t,e,i){var n=function(t){"use strict";var e,i=Object.prototype,n=i.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function l(t,e,i,n){var r=e&&e.prototype instanceof m?e:m,s=Object.create(r.prototype),o=new _(n||[]);return s._invoke=function(t,e,i){var n=u;return function(r,s){if(n===d)throw new Error("Generator is already running");if(n===p){if("throw"===r)throw s;return L()}for(i.method=r,i.arg=s;;){var o=i.delegate;if(o){var a=C(o,i);if(a){if(a===f)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===u)throw n=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var l=c(t,e,i);if("normal"===l.type){if(n=i.done?p:h,l.arg===f)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n=p,i.method="throw",i.arg=l.arg)}}}(t,i,o),s}function c(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u="suspendedStart",h="suspendedYield",d="executing",p="completed",f={};function m(){}function g(){}function y(){}var v={};v[s]=function(){return this};var b=Object.getPrototypeOf,x=b&&b(b(M([])));x&&x!==i&&n.call(x,s)&&(v=x);var k=y.prototype=m.prototype=Object.create(v);function w(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function S(t){var e;this._invoke=function(i,r){function s(){return new Promise(function(e,s){!function e(i,r,s,o){var a=c(t[i],t,r);if("throw"!==a.type){var l=a.arg,u=l.value;return u&&"object"==typeof u&&n.call(u,"__await")?Promise.resolve(u.__await).then(function(t){e("next",t,s,o)},function(t){e("throw",t,s,o)}):Promise.resolve(u).then(function(t){l.value=t,s(l)},function(t){return e("throw",t,s,o)})}o(a.arg)}(i,r,e,s)})}return e=e?e.then(s,s):s()}}function C(t,i){var n=t.iterator[i.method];if(n===e){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=e,C(t,i),"throw"===i.method))return f;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=c(n,t.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,f;var s=r.arg;return s?s.done?(i[t.resultName]=s.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,f):s:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,f)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function M(t){if(t){var i=t[s];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function i(){for(;++r<t.length;)if(n.call(t,r))return i.value=t[r],i.done=!1,i;return i.value=e,i.done=!0,i};return o.next=o}}return{next:L}}function L(){return{value:e,done:!0}}return g.prototype=k.constructor=y,y.constructor=g,y[a]=g.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(k),t},t.awrap=function(t){return{__await:t}},w(S.prototype),S.prototype[o]=function(){return this},t.AsyncIterator=S,t.async=function(e,i,n,r){var s=new S(l(e,i,n,r));return t.isGeneratorFunction(i)?s:s.next().then(function(t){return t.done?t.value:s.next()})},w(k),k[a]="Generator",k[s]=function(){return this},k.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},t.values=M,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function r(n,r){return a.type="throw",a.arg=t,i.next=n,r&&(i.method="next",i.arg=e),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),T(i),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var r=n.arg;T(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,n){return this.delegate={iterator:M(t),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=e),f}},t}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},function(t,e){function i(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}}t.exports={defaults:{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1},getDefaults:i,changeDefaults:function(e){t.exports.defaults=e}}},function(t,e,i){var n=i(84),r=i(52).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,r)}},function(t,e,i){"use strict";var n=i(1),r=i(11),s=i(3),o=i(6),a=i(9),l=i(155).KEY,c=i(4),u=i(40),h=i(37),d=i(29),p=i(0),f=i(85),m=i(86),g=i(154),y=i(83),v=i(2),b=i(8),x=i(14),k=i(15),w=i(39),S=i(28),C=i(51),A=i(150),T=i(32),_=i(34),M=i(5),L=i(21),F=T.f,D=M.f,E=A.f,O=n.Symbol,I=n.JSON,N=I&&I.stringify,z=p("_hidden"),P=p("toPrimitive"),R={}.propertyIsEnumerable,B=u("symbol-registry"),q=u("symbols"),$=u("op-symbols"),H=Object.prototype,W="function"==typeof O&&!!_.f,j=n.QObject,K=!j||!j.prototype||!j.prototype.findChild,U=s&&c(function(){return 7!=C(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a})?function(t,e,i){var n=F(H,e);n&&delete H[e],D(t,e,i),n&&t!==H&&D(H,e,n)}:D,V=function(t){var e=q[t]=C(O.prototype);return e._k=t,e},G=W&&"symbol"==typeof O.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof O},X=function(t,e,i){return t===H&&X($,e,i),v(t),e=w(e,!0),v(i),r(q,e)?(i.enumerable?(r(t,z)&&t[z][e]&&(t[z][e]=!1),i=C(i,{enumerable:S(0,!1)})):(r(t,z)||D(t,z,S(1,{})),t[z][e]=!0),U(t,e,i)):D(t,e,i)},Z=function(t,e){v(t);for(var i,n=g(e=k(e)),r=0,s=n.length;s>r;)X(t,i=n[r++],e[i]);return t},Y=function(t){var e=R.call(this,t=w(t,!0));return!(this===H&&r(q,t)&&!r($,t))&&(!(e||!r(this,t)||!r(q,t)||r(this,z)&&this[z][t])||e)},J=function(t,e){if(t=k(t),e=w(e,!0),t!==H||!r(q,e)||r($,e)){var i=F(t,e);return!i||!r(q,e)||r(t,z)&&t[z][e]||(i.enumerable=!0),i}},Q=function(t){for(var e,i=E(k(t)),n=[],s=0;i.length>s;)r(q,e=i[s++])||e==z||e==l||n.push(e);return n},tt=function(t){for(var e,i=t===H,n=E(i?$:k(t)),s=[],o=0;n.length>o;)!r(q,e=n[o++])||i&&!r(H,e)||s.push(q[e]);return s};W||(a((O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(i){this===H&&e.call($,i),r(this,z)&&r(this[z],t)&&(this[z][t]=!1),U(this,t,S(1,i))};return s&&K&&U(H,t,{configurable:!0,set:e}),V(t)}).prototype,"toString",function(){return this._k}),T.f=J,M.f=X,i(24).f=A.f=Q,i(33).f=Y,_.f=tt,s&&!i(30)&&a(H,"propertyIsEnumerable",Y,!0),f.f=function(t){return V(p(t))}),o(o.G+o.W+o.F*!W,{Symbol:O});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),it=0;et.length>it;)p(et[it++]);for(var nt=L(p.store),rt=0;nt.length>rt;)m(nt[rt++]);o(o.S+o.F*!W,"Symbol",{for:function(t){return r(B,t+="")?B[t]:B[t]=O(t)},keyFor:function(t){if(!G(t))throw TypeError(t+" is not a symbol!");for(var e in B)if(B[e]===t)return e},useSetter:function(){K=!0},useSimple:function(){K=!1}}),o(o.S+o.F*!W,"Object",{create:function(t,e){return void 0===e?C(t):Z(C(t),e)},defineProperty:X,defineProperties:Z,getOwnPropertyDescriptor:J,getOwnPropertyNames:Q,getOwnPropertySymbols:tt});var st=c(function(){_.f(1)});o(o.S+o.F*st,"Object",{getOwnPropertySymbols:function(t){return _.f(x(t))}}),I&&o(o.S+o.F*(!W||c(function(){var t=O();return"[null]"!=N([t])||"{}"!=N({a:t})||"{}"!=N(Object(t))})),"JSON",{stringify:function(t){for(var e,i,n=[t],r=1;arguments.length>r;)n.push(arguments[r++]);if(i=e=n[1],(b(e)||void 0!==t)&&!G(t))return y(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!G(e))return e}),n[1]=e,N.apply(I,n)}}),O.prototype[P]||i(12)(O.prototype,P,O.prototype.valueOf),h(O,"Symbol"),h(Math,"Math",!0),h(n.JSON,"JSON",!0)},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports={}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},function(t,e){t.exports=!1},function(t,e,i){"use strict";var n=i(1),r=i(11),s=i(17),o=i(81),a=i(39),l=i(4),c=i(24).f,u=i(32).f,h=i(5).f,d=i(145).trim,p=n.Number,f=p,m=p.prototype,g="Number"==s(i(51)(m)),y="trim"in String.prototype,v=function(t){var e=a(t,!1);if("string"==typeof e&&e.length>2){var i,n,r,s=(e=y?e.trim():d(e,3)).charCodeAt(0);if(43===s||45===s){if(88===(i=e.charCodeAt(2))||120===i)return NaN}else if(48===s){switch(e.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+e}for(var o,l=e.slice(2),c=0,u=l.length;c<u;c++)if((o=l.charCodeAt(c))<48||o>r)return NaN;return parseInt(l,n)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof p&&(g?l(function(){m.valueOf.call(i)}):"Number"!=s(i))?o(new f(v(e)),i,p):v(e)};for(var b,x=i(3)?c(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;x.length>k;k++)r(f,b=x[k])&&!r(p,b)&&h(p,b,u(f,b));p.prototype=m,m.constructor=p,i(9)(n,"Number",p)}},function(t,e,i){var n=i(33),r=i(28),s=i(15),o=i(39),a=i(11),l=i(99),c=Object.getOwnPropertyDescriptor;e.f=i(3)?c:function(t,e){if(t=s(t),e=o(e,!0),l)try{return c(t,e)}catch(t){}if(a(t,e))return r(!n.f.call(t,e),t[e])}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){i(86)("asyncIterator")},function(t,e,i){"use strict";var n=i(2);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,i){var n=i(5).f,r=i(11),s=i(0)("toStringTag");t.exports=function(t,e,i){t&&!r(t=i?t:t.prototype,s)&&n(t,s,{configurable:!0,value:e})}},function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},function(t,e,i){var n=i(8);t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,i){var n=i(13),r=i(1),s=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return s[t]||(s[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:i(30)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,i){var n=i(17),r=i(0)("toStringTag"),s="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,i,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?i:s?n(e):"Object"==(o=n(e))&&"function"==typeof e.callee?"Arguments":o}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,i){var n=i(103);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(46).default)("52cedad3",n,!1,{})},function(t,e,i){var n=i(109);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(46).default)("06203c32",n,!1,{})},function(t,e,i){var n=i(133);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(46).default)("d2db46e0",n,!1,{})},function(t,e,i){"use strict";function n(t,e){for(var i=[],n={},r=0;r<e.length;r++){var s=e[r],o=s[0],a={id:t+":"+r,css:s[1],media:s[2],sourceMap:s[3]};n[o]?n[o].parts.push(a):i.push(n[o]={id:o,parts:[a]})}return i}i.r(e),i.d(e,"default",function(){return f});var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var s={},o=r&&(document.head||document.getElementsByTagName("head")[0]),a=null,l=0,c=!1,u=function(){},h=null,d="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(t,e,i,r){c=i,h=r||{};var o=n(t,e);return m(o),function(e){for(var i=[],r=0;r<o.length;r++){var a=o[r];(l=s[a.id]).refs--,i.push(l)}e?m(o=n(t,e)):o=[];for(r=0;r<i.length;r++){var l;if(0===(l=i[r]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete s[l.id]}}}}function m(t){for(var e=0;e<t.length;e++){var i=t[e],n=s[i.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](i.parts[r]);for(;r<i.parts.length;r++)n.parts.push(y(i.parts[r]));n.parts.length>i.parts.length&&(n.parts.length=i.parts.length)}else{var o=[];for(r=0;r<i.parts.length;r++)o.push(y(i.parts[r]));s[i.id]={id:i.id,refs:1,parts:o}}}}function g(){var t=document.createElement("style");return t.type="text/css",o.appendChild(t),t}function y(t){var e,i,n=document.querySelector("style["+d+'~="'+t.id+'"]');if(n){if(c)return u;n.parentNode.removeChild(n)}if(p){var r=l++;n=a||(a=g()),e=x.bind(null,n,r,!1),i=x.bind(null,n,r,!0)}else n=g(),e=function(t,e){var i=e.css,n=e.media,r=e.sourceMap;n&&t.setAttribute("media",n);h.ssrId&&t.setAttribute(d,e.id);r&&(i+="\n/*# sourceURL="+r.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");if(t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}.bind(null,n),i=function(){n.parentNode.removeChild(n)};return e(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;e(t=n)}else i()}}var v,b=(v=[],function(t,e){return v[t]=e,v.filter(Boolean).join("\n")});function x(t,e,i,n){var r=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=b(e,r);else{var s=document.createTextNode(r),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(s,o[e]):t.appendChild(s)}}},function(t,e,i){for(var n=i(67),r=i(21),s=i(9),o=i(1),a=i(12),l=i(27),c=i(0),u=c("iterator"),h=c("toStringTag"),d=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=r(p),m=0;m<f.length;m++){var g,y=f[m],v=p[y],b=o[y],x=b&&b.prototype;if(x&&(x[u]||a(x,u,d),x[h]||a(x,h,y),l[y]=d,v))for(g in n)x[g]||s(x,g,n[g],!0)}},function(t,e,i){const{defaults:n}=i(23),{cleanUrl:r,escape:s}=i(20);t.exports=class{constructor(t){this.options=t||n}code(t,e,i){const n=(e||"").match(/\S*/)[0];if(this.options.highlight){const e=this.options.highlight(t,n);null!=e&&e!==t&&(i=!0,t=e)}return n?'<pre><code class="'+this.options.langPrefix+s(n,!0)+'">'+(i?t:s(t,!0))+"</code></pre>\n":"<pre><code>"+(i?t:s(t,!0))+"</code></pre>"}blockquote(t){return"<blockquote>\n"+t+"</blockquote>\n"}html(t){return t}heading(t,e,i,n){return this.options.headerIds?"<h"+e+' id="'+this.options.headerPrefix+n.slug(i)+'">'+t+"</h"+e+">\n":"<h"+e+">"+t+"</h"+e+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(t,e,i){const n=e?"ol":"ul";return"<"+n+(e&&1!==i?' start="'+i+'"':"")+">\n"+t+"</"+n+">\n"}listitem(t){return"<li>"+t+"</li>\n"}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(t){return"<p>"+t+"</p>\n"}table(t,e){return e&&(e="<tbody>"+e+"</tbody>"),"<table>\n<thead>\n"+t+"</thead>\n"+e+"</table>\n"}tablerow(t){return"<tr>\n"+t+"</tr>\n"}tablecell(t,e){const i=e.header?"th":"td";return(e.align?"<"+i+' align="'+e.align+'">':"<"+i+">")+t+"</"+i+">\n"}strong(t){return"<strong>"+t+"</strong>"}em(t){return"<em>"+t+"</em>"}codespan(t){return"<code>"+t+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return"<del>"+t+"</del>"}link(t,e,i){if(null===(t=r(this.options.sanitize,this.options.baseUrl,t)))return i;let n='<a href="'+s(t)+'"';return e&&(n+=' title="'+e+'"'),n+=">"+i+"</a>"}image(t,e,i){if(null===(t=r(this.options.sanitize,this.options.baseUrl,t)))return i;let n='<img src="'+t+'" alt="'+i+'"';return e&&(n+=' title="'+e+'"'),n+=this.options.xhtml?"/>":">"}text(t){return t}}},function(t,e,i){var n=i(0)("unscopables"),r=Array.prototype;void 0==r[n]&&i(12)(r,n,{}),t.exports=function(t){r[n][t]=!0}},function(t,e,i){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=function(t,e){var i=t[1]||"",n=t[3];if(!n)return i;if(e&&"function"==typeof btoa){var r=(o=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),s=n.sources.map(function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"});return[i].concat(s).concat([r]).join("\n")}var o;return[i].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},r=0;r<this.length;r++){var s=this[r][0];null!=s&&(n[s]=!0)}for(r=0;r<t.length;r++){var o=t[r];null!=o[0]&&n[o[0]]||(i&&!o[2]?o[2]=i:i&&(o[2]="("+o[2]+") and ("+i+")"),e.push(o))}},e}},function(t,e,i){var n=i(2),r=i(151),s=i(52),o=i(53)("IE_PROTO"),a=function(){},l=function(){var t,e=i(61)("iframe"),n=s.length;for(e.style.display="none",i(94).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;n--;)delete l.prototype[s[n]];return l()};t.exports=Object.create||function(t,e){var i;return null!==t?(a.prototype=n(t),i=new a,a.prototype=null,i[o]=t):i=l(),void 0===e?i:r(i,e)}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,i){var n=i(40)("keys"),r=i(29);t.exports=function(t){return n[t]||(n[t]=r(t))}},function(t,e,i){var n=i(17);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,i){"use strict";i(156);var n=i(9),r=i(12),s=i(4),o=i(26),a=i(0),l=i(56),c=a("species"),u=!s(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),h=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2===i.length&&"a"===i[0]&&"b"===i[1]}();t.exports=function(t,e,i){var d=a(t),p=!s(function(){var e={};return e[d]=function(){return 7},7!=""[t](e)}),f=p?!s(function(){var e=!1,i=/a/;return i.exec=function(){return e=!0,null},"split"===t&&(i.constructor={},i.constructor[c]=function(){return i}),i[d](""),!e}):void 0;if(!p||!f||"replace"===t&&!u||"split"===t&&!h){var m=/./[d],g=i(o,d,""[t],function(t,e,i,n,r){return e.exec===l?p&&!r?{done:!0,value:m.call(e,i,n)}:{done:!0,value:t.call(i,e,n)}:{done:!1}}),y=g[0],v=g[1];n(String.prototype,t,y),r(RegExp.prototype,d,2==e?function(t,e){return v.call(t,this,e)}:function(t){return v.call(t,this)})}}},function(t,e,i){"use strict";var n,r,s=i(36),o=RegExp.prototype.exec,a=String.prototype.replace,l=o,c=(n=/a/,r=/b*/g,o.call(n,"a"),o.call(r,"a"),0!==n.lastIndex||0!==r.lastIndex),u=void 0!==/()??/.exec("")[1];(c||u)&&(l=function(t){var e,i,n,r,l=this;return u&&(i=new RegExp("^"+l.source+"$(?!\\s)",s.call(l))),c&&(e=l.lastIndex),n=o.call(l,t),c&&n&&(l.lastIndex=l.global?n.index+n[0].length:e),u&&n&&n.length>1&&a.call(n[0],i,function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(n[r]=void 0)}),n}),t.exports=l},function(t,e,i){"use strict";var n=i(41),r=RegExp.prototype.exec;t.exports=function(t,e){var i=t.exec;if("function"==typeof i){var s=i.call(t,e);if("object"!=typeof s)throw new TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==n(t))throw new TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},function(t,e,i){"use strict";var n=i(87)(!0);t.exports=function(t,e,i){return e+(i?n(t,e).length:1)}},function(t,e,i){var n=i(5).f,r=Function.prototype,s=/^\s*function ([^ (]*)/;"name"in r||i(3)&&n(r,"name",{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(t){return""}}})},function(t,e,i){var n=i(2),r=i(42),s=i(0)("species");t.exports=function(t,e){var i,o=n(t).constructor;return void 0===o||void 0==(i=n(o)[s])?e:r(i)}},function(t,e,i){var n=i(8),r=i(1).document,s=n(r)&&n(r.createElement);t.exports=function(t){return s?r.createElement(t):{}}},function(t,e,i){var n;n=function(){const t=0,e=1,i=2,n=3,r=4,s=5,o=6,a=7,l=8,c=9,u=10,h=11,d=12;function p(t,e){e=e||0;const i=t.charCodeAt(e);if(55296<=i&&i<=56319&&e<t.length-1){const n=i,r=t.charCodeAt(e+1);return 56320<=r&&r<=57343?1024*(n-55296)+(r-56320)+65536:n}if(56320<=i&&i<=57343&&e>=1){const n=t.charCodeAt(e-1);return 55296<=n&&n<=56319?1024*(n-55296)+(i-56320)+65536:i}return i}function f(f,g){if((g=g||0)<0)return 0;if(g>=f.length-1)return f.length;let y=m(p(f,g));for(let x=g+1;x<f.length;x++){if(55296<=f.charCodeAt(x-1)&&f.charCodeAt(x-1)<=56319&&56320<=f.charCodeAt(x)&&f.charCodeAt(x)<=57343)continue;const g=m(p(f,x));if(b=g,!((v=y)===h&&b===d||v===n&&b===h||v===h&&b===n||v===t&&b===e||v!==i&&v!==t&&v!==e&&b!==i&&b!==t&&b!==e&&(v===o&&(b===o||b===a||b===c||b===u)||!(v!==c&&v!==a||b!==a&&b!==l)||(v===u||v===l)&&b===l||v===r&&b===r||b===n||b===s)))return x;y=g}var v,b;return f.length}function m(p){return 13===p?t:10===p?e:0<=p&&p<=9||11<=p&&p<=12||14<=p&&p<=31||127<=p&&p<=159||173===p||1536<=p&&p<=1541||1564===p||1757===p||1807===p||6158===p||8203===p||8206<=p&&p<=8207||8232===p||8233===p||8234<=p&&p<=8238||8288<=p&&p<=8292||8293===p||8294<=p&&p<=8303||55296<=p&&p<=57343||65279===p||65520<=p&&p<=65528||65529<=p&&p<=65531||69821===p||113824<=p&&p<=113827||119155<=p&&p<=119162||917504===p||917505===p||917506<=p&&p<=917535||917536<=p&&p<=917631||917632<=p&&p<=917759||918e3<=p&&p<=921599?i:768<=p&&p<=879||1155<=p&&p<=1159||1160<=p&&p<=1161||1425<=p&&p<=1469||1471===p||1473<=p&&p<=1474||1476<=p&&p<=1477||1479===p||1552<=p&&p<=1562||1611<=p&&p<=1631||1648===p||1750<=p&&p<=1756||1759<=p&&p<=1764||1767<=p&&p<=1768||1770<=p&&p<=1773||1809===p||1840<=p&&p<=1866||1958<=p&&p<=1968||2027<=p&&p<=2035||2070<=p&&p<=2073||2075<=p&&p<=2083||2085<=p&&p<=2087||2089<=p&&p<=2093||2137<=p&&p<=2139||2275<=p&&p<=2306||2362===p||2364===p||2369<=p&&p<=2376||2381===p||2385<=p&&p<=2391||2402<=p&&p<=2403||2433===p||2492===p||2494===p||2497<=p&&p<=2500||2509===p||2519===p||2530<=p&&p<=2531||2561<=p&&p<=2562||2620===p||2625<=p&&p<=2626||2631<=p&&p<=2632||2635<=p&&p<=2637||2641===p||2672<=p&&p<=2673||2677===p||2689<=p&&p<=2690||2748===p||2753<=p&&p<=2757||2759<=p&&p<=2760||2765===p||2786<=p&&p<=2787||2817===p||2876===p||2878===p||2879===p||2881<=p&&p<=2884||2893===p||2902===p||2903===p||2914<=p&&p<=2915||2946===p||3006===p||3008===p||3021===p||3031===p||3072===p||3134<=p&&p<=3136||3142<=p&&p<=3144||3146<=p&&p<=3149||3157<=p&&p<=3158||3170<=p&&p<=3171||3201===p||3260===p||3263===p||3266===p||3270===p||3276<=p&&p<=3277||3285<=p&&p<=3286||3298<=p&&p<=3299||3329===p||3390===p||3393<=p&&p<=3396||3405===p||3415===p||3426<=p&&p<=3427||3530===p||3535===p||3538<=p&&p<=3540||3542===p||3551===p||3633===p||3636<=p&&p<=3642||3655<=p&&p<=3662||3761===p||3764<=p&&p<=3769||3771<=p&&p<=3772||3784<=p&&p<=3789||3864<=p&&p<=3865||3893===p||3895===p||3897===p||3953<=p&&p<=3966||3968<=p&&p<=3972||3974<=p&&p<=3975||3981<=p&&p<=3991||3993<=p&&p<=4028||4038===p||4141<=p&&p<=4144||4146<=p&&p<=4151||4153<=p&&p<=4154||4157<=p&&p<=4158||4184<=p&&p<=4185||4190<=p&&p<=4192||4209<=p&&p<=4212||4226===p||4229<=p&&p<=4230||4237===p||4253===p||4957<=p&&p<=4959||5906<=p&&p<=5908||5938<=p&&p<=5940||5970<=p&&p<=5971||6002<=p&&p<=6003||6068<=p&&p<=6069||6071<=p&&p<=6077||6086===p||6089<=p&&p<=6099||6109===p||6155<=p&&p<=6157||6313===p||6432<=p&&p<=6434||6439<=p&&p<=6440||6450===p||6457<=p&&p<=6459||6679<=p&&p<=6680||6683===p||6742===p||6744<=p&&p<=6750||6752===p||6754===p||6757<=p&&p<=6764||6771<=p&&p<=6780||6783===p||6832<=p&&p<=6845||6846===p||6912<=p&&p<=6915||6964===p||6966<=p&&p<=6970||6972===p||6978===p||7019<=p&&p<=7027||7040<=p&&p<=7041||7074<=p&&p<=7077||7080<=p&&p<=7081||7083<=p&&p<=7085||7142===p||7144<=p&&p<=7145||7149===p||7151<=p&&p<=7153||7212<=p&&p<=7219||7222<=p&&p<=7223||7376<=p&&p<=7378||7380<=p&&p<=7392||7394<=p&&p<=7400||7405===p||7412===p||7416<=p&&p<=7417||7616<=p&&p<=7669||7676<=p&&p<=7679||8204<=p&&p<=8205||8400<=p&&p<=8412||8413<=p&&p<=8416||8417===p||8418<=p&&p<=8420||8421<=p&&p<=8432||11503<=p&&p<=11505||11647===p||11744<=p&&p<=11775||12330<=p&&p<=12333||12334<=p&&p<=12335||12441<=p&&p<=12442||42607===p||42608<=p&&p<=42610||42612<=p&&p<=42621||42654<=p&&p<=42655||42736<=p&&p<=42737||43010===p||43014===p||43019===p||43045<=p&&p<=43046||43204===p||43232<=p&&p<=43249||43302<=p&&p<=43309||43335<=p&&p<=43345||43392<=p&&p<=43394||43443===p||43446<=p&&p<=43449||43452===p||43493===p||43561<=p&&p<=43566||43569<=p&&p<=43570||43573<=p&&p<=43574||43587===p||43596===p||43644===p||43696===p||43698<=p&&p<=43700||43703<=p&&p<=43704||43710<=p&&p<=43711||43713===p||43756<=p&&p<=43757||43766===p||44005===p||44008===p||44013===p||64286===p||65024<=p&&p<=65039||65056<=p&&p<=65071||65438<=p&&p<=65439||66045===p||66272===p||66422<=p&&p<=66426||68097<=p&&p<=68099||68101<=p&&p<=68102||68108<=p&&p<=68111||68152<=p&&p<=68154||68159===p||68325<=p&&p<=68326||69633===p||69688<=p&&p<=69702||69759<=p&&p<=69761||69811<=p&&p<=69814||69817<=p&&p<=69818||69888<=p&&p<=69890||69927<=p&&p<=69931||69933<=p&&p<=69940||70003===p||70016<=p&&p<=70017||70070<=p&&p<=70078||70090<=p&&p<=70092||70191<=p&&p<=70193||70196===p||70198<=p&&p<=70199||70367===p||70371<=p&&p<=70378||70400<=p&&p<=70401||70460===p||70462===p||70464===p||70487===p||70502<=p&&p<=70508||70512<=p&&p<=70516||70832===p||70835<=p&&p<=70840||70842===p||70845===p||70847<=p&&p<=70848||70850<=p&&p<=70851||71087===p||71090<=p&&p<=71093||71100<=p&&p<=71101||71103<=p&&p<=71104||71132<=p&&p<=71133||71219<=p&&p<=71226||71229===p||71231<=p&&p<=71232||71339===p||71341===p||71344<=p&&p<=71349||71351===p||71453<=p&&p<=71455||71458<=p&&p<=71461||71463<=p&&p<=71467||92912<=p&&p<=92916||92976<=p&&p<=92982||94095<=p&&p<=94098||113821<=p&&p<=113822||119141===p||119143<=p&&p<=119145||119150<=p&&p<=119154||119163<=p&&p<=119170||119173<=p&&p<=119179||119210<=p&&p<=119213||119362<=p&&p<=119364||121344<=p&&p<=121398||121403<=p&&p<=121452||121461===p||121476===p||121499<=p&&p<=121503||121505<=p&&p<=121519||125136<=p&&p<=125142||917760<=p&&p<=917999?n:127462<=p&&p<=127487?r:127995<=p&&p<=127999?d:2307===p||2363===p||2366<=p&&p<=2368||2377<=p&&p<=2380||2382<=p&&p<=2383||2434<=p&&p<=2435||2495<=p&&p<=2496||2503<=p&&p<=2504||2507<=p&&p<=2508||2563===p||2622<=p&&p<=2624||2691===p||2750<=p&&p<=2752||2761===p||2763<=p&&p<=2764||2818<=p&&p<=2819||2880===p||2887<=p&&p<=2888||2891<=p&&p<=2892||3007===p||3009<=p&&p<=3010||3014<=p&&p<=3016||3018<=p&&p<=3020||3073<=p&&p<=3075||3137<=p&&p<=3140||3202<=p&&p<=3203||3262===p||3264<=p&&p<=3265||3267<=p&&p<=3268||3271<=p&&p<=3272||3274<=p&&p<=3275||3330<=p&&p<=3331||3391<=p&&p<=3392||3398<=p&&p<=3400||3402<=p&&p<=3404||3458<=p&&p<=3459||3536<=p&&p<=3537||3544<=p&&p<=3550||3570<=p&&p<=3571||3635===p||3763===p||3902<=p&&p<=3903||3967===p||4145===p||4155<=p&&p<=4156||4182<=p&&p<=4183||4228===p||6070===p||6078<=p&&p<=6085||6087<=p&&p<=6088||6435<=p&&p<=6438||6441<=p&&p<=6443||6448<=p&&p<=6449||6451<=p&&p<=6456||6681<=p&&p<=6682||6741===p||6743===p||6765<=p&&p<=6770||6916===p||6965===p||6971===p||6973<=p&&p<=6977||6979<=p&&p<=6980||7042===p||7073===p||7078<=p&&p<=7079||7082===p||7143===p||7146<=p&&p<=7148||7150===p||7154<=p&&p<=7155||7204<=p&&p<=7211||7220<=p&&p<=7221||7393===p||7410<=p&&p<=7411||43043<=p&&p<=43044||43047===p||43136<=p&&p<=43137||43188<=p&&p<=43203||43346<=p&&p<=43347||43395===p||43444<=p&&p<=43445||43450<=p&&p<=43451||43453<=p&&p<=43456||43567<=p&&p<=43568||43571<=p&&p<=43572||43597===p||43755===p||43758<=p&&p<=43759||43765===p||44003<=p&&p<=44004||44006<=p&&p<=44007||44009<=p&&p<=44010||44012===p||69632===p||69634===p||69762===p||69808<=p&&p<=69810||69815<=p&&p<=69816||69932===p||70018===p||70067<=p&&p<=70069||70079<=p&&p<=70080||70188<=p&&p<=70190||70194<=p&&p<=70195||70197===p||70368<=p&&p<=70370||70402<=p&&p<=70403||70463===p||70465<=p&&p<=70468||70471<=p&&p<=70472||70475<=p&&p<=70477||70498<=p&&p<=70499||70833<=p&&p<=70834||70841===p||70843<=p&&p<=70844||70846===p||70849===p||71088<=p&&p<=71089||71096<=p&&p<=71099||71102===p||71216<=p&&p<=71218||71227<=p&&p<=71228||71230===p||71340===p||71342<=p&&p<=71343||71350===p||71456<=p&&p<=71457||71462===p||94033<=p&&p<=94078||119142===p||119149===p?s:4352<=p&&p<=4447||43360<=p&&p<=43388?o:4448<=p&&p<=4519||55216<=p&&p<=55238?a:4520<=p&&p<=4607||55243<=p&&p<=55291?l:44032===p||44060===p||44088===p||44116===p||44144===p||44172===p||44200===p||44228===p||44256===p||44284===p||44312===p||44340===p||44368===p||44396===p||44424===p||44452===p||44480===p||44508===p||44536===p||44564===p||44592===p||44620===p||44648===p||44676===p||44704===p||44732===p||44760===p||44788===p||44816===p||44844===p||44872===p||44900===p||44928===p||44956===p||44984===p||45012===p||45040===p||45068===p||45096===p||45124===p||45152===p||45180===p||45208===p||45236===p||45264===p||45292===p||45320===p||45348===p||45376===p||45404===p||45432===p||45460===p||45488===p||45516===p||45544===p||45572===p||45600===p||45628===p||45656===p||45684===p||45712===p||45740===p||45768===p||45796===p||45824===p||45852===p||45880===p||45908===p||45936===p||45964===p||45992===p||46020===p||46048===p||46076===p||46104===p||46132===p||46160===p||46188===p||46216===p||46244===p||46272===p||46300===p||46328===p||46356===p||46384===p||46412===p||46440===p||46468===p||46496===p||46524===p||46552===p||46580===p||46608===p||46636===p||46664===p||46692===p||46720===p||46748===p||46776===p||46804===p||46832===p||46860===p||46888===p||46916===p||46944===p||46972===p||47e3===p||47028===p||47056===p||47084===p||47112===p||47140===p||47168===p||47196===p||47224===p||47252===p||47280===p||47308===p||47336===p||47364===p||47392===p||47420===p||47448===p||47476===p||47504===p||47532===p||47560===p||47588===p||47616===p||47644===p||47672===p||47700===p||47728===p||47756===p||47784===p||47812===p||47840===p||47868===p||47896===p||47924===p||47952===p||47980===p||48008===p||48036===p||48064===p||48092===p||48120===p||48148===p||48176===p||48204===p||48232===p||48260===p||48288===p||48316===p||48344===p||48372===p||48400===p||48428===p||48456===p||48484===p||48512===p||48540===p||48568===p||48596===p||48624===p||48652===p||48680===p||48708===p||48736===p||48764===p||48792===p||48820===p||48848===p||48876===p||48904===p||48932===p||48960===p||48988===p||49016===p||49044===p||49072===p||49100===p||49128===p||49156===p||49184===p||49212===p||49240===p||49268===p||49296===p||49324===p||49352===p||49380===p||49408===p||49436===p||49464===p||49492===p||49520===p||49548===p||49576===p||49604===p||49632===p||49660===p||49688===p||49716===p||49744===p||49772===p||49800===p||49828===p||49856===p||49884===p||49912===p||49940===p||49968===p||49996===p||50024===p||50052===p||50080===p||50108===p||50136===p||50164===p||50192===p||50220===p||50248===p||50276===p||50304===p||50332===p||50360===p||50388===p||50416===p||50444===p||50472===p||50500===p||50528===p||50556===p||50584===p||50612===p||50640===p||50668===p||50696===p||50724===p||50752===p||50780===p||50808===p||50836===p||50864===p||50892===p||50920===p||50948===p||50976===p||51004===p||51032===p||51060===p||51088===p||51116===p||51144===p||51172===p||51200===p||51228===p||51256===p||51284===p||51312===p||51340===p||51368===p||51396===p||51424===p||51452===p||51480===p||51508===p||51536===p||51564===p||51592===p||51620===p||51648===p||51676===p||51704===p||51732===p||51760===p||51788===p||51816===p||51844===p||51872===p||51900===p||51928===p||51956===p||51984===p||52012===p||52040===p||52068===p||52096===p||52124===p||52152===p||52180===p||52208===p||52236===p||52264===p||52292===p||52320===p||52348===p||52376===p||52404===p||52432===p||52460===p||52488===p||52516===p||52544===p||52572===p||52600===p||52628===p||52656===p||52684===p||52712===p||52740===p||52768===p||52796===p||52824===p||52852===p||52880===p||52908===p||52936===p||52964===p||52992===p||53020===p||53048===p||53076===p||53104===p||53132===p||53160===p||53188===p||53216===p||53244===p||53272===p||53300===p||53328===p||53356===p||53384===p||53412===p||53440===p||53468===p||53496===p||53524===p||53552===p||53580===p||53608===p||53636===p||53664===p||53692===p||53720===p||53748===p||53776===p||53804===p||53832===p||53860===p||53888===p||53916===p||53944===p||53972===p||54e3===p||54028===p||54056===p||54084===p||54112===p||54140===p||54168===p||54196===p||54224===p||54252===p||54280===p||54308===p||54336===p||54364===p||54392===p||54420===p||54448===p||54476===p||54504===p||54532===p||54560===p||54588===p||54616===p||54644===p||54672===p||54700===p||54728===p||54756===p||54784===p||54812===p||54840===p||54868===p||54896===p||54924===p||54952===p||54980===p||55008===p||55036===p||55064===p||55092===p||55120===p||55148===p||55176===p?c:44033<=p&&p<=44059||44061<=p&&p<=44087||44089<=p&&p<=44115||44117<=p&&p<=44143||44145<=p&&p<=44171||44173<=p&&p<=44199||44201<=p&&p<=44227||44229<=p&&p<=44255||44257<=p&&p<=44283||44285<=p&&p<=44311||44313<=p&&p<=44339||44341<=p&&p<=44367||44369<=p&&p<=44395||44397<=p&&p<=44423||44425<=p&&p<=44451||44453<=p&&p<=44479||44481<=p&&p<=44507||44509<=p&&p<=44535||44537<=p&&p<=44563||44565<=p&&p<=44591||44593<=p&&p<=44619||44621<=p&&p<=44647||44649<=p&&p<=44675||44677<=p&&p<=44703||44705<=p&&p<=44731||44733<=p&&p<=44759||44761<=p&&p<=44787||44789<=p&&p<=44815||44817<=p&&p<=44843||44845<=p&&p<=44871||44873<=p&&p<=44899||44901<=p&&p<=44927||44929<=p&&p<=44955||44957<=p&&p<=44983||44985<=p&&p<=45011||45013<=p&&p<=45039||45041<=p&&p<=45067||45069<=p&&p<=45095||45097<=p&&p<=45123||45125<=p&&p<=45151||45153<=p&&p<=45179||45181<=p&&p<=45207||45209<=p&&p<=45235||45237<=p&&p<=45263||45265<=p&&p<=45291||45293<=p&&p<=45319||45321<=p&&p<=45347||45349<=p&&p<=45375||45377<=p&&p<=45403||45405<=p&&p<=45431||45433<=p&&p<=45459||45461<=p&&p<=45487||45489<=p&&p<=45515||45517<=p&&p<=45543||45545<=p&&p<=45571||45573<=p&&p<=45599||45601<=p&&p<=45627||45629<=p&&p<=45655||45657<=p&&p<=45683||45685<=p&&p<=45711||45713<=p&&p<=45739||45741<=p&&p<=45767||45769<=p&&p<=45795||45797<=p&&p<=45823||45825<=p&&p<=45851||45853<=p&&p<=45879||45881<=p&&p<=45907||45909<=p&&p<=45935||45937<=p&&p<=45963||45965<=p&&p<=45991||45993<=p&&p<=46019||46021<=p&&p<=46047||46049<=p&&p<=46075||46077<=p&&p<=46103||46105<=p&&p<=46131||46133<=p&&p<=46159||46161<=p&&p<=46187||46189<=p&&p<=46215||46217<=p&&p<=46243||46245<=p&&p<=46271||46273<=p&&p<=46299||46301<=p&&p<=46327||46329<=p&&p<=46355||46357<=p&&p<=46383||46385<=p&&p<=46411||46413<=p&&p<=46439||46441<=p&&p<=46467||46469<=p&&p<=46495||46497<=p&&p<=46523||46525<=p&&p<=46551||46553<=p&&p<=46579||46581<=p&&p<=46607||46609<=p&&p<=46635||46637<=p&&p<=46663||46665<=p&&p<=46691||46693<=p&&p<=46719||46721<=p&&p<=46747||46749<=p&&p<=46775||46777<=p&&p<=46803||46805<=p&&p<=46831||46833<=p&&p<=46859||46861<=p&&p<=46887||46889<=p&&p<=46915||46917<=p&&p<=46943||46945<=p&&p<=46971||46973<=p&&p<=46999||47001<=p&&p<=47027||47029<=p&&p<=47055||47057<=p&&p<=47083||47085<=p&&p<=47111||47113<=p&&p<=47139||47141<=p&&p<=47167||47169<=p&&p<=47195||47197<=p&&p<=47223||47225<=p&&p<=47251||47253<=p&&p<=47279||47281<=p&&p<=47307||47309<=p&&p<=47335||47337<=p&&p<=47363||47365<=p&&p<=47391||47393<=p&&p<=47419||47421<=p&&p<=47447||47449<=p&&p<=47475||47477<=p&&p<=47503||47505<=p&&p<=47531||47533<=p&&p<=47559||47561<=p&&p<=47587||47589<=p&&p<=47615||47617<=p&&p<=47643||47645<=p&&p<=47671||47673<=p&&p<=47699||47701<=p&&p<=47727||47729<=p&&p<=47755||47757<=p&&p<=47783||47785<=p&&p<=47811||47813<=p&&p<=47839||47841<=p&&p<=47867||47869<=p&&p<=47895||47897<=p&&p<=47923||47925<=p&&p<=47951||47953<=p&&p<=47979||47981<=p&&p<=48007||48009<=p&&p<=48035||48037<=p&&p<=48063||48065<=p&&p<=48091||48093<=p&&p<=48119||48121<=p&&p<=48147||48149<=p&&p<=48175||48177<=p&&p<=48203||48205<=p&&p<=48231||48233<=p&&p<=48259||48261<=p&&p<=48287||48289<=p&&p<=48315||48317<=p&&p<=48343||48345<=p&&p<=48371||48373<=p&&p<=48399||48401<=p&&p<=48427||48429<=p&&p<=48455||48457<=p&&p<=48483||48485<=p&&p<=48511||48513<=p&&p<=48539||48541<=p&&p<=48567||48569<=p&&p<=48595||48597<=p&&p<=48623||48625<=p&&p<=48651||48653<=p&&p<=48679||48681<=p&&p<=48707||48709<=p&&p<=48735||48737<=p&&p<=48763||48765<=p&&p<=48791||48793<=p&&p<=48819||48821<=p&&p<=48847||48849<=p&&p<=48875||48877<=p&&p<=48903||48905<=p&&p<=48931||48933<=p&&p<=48959||48961<=p&&p<=48987||48989<=p&&p<=49015||49017<=p&&p<=49043||49045<=p&&p<=49071||49073<=p&&p<=49099||49101<=p&&p<=49127||49129<=p&&p<=49155||49157<=p&&p<=49183||49185<=p&&p<=49211||49213<=p&&p<=49239||49241<=p&&p<=49267||49269<=p&&p<=49295||49297<=p&&p<=49323||49325<=p&&p<=49351||49353<=p&&p<=49379||49381<=p&&p<=49407||49409<=p&&p<=49435||49437<=p&&p<=49463||49465<=p&&p<=49491||49493<=p&&p<=49519||49521<=p&&p<=49547||49549<=p&&p<=49575||49577<=p&&p<=49603||49605<=p&&p<=49631||49633<=p&&p<=49659||49661<=p&&p<=49687||49689<=p&&p<=49715||49717<=p&&p<=49743||49745<=p&&p<=49771||49773<=p&&p<=49799||49801<=p&&p<=49827||49829<=p&&p<=49855||49857<=p&&p<=49883||49885<=p&&p<=49911||49913<=p&&p<=49939||49941<=p&&p<=49967||49969<=p&&p<=49995||49997<=p&&p<=50023||50025<=p&&p<=50051||50053<=p&&p<=50079||50081<=p&&p<=50107||50109<=p&&p<=50135||50137<=p&&p<=50163||50165<=p&&p<=50191||50193<=p&&p<=50219||50221<=p&&p<=50247||50249<=p&&p<=50275||50277<=p&&p<=50303||50305<=p&&p<=50331||50333<=p&&p<=50359||50361<=p&&p<=50387||50389<=p&&p<=50415||50417<=p&&p<=50443||50445<=p&&p<=50471||50473<=p&&p<=50499||50501<=p&&p<=50527||50529<=p&&p<=50555||50557<=p&&p<=50583||50585<=p&&p<=50611||50613<=p&&p<=50639||50641<=p&&p<=50667||50669<=p&&p<=50695||50697<=p&&p<=50723||50725<=p&&p<=50751||50753<=p&&p<=50779||50781<=p&&p<=50807||50809<=p&&p<=50835||50837<=p&&p<=50863||50865<=p&&p<=50891||50893<=p&&p<=50919||50921<=p&&p<=50947||50949<=p&&p<=50975||50977<=p&&p<=51003||51005<=p&&p<=51031||51033<=p&&p<=51059||51061<=p&&p<=51087||51089<=p&&p<=51115||51117<=p&&p<=51143||51145<=p&&p<=51171||51173<=p&&p<=51199||51201<=p&&p<=51227||51229<=p&&p<=51255||51257<=p&&p<=51283||51285<=p&&p<=51311||51313<=p&&p<=51339||51341<=p&&p<=51367||51369<=p&&p<=51395||51397<=p&&p<=51423||51425<=p&&p<=51451||51453<=p&&p<=51479||51481<=p&&p<=51507||51509<=p&&p<=51535||51537<=p&&p<=51563||51565<=p&&p<=51591||51593<=p&&p<=51619||51621<=p&&p<=51647||51649<=p&&p<=51675||51677<=p&&p<=51703||51705<=p&&p<=51731||51733<=p&&p<=51759||51761<=p&&p<=51787||51789<=p&&p<=51815||51817<=p&&p<=51843||51845<=p&&p<=51871||51873<=p&&p<=51899||51901<=p&&p<=51927||51929<=p&&p<=51955||51957<=p&&p<=51983||51985<=p&&p<=52011||52013<=p&&p<=52039||52041<=p&&p<=52067||52069<=p&&p<=52095||52097<=p&&p<=52123||52125<=p&&p<=52151||52153<=p&&p<=52179||52181<=p&&p<=52207||52209<=p&&p<=52235||52237<=p&&p<=52263||52265<=p&&p<=52291||52293<=p&&p<=52319||52321<=p&&p<=52347||52349<=p&&p<=52375||52377<=p&&p<=52403||52405<=p&&p<=52431||52433<=p&&p<=52459||52461<=p&&p<=52487||52489<=p&&p<=52515||52517<=p&&p<=52543||52545<=p&&p<=52571||52573<=p&&p<=52599||52601<=p&&p<=52627||52629<=p&&p<=52655||52657<=p&&p<=52683||52685<=p&&p<=52711||52713<=p&&p<=52739||52741<=p&&p<=52767||52769<=p&&p<=52795||52797<=p&&p<=52823||52825<=p&&p<=52851||52853<=p&&p<=52879||52881<=p&&p<=52907||52909<=p&&p<=52935||52937<=p&&p<=52963||52965<=p&&p<=52991||52993<=p&&p<=53019||53021<=p&&p<=53047||53049<=p&&p<=53075||53077<=p&&p<=53103||53105<=p&&p<=53131||53133<=p&&p<=53159||53161<=p&&p<=53187||53189<=p&&p<=53215||53217<=p&&p<=53243||53245<=p&&p<=53271||53273<=p&&p<=53299||53301<=p&&p<=53327||53329<=p&&p<=53355||53357<=p&&p<=53383||53385<=p&&p<=53411||53413<=p&&p<=53439||53441<=p&&p<=53467||53469<=p&&p<=53495||53497<=p&&p<=53523||53525<=p&&p<=53551||53553<=p&&p<=53579||53581<=p&&p<=53607||53609<=p&&p<=53635||53637<=p&&p<=53663||53665<=p&&p<=53691||53693<=p&&p<=53719||53721<=p&&p<=53747||53749<=p&&p<=53775||53777<=p&&p<=53803||53805<=p&&p<=53831||53833<=p&&p<=53859||53861<=p&&p<=53887||53889<=p&&p<=53915||53917<=p&&p<=53943||53945<=p&&p<=53971||53973<=p&&p<=53999||54001<=p&&p<=54027||54029<=p&&p<=54055||54057<=p&&p<=54083||54085<=p&&p<=54111||54113<=p&&p<=54139||54141<=p&&p<=54167||54169<=p&&p<=54195||54197<=p&&p<=54223||54225<=p&&p<=54251||54253<=p&&p<=54279||54281<=p&&p<=54307||54309<=p&&p<=54335||54337<=p&&p<=54363||54365<=p&&p<=54391||54393<=p&&p<=54419||54421<=p&&p<=54447||54449<=p&&p<=54475||54477<=p&&p<=54503||54505<=p&&p<=54531||54533<=p&&p<=54559||54561<=p&&p<=54587||54589<=p&&p<=54615||54617<=p&&p<=54643||54645<=p&&p<=54671||54673<=p&&p<=54699||54701<=p&&p<=54727||54729<=p&&p<=54755||54757<=p&&p<=54783||54785<=p&&p<=54811||54813<=p&&p<=54839||54841<=p&&p<=54867||54869<=p&&p<=54895||54897<=p&&p<=54923||54925<=p&&p<=54951||54953<=p&&p<=54979||54981<=p&&p<=55007||55009<=p&&p<=55035||55037<=p&&p<=55063||55065<=p&&p<=55091||55093<=p&&p<=55119||55121<=p&&p<=55147||55149<=p&&p<=55175||55177<=p&&p<=55203?u:h}var g={splitGraphemes:function(t){if(/^[\x20-\xFF]*$/.test(t))return t;const e=[];let i,n=0;for(;(i=f(t,n))<t.length;)e.push(t.slice(n,i)),n=i;return n<t.length&&e.push(t.slice(n)),e},countGraphemes:function(t){let e,i=0,n=0;for(;(e=f(t,n))<t.length;)n=e,i++;return n<t.length&&i++,i},nextBreak:f};class y{constructor(t,e){this.type=t,this.value=e}}var v={tokenize:function(t){const e=[],i=t.toString().split(/\r?\n/);let n="",r="";for(const t of i){n+=r,r=" ";const e=t.match(/((?:\\%)|[^%])*/);e&&(n+=e[0])}const s=new class{constructor(t){this.s=g.splitGraphemes(t),this.pos=0}end(){return this.pos>=this.s.length}get(){return this.pos<this.s.length?this.s[this.pos++]:null}peek(){return this.s[this.pos]}scan(t){let e;return(e="string"==typeof this.s?t.exec(this.s.slice(this.pos)):t.exec(this.s.slice(this.pos).join("")))?(this.pos+=e[0].length,e[0]):null}isWhiteSpace(){return/[ \f\n\r\t\v\xA0\u2028\u2029]/.test(this.s[this.pos])}makeToken(){if(this.end())return null;if(this.isWhiteSpace())return this.get(),new y("space");let t=null;if("\\"===this.peek()){if(this.get(),!this.end()){let e=this.scan(/^[a-zA-Z*]+/);"bgroup"===e?t=new y("{"):"egroup"===e?t=new y("}"):(e||(e=this.get()),t=new y("command",e))}}else if("{"===this.peek()||"}"===this.peek())t=new y(this.get());else if("#"===this.peek()){if(this.get(),!this.end()){let e=!1,i=this.peek();if(/[0-9?]/.test(i)&&(e=!0,this.pos+1<this.s.length)){const t=this.s[this.pos+1];e=/[^0-9A-Za-z]/.test(t)}e?(t=new y("#"),i=this.get(),t.value=i>="0"&&i<="9"?parseInt(i):"?"):t=new y("literal","#")}}else"~"===this.peek()?(this.get(),t=new y("command","space")):"$"===this.peek()?(this.get(),"$"===this.peek()?(this.get(),t=new y("$$")):t=new y("$")):t=new y("literal",this.get());return t}}(n);for(;!s.end();){const t=s.makeToken();t&&e.push(t)}return e}},b={"AMS-Regular":{65:[0,.68889,0,0],66:[0,.68889,0,0],67:[0,.68889,0,0],68:[0,.68889,0,0],69:[0,.68889,0,0],70:[0,.68889,0,0],71:[0,.68889,0,0],72:[0,.68889,0,0],73:[0,.68889,0,0],74:[.16667,.68889,0,0],75:[0,.68889,0,0],76:[0,.68889,0,0],77:[0,.68889,0,0],78:[0,.68889,0,0],79:[.16667,.68889,0,0],80:[0,.68889,0,0],81:[.16667,.68889,0,0],82:[0,.68889,0,0],83:[0,.68889,0,0],84:[0,.68889,0,0],85:[0,.68889,0,0],86:[0,.68889,0,0],87:[0,.68889,0,0],88:[0,.68889,0,0],89:[0,.68889,0,0],90:[0,.68889,0,0],107:[0,.68889,0,0],165:[0,.675,.025,0],174:[.15559,.69224,0,0],240:[0,.68889,0,0],295:[0,.68889,0,0],710:[0,.825,0,0],732:[0,.9,0,0],770:[0,.825,0,0],771:[0,.9,0,0],989:[.08167,.58167,0,0],1008:[0,.43056,.04028,0],8245:[0,.54986,0,0],8463:[0,.68889,0,0],8487:[0,.68889,0,0],8498:[0,.68889,0,0],8502:[0,.68889,0,0],8503:[0,.68889,0,0],8504:[0,.68889,0,0],8513:[0,.68889,0,0],8592:[-.03598,.46402,0,0],8594:[-.03598,.46402,0,0],8602:[-.13313,.36687,0,0],8603:[-.13313,.36687,0,0],8606:[.01354,.52239,0,0],8608:[.01354,.52239,0,0],8610:[.01354,.52239,0,0],8611:[.01354,.52239,0,0],8619:[0,.54986,0,0],8620:[0,.54986,0,0],8621:[-.13313,.37788,0,0],8622:[-.13313,.36687,0,0],8624:[0,.69224,0,0],8625:[0,.69224,0,0],8630:[0,.43056,0,0],8631:[0,.43056,0,0],8634:[.08198,.58198,0,0],8635:[.08198,.58198,0,0],8638:[.19444,.69224,0,0],8639:[.19444,.69224,0,0],8642:[.19444,.69224,0,0],8643:[.19444,.69224,0,0],8644:[.1808,.675,0,0],8646:[.1808,.675,0,0],8647:[.1808,.675,0,0],8648:[.19444,.69224,0,0],8649:[.1808,.675,0,0],8650:[.19444,.69224,0,0],8651:[.01354,.52239,0,0],8652:[.01354,.52239,0,0],8653:[-.13313,.36687,0,0],8654:[-.13313,.36687,0,0],8655:[-.13313,.36687,0,0],8666:[.13667,.63667,0,0],8667:[.13667,.63667,0,0],8669:[-.13313,.37788,0,0],8672:[-.064,.437,0,0],8674:[-.064,.437,0,0],8705:[0,.825,0,0],8708:[0,.68889,0,0],8709:[.08167,.58167,0,0],8717:[0,.43056,0,0],8722:[-.03598,.46402,0,0],8724:[.08198,.69224,0,0],8726:[.08167,.58167,0,0],8733:[0,.69224,0,0],8736:[0,.69224,0,0],8737:[0,.69224,0,0],8738:[.03517,.52239,0,0],8739:[.08167,.58167,0,0],8740:[.25142,.74111,0,0],8741:[.08167,.58167,0,0],8742:[.25142,.74111,0,0],8756:[0,.69224,0,0],8757:[0,.69224,0,0],8764:[-.13313,.36687,0,0],8765:[-.13313,.37788,0,0],8769:[-.13313,.36687,0,0],8770:[-.03625,.46375,0,0],8774:[.30274,.79383,0,0],8776:[-.01688,.48312,0,0],8778:[.08167,.58167,0,0],8782:[.06062,.54986,0,0],8783:[.06062,.54986,0,0],8785:[.08198,.58198,0,0],8786:[.08198,.58198,0,0],8787:[.08198,.58198,0,0],8790:[0,.69224,0,0],8791:[.22958,.72958,0,0],8796:[.08198,.91667,0,0],8806:[.25583,.75583,0,0],8807:[.25583,.75583,0,0],8808:[.25142,.75726,0,0],8809:[.25142,.75726,0,0],8812:[.25583,.75583,0,0],8814:[.20576,.70576,0,0],8815:[.20576,.70576,0,0],8816:[.30274,.79383,0,0],8817:[.30274,.79383,0,0],8818:[.22958,.72958,0,0],8819:[.22958,.72958,0,0],8822:[.1808,.675,0,0],8823:[.1808,.675,0,0],8828:[.13667,.63667,0,0],8829:[.13667,.63667,0,0],8830:[.22958,.72958,0,0],8831:[.22958,.72958,0,0],8832:[.20576,.70576,0,0],8833:[.20576,.70576,0,0],8840:[.30274,.79383,0,0],8841:[.30274,.79383,0,0],8842:[.13597,.63597,0,0],8843:[.13597,.63597,0,0],8847:[.03517,.54986,0,0],8848:[.03517,.54986,0,0],8858:[.08198,.58198,0,0],8859:[.08198,.58198,0,0],8861:[.08198,.58198,0,0],8862:[0,.675,0,0],8863:[0,.675,0,0],8864:[0,.675,0,0],8865:[0,.675,0,0],8872:[0,.69224,0,0],8873:[0,.69224,0,0],8874:[0,.69224,0,0],8876:[0,.68889,0,0],8877:[0,.68889,0,0],8878:[0,.68889,0,0],8879:[0,.68889,0,0],8882:[.03517,.54986,0,0],8883:[.03517,.54986,0,0],8884:[.13667,.63667,0,0],8885:[.13667,.63667,0,0],8888:[0,.54986,0,0],8890:[.19444,.43056,0,0],8891:[.19444,.69224,0,0],8892:[.19444,.69224,0,0],8901:[0,.54986,0,0],8903:[.08167,.58167,0,0],8905:[.08167,.58167,0,0],8906:[.08167,.58167,0,0],8907:[0,.69224,0,0],8908:[0,.69224,0,0],8909:[-.03598,.46402,0,0],8910:[0,.54986,0,0],8911:[0,.54986,0,0],8912:[.03517,.54986,0,0],8913:[.03517,.54986,0,0],8914:[0,.54986,0,0],8915:[0,.54986,0,0],8916:[0,.69224,0,0],8918:[.0391,.5391,0,0],8919:[.0391,.5391,0,0],8920:[.03517,.54986,0,0],8921:[.03517,.54986,0,0],8922:[.38569,.88569,0,0],8923:[.38569,.88569,0,0],8926:[.13667,.63667,0,0],8927:[.13667,.63667,0,0],8928:[.30274,.79383,0,0],8929:[.30274,.79383,0,0],8934:[.23222,.74111,0,0],8935:[.23222,.74111,0,0],8936:[.23222,.74111,0,0],8937:[.23222,.74111,0,0],8938:[.20576,.70576,0,0],8939:[.20576,.70576,0,0],8940:[.30274,.79383,0,0],8941:[.30274,.79383,0,0],8994:[.19444,.69224,0,0],8995:[.19444,.69224,0,0],9416:[.15559,.69224,0,0],9484:[0,.69224,0,0],9488:[0,.69224,0,0],9492:[0,.37788,0,0],9496:[0,.37788,0,0],9585:[.19444,.68889,0,0],9586:[.19444,.74111,0,0],9632:[0,.675,0,0],9633:[0,.675,0,0],9650:[0,.54986,0,0],9651:[0,.54986,0,0],9654:[.03517,.54986,0,0],9660:[0,.54986,0,0],9661:[0,.54986,0,0],9664:[.03517,.54986,0,0],9674:[.11111,.69224,0,0],9733:[.19444,.69224,0,0],10003:[0,.69224,0,0],10016:[0,.69224,0,0],10731:[.11111,.69224,0,0],10846:[.19444,.75583,0,0],10877:[.13667,.63667,0,0],10878:[.13667,.63667,0,0],10885:[.25583,.75583,0,0],10886:[.25583,.75583,0,0],10887:[.13597,.63597,0,0],10888:[.13597,.63597,0,0],10889:[.26167,.75726,0,0],10890:[.26167,.75726,0,0],10891:[.48256,.98256,0,0],10892:[.48256,.98256,0,0],10901:[.13667,.63667,0,0],10902:[.13667,.63667,0,0],10933:[.25142,.75726,0,0],10934:[.25142,.75726,0,0],10935:[.26167,.75726,0,0],10936:[.26167,.75726,0,0],10937:[.26167,.75726,0,0],10938:[.26167,.75726,0,0],10949:[.25583,.75583,0,0],10950:[.25583,.75583,0,0],10955:[.28481,.79383,0,0],10956:[.28481,.79383,0,0],57350:[.08167,.58167,0,0],57351:[.08167,.58167,0,0],57352:[.08167,.58167,0,0],57353:[0,.43056,.04028,0],57356:[.25142,.75726,0,0],57357:[.25142,.75726,0,0],57358:[.41951,.91951,0,0],57359:[.30274,.79383,0,0],57360:[.30274,.79383,0,0],57361:[.41951,.91951,0,0],57366:[.25142,.75726,0,0],57367:[.25142,.75726,0,0],57368:[.25142,.75726,0,0],57369:[.25142,.75726,0,0],57370:[.13597,.63597,0,0],57371:[.13597,.63597,0,0]},"Caligraphic-Regular":{48:[0,.43056,0,0],49:[0,.43056,0,0],50:[0,.43056,0,0],51:[.19444,.43056,0,0],52:[.19444,.43056,0,0],53:[.19444,.43056,0,0],54:[0,.64444,0,0],55:[.19444,.43056,0,0],56:[0,.64444,0,0],57:[.19444,.43056,0,0],65:[0,.68333,0,.19445],66:[0,.68333,.03041,.13889],67:[0,.68333,.05834,.13889],68:[0,.68333,.02778,.08334],69:[0,.68333,.08944,.11111],70:[0,.68333,.09931,.11111],71:[.09722,.68333,.0593,.11111],72:[0,.68333,.00965,.11111],73:[0,.68333,.07382,0],74:[.09722,.68333,.18472,.16667],75:[0,.68333,.01445,.05556],76:[0,.68333,0,.13889],77:[0,.68333,0,.13889],78:[0,.68333,.14736,.08334],79:[0,.68333,.02778,.11111],80:[0,.68333,.08222,.08334],81:[.09722,.68333,0,.11111],82:[0,.68333,0,.08334],83:[0,.68333,.075,.13889],84:[0,.68333,.25417,0],85:[0,.68333,.09931,.08334],86:[0,.68333,.08222,0],87:[0,.68333,.08222,.08334],88:[0,.68333,.14643,.13889],89:[.09722,.68333,.08222,.08334],90:[0,.68333,.07944,.13889]},"Fraktur-Regular":{33:[0,.69141,0,0],34:[0,.69141,0,0],38:[0,.69141,0,0],39:[0,.69141,0,0],40:[.24982,.74947,0,0],41:[.24982,.74947,0,0],42:[0,.62119,0,0],43:[.08319,.58283,0,0],44:[0,.10803,0,0],45:[.08319,.58283,0,0],46:[0,.10803,0,0],47:[.24982,.74947,0,0],48:[0,.47534,0,0],49:[0,.47534,0,0],50:[0,.47534,0,0],51:[.18906,.47534,0,0],52:[.18906,.47534,0,0],53:[.18906,.47534,0,0],54:[0,.69141,0,0],55:[.18906,.47534,0,0],56:[0,.69141,0,0],57:[.18906,.47534,0,0],58:[0,.47534,0,0],59:[.12604,.47534,0,0],61:[-.13099,.36866,0,0],63:[0,.69141,0,0],65:[0,.69141,0,0],66:[0,.69141,0,0],67:[0,.69141,0,0],68:[0,.69141,0,0],69:[0,.69141,0,0],70:[.12604,.69141,0,0],71:[0,.69141,0,0],72:[.06302,.69141,0,0],73:[0,.69141,0,0],74:[.12604,.69141,0,0],75:[0,.69141,0,0],76:[0,.69141,0,0],77:[0,.69141,0,0],78:[0,.69141,0,0],79:[0,.69141,0,0],80:[.18906,.69141,0,0],81:[.03781,.69141,0,0],82:[0,.69141,0,0],83:[0,.69141,0,0],84:[0,.69141,0,0],85:[0,.69141,0,0],86:[0,.69141,0,0],87:[0,.69141,0,0],88:[0,.69141,0,0],89:[.18906,.69141,0,0],90:[.12604,.69141,0,0],91:[.24982,.74947,0,0],93:[.24982,.74947,0,0],94:[0,.69141,0,0],97:[0,.47534,0,0],98:[0,.69141,0,0],99:[0,.47534,0,0],100:[0,.62119,0,0],101:[0,.47534,0,0],102:[.18906,.69141,0,0],103:[.18906,.47534,0,0],104:[.18906,.69141,0,0],105:[0,.69141,0,0],106:[0,.69141,0,0],107:[0,.69141,0,0],108:[0,.69141,0,0],109:[0,.47534,0,0],110:[0,.47534,0,0],111:[0,.47534,0,0],112:[.18906,.52396,0,0],113:[.18906,.47534,0,0],114:[0,.47534,0,0],115:[0,.47534,0,0],116:[0,.62119,0,0],117:[0,.47534,0,0],118:[0,.52396,0,0],119:[0,.52396,0,0],120:[.18906,.47534,0,0],121:[.18906,.47534,0,0],122:[.18906,.47534,0,0],8216:[0,.69141,0,0],8217:[0,.69141,0,0],58112:[0,.62119,0,0],58113:[0,.62119,0,0],58114:[.18906,.69141,0,0],58115:[.18906,.69141,0,0],58116:[.18906,.47534,0,0],58117:[0,.69141,0,0],58118:[0,.62119,0,0],58119:[0,.47534,0,0]},"Main-Bold":{33:[0,.69444,0,0],34:[0,.69444,0,0],35:[.19444,.69444,0,0],36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:[0,.69444,0,0],39:[0,.69444,0,0],40:[.25,.75,0,0],41:[.25,.75,0,0],42:[0,.75,0,0],43:[.13333,.63333,0,0],44:[.19444,.15556,0,0],45:[0,.44444,0,0],46:[0,.15556,0,0],47:[.25,.75,0,0],48:[0,.64444,0,0],49:[0,.64444,0,0],50:[0,.64444,0,0],51:[0,.64444,0,0],52:[0,.64444,0,0],53:[0,.64444,0,0],54:[0,.64444,0,0],55:[0,.64444,0,0],56:[0,.64444,0,0],57:[0,.64444,0,0],58:[0,.44444,0,0],59:[.19444,.44444,0,0],60:[.08556,.58556,0,0],61:[-.10889,.39111,0,0],62:[.08556,.58556,0,0],63:[0,.69444,0,0],64:[0,.69444,0,0],65:[0,.68611,0,0],66:[0,.68611,0,0],67:[0,.68611,0,0],68:[0,.68611,0,0],69:[0,.68611,0,0],70:[0,.68611,0,0],71:[0,.68611,0,0],72:[0,.68611,0,0],73:[0,.68611,0,0],74:[0,.68611,0,0],75:[0,.68611,0,0],76:[0,.68611,0,0],77:[0,.68611,0,0],78:[0,.68611,0,0],79:[0,.68611,0,0],80:[0,.68611,0,0],81:[.19444,.68611,0,0],82:[0,.68611,0,0],83:[0,.68611,0,0],84:[0,.68611,0,0],85:[0,.68611,0,0],86:[0,.68611,.01597,0],87:[0,.68611,.01597,0],88:[0,.68611,0,0],89:[0,.68611,.02875,0],90:[0,.68611,0,0],91:[.25,.75,0,0],92:[.25,.75,0,0],93:[.25,.75,0,0],94:[0,.69444,0,0],95:[.31,.13444,.03194,0],96:[0,.69444,0,0],97:[0,.44444,0,0],98:[0,.69444,0,0],99:[0,.44444,0,0],100:[0,.69444,0,0],101:[0,.44444,0,0],102:[0,.69444,.10903,0],103:[.19444,.44444,.01597,0],104:[0,.69444,0,0],105:[0,.69444,0,0],106:[.19444,.69444,0,0],107:[0,.69444,0,0],108:[0,.69444,0,0],109:[0,.44444,0,0],110:[0,.44444,0,0],111:[0,.44444,0,0],112:[.19444,.44444,0,0],113:[.19444,.44444,0,0],114:[0,.44444,0,0],115:[0,.44444,0,0],116:[0,.63492,0,0],117:[0,.44444,0,0],118:[0,.44444,.01597,0],119:[0,.44444,.01597,0],120:[0,.44444,0,0],121:[.19444,.44444,.01597,0],122:[0,.44444,0,0],123:[.25,.75,0,0],124:[.25,.75,0,0],125:[.25,.75,0,0],126:[.35,.34444,0,0],168:[0,.69444,0,0],172:[0,.44444,0,0],175:[0,.59611,0,0],176:[0,.69444,0,0],177:[.13333,.63333,0,0],180:[0,.69444,0,0],215:[.13333,.63333,0,0],247:[.13333,.63333,0,0],305:[0,.44444,0,0],567:[.19444,.44444,0,0],710:[0,.69444,0,0],711:[0,.63194,0,0],713:[0,.59611,0,0],714:[0,.69444,0,0],715:[0,.69444,0,0],728:[0,.69444,0,0],729:[0,.69444,0,0],730:[0,.69444,0,0],732:[0,.69444,0,0],768:[0,.69444,0,0],769:[0,.69444,0,0],770:[0,.69444,0,0],771:[0,.69444,0,0],772:[0,.59611,0,0],774:[0,.69444,0,0],775:[0,.69444,0,0],776:[0,.69444,0,0],778:[0,.69444,0,0],779:[0,.69444,0,0],780:[0,.63194,0,0],824:[.19444,.69444,0,0],915:[0,.68611,0,0],916:[0,.68611,0,0],920:[0,.68611,0,0],923:[0,.68611,0,0],926:[0,.68611,0,0],928:[0,.68611,0,0],931:[0,.68611,0,0],933:[0,.68611,0,0],934:[0,.68611,0,0],936:[0,.68611,0,0],937:[0,.68611,0,0],8211:[0,.44444,.03194,0],8212:[0,.44444,.03194,0],8216:[0,.69444,0,0],8217:[0,.69444,0,0],8220:[0,.69444,0,0],8221:[0,.69444,0,0],8224:[.19444,.69444,0,0],8225:[.19444,.69444,0,0],8242:[0,.55556,0,0],8407:[0,.72444,.15486,0],8463:[0,.69444,0,0],8465:[0,.69444,0,0],8467:[0,.69444,0,0],8472:[.19444,.44444,0,0],8476:[0,.69444,0,0],8501:[0,.69444,0,0],8592:[-.10889,.39111,0,0],8593:[.19444,.69444,0,0],8594:[-.10889,.39111,0,0],8595:[.19444,.69444,0,0],8596:[-.10889,.39111,0,0],8597:[.25,.75,0,0],8598:[.19444,.69444,0,0],8599:[.19444,.69444,0,0],8600:[.19444,.69444,0,0],8601:[.19444,.69444,0,0],8636:[-.10889,.39111,0,0],8637:[-.10889,.39111,0,0],8640:[-.10889,.39111,0,0],8641:[-.10889,.39111,0,0],8656:[-.10889,.39111,0,0],8657:[.19444,.69444,0,0],8658:[-.10889,.39111,0,0],8659:[.19444,.69444,0,0],8660:[-.10889,.39111,0,0],8661:[.25,.75,0,0],8704:[0,.69444,0,0],8706:[0,.69444,.06389,0],8707:[0,.69444,0,0],8709:[.05556,.75,0,0],8711:[0,.68611,0,0],8712:[.08556,.58556,0,0],8715:[.08556,.58556,0,0],8722:[.13333,.63333,0,0],8723:[.13333,.63333,0,0],8725:[.25,.75,0,0],8726:[.25,.75,0,0],8727:[-.02778,.47222,0,0],8728:[-.02639,.47361,0,0],8729:[-.02639,.47361,0,0],8730:[.18,.82,0,0],8733:[0,.44444,0,0],8734:[0,.44444,0,0],8736:[0,.69224,0,0],8739:[.25,.75,0,0],8741:[.25,.75,0,0],8743:[0,.55556,0,0],8744:[0,.55556,0,0],8745:[0,.55556,0,0],8746:[0,.55556,0,0],8747:[.19444,.69444,.12778,0],8764:[-.10889,.39111,0,0],8768:[.19444,.69444,0,0],8771:[.00222,.50222,0,0],8776:[.02444,.52444,0,0],8781:[.00222,.50222,0,0],8801:[.00222,.50222,0,0],8804:[.19667,.69667,0,0],8805:[.19667,.69667,0,0],8810:[.08556,.58556,0,0],8811:[.08556,.58556,0,0],8826:[.08556,.58556,0,0],8827:[.08556,.58556,0,0],8834:[.08556,.58556,0,0],8835:[.08556,.58556,0,0],8838:[.19667,.69667,0,0],8839:[.19667,.69667,0,0],8846:[0,.55556,0,0],8849:[.19667,.69667,0,0],8850:[.19667,.69667,0,0],8851:[0,.55556,0,0],8852:[0,.55556,0,0],8853:[.13333,.63333,0,0],8854:[.13333,.63333,0,0],8855:[.13333,.63333,0,0],8856:[.13333,.63333,0,0],8857:[.13333,.63333,0,0],8866:[0,.69444,0,0],8867:[0,.69444,0,0],8868:[0,.69444,0,0],8869:[0,.69444,0,0],8900:[-.02639,.47361,0,0],8901:[-.02639,.47361,0,0],8902:[-.02778,.47222,0,0],8968:[.25,.75,0,0],8969:[.25,.75,0,0],8970:[.25,.75,0,0],8971:[.25,.75,0,0],8994:[-.13889,.36111,0,0],8995:[-.13889,.36111,0,0],9651:[.19444,.69444,0,0],9657:[-.02778,.47222,0,0],9661:[.19444,.69444,0,0],9667:[-.02778,.47222,0,0],9711:[.19444,.69444,0,0],9824:[.12963,.69444,0,0],9825:[.12963,.69444,0,0],9826:[.12963,.69444,0,0],9827:[.12963,.69444,0,0],9837:[0,.75,0,0],9838:[.19444,.69444,0,0],9839:[.19444,.69444,0,0],10216:[.25,.75,0,0],10217:[.25,.75,0,0],10815:[0,.68611,0,0],10927:[.19667,.69667,0,0],10928:[.19667,.69667,0,0]},"Main-Italic":{33:[0,.69444,.12417,0],34:[0,.69444,.06961,0],35:[.19444,.69444,.06616,0],37:[.05556,.75,.13639,0],38:[0,.69444,.09694,0],39:[0,.69444,.12417,0],40:[.25,.75,.16194,0],41:[.25,.75,.03694,0],42:[0,.75,.14917,0],43:[.05667,.56167,.03694,0],44:[.19444,.10556,0,0],45:[0,.43056,.02826,0],46:[0,.10556,0,0],47:[.25,.75,.16194,0],48:[0,.64444,.13556,0],49:[0,.64444,.13556,0],50:[0,.64444,.13556,0],51:[0,.64444,.13556,0],52:[.19444,.64444,.13556,0],53:[0,.64444,.13556,0],54:[0,.64444,.13556,0],55:[.19444,.64444,.13556,0],56:[0,.64444,.13556,0],57:[0,.64444,.13556,0],58:[0,.43056,.0582,0],59:[.19444,.43056,.0582,0],61:[-.13313,.36687,.06616,0],63:[0,.69444,.1225,0],64:[0,.69444,.09597,0],65:[0,.68333,0,0],66:[0,.68333,.10257,0],67:[0,.68333,.14528,0],68:[0,.68333,.09403,0],69:[0,.68333,.12028,0],70:[0,.68333,.13305,0],71:[0,.68333,.08722,0],72:[0,.68333,.16389,0],73:[0,.68333,.15806,0],74:[0,.68333,.14028,0],75:[0,.68333,.14528,0],76:[0,.68333,0,0],77:[0,.68333,.16389,0],78:[0,.68333,.16389,0],79:[0,.68333,.09403,0],80:[0,.68333,.10257,0],81:[.19444,.68333,.09403,0],82:[0,.68333,.03868,0],83:[0,.68333,.11972,0],84:[0,.68333,.13305,0],85:[0,.68333,.16389,0],86:[0,.68333,.18361,0],87:[0,.68333,.18361,0],88:[0,.68333,.15806,0],89:[0,.68333,.19383,0],90:[0,.68333,.14528,0],91:[.25,.75,.1875,0],93:[.25,.75,.10528,0],94:[0,.69444,.06646,0],95:[.31,.12056,.09208,0],97:[0,.43056,.07671,0],98:[0,.69444,.06312,0],99:[0,.43056,.05653,0],100:[0,.69444,.10333,0],101:[0,.43056,.07514,0],102:[.19444,.69444,.21194,0],103:[.19444,.43056,.08847,0],104:[0,.69444,.07671,0],105:[0,.65536,.1019,0],106:[.19444,.65536,.14467,0],107:[0,.69444,.10764,0],108:[0,.69444,.10333,0],109:[0,.43056,.07671,0],110:[0,.43056,.07671,0],111:[0,.43056,.06312,0],112:[.19444,.43056,.06312,0],113:[.19444,.43056,.08847,0],114:[0,.43056,.10764,0],115:[0,.43056,.08208,0],116:[0,.61508,.09486,0],117:[0,.43056,.07671,0],118:[0,.43056,.10764,0],119:[0,.43056,.10764,0],120:[0,.43056,.12042,0],121:[.19444,.43056,.08847,0],122:[0,.43056,.12292,0],126:[.35,.31786,.11585,0],163:[0,.69444,0,0],305:[0,.43056,0,.02778],567:[.19444,.43056,0,.08334],768:[0,.69444,0,0],769:[0,.69444,.09694,0],770:[0,.69444,.06646,0],771:[0,.66786,.11585,0],772:[0,.56167,.10333,0],774:[0,.69444,.10806,0],775:[0,.66786,.11752,0],776:[0,.66786,.10474,0],778:[0,.69444,0,0],779:[0,.69444,.1225,0],780:[0,.62847,.08295,0],915:[0,.68333,.13305,0],916:[0,.68333,0,0],920:[0,.68333,.09403,0],923:[0,.68333,0,0],926:[0,.68333,.15294,0],928:[0,.68333,.16389,0],931:[0,.68333,.12028,0],933:[0,.68333,.11111,0],934:[0,.68333,.05986,0],936:[0,.68333,.11111,0],937:[0,.68333,.10257,0],8211:[0,.43056,.09208,0],8212:[0,.43056,.09208,0],8216:[0,.69444,.12417,0],8217:[0,.69444,.12417,0],8220:[0,.69444,.1685,0],8221:[0,.69444,.06961,0],8463:[0,.68889,0,0]},"Main-Regular":{32:[0,0,0,0],33:[0,.69444,0,0],34:[0,.69444,0,0],35:[.19444,.69444,0,0],36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:[0,.69444,0,0],39:[0,.69444,0,0],40:[.25,.75,0,0],41:[.25,.75,0,0],42:[0,.75,0,0],43:[.08333,.58333,0,0],44:[.19444,.10556,0,0],45:[0,.43056,0,0],46:[0,.10556,0,0],47:[.25,.75,0,0],48:[0,.64444,0,0],49:[0,.64444,0,0],50:[0,.64444,0,0],51:[0,.64444,0,0],52:[0,.64444,0,0],53:[0,.64444,0,0],54:[0,.64444,0,0],55:[0,.64444,0,0],56:[0,.64444,0,0],57:[0,.64444,0,0],58:[0,.43056,0,0],59:[.19444,.43056,0,0],60:[.0391,.5391,0,0],61:[-.13313,.36687,0,0],62:[.0391,.5391,0,0],63:[0,.69444,0,0],64:[0,.69444,0,0],65:[0,.68333,0,0],66:[0,.68333,0,0],67:[0,.68333,0,0],68:[0,.68333,0,0],69:[0,.68333,0,0],70:[0,.68333,0,0],71:[0,.68333,0,0],72:[0,.68333,0,0],73:[0,.68333,0,0],74:[0,.68333,0,0],75:[0,.68333,0,0],76:[0,.68333,0,0],77:[0,.68333,0,0],78:[0,.68333,0,0],79:[0,.68333,0,0],80:[0,.68333,0,0],81:[.19444,.68333,0,0],82:[0,.68333,0,0],83:[0,.68333,0,0],84:[0,.68333,0,0],85:[0,.68333,0,0],86:[0,.68333,.01389,0],87:[0,.68333,.01389,0],88:[0,.68333,0,0],89:[0,.68333,.025,0],90:[0,.68333,0,0],91:[.25,.75,0,0],92:[.25,.75,0,0],93:[.25,.75,0,0],94:[0,.69444,0,0],95:[.31,.12056,.02778,0],96:[0,.69444,0,0],97:[0,.43056,0,0],98:[0,.69444,0,0],99:[0,.43056,0,0],100:[0,.69444,0,0],101:[0,.43056,0,0],102:[0,.69444,.07778,0],103:[.19444,.43056,.01389,0],104:[0,.69444,0,0],105:[0,.66786,0,0],106:[.19444,.66786,0,0],107:[0,.69444,0,0],108:[0,.69444,0,0],109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,0],112:[.19444,.43056,0,0],113:[.19444,.43056,0,0],114:[0,.43056,0,0],115:[0,.43056,0,0],116:[0,.61508,0,0],117:[0,.43056,0,0],118:[0,.43056,.01389,0],119:[0,.43056,.01389,0],120:[0,.43056,0,0],121:[.19444,.43056,.01389,0],122:[0,.43056,0,0],123:[.25,.75,0,0],124:[.25,.75,0,0],125:[.25,.75,0,0],126:[.35,.31786,0,0],160:[0,0,0,0],168:[0,.66786,0,0],172:[0,.43056,0,0],175:[0,.56778,0,0],176:[0,.69444,0,0],177:[.08333,.58333,0,0],180:[0,.69444,0,0],215:[.08333,.58333,0,0],247:[.08333,.58333,0,0],305:[0,.43056,0,0],567:[.19444,.43056,0,0],710:[0,.69444,0,0],711:[0,.62847,0,0],713:[0,.56778,0,0],714:[0,.69444,0,0],715:[0,.69444,0,0],728:[0,.69444,0,0],729:[0,.66786,0,0],730:[0,.69444,0,0],732:[0,.66786,0,0],768:[0,.69444,0,0],769:[0,.69444,0,0],770:[0,.69444,0,0],771:[0,.66786,0,0],772:[0,.56778,0,0],774:[0,.69444,0,0],775:[0,.66786,0,0],776:[0,.66786,0,0],778:[0,.69444,0,0],779:[0,.69444,0,0],780:[0,.62847,0,0],824:[.19444,.69444,0,0],915:[0,.68333,0,0],916:[0,.68333,0,0],920:[0,.68333,0,0],923:[0,.68333,0,0],926:[0,.68333,0,0],928:[0,.68333,0,0],931:[0,.68333,0,0],933:[0,.68333,0,0],934:[0,.68333,0,0],936:[0,.68333,0,0],937:[0,.68333,0,0],8211:[0,.43056,.02778,0],8212:[0,.43056,.02778,0],8216:[0,.69444,0,0],8217:[0,.69444,0,0],8220:[0,.69444,0,0],8221:[0,.69444,0,0],8224:[.19444,.69444,0,0],8225:[.19444,.69444,0,0],8230:[0,.12,0,0],8242:[0,.55556,0,0],8407:[0,.71444,.15382,0],8463:[0,.68889,0,0],8465:[0,.69444,0,0],8467:[0,.69444,0,.11111],8472:[.19444,.43056,0,.11111],8476:[0,.69444,0,0],8501:[0,.69444,0,0],8592:[-.13313,.36687,0,0],8593:[.19444,.69444,0,0],8594:[-.13313,.36687,0,0],8595:[.19444,.69444,0,0],8596:[-.13313,.36687,0,0],8597:[.25,.75,0,0],8598:[.19444,.69444,0,0],8599:[.19444,.69444,0,0],8600:[.19444,.69444,0,0],8601:[.19444,.69444,0,0],8614:[.011,.511,0,0],8617:[.011,.511,0,0],8618:[.011,.511,0,0],8636:[-.13313,.36687,0,0],8637:[-.13313,.36687,0,0],8640:[-.13313,.36687,0,0],8641:[-.13313,.36687,0,0],8652:[.011,.671,0,0],8656:[-.13313,.36687,0,0],8657:[.19444,.69444,0,0],8658:[-.13313,.36687,0,0],8659:[.19444,.69444,0,0],8660:[-.13313,.36687,0,0],8661:[.25,.75,0,0],8704:[0,.69444,0,0],8706:[0,.69444,.05556,.08334],8707:[0,.69444,0,0],8709:[.05556,.75,0,0],8711:[0,.68333,0,0],8712:[.0391,.5391,0,0],8715:[.0391,.5391,0,0],8722:[.08333,.58333,0,0],8723:[.08333,.58333,0,0],8725:[.25,.75,0,0],8726:[.25,.75,0,0],8727:[-.03472,.46528,0,0],8728:[-.05555,.44445,0,0],8729:[-.05555,.44445,0,0],8730:[.2,.8,0,0],8733:[0,.43056,0,0],8734:[0,.43056,0,0],8736:[0,.69224,0,0],8739:[.25,.75,0,0],8741:[.25,.75,0,0],8743:[0,.55556,0,0],8744:[0,.55556,0,0],8745:[0,.55556,0,0],8746:[0,.55556,0,0],8747:[.19444,.69444,.11111,0],8764:[-.13313,.36687,0,0],8768:[.19444,.69444,0,0],8771:[-.03625,.46375,0,0],8773:[-.022,.589,0,0],8776:[-.01688,.48312,0,0],8781:[-.03625,.46375,0,0],8784:[-.133,.67,0,0],8800:[.215,.716,0,0],8801:[-.03625,.46375,0,0],8804:[.13597,.63597,0,0],8805:[.13597,.63597,0,0],8810:[.0391,.5391,0,0],8811:[.0391,.5391,0,0],8826:[.0391,.5391,0,0],8827:[.0391,.5391,0,0],8834:[.0391,.5391,0,0],8835:[.0391,.5391,0,0],8838:[.13597,.63597,0,0],8839:[.13597,.63597,0,0],8846:[0,.55556,0,0],8849:[.13597,.63597,0,0],8850:[.13597,.63597,0,0],8851:[0,.55556,0,0],8852:[0,.55556,0,0],8853:[.08333,.58333,0,0],8854:[.08333,.58333,0,0],8855:[.08333,.58333,0,0],8856:[.08333,.58333,0,0],8857:[.08333,.58333,0,0],8866:[0,.69444,0,0],8867:[0,.69444,0,0],8868:[0,.69444,0,0],8869:[0,.69444,0,0],8872:[.249,.75,0,0],8900:[-.05555,.44445,0,0],8901:[-.05555,.44445,0,0],8902:[-.03472,.46528,0,0],8904:[.005,.505,0,0],8942:[.03,.9,0,0],8943:[-.19,.31,0,0],8945:[-.1,.82,0,0],8968:[.25,.75,0,0],8969:[.25,.75,0,0],8970:[.25,.75,0,0],8971:[.25,.75,0,0],8994:[-.14236,.35764,0,0],8995:[-.14236,.35764,0,0],9136:[.244,.744,0,0],9137:[.244,.744,0,0],9651:[.19444,.69444,0,0],9657:[-.03472,.46528,0,0],9661:[.19444,.69444,0,0],9667:[-.03472,.46528,0,0],9711:[.19444,.69444,0,0],9824:[.12963,.69444,0,0],9825:[.12963,.69444,0,0],9826:[.12963,.69444,0,0],9827:[.12963,.69444,0,0],9837:[0,.75,0,0],9838:[.19444,.69444,0,0],9839:[.19444,.69444,0,0],10216:[.25,.75,0,0],10217:[.25,.75,0,0],10222:[.244,.744,0,0],10223:[.244,.744,0,0],10229:[.011,.511,0,0],10230:[.011,.511,0,0],10231:[.011,.511,0,0],10232:[.024,.525,0,0],10233:[.024,.525,0,0],10234:[.024,.525,0,0],10236:[.011,.511,0,0],10815:[0,.68333,0,0],10927:[.13597,.63597,0,0],10928:[.13597,.63597,0,0]},"Math-BoldItalic":{47:[.19444,.69444,0,0],65:[0,.68611,0,0],66:[0,.68611,.04835,0],67:[0,.68611,.06979,0],68:[0,.68611,.03194,0],69:[0,.68611,.05451,0],70:[0,.68611,.15972,0],71:[0,.68611,0,0],72:[0,.68611,.08229,0],73:[0,.68611,.07778,0],74:[0,.68611,.10069,0],75:[0,.68611,.06979,0],76:[0,.68611,0,0],77:[0,.68611,.11424,0],78:[0,.68611,.11424,0],79:[0,.68611,.03194,0],80:[0,.68611,.15972,0],81:[.19444,.68611,0,0],82:[0,.68611,.00421,0],83:[0,.68611,.05382,0],84:[0,.68611,.15972,0],85:[0,.68611,.11424,0],86:[0,.68611,.25555,0],87:[0,.68611,.15972,0],88:[0,.68611,.07778,0],89:[0,.68611,.25555,0],90:[0,.68611,.06979,0],97:[0,.44444,0,0],98:[0,.69444,0,0],99:[0,.44444,0,0],100:[0,.69444,0,0],101:[0,.44444,0,0],102:[.19444,.69444,.11042,0],103:[.19444,.44444,.03704,0],104:[0,.69444,0,0],105:[0,.69326,0,0],106:[.19444,.69326,.0622,0],107:[0,.69444,.01852,0],108:[0,.69444,.0088,0],109:[0,.44444,0,0],110:[0,.44444,0,0],111:[0,.44444,0,0],112:[.19444,.44444,0,0],113:[.19444,.44444,.03704,0],114:[0,.44444,.03194,0],115:[0,.44444,0,0],116:[0,.63492,0,0],117:[0,.44444,0,0],118:[0,.44444,.03704,0],119:[0,.44444,.02778,0],120:[0,.44444,0,0],121:[.19444,.44444,.03704,0],122:[0,.44444,.04213,0],915:[0,.68611,.15972,0],916:[0,.68611,0,0],920:[0,.68611,.03194,0],923:[0,.68611,0,0],926:[0,.68611,.07458,0],928:[0,.68611,.08229,0],931:[0,.68611,.05451,0],933:[0,.68611,.15972,0],934:[0,.68611,0,0],936:[0,.68611,.11653,0],937:[0,.68611,.04835,0],945:[0,.44444,0,0],946:[.19444,.69444,.03403,0],947:[.19444,.44444,.06389,0],948:[0,.69444,.03819,0],949:[0,.44444,0,0],950:[.19444,.69444,.06215,0],951:[.19444,.44444,.03704,0],952:[0,.69444,.03194,0],953:[0,.44444,0,0],954:[0,.44444,0,0],955:[0,.69444,0,0],956:[.19444,.44444,0,0],957:[0,.44444,.06898,0],958:[.19444,.69444,.03021,0],959:[0,.44444,0,0],960:[0,.44444,.03704,0],961:[.19444,.44444,0,0],962:[.09722,.44444,.07917,0],963:[0,.44444,.03704,0],964:[0,.44444,.13472,0],965:[0,.44444,.03704,0],966:[.19444,.44444,0,0],967:[.19444,.44444,0,0],968:[.19444,.69444,.03704,0],969:[0,.44444,.03704,0],977:[0,.69444,0,0],981:[.19444,.69444,0,0],982:[0,.44444,.03194,0],1009:[.19444,.44444,0,0],1013:[0,.44444,0,0]},"Math-Italic":{47:[.19444,.69444,0,0],65:[0,.68333,0,.13889],66:[0,.68333,.05017,.08334],67:[0,.68333,.07153,.08334],68:[0,.68333,.02778,.05556],69:[0,.68333,.05764,.08334],70:[0,.68333,.13889,.08334],71:[0,.68333,0,.08334],72:[0,.68333,.08125,.05556],73:[0,.68333,.07847,.11111],74:[0,.68333,.09618,.16667],75:[0,.68333,.07153,.05556],76:[0,.68333,0,.02778],77:[0,.68333,.10903,.08334],78:[0,.68333,.10903,.08334],79:[0,.68333,.02778,.08334],80:[0,.68333,.13889,.08334],81:[.19444,.68333,0,.08334],82:[0,.68333,.00773,.08334],83:[0,.68333,.05764,.08334],84:[0,.68333,.13889,.08334],85:[0,.68333,.10903,.02778],86:[0,.68333,.22222,0],87:[0,.68333,.13889,0],88:[0,.68333,.07847,.08334],89:[0,.68333,.22222,0],90:[0,.68333,.07153,.08334],97:[0,.43056,0,0],98:[0,.69444,0,0],99:[0,.43056,0,.05556],100:[0,.69444,0,.16667],101:[0,.43056,0,.05556],102:[.19444,.69444,.10764,.16667],103:[.19444,.43056,.03588,.02778],104:[0,.69444,0,0],105:[0,.65952,0,0],106:[.19444,.65952,.05724,0],107:[0,.69444,.03148,0],108:[0,.69444,.01968,.08334],109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,.05556],112:[.19444,.43056,0,.08334],113:[.19444,.43056,.03588,.08334],114:[0,.43056,.02778,.05556],115:[0,.43056,0,.05556],116:[0,.61508,0,.08334],117:[0,.43056,0,.02778],118:[0,.43056,.03588,.02778],119:[0,.43056,.02691,.08334],120:[0,.43056,0,.02778],121:[.19444,.43056,.03588,.05556],122:[0,.43056,.04398,.05556],915:[0,.68333,.13889,.08334],916:[0,.68333,0,.16667],920:[0,.68333,.02778,.08334],923:[0,.68333,0,.16667],926:[0,.68333,.07569,.08334],928:[0,.68333,.08125,.05556],931:[0,.68333,.05764,.08334],933:[0,.68333,.13889,.05556],934:[0,.68333,0,.08334],936:[0,.68333,.11,.05556],937:[0,.68333,.05017,.08334],945:[0,.43056,.0037,.02778],946:[.19444,.69444,.05278,.08334],947:[.19444,.43056,.05556,0],948:[0,.69444,.03785,.05556],949:[0,.43056,0,.08334],950:[.19444,.69444,.07378,.08334],951:[.19444,.43056,.03588,.05556],952:[0,.69444,.02778,.08334],953:[0,.43056,0,.05556],954:[0,.43056,0,0],955:[0,.69444,0,0],956:[.19444,.43056,0,.02778],957:[0,.43056,.06366,.02778],958:[.19444,.69444,.04601,.11111],959:[0,.43056,0,.05556],960:[0,.43056,.03588,0],961:[.19444,.43056,0,.08334],962:[.09722,.43056,.07986,.08334],963:[0,.43056,.03588,0],964:[0,.43056,.1132,.02778],965:[0,.43056,.03588,.02778],966:[.19444,.43056,0,.08334],967:[.19444,.43056,0,.05556],968:[.19444,.69444,.03588,.11111],969:[0,.43056,.03588,0],977:[0,.69444,0,.08334],981:[.19444,.69444,0,.08334],982:[0,.43056,.02778,0],1009:[.19444,.43056,0,.08334],1013:[0,.43056,0,.05556]},"Math-Regular":{65:[0,.68333,0,.13889],66:[0,.68333,.05017,.08334],67:[0,.68333,.07153,.08334],68:[0,.68333,.02778,.05556],69:[0,.68333,.05764,.08334],70:[0,.68333,.13889,.08334],71:[0,.68333,0,.08334],72:[0,.68333,.08125,.05556],73:[0,.68333,.07847,.11111],74:[0,.68333,.09618,.16667],75:[0,.68333,.07153,.05556],76:[0,.68333,0,.02778],77:[0,.68333,.10903,.08334],78:[0,.68333,.10903,.08334],79:[0,.68333,.02778,.08334],80:[0,.68333,.13889,.08334],81:[.19444,.68333,0,.08334],82:[0,.68333,.00773,.08334],83:[0,.68333,.05764,.08334],84:[0,.68333,.13889,.08334],85:[0,.68333,.10903,.02778],86:[0,.68333,.22222,0],87:[0,.68333,.13889,0],88:[0,.68333,.07847,.08334],89:[0,.68333,.22222,0],90:[0,.68333,.07153,.08334],97:[0,.43056,0,0],98:[0,.69444,0,0],99:[0,.43056,0,.05556],100:[0,.69444,0,.16667],101:[0,.43056,0,.05556],102:[.19444,.69444,.10764,.16667],103:[.19444,.43056,.03588,.02778],104:[0,.69444,0,0],105:[0,.65952,0,0],106:[.19444,.65952,.05724,0],107:[0,.69444,.03148,0],108:[0,.69444,.01968,.08334],109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,.05556],112:[.19444,.43056,0,.08334],113:[.19444,.43056,.03588,.08334],114:[0,.43056,.02778,.05556],115:[0,.43056,0,.05556],116:[0,.61508,0,.08334],117:[0,.43056,0,.02778],118:[0,.43056,.03588,.02778],119:[0,.43056,.02691,.08334],120:[0,.43056,0,.02778],121:[.19444,.43056,.03588,.05556],122:[0,.43056,.04398,.05556],915:[0,.68333,.13889,.08334],916:[0,.68333,0,.16667],920:[0,.68333,.02778,.08334],923:[0,.68333,0,.16667],926:[0,.68333,.07569,.08334],928:[0,.68333,.08125,.05556],931:[0,.68333,.05764,.08334],933:[0,.68333,.13889,.05556],934:[0,.68333,0,.08334],936:[0,.68333,.11,.05556],937:[0,.68333,.05017,.08334],945:[0,.43056,.0037,.02778],946:[.19444,.69444,.05278,.08334],947:[.19444,.43056,.05556,0],948:[0,.69444,.03785,.05556],949:[0,.43056,0,.08334],950:[.19444,.69444,.07378,.08334],951:[.19444,.43056,.03588,.05556],952:[0,.69444,.02778,.08334],953:[0,.43056,0,.05556],954:[0,.43056,0,0],955:[0,.69444,0,0],956:[.19444,.43056,0,.02778],957:[0,.43056,.06366,.02778],958:[.19444,.69444,.04601,.11111],959:[0,.43056,0,.05556],960:[0,.43056,.03588,0],961:[.19444,.43056,0,.08334],962:[.09722,.43056,.07986,.08334],963:[0,.43056,.03588,0],964:[0,.43056,.1132,.02778],965:[0,.43056,.03588,.02778],966:[.19444,.43056,0,.08334],967:[.19444,.43056,0,.05556],968:[.19444,.69444,.03588,.11111],969:[0,.43056,.03588,0],977:[0,.69444,0,.08334],981:[.19444,.69444,0,.08334],982:[0,.43056,.02778,0],1009:[.19444,.43056,0,.08334],1013:[0,.43056,0,.05556]},"SansSerif-Regular":{33:[0,.69444,0,0],34:[0,.69444,0,0],35:[.19444,.69444,0,0],36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:[0,.69444,0,0],39:[0,.69444,0,0],40:[.25,.75,0,0],41:[.25,.75,0,0],42:[0,.75,0,0],43:[.08333,.58333,0,0],44:[.125,.08333,0,0],45:[0,.44444,0,0],46:[0,.08333,0,0],47:[.25,.75,0,0],48:[0,.65556,0,0],49:[0,.65556,0,0],50:[0,.65556,0,0],51:[0,.65556,0,0],52:[0,.65556,0,0],53:[0,.65556,0,0],54:[0,.65556,0,0],55:[0,.65556,0,0],56:[0,.65556,0,0],57:[0,.65556,0,0],58:[0,.44444,0,0],59:[.125,.44444,0,0],61:[-.13,.37,0,0],63:[0,.69444,0,0],64:[0,.69444,0,0],65:[0,.69444,0,0],66:[0,.69444,0,0],67:[0,.69444,0,0],68:[0,.69444,0,0],69:[0,.69444,0,0],70:[0,.69444,0,0],71:[0,.69444,0,0],72:[0,.69444,0,0],73:[0,.69444,0,0],74:[0,.69444,0,0],75:[0,.69444,0,0],76:[0,.69444,0,0],77:[0,.69444,0,0],78:[0,.69444,0,0],79:[0,.69444,0,0],80:[0,.69444,0,0],81:[.125,.69444,0,0],82:[0,.69444,0,0],83:[0,.69444,0,0],84:[0,.69444,0,0],85:[0,.69444,0,0],86:[0,.69444,.01389,0],87:[0,.69444,.01389,0],88:[0,.69444,0,0],89:[0,.69444,.025,0],90:[0,.69444,0,0],91:[.25,.75,0,0],93:[.25,.75,0,0],94:[0,.69444,0,0],95:[.35,.09444,.02778,0],97:[0,.44444,0,0],98:[0,.69444,0,0],99:[0,.44444,0,0],100:[0,.69444,0,0],101:[0,.44444,0,0],102:[0,.69444,.06944,0],103:[.19444,.44444,.01389,0],104:[0,.69444,0,0],105:[0,.67937,0,0],106:[.19444,.67937,0,0],107:[0,.69444,0,0],108:[0,.69444,0,0],109:[0,.44444,0,0],110:[0,.44444,0,0],111:[0,.44444,0,0],112:[.19444,.44444,0,0],113:[.19444,.44444,0,0],114:[0,.44444,.01389,0],115:[0,.44444,0,0],116:[0,.57143,0,0],117:[0,.44444,0,0],118:[0,.44444,.01389,0],119:[0,.44444,.01389,0],120:[0,.44444,0,0],121:[.19444,.44444,.01389,0],122:[0,.44444,0,0],126:[.35,.32659,0,0],305:[0,.44444,0,0],567:[.19444,.44444,0,0],768:[0,.69444,0,0],769:[0,.69444,0,0],770:[0,.69444,0,0],771:[0,.67659,0,0],772:[0,.60889,0,0],774:[0,.69444,0,0],775:[0,.67937,0,0],776:[0,.67937,0,0],778:[0,.69444,0,0],779:[0,.69444,0,0],780:[0,.63194,0,0],915:[0,.69444,0,0],916:[0,.69444,0,0],920:[0,.69444,0,0],923:[0,.69444,0,0],926:[0,.69444,0,0],928:[0,.69444,0,0],931:[0,.69444,0,0],933:[0,.69444,0,0],934:[0,.69444,0,0],936:[0,.69444,0,0],937:[0,.69444,0,0],8211:[0,.44444,.02778,0],8212:[0,.44444,.02778,0],8216:[0,.69444,0,0],8217:[0,.69444,0,0],8220:[0,.69444,0,0],8221:[0,.69444,0,0]},"Script-Regular":{65:[0,.7,.22925,0],66:[0,.7,.04087,0],67:[0,.7,.1689,0],68:[0,.7,.09371,0],69:[0,.7,.18583,0],70:[0,.7,.13634,0],71:[0,.7,.17322,0],72:[0,.7,.29694,0],73:[0,.7,.19189,0],74:[.27778,.7,.19189,0],75:[0,.7,.31259,0],76:[0,.7,.19189,0],77:[0,.7,.15981,0],78:[0,.7,.3525,0],79:[0,.7,.08078,0],80:[0,.7,.08078,0],81:[0,.7,.03305,0],82:[0,.7,.06259,0],83:[0,.7,.19189,0],84:[0,.7,.29087,0],85:[0,.7,.25815,0],86:[0,.7,.27523,0],87:[0,.7,.27523,0],88:[0,.7,.26006,0],89:[0,.7,.2939,0],90:[0,.7,.24037,0]},"Size1-Regular":{40:[.35001,.85,0,0],41:[.35001,.85,0,0],47:[.35001,.85,0,0],91:[.35001,.85,0,0],92:[.35001,.85,0,0],93:[.35001,.85,0,0],123:[.35001,.85,0,0],125:[.35001,.85,0,0],710:[0,.72222,0,0],732:[0,.72222,0,0],770:[0,.72222,0,0],771:[0,.72222,0,0],8214:[-99e-5,.601,0,0],8593:[1e-5,.6,0,0],8595:[1e-5,.6,0,0],8657:[1e-5,.6,0,0],8659:[1e-5,.6,0,0],8719:[.25001,.75,0,0],8720:[.25001,.75,0,0],8721:[.25001,.75,0,0],8730:[.35001,.85,0,0],8739:[-.00599,.606,0,0],8741:[-.00599,.606,0,0],8747:[.30612,.805,.19445,0],8748:[.306,.805,.19445,0],8749:[.306,.805,.19445,0],8750:[.30612,.805,.19445,0],8896:[.25001,.75,0,0],8897:[.25001,.75,0,0],8898:[.25001,.75,0,0],8899:[.25001,.75,0,0],8968:[.35001,.85,0,0],8969:[.35001,.85,0,0],8970:[.35001,.85,0,0],8971:[.35001,.85,0,0],9168:[-99e-5,.601,0,0],10216:[.35001,.85,0,0],10217:[.35001,.85,0,0],10752:[.25001,.75,0,0],10753:[.25001,.75,0,0],10754:[.25001,.75,0,0],10756:[.25001,.75,0,0],10758:[.25001,.75,0,0]},"Size2-Regular":{40:[.65002,1.15,0,0],41:[.65002,1.15,0,0],47:[.65002,1.15,0,0],91:[.65002,1.15,0,0],92:[.65002,1.15,0,0],93:[.65002,1.15,0,0],123:[.65002,1.15,0,0],125:[.65002,1.15,0,0],710:[0,.75,0,0],732:[0,.75,0,0],770:[0,.75,0,0],771:[0,.75,0,0],8719:[.55001,1.05,0,0],8720:[.55001,1.05,0,0],8721:[.55001,1.05,0,0],8730:[.65002,1.15,0,0],8747:[.86225,1.36,.44445,0],8748:[.862,1.36,.44445,0],8749:[.862,1.36,.44445,0],8750:[.86225,1.36,.44445,0],8896:[.55001,1.05,0,0],8897:[.55001,1.05,0,0],8898:[.55001,1.05,0,0],8899:[.55001,1.05,0,0],8968:[.65002,1.15,0,0],8969:[.65002,1.15,0,0],8970:[.65002,1.15,0,0],8971:[.65002,1.15,0,0],10216:[.65002,1.15,0,0],10217:[.65002,1.15,0,0],10752:[.55001,1.05,0,0],10753:[.55001,1.05,0,0],10754:[.55001,1.05,0,0],10756:[.55001,1.05,0,0],10758:[.55001,1.05,0,0]},"Size3-Regular":{40:[.95003,1.45,0,0],41:[.95003,1.45,0,0],47:[.95003,1.45,0,0],91:[.95003,1.45,0,0],92:[.95003,1.45,0,0],93:[.95003,1.45,0,0],123:[.95003,1.45,0,0],125:[.95003,1.45,0,0],710:[0,.75,0,0],732:[0,.75,0,0],770:[0,.75,0,0],771:[0,.75,0,0],8730:[.95003,1.45,0,0],8968:[.95003,1.45,0,0],8969:[.95003,1.45,0,0],8970:[.95003,1.45,0,0],8971:[.95003,1.45,0,0],10216:[.95003,1.45,0,0],10217:[.95003,1.45,0,0]},"Size4-Regular":{40:[1.25003,1.75,0,0],41:[1.25003,1.75,0,0],47:[1.25003,1.75,0,0],91:[1.25003,1.75,0,0],92:[1.25003,1.75,0,0],93:[1.25003,1.75,0,0],123:[1.25003,1.75,0,0],125:[1.25003,1.75,0,0],710:[0,.825,0,0],732:[0,.825,0,0],770:[0,.825,0,0],771:[0,.825,0,0],8730:[1.25003,1.75,0,0],8968:[1.25003,1.75,0,0],8969:[1.25003,1.75,0,0],8970:[1.25003,1.75,0,0],8971:[1.25003,1.75,0,0],9115:[.64502,1.155,0,0],9116:[1e-5,.6,0,0],9117:[.64502,1.155,0,0],9118:[.64502,1.155,0,0],9119:[1e-5,.6,0,0],9120:[.64502,1.155,0,0],9121:[.64502,1.155,0,0],9122:[-99e-5,.601,0,0],9123:[.64502,1.155,0,0],9124:[.64502,1.155,0,0],9125:[-99e-5,.601,0,0],9126:[.64502,1.155,0,0],9127:[1e-5,.9,0,0],9128:[.65002,1.15,0,0],9129:[.90001,0,0,0],9130:[0,.3,0,0],9131:[1e-5,.9,0,0],9132:[.65002,1.15,0,0],9133:[.90001,0,0,0],9143:[.88502,.915,0,0],10216:[1.25003,1.75,0,0],10217:[1.25003,1.75,0,0],57344:[-.00499,.605,0,0],57345:[-.00499,.605,0,0],57680:[0,.12,0,0],57681:[0,.12,0,0],57682:[0,.12,0,0],57683:[0,.12,0,0]},"Typewriter-Regular":{33:[0,.61111,0,0],34:[0,.61111,0,0],35:[0,.61111,0,0],36:[.08333,.69444,0,0],37:[.08333,.69444,0,0],38:[0,.61111,0,0],39:[0,.61111,0,0],40:[.08333,.69444,0,0],41:[.08333,.69444,0,0],42:[0,.52083,0,0],43:[-.08056,.53055,0,0],44:[.13889,.125,0,0],45:[-.08056,.53055,0,0],46:[0,.125,0,0],47:[.08333,.69444,0,0],48:[0,.61111,0,0],49:[0,.61111,0,0],50:[0,.61111,0,0],51:[0,.61111,0,0],52:[0,.61111,0,0],53:[0,.61111,0,0],54:[0,.61111,0,0],55:[0,.61111,0,0],56:[0,.61111,0,0],57:[0,.61111,0,0],58:[0,.43056,0,0],59:[.13889,.43056,0,0],60:[-.05556,.55556,0,0],61:[-.19549,.41562,0,0],62:[-.05556,.55556,0,0],63:[0,.61111,0,0],64:[0,.61111,0,0],65:[0,.61111,0,0],66:[0,.61111,0,0],67:[0,.61111,0,0],68:[0,.61111,0,0],69:[0,.61111,0,0],70:[0,.61111,0,0],71:[0,.61111,0,0],72:[0,.61111,0,0],73:[0,.61111,0,0],74:[0,.61111,0,0],75:[0,.61111,0,0],76:[0,.61111,0,0],77:[0,.61111,0,0],78:[0,.61111,0,0],79:[0,.61111,0,0],80:[0,.61111,0,0],81:[.13889,.61111,0,0],82:[0,.61111,0,0],83:[0,.61111,0,0],84:[0,.61111,0,0],85:[0,.61111,0,0],86:[0,.61111,0,0],87:[0,.61111,0,0],88:[0,.61111,0,0],89:[0,.61111,0,0],90:[0,.61111,0,0],91:[.08333,.69444,0,0],92:[.08333,.69444,0,0],93:[.08333,.69444,0,0],94:[0,.61111,0,0],95:[.09514,0,0,0],96:[0,.61111,0,0],97:[0,.43056,0,0],98:[0,.61111,0,0],99:[0,.43056,0,0],100:[0,.61111,0,0],101:[0,.43056,0,0],102:[0,.61111,0,0],103:[.22222,.43056,0,0],104:[0,.61111,0,0],105:[0,.61111,0,0],106:[.22222,.61111,0,0],107:[0,.61111,0,0],108:[0,.61111,0,0],109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,0],112:[.22222,.43056,0,0],113:[.22222,.43056,0,0],114:[0,.43056,0,0],115:[0,.43056,0,0],116:[0,.55358,0,0],117:[0,.43056,0,0],118:[0,.43056,0,0],119:[0,.43056,0,0],120:[0,.43056,0,0],121:[.22222,.43056,0,0],122:[0,.43056,0,0],123:[.08333,.69444,0,0],124:[.08333,.69444,0,0],125:[.08333,.69444,0,0],126:[0,.61111,0,0],127:[0,.61111,0,0],305:[0,.43056,0,0],567:[.22222,.43056,0,0],768:[0,.61111,0,0],769:[0,.61111,0,0],770:[0,.61111,0,0],771:[0,.61111,0,0],772:[0,.56555,0,0],774:[0,.61111,0,0],776:[0,.61111,0,0],778:[0,.61111,0,0],780:[0,.56597,0,0],915:[0,.61111,0,0],916:[0,.61111,0,0],920:[0,.61111,0,0],923:[0,.61111,0,0],926:[0,.61111,0,0],928:[0,.61111,0,0],931:[0,.61111,0,0],933:[0,.61111,0,0],934:[0,.61111,0,0],936:[0,.61111,0,0],937:[0,.61111,0,0],2018:[0,.61111,0,0],2019:[0,.61111,0,0],8242:[0,.61111,0,0]}};const x=/[\u3040-\u309F]|[\u30A0-\u30FF]|[\u4E00-\u9FAF]|[\uAC00-\uD7AF]/,k={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25]},w={defaultRuleThickness:.04,bigOpSpacing1:.111,bigOpSpacing2:.166,bigOpSpacing3:.2,bigOpSpacing4:.6,bigOpSpacing5:.1,ptPerEm:10,pxPerEm:40/3,doubleRuleSep:.2,arraycolsep:.5,baselineskip:1.2,arrayrulewidth:.04,fboxsep:.3,fboxrule:.04},S={" ":" ","​":" ","Å":"A","Ç":"C","Ð":"D","Þ":"o","å":"a","ç":"c","ð":"d","þ":"o","А":"A","Б":"B","В":"B","Г":"F","Д":"A","Е":"E","Ж":"K","З":"3","И":"N","Й":"N","К":"K","Л":"N","М":"M","Н":"H","О":"O","П":"N","Р":"P","С":"C","Т":"T","У":"y","Ф":"O","Х":"X","Ц":"U","Ч":"h","Ш":"W","Щ":"W","Ъ":"B","Ы":"X","Ь":"B","Э":"3","Ю":"X","Я":"R","а":"a","б":"b","в":"a","г":"r","д":"y","е":"e","ж":"m","з":"e","и":"n","й":"n","к":"n","л":"n","м":"m","н":"n","о":"o","п":"n","р":"p","с":"c","т":"o","у":"y","ф":"b","х":"x","ц":"n","ч":"n","ш":"w","щ":"w","ъ":"a","ы":"m","ь":"a","э":"e","ю":"m","я":"r"};function C(t,e,i){if("string"==typeof t){const i=t.match(/([-+]?[0-9.]*)\s*([a-zA-Z]+)/);i?(t=parseFloat(i[1]),e=i[2].toLowerCase()):t=parseFloat(t)}const n={pt:1,mm:7227/2540,cm:7227/254,ex:35271/8192,px:.75,em:w.ptPerEm,bp:1.00375,dd:1238/1157,pc:12,in:72.27,mu:10/18}[e]||1;if(isFinite(i)){const e=Math.pow(10,i);return Math.round(t/w.ptPerEm*n*e)/e}return t/w.ptPerEm*n}var A={toEm:C,toPx:function(t,e){return C(t,e)*(4/3)*w.ptPerEm},METRICS:w,SIGMAS:k,getCharacterMetrics:function(t,e){const i={cal:"Caligraphic-Regular",ams:"AMS-Regular",frak:"Fraktur-Regular",bb:"AMS-Regular",scr:"Script-Regular",cmr:"Main-Regular",cmtt:"Typewriter-Regular",cmss:"SansSerif-Regular"}[e]||e;let n=t.charCodeAt(0);t[0]in S?n=S[t[0]].charCodeAt(0):x.test(t[0])&&(n=77);const r=b[i][n];return r?r?{depth:r[0],height:r[1],italic:r[2],skew:r[3]}:null:{defaultMetrics:!0,depth:.2,height:.7,italic:0,skew:0}}};const T=[{},{},{}];let _;for(const t in k)if(Object.prototype.hasOwnProperty.call(k,t))for(_=0;_<3;_++)T[_][t]=k[t][_];for(_=0;_<3;_++)T[_].emPerEx=k.xHeight[_]/k.quad[_];class M{constructor(t,e,i,n){this.id=t,this.size=e,this.cramped=n,this.sizeMultiplier=i,this.metrics=T[e>0?e-1:0]}sup(){return L[E[this.id]]}sub(){return L[O[this.id]]}fracNum(){return L[I[this.id]]}fracDen(){return L[N[this.id]]}cramp(){return L[z[this.id]]}cls(){return F[this.size]}adjustTo(t){let e=D[this.size][t.size];return e.length>0&&(e=" "+e),e}isTight(){return this.size>=2}}const L=[new M(0,0,1,!1),new M(1,0,1,!0),new M(2,1,1,!1),new M(3,1,1,!0),new M(4,2,.7,!1),new M(5,2,.7,!0),new M(6,3,.5,!1),new M(7,3,.5,!0)],F=["displaystyle textstyle","textstyle","scriptstyle","scriptscriptstyle"],D=[["","","reset-textstyle scriptstyle","reset-textstyle scriptscriptstyle"],["reset-textstyle displaystyle textstyle","","reset-textstyle scriptstyle","reset-textstyle scriptscriptstyle"],["reset-scriptstyle textstyle displaystyle","reset-scriptstyle textstyle","","reset-scriptstyle scriptscriptstyle"],["reset-scriptscriptstyle textstyle displaystyle","reset-scriptscriptstyle textstyle","reset-scriptscriptstyle scriptstyle",""]],E=[4,5,4,5,6,7,6,7],O=[5,5,5,5,7,7,7,7],I=[2,3,4,5,6,7,6,7],N=[3,3,5,5,7,7,7,7],z=[1,1,3,3,5,5,7,7];var P={DISPLAY:L[0],TEXT:L[2],SCRIPT:L[4],SCRIPTSCRIPT:L[6],toMathstyle:function(t){return t?"object"==typeof t?t:{displaystyle:L[0],textstyle:L[2],scriptstyle:L[4],scriptscriptstyle:L[6]}[t]:t}};class R{constructor(t){this.macros=t.macros||{},this.generateID=!!t.generateID&&t.generateID,this.mathstyle=P.toMathstyle(t.mathstyle||"displaystyle"),this.size=t.size||"size5",this.parentMathstyle=t.parentMathstyle||this.mathstyle,this.parentSize=t.parentSize||this.size,this.opacity=t.opacity}clone(t){const e=new R(this);return e.parentMathstyle=this.mathstyle,e.parentSize=this.size,e.macros=this.macros,t&&("auto"!==t.mathstyle&&t.mathstyle||delete t.mathstyle,Object.assign(e,t),"string"==typeof t.mathstyle&&(e.mathstyle=P.toMathstyle(t.mathstyle))),e}setMathstyle(t){t&&"auto"!==t&&(this.mathstyle=P.toMathstyle(t))}cramp(){return this.clone({mathstyle:this.mathstyle.cramp()})}sup(){return this.clone({mathstyle:this.mathstyle.sup()})}sub(){return this.clone({mathstyle:this.mathstyle.sup()})}}var B={Context:R};function q(t){let e="";if("number"==typeof t)e+=Math.floor(100*t)/100;else if("string"==typeof t)e+=t;else if(Array.isArray(t))for(const i of t)e+=q(i);else t&&(e+=t.toString());return e}class ${constructor(t,e){this.classes=e||"",Array.isArray(t)?this.children=[].concat.apply([],t):"string"==typeof t?this.body=t:t&&"object"==typeof t&&(this.children=[t]),this.style=null,this.updateDimensions()}updateDimensions(){let t=0,e=0,i=1;this.children&&this.children.forEach(n=>{n.height>t&&(t=n.height),n.depth>e&&(e=n.depth),n.maxFontSize>i&&(i=n.maxFontSize)}),this.height=t,this.depth=e,this.maxFontSize=i}selected(t){t&&!/ML__selected/.test(this.classes)&&(this.classes.length>0&&(this.classes+=" "),this.classes+="ML__selected"),!t&&/ML__selected/.test(this.classes)&&(this.classes=this.classes.replace("ML__selected","")),this.children&&this.children.forEach(e=>e.selected(t))}applyStyle(t){if(!t)return;if(t.color&&("none"!==t.color?this.setStyle("color",t.color):this.setStyle("color","")),t.backgroundColor&&("none"!==t.backgroundColor?this.setStyle("background-color",t.backgroundColor):this.setStyle("background-color","")),t.cssClass&&(this.classes+=" "+t.cssClass),!this.body)return;let e=t.fontFamily;"math"===e&&"n"===t.fontShape&&(e="cmr");let i="Main-Regular";if(e&&(i=function(t,e){if("string"!=typeof t||t.length>1||"​"===t)return J[e];if("bb"===e||"scr"===e){if(!/^[A-Z ]$/.test(t))return null}else if("cal"===e){if(!/^[0-9A-Z ]$/.test(t))return null}else if("frak"===e){if(!/^[0-9A-Za-z ]$|^[!"#$%&'()*+,\-./:;=?[]^’‘]$/.test(t))return null}else if(("cmtt"===e||"cmss"===e)&&!/^[0-9A-Za-z ]$|^[!"&'()*+,\-./:;=?@[]^_~\u0131\u0237\u0393\u0394\u0398\u039b\u039e\u03A0\u03A3\u03A5\u03A8\u03a9’‘]$/.test(t))return null;return J[e]}(this.body,e)),t.fontShape&&(this.classes+=" "+({it:"ML__it",sl:"ML__shape_sl",sc:"ML__shape_sc",ol:"ML__shape_ol"}[t.fontShape]||"")),t.fontSeries){const e=t.fontSeries.match(/(.?[lbm])?(.?[cx])?/);e&&(this.classes+=" "+({ul:"ML__series_ul",el:"ML__series_el",l:"ML__series_l",sl:"ML__series_sl",m:"",sb:"ML__series_sb",b:"ML__bold",eb:"ML__series_eb",ub:"ML__series_ub"}[e[1]||""]||""),this.classes+=" "+({uc:"ML__series_uc",ec:"ML__series_ec",c:"ML__series_c",sc:"ML__series_sc",n:"",sx:"ML__series_sx",x:"ML__series_x",ex:"ML__series_ex",ux:"ML__series_ux"}[e[2]||""]||""))}if(Q[e]?this.classes+=" "+Q[e]:e&&this.setStyle("font-family",e),this.body&&this.body.length>0&&i){this.height=0,this.depth=0,this.maxFontSize={size1:.5,size2:.7,size3:.8,size4:.9,size5:1,size6:1.2,size7:1.44,size8:1.73,size9:2.07,size10:2.49}[t.fontSize]||1,this.skew=0,this.italic=0;for(let t=0;t<this.body.length;t++){const e=A.getCharacterMetrics(this.body.charAt(t),i);e&&(this.height=Math.max(this.height,e.height),this.depth=Math.max(this.depth,e.depth),this.skew=e.skew,this.italic=e.italic)}}}setStyle(t,...e){const i=q(e);i.length>0&&(this.style||(this.style={}),this.style[t]=i)}setTop(t){t&&0!==t&&(this.style||(this.style={}),this.style.top=q(t)+"em",this.height-=t,this.depth+=t)}setLeft(t){t&&0!==t&&(this.style||(this.style={}),this.style["margin-left"]=q(t)+"em")}setRight(t){t&&0!==t&&(this.style||(this.style={}),this.style["margin-right"]=q(t)+"em")}setWidth(t){t&&0!==t&&(this.style||(this.style={}),this.style.width=q(t)+"em")}addMarginRight(t){if(t&&0!==t){if(!this.style&&!/qquad|quad|enspace|thickspace|mediumspace|thinspace|negativethinspace/.test(this.classes)){const e={2:"qquad",1:"quad",".5":"enspace",.277778:"thickspace",.222222:"mediumspace",.166667:"thinspace","-0.166667":"negativethinspace"}[t.toString()];if(e)return void(this.classes+=" rspace "+e)}this.style||(this.style={});const e=parseFloat(this.style["margin-right"]||"0");this.style["margin-right"]=q(e+t)+"em"}}toMarkup(t,e){t=t||0,e=e||1;let i="",n=this.body||"";if(this.children){let t="none";for(const i of this.children){let r=0;if(t){let n=i.type;n&&("textord"===n&&(n="mord"),"first"===n&&(n="none"),r=i.isTight?K[t+"+"+n]||0:H[t+"+"+n]||0,r=Math.floor(e*r))}n+=i.toMarkup(r,e),t=U(i)}}if("​"!==n&&n||this.classes&&"ML__selected"!==this.classes){if(i="<span",this.cssId&&(i+=' id="'+this.cssId+'" '),this.svgOverlay&&(this.setStyle("position","relative"),this.setStyle("height",this.height+this.depth,"em"),this.setStyle("vertical-align",-this.depth,"em")),this.attributes)for(const t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(i+=" "+t+'="'+this.attributes[t]+'"');const e=this.classes.split(" ");this.type&&(/command|placeholder|error/.test(this.type)&&e.push({command:"ML__command",placeholder:"ML__placeholder",error:"ML__error"}[this.type]),this.caret&&"command"===this.type&&e.push("ML__command-caret"));let r="";if((r=e.length>1?e.filter(function(t,e,i){return t.length>0&&i.indexOf(t)===e}).join(" "):e[0]).length>0&&(i+=' class="'+r+'"'),t&&(this.style&&this.style["margin-left"]?this.style["margin-left"]=q(parseFloat(this.style["margin-left"])+t/18)+"em":t<0&&j[-t]?n=j[-t]+n:W[t]?n=W[t]+n:(this.style||(this.style={}),this.style["margin-left"]=q(t/18)+"em")),this.style){let t="";const e=/ML__selected/.test(this.classes);for(const i in this.style)Object.prototype.hasOwnProperty.call(this.style,i)&&("background-color"===i&&e||(t+=i+":"+this.style[i]+";"));t.length>0&&(i+=' style="'+t+'"')}i+=">",this.svgOverlay?(i+='<span style="',i+="display: inline-block;",i+="height:"+(this.height+this.depth)+"em;",i+="vertical-align:"+this.depth+"em;",i+='">',i+=n,i+="</span>",i+="<svg ",i+='style="position:absolute;',i+="overflow:overlay;",i+="height:"+(this.height+this.depth)+"em;",i+="transform:translateY(-"+Math.round(A.toPx(this.depth,"em")+A.toPx(this.style.padding))+"px);",this.style&&this.style.padding?(i+="top:"+this.style.padding+";",i+="left:"+this.style.padding+";",i+="width:calc(100% - 2 * "+this.style.padding+" );"):(i+="top:0;",i+="left:0;",i+="width:100%;"),i+="z-index:2;",i+='"',this.svgStyle&&(i+=' style="'+this.svgStyle+'"'),i+=">",i+=this.svgOverlay,i+="</svg>"):i+=n,i+="</span>"}else i="";return this.caret&&"command"!==this.type&&("text"===this.caret?i+='<span class="ML__text-caret"></span>':i+='<span class="ML__caret"></span>'),i}tryCoalesceWith(t){if(this.tag!==t.tag)return!1;if(this.type!==t.type)return!1;if("error"===this.type||"placeholder"===this.type||"command"===this.type)return!1;const e=this.children&&this.children.length>0,i=t.children&&t.children.length>0;if(e||i)return!1;if((this.style?this.style.length:0)!==(t.style?t.style.length:0))return!1;const n=this.classes.trim().replace(/\s+/g," ").split(" "),r=t.classes.trim().replace(/\s+/g," ").split(" ");if(n.length!==r.length)return!1;n.sort(),r.sort();for(let t=0;t<n.length;t++){if("vertical-separator"===n[t])return!1;if(n[t]!==r[t])return!1}if(this.style&&t.style)for(const e in this.style)if(Object.prototype.hasOwnProperty.call(this.style,e)&&Object.prototype.hasOwnProperty.call(t.style,e)&&this.style[e]!==t.style[e])return!1;return this.body+=t.body,this.height=Math.max(this.height,t.height),this.depth=Math.max(this.depth,t.depth),this.maxFontSize=Math.max(this.maxFontSize,t.maxFontSize),this.italic=t.italic,!0}}const H={"mord+mop":3,"mord+mbin":4,"mord+mrel":5,"mord+minner":3,"mop+mord":3,"mop+mop":3,"mop+mbin":5,"mop+minner":3,"mbin+mord":4,"mbin+mop":4,"mbin+mopen":4,"mbin+minner":4,"mrel+mord":5,"mrel+mop":5,"mrel+mopen":5,"mrel+minner":5,"mclose+mop":3,"mclose+mbin":4,"mclose+mrel":5,"mclose+minner":3,"mpunct+mord":3,"mpunct+mop":3,"mpunct+mbin":4,"mpunct+mrel":5,"mpunct+mopen":3,"mpunct+mpunct":3,"mpunct+minner":3},W=["​"," ","  "," "," ","  "," ","",""," "],j=[""," ⁣",""," ⁣"," ⁣"," ⁣"],K={"mord+mop":3,"mop+mord":3,"mop+mop":3,"mclose+mop":3,"minner+mop":3};function U(t){const e=t.type;return"first"===e?"none":"textord"===e?"mord":e}function V(t){return t?Array.isArray(t)?t.reduce((t,e)=>Math.max(t,e.height),0):t.height:0}function G(t){return t?Array.isArray(t)?t.reduce((t,e)=>Math.max(t,e.depth),0):t.depth:0}function X(t,e){if(Array.isArray(t)){const i=[];for(const e of t)e&&i.push(e);if(1===i.length)return X(i[0],e)}return new $(t,e)}function Z(t,e,i){const n=X(e,i);return n.type=t,n}function Y(t,e){if(!e||0===e.length){if(t instanceof $)return t;if(Array.isArray(t)&&1===t.length)return t[0]}const i=new $(t,e);let n=1;return n=t instanceof $?t.maxFontSize:t.reduce((t,e)=>Math.max(t,e.maxFontSize),0),i.height*=n,i.depth*=n,i}const J={ams:"AMS-Regular",bb:"AMS-Regular",cal:"Caligraphic-Regular",frak:"Fraktur-Regular",scr:"Script-Regular",cmr:"Main-Regular",cmss:"SansSerif-Regular",cmtt:"Typewriter-Regular",math:"Math-Regular",mainit:"Main-Italic"},Q={ams:"ML__ams",bb:"ML__bb",cal:"ML__cal",frak:"ML__frak",scr:"ML__script",cmr:"ML__mathrm",cmss:"ML__sans",cmtt:"ML__tt",math:"ML__mathit",mainit:"ML__mainit"};var tt={coalesce:function t(e){if(!e||0===e.length)return[];e[0].children=t(e[0].children);const i=[e[0]];for(let n=1;n<e.length;n++)i[i.length-1].tryCoalesceWith(e[n])||(e[n].children=t(e[n].children),i.push(e[n]));return i},makeSpan:X,makeOp:function(t,e){return Z("mop",t,e)},makeOrd:function(t,e){return Z("mord",t,e)},makeRel:function(t,e){return Z("mrel",t,e)},makeClose:function(t,e){return Z("mclose",t,e)},makeOpen:function(t,e){return Z("mopen",t,e)},makeInner:function(t,e){return Z("minner",t,e)},makePunct:function(t,e){return Z("mpunct",t,e)},makeSpanOfType:Z,makeSymbol:function(t,e,i){const n=new $(e,i),r=A.getCharacterMetrics(e,t);return n.height=r.height,n.depth=r.depth,n.skew=r.skew,n.italic=r.italic,n.setRight(n.italic),n},makeVlist:function(t,e,i,n){let r=0,s=0;i=i||"shift",n=n||0;for(let t=0;t<e.length;t++)Array.isArray(e[t])&&(1===e[t].length?e[t]=e[t][0]:e[t]=X(e[t]));if("shift"===i)r=-e[0].depth-n;else if("bottom"===i)r=-n;else if("top"===i){let t=n;for(const i of e)t-=i instanceof $?i.height+i.depth:i;r=t}else if("individualShift"===i){const t=e;e=[t[0]],s=r=-t[1]-t[0].depth;for(let i=2;i<t.length;i+=2){const n=-t[i+1]-s-t[i].depth;s+=n;const r=n-(t[i-2].height+t[i-2].depth);e.push(r),e.push(t[i])}}let o=1;for(const t of e)t instanceof $&&(o=Math.max(o,t.maxFontSize));const a=function(t,e){const i=o?o/t.mathstyle.sizeMultiplier:0,n=new $("​");return 1!==i&&(n.setStyle("font-size",i,i>0?"em":""),n.attributes={"aria-hidden":!0}),"size5"!==t.size?new $(n,"fontsize-ensurer reset-"+t.size+" size5"):0!==i?n:null}(t),l=[];s=r;for(const t of e)if("number"==typeof t)s+=t;else{const e=X([a,t]);e.setTop(-t.depth-s),l.push(e),s+=t.height+t.depth}const c=X(l,"vlist");return c.depth=Math.max(r,G(c)||0),c.height=Math.max(-s,V(c)||0),c},makeHlist:Y,makeStyleWrap:function(t,e,i,n,r){r=r||"";const s=Y(e,(r+=" style-wrap ")+i.adjustTo(n));s.type=t;const o=n.sizeMultiplier/i.sizeMultiplier;return s.height*=o,s.depth*=o,s.maxFontSize=n.sizeMultiplier,s},makeSVG:function(t,e,i){return t.svgOverlay=e,t.svgStyle=i,t},height:V,depth:G,skew:function(t){if(!t)return 0;if(Array.isArray(t)){let e=0;for(const i of t)e+=i.skew||0;return e}return t.skew},italic:function(t){return t?Array.isArray(t)?t[t.length-1].italic:t.italic:0}};let et="";const it={},nt={},rt={},st="CRYPTIC",ot="COMMON",at="SUPERCOMMON",lt={CRYPTIC:0,ARCANE:200,VERY_RARE:600,RARE:1200,UNCOMMON:2e3,COMMON:3e3,SUPERCOMMON:4e3};function ct(t,...e){const i="string"==typeof t?lt[t]:t;for(const t of e)it[t]&&(it[t].frequency=i),nt[t]&&(nt[t]=Object.assign({},nt[t]),nt[t].frequency=i)}function ut(t,e,i,n,r){e&&/^(ams|cmr|bb|cal|frak|scr)$/.test(e),"string"==typeof r&&(r=lt[r]),it[t]={type:i===bt?xt:i,baseFontFamily:e,value:n,category:et,frequency:r}}function ht(t,e){for(let i=t;i<=e;i++){const t=String.fromCodePoint(i);ut(t,"","mord",t)}}const dt={8739:"|",183:"\\cdot",188:"\\frac{1}{4}",189:"\\frac{1}{2}",190:"\\frac{3}{4}",8304:"^{0}",8305:"^{i}",185:"^{1}",178:"^{2}",179:"^{3}",8308:"^{4}",8309:"^{5}",8310:"^{6}",8311:"^{7}",8312:"^{8}",8313:"^{9}",8314:"^{+}",8315:"^{-}",8316:"^{=}",8319:"^{n}",8320:"_{0}",8321:"_{1}",8322:"_{2}",8323:"_{3}",8324:"_{4}",8325:"_{5}",8326:"_{6}",8327:"_{7}",8328:"_{8}",8329:"_{9}",8330:"_{+}",8331:"_{-}",8332:"_{=}",8336:"_{a}",8337:"_{e}",8338:"_{o}",8339:"_{x}",8242:"\\prime",8243:"\\doubleprime",8736:"\\angle",8450:"\\C",8469:"\\N",8473:"\\P",8474:"\\Q",8477:"\\R",8484:"\\Z"};function pt(t,e){const i=String.fromCodePoint(e);if("math"===t&&dt[i])return dt[i];if(e>32&&e<127)return i;let n="";if("math"===t){for(const t in it)if(Object.prototype.hasOwnProperty.call(it,t)&&it[t].value===i){n=t;break}}else for(const t in Et)if(Object.prototype.hasOwnProperty.call(Et,t)&&Et[t]===i){n=t;break}return n||i}const ft={119893:8462,119965:8492,119968:8496,119969:8497,119971:8459,119972:8464,119975:8466,119976:8499,119981:8475,119994:8495,119996:8458,120004:8500,120070:8493,120075:8460,120076:8465,120085:8476,120093:8488,120122:8450,120127:8461,120133:8469,120135:8473,120136:8474,120137:8477,120145:8484},mt=[{start:119808,len:26,offset:65,style:"bold"},{start:119834,len:26,offset:97,style:"bold"},{start:119860,len:26,offset:65,style:"italic"},{start:119886,len:26,offset:97,style:"italic"},{start:119912,len:26,offset:65,style:"bolditalic"},{start:119938,len:26,offset:97,style:"bolditalic"},{start:119964,len:26,offset:65,variant:"script"},{start:119990,len:26,offset:97,variant:"script"},{start:120016,len:26,offset:65,variant:"script",style:"bold"},{start:120042,len:26,offset:97,variant:"script",style:"bold"},{start:120068,len:26,offset:65,variant:"fraktur"},{start:120094,len:26,offset:97,variant:"fraktur"},{start:120172,len:26,offset:65,variant:"fraktur",style:"bold"},{start:120198,len:26,offset:97,variant:"fraktur",style:"bold"},{start:120120,len:26,offset:65,variant:"double-struck"},{start:120146,len:26,offset:97,variant:"double-struck"},{start:120224,len:26,offset:65,variant:"sans-serif"},{start:120250,len:26,offset:97,variant:"sans-serif"},{start:120276,len:26,offset:65,variant:"sans-serif",style:"bold"},{start:120302,len:26,offset:97,variant:"sans-serif",style:"bold"},{start:120328,len:26,offset:65,variant:"sans-serif",style:"italic"},{start:120354,len:26,offset:97,variant:"sans-serif",style:"italic"},{start:120380,len:26,offset:65,variant:"sans-serif",style:"bolditalic"},{start:120406,len:26,offset:97,variant:"sans-serif",style:"bolditalic"},{start:120432,len:26,offset:65,variant:"monospace"},{start:120458,len:26,offset:97,variant:"monospace"},{start:120488,len:25,offset:913,style:"bold"},{start:120514,len:25,offset:945,style:"bold"},{start:120546,len:25,offset:913,style:"italic"},{start:120572,len:25,offset:945,style:"italic"},{start:120604,len:25,offset:913,style:"bolditalic"},{start:120630,len:25,offset:945,style:"bolditalic"},{start:120662,len:25,offset:913,variant:"sans-serif",style:"bold"},{start:120688,len:25,offset:945,variant:"sans-serif",style:"bold"},{start:120720,len:25,offset:913,variant:"sans-serif",style:"bolditalic"},{start:120746,len:25,offset:945,variant:"sans-serif",style:"bolditalic"},{start:120782,len:10,offset:48,variant:"",style:"bold"},{start:120792,len:10,offset:48,variant:"double-struck"},{start:120803,len:10,offset:48,variant:"sans-serif"},{start:120812,len:10,offset:48,variant:"sans-serif",style:"bold"},{start:120822,len:10,offset:48,variant:"monospace"}];function gt(t){let e=t;if("string"==typeof t&&(e=t.codePointAt(0)),(e<119808||e>120831)&&(e<8448||e>8527))return{char:t};for(const t in ft)if(Object.prototype.hasOwnProperty.call(ft,t)&&ft[t]===e){e=t;break}for(let t=0;t<mt.length;t++)if(e>=mt[t].start&&e<mt[t].start+mt[t].len)return{char:String.fromCodePoint(e-mt[t].start+mt[t].offset),variant:mt[t].variant,style:mt[t].style};return{char:t}}function yt(t,e){if("text"===t)return String.fromCodePoint(e);let i;if(dt[e])return dt[e];const n=gt(e);return n.style||n.variant?(i=n.char,n.variant&&(i="\\"+n.variant+"{"+i+"}"),"bold"===n.style?i="\\mathbf{"+i+"}":"italic"===n.style?i="\\mathit{"+i+"}":"bolditalic"===n.style&&(i="\\mathbf{\\mathit{"+i+"}}"),"\\mathord{"+i+"}"):pt(t,e)}const vt="ams",bt="mord",xt="mord",kt="mbin",wt="mrel",St="mopen",Ct="mclose",At="spacing";function Tt(t,e){let i=t.match(/=(.+)/),n="{}",r="auto",s=null;return i&&(n=i[1]),(i=t.match(/:([^=]+)/))&&(r=i[1].trim()),(i=t.match(/^([^:=]+)/))&&(s=i[1].trim()),{optional:e,type:r,defaultValue:n,placeholder:s}}function _t(t){if(!t||0===t.length)return[];let e=[],i=t.split("]");if("["===i[0].charAt(0)){e.push(Tt(i[0].slice(1),!0));for(let t=1;t<=i.length;t++)e=e.concat(_t(i[t]))}else if("{"===(i=t.split("}"))[0].charAt(0)){e.push(Tt(i[0].slice(1),!1));for(let t=1;t<=i.length;t++)e=e.concat(_t(i[t]))}return e}function Mt(t){return t.map(t=>t.body).join("")}function Lt(t,e,i,n){"string"==typeof t&&(t=[t]),i||(i={});const r=_t(e),s={category:et,params:r,parser:n,mathstyle:"displaystyle",tabular:i.tabular||!0,colFormat:i.colFormat||[]};for(const e of t)rt[e]=s}function Ft(t,e,i,n){"string"==typeof t&&(t=[t]),i||(i={});const r={category:et,baseFontFamily:i.fontFamily,params:_t(e),allowedInText:!!i.allowedInText,infix:!!i.infix,parse:n};for(const e of t)nt[e]=r}et="Environments",Lt("math","",{frequency:0},function(){return{mathstyle:"textstyle"}}),Lt("displaymath","",{frequency:8},function(){return{mathstyle:"displaystyle"}}),Lt("array","{columns:colspec}",{frequency:ot},function(t,e){return{colFormat:e[0],mathstyle:"textstyle"}}),Lt("eqnarray","",{},function(){return{}}),Lt("equation","",{},function(){return{colFormat:[{align:"c"}]}}),Lt("subequations","",{},function(){return{colFormat:[{align:"c"}]}}),Lt("multline","",{},function(){return{firstRowFormat:[{align:"l"}],colFormat:[{align:"c"}],lastRowFormat:[{align:"r"}]}}),Lt(["align","aligned"],"",{},function(t,e,i){let n=0;for(const t of i)n=Math.max(n,t.length);const r=[{gap:0},{align:"r"},{gap:0},{align:"l"}];let s=2;for(;s<n;)r.push({gap:1}),r.push({align:"r"}),r.push({gap:0}),r.push({align:"l"}),s+=2;return r.push({gap:0}),{colFormat:r,jot:.3}}),Lt("split","",{},function(){return{}}),Lt(["gather","gathered"],"",{},function(){return{colFormat:[{gap:.25},{align:"c"},{gap:0}],jot:.3}}),Lt(["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","smallmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*","smallmatrix*"],"[columns:colspec]",{},function(t,e){const i={mathstyle:"textstyle"};switch(t){case"pmatrix":case"pmatrix*":i.lFence="(",i.rFence=")";break;case"bmatrix":case"bmatrix*":i.lFence="[",i.rFence="]";break;case"Bmatrix":case"Bmatrix*":i.lFence="\\lbrace",i.rFence="\\rbrace";break;case"vmatrix":case"vmatrix*":i.lFence="\\vert",i.rFence="\\vert";break;case"Vmatrix":case"Vmatrix*":i.lFence="\\Vert",i.rFence="\\Vert";break;case"smallmatrix":case"smallmatrix*":i.mathstyle="scriptstyle";break;case"matrix":case"matrix*":i.lFence=".",i.rFence="."}return i.colFormat=e[0]||[{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"}],i}),Lt("cases","",{},function(){return{arraystretch:1.2,lFence:"\\lbrace",rFence:".",colFormat:[{align:"l"},{gap:1},{align:"l"}]}}),Lt("theorem","",{},function(){return{}}),Lt("center","",{},function(){return{colFormat:[{align:"c"}]}}),et="",function(t){for(let t=0;t<"0123456789/@.".length;t++){const e="0123456789/@.".charAt(t);ut(e,"",xt,e)}}(),ht(65,90),ht(97,122),et="Trigonometry",Ft(["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],"",null,function(t){return{type:"mop",limits:"nolimits",symbol:!1,isFunction:!0,body:t.slice(1),baseFontFamily:"cmr"}}),ct(at,"\\cos","\\sin","\\tan"),ct("UNCOMMON","\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arcsec","\\arccsc"),ct("UNCOMMON","\\arsinh","\\arccosh","\\arctanh","\\arcsech","\\arccsch"),ct("UNCOMMON","\\arg","\\ch","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\lg","\\lb","\\sec","\\sinh","\\sh","\\tanh","\\tg","\\th"),et="Functions",Ft(["\\deg","\\dim","\\exp","\\hom","\\ker","\\lb","\\lg","\\ln","\\log"],"",null,function(t){return{type:"mop",limits:"nolimits",symbol:!1,isFunction:!0,body:t.slice(1),baseFontFamily:"cmr"}}),ct(at,"\\ln","\\log","\\exp"),ct(292,"\\hom"),ct(ot,"\\dim"),ct(ot,"\\ker","\\deg"),Ft(["\\lim","\\mod"],"",null,function(t){return{type:"mop",limits:"limits",symbol:!1,body:t.slice(1),baseFontFamily:"cmr"}}),Ft(["\\det","\\max","\\min"],"",null,function(t){return{type:"mop",limits:"limits",symbol:!1,isFunction:!0,body:t.slice(1),baseFontFamily:"cmr"}}),ct(at,"\\lim"),ct(ot,"\\det"),ct(ot,"\\mod"),ct(ot,"\\min"),ct(ot,"\\max"),et="Decoration",Ft("\\rule","[raise:dimen]{width:dimen}{thickness:dimen}",null,function(t,e){return{type:"rule",shift:e[0],width:e[1],height:e[2]}}),Ft("\\color","{:color}",{allowedInText:!0},(t,e)=>({color:e[0]})),Ft("\\textcolor","{:color}{content:auto*}",{allowedInText:!0},(t,e)=>({color:e[0]})),ct(3,"\\textcolor"),Ft("\\overline","{:auto}",null,function(t,e){return{type:"line",position:"overline",skipBoundary:!0,body:e[0]}}),ct(ot,"\\overline"),Ft("\\underline","{:auto}",null,function(t,e){return{type:"line",position:"underline",skipBoundary:!0,body:e[0]}}),ct(ot,"\\underline"),Ft("\\overset","{annotation:auto}{symbol:auto}",null,function(t,e){return{type:"overunder",overscript:e[0],skipBoundary:!0,body:e[1]}}),ct(ot,"\\overset"),Ft("\\underset","{annotation:auto}{symbol:auto}",null,function(t,e){return{type:"overunder",underscript:e[0],skipBoundary:!0,body:e[1]}}),ct(ot,"\\underset"),Ft(["\\stackrel","\\stackbin"],"{annotation:auto}{symbol:auto}",null,function(t,e){return{type:"overunder",overscript:e[0],skipBoundary:!0,body:e[1],mathtype:"\\stackrel"===t?"mrel":"mbin"}}),ct(ot,"\\stackrel"),ct(0,"\\stackbin"),Ft("\\rlap","{:auto}",null,function(t,e){return{type:"overlap",align:"right",skipBoundary:!0,body:e[0]}}),ct(270,"\\rlap"),Ft("\\llap","{:auto}",null,function(t,e){return{type:"overlap",align:"left",skipBoundary:!0,body:e[0]}}),ct(18,"\\llap"),Ft("\\mathrlap","{:auto}",null,function(t,e){return{type:"overlap",mode:"math",align:"right",skipBoundary:!0,body:e[0]}}),ct(st,"\\mathrlap"),Ft("\\mathllap","{:auto}",null,function(t,e){return{type:"overlap",mode:"math",align:"left",skipBoundary:!0,body:e[0]}}),ct(st,"\\mathllap"),Ft("\\boxed","{content:math}",null,function(t,e){return{type:"box",framecolor:"black",skipBoundary:!0,body:e[0]}}),ct(1236,"\\boxed"),Ft("\\colorbox","{background-color:color}{content:auto}",{allowedInText:!0},function(t,e){return{type:"box",backgroundcolor:e[0],skipBoundary:!0,body:e[1]}}),ct(st,"\\colorbox"),Ft("\\fcolorbox","{frame-color:color}{background-color:color}{content:auto}",{allowedInText:!0},function(t,e){return{type:"box",framecolor:e[0],backgroundcolor:e[1],skipBoundary:!0,body:e[2]}}),ct(st,"\\fcolorbox"),Ft("\\bbox","[:bbox]{body:auto}",{allowedInText:!0},function(t,e){return e[0]?{type:"box",padding:e[0].padding,border:e[0].border,backgroundcolor:e[0].backgroundcolor,skipBoundary:!0,body:e[1]}:{type:"box",skipBoundary:!0,body:e[1]}}),ct(st,"\\bbox"),Ft("\\enclose","{notation:string}[style:string]{body:auto}",null,function(t,e){let i=e[0]||[];const n={type:"enclose",strokeColor:"currentColor",strokeWidth:1,strokeStyle:"solid",backgroundcolor:"transparent",padding:"auto",shadow:"auto",captureSelection:!0,body:e[2]};if(e[1]){const t=e[1].split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(const e of t){const t=e.match(/\s*(\S+)\s+(\S+)\s+(.*)/);if(t)n.strokeWidth=A.toPx(t[1],"px"),isFinite(n.strokeWidth)||(n.strokeWidth=1),n.strokeStyle=t[2],n.strokeColor=t[3];else{const t=e.match(/\s*([a-z]*)\s*=\s*"(.*)"/);t&&("mathbackground"===t[1]?n.backgroundcolor=t[2]:"mathcolor"===t[1]?n.strokeColor=t[2]:"padding"===t[1]?n.padding=A.toPx(t[2],"px"):"shadow"===t[1]&&(n.shadow=t[2]))}}"dashed"===n.strokeStyle?n.svgStrokeStyle="5,5":"dotted"===n.strokeStyle&&(n.svgStrokeStyle="1,5")}n.borderStyle=n.strokeWidth+"px "+n.strokeStyle+" "+n.strokeColor,i=i.toString().split(/[, ]/).filter(t=>t.length>0).map(t=>t.toLowerCase()),n.notation={};for(const t of i)n.notation[t]=!0;return n.notation.updiagonalarrow&&(n.notation.updiagonalstrike=!1),n.notation.box&&(n.notation.left=!1,n.notation.right=!1,n.notation.bottom=!1,n.notation.top=!1),n}),ct(st,"\\enclose"),Ft("\\cancel","{body:auto}",null,function(t,e){return{type:"enclose",strokeColor:"currentColor",strokeWidth:1,strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",notation:{updiagonalstrike:!0},body:e[0]}}),Ft("\\bcancel","{body:auto}",null,function(t,e){return{type:"enclose",strokeColor:"currentColor",strokeWidth:1,strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",notation:{downdiagonalstrike:!0},body:e[0]}}),Ft("\\xcancel","{body:auto}",null,function(t,e){return{type:"enclose",strokeColor:"currentColor",strokeWidth:1,strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",notation:{updiagonalstrike:!0,downdiagonalstrike:!0},body:e[0]}}),ct(st,"\\cancel","\\bcancel","\\xcancel"),et="Styling",Ft(["\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],"",{allowedInText:!0},function(t,e){return{fontSize:{tiny:"size1",scriptsize:"size2",footnotesize:"size3",small:"size4",normalsize:"size5",large:"size6",Large:"size7",LARGE:"size8",huge:"size9",Huge:"size10"}[t.slice(1)]}}),Ft("\\fontseries","{:text}",{allowedInText:!0},(t,e)=>({fontSeries:Mt(e[0])})),Ft("\\bf","",{allowedInText:!0},(t,e)=>({fontSeries:"b"})),Ft("\\bm","{:math*}",{allowedInText:!0},(t,e)=>({fontSeries:"b"})),Ft("\\bold","",{allowedInText:!0},(t,e)=>({mode:"math",fontSeries:"b"})),Ft(["\\mathbf","\\boldsymbol"],"{:math*}",{allowedInText:!0},(t,e)=>({mode:"math",fontSeries:"b",fontShape:"n"})),Ft("\\bfseries","",{allowedInText:!0},(t,e)=>({fontSeries:"b"})),Ft("\\textbf","{:text*}",{allowedInText:!0},(t,e)=>({fontSeries:"b"})),Ft("\\mathmd","{:math*}",{allowedInText:!0},(t,e)=>({mode:"math",fontSeries:"m",fontShape:"n"})),Ft("\\mdseries","",{allowedInText:!0},(t,e)=>({fontSeries:"m"})),Ft("\\textmd","{:math*}",{allowedInText:!0},(t,e)=>({fontSeries:"m"})),Ft("\\fontshape","{:text}",{allowedInText:!0},(t,e)=>({fontShape:Mt(e[0])})),Ft("\\it","",{allowedInText:!0},(t,e)=>({fontShape:"it"})),Ft("\\mathit","{:math*}",{allowedInText:!0},(t,e)=>({mode:"math",fontSeries:"m",fontShape:"it"})),Ft("\\upshape","",{allowedInText:!0},(t,e)=>({fontShape:"n"})),Ft("\\textup","{:text*}",{allowedInText:!0},(t,e)=>({fontShape:"n"})),Ft("\\textit","{:text*}",{allowedInText:!0},(t,e)=>({fontShape:"it"})),Ft("\\slshape","",{allowedInText:!0},(t,e)=>({fontShape:"sl"})),Ft("\\textsl","{:text*}",{allowedInText:!0},(t,e)=>({fontShape:"sl"})),Ft("\\scshape","",{allowedInText:!0},(t,e)=>({mode:"text",fontShape:"sc"})),Ft("\\textsc","{:text*}",{allowedInText:!0},(t,e)=>({fontShape:"sc"})),Ft("\\fontfamily","{:text}",{allowedInText:!0},(t,e)=>({fontFamily:Mt(e[0])})),Ft("\\mathrm","{:math*}",{allowedInText:!0},(t,e)=>({mode:"math",fontFamily:"cmr",fontSeries:"m",fontShape:"n"})),Ft("\\rmfamily","",{allowedInText:!0},(t,e)=>({fontFamily:"cmr"})),Ft("\\textrm","{:text*}",{allowedInText:!0},(t,e)=>({fontFamily:"cmr"})),Ft("\\mathsf","{:math*}",{allowedInText:!0},(t,e)=>({mode:"math",baseFontFamily:"cmss",fontSeries:"m",fontShape:"n"})),Ft("\\sffamily","",{allowedInText:!0},(t,e)=>({fontFamily:"cmss"})),Ft("\\textsf","{:text*}",{allowedInText:!0},(t,e)=>({fontFamily:"cmss"})),Ft("\\mathtt","{:math*}",{allowedInText:!0},(t,e)=>({mode:"math",baseFontFamily:"cmtt",fontSeries:"m",fontShape:"n"})),Ft("\\ttfamily","",{allowedInText:!0},(t,e)=>({fontFamily:"cmtt"})),Ft("\\texttt","{:text*}",{allowedInText:!0},(t,e)=>({fontFamily:"cmtt"})),Ft(["\\Bbb","\\mathbb"],"{:math*}",{allowedInText:!0},(t,e)=>({mode:"math",baseFontFamily:"bb"})),Ft(["\\frak","\\mathfrak"],"{:math*}",{allowedInText:!0},(t,e)=>({baseFontFamily:"frak"})),Ft("\\mathcal","{:math*}",{allowedInText:!0},(t,e)=>({mode:"math",baseFontFamily:"cal",fontSeries:"m",fontShape:"n"})),Ft("\\mathscr","{:math*}",{allowedInText:!0},(t,e)=>({mode:"math",baseFontFamily:"scr",fontSeries:"m",fontShape:"n"})),ct(at,"\\mathbb"),ct(1081,"\\Bbb"),ct(0,"\\mathcal"),ct(ot,"\\mathfrak"),ct(271,"\\frak"),ct(ot,"\\mathscr"),ct("UNCOMMON","\\mathsf"),ct(ot,"\\mathtt"),ct(ot,"\\boldsymbol"),Ft("\\textnormal","{:text*}",{allowedInText:!0},(t,e)=>({fontFamily:"cmr",fontShape:"n",fontSeries:"n"})),Ft("\\mbox","{:text*}",null,(t,e)=>({fontFamily:"cmr"})),Ft("\\text","{:text*}",{allowedInText:!0},(t,e)=>({})),Ft("\\class","{name:text}{content:auto*}",{allowedInText:!0},(t,e)=>({cssClass:Mt(e[0])})),Ft("\\cssId","{id:text}{content:auto}",{allowedInText:!0},(t,e)=>({cssId:Mt(e[0]),body:e[1],type:"group"})),Ft("\\em","",{allowedInText:!0},(t,e)=>({cssClass:"ML__emph",type:"group"})),Ft("\\emph","{:auto}",{allowedInText:!0},(t,e)=>({cssClass:"ML__emph",body:e[0],type:"group",skipBoundary:!0})),ct(ot,"\\textrm"),ct(ot,"\\textit"),ct(ot,"\\textsf"),ct(ot,"\\texttt"),ct(433,"\\textnormal"),ct(ot,"\\textbf"),ct(421,"\\textup"),ct(819,"\\emph"),ct(49,"\\em"),et="Operators",Ft("\\sqrt","[index:auto]{radicand:auto}",null,function(t,e){return{type:"surd",body:e[1],index:e[0]}}),ct(at,"\\sqrt"),et="Fractions",Ft(["\\frac","\\dfrac","\\tfrac","\\cfrac","\\binom","\\dbinom","\\tbinom"],"{numerator}{denominator}",null,function(t,e){const i={type:"genfrac",numer:e[0],denom:e[1],mathstyle:"auto"};switch(t){case"\\dfrac":case"\\frac":case"\\tfrac":case"\\cfrac":i.hasBarLine=!0;break;case"\\\\atopfrac":i.hasBarLine=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":i.hasBarLine=!1,i.leftDelim="(",i.rightDelim=")"}switch(t){case"\\dfrac":case"\\dbinom":i.mathstyle="displaystyle";break;case"\\tfrac":case"\\tbinom":i.mathstyle="textstyle"}return"\\cfrac"===t&&(i.continuousFraction=!0),i}),Ft(["\\over","\\atop","\\choose"],"",{infix:!0},function(t,e){const i=e[0],n=e[1];let r=!1,s=null,o=null;switch(t){case"\\atop":break;case"\\over":r=!0;break;case"\\choose":r=!1,s="(",o=")";break;default:throw new Error("Unrecognized genfrac command")}return{type:"genfrac",numer:i,denom:n,hasBarLine:r,leftDelim:s,rightDelim:o,mathstyle:"auto"}}),ct(21,"\\over"),ct(12,"\\atop"),ct(1968,"\\choose"),Ft(["\\overwithdelims","\\atopwithdelims"],"{left-delim:delim}{right-delim:delim}",{infix:!0},function(t,e){return{type:"genfrac",numer:e[0],denom:e[1],hasBarLine:!1,leftDelim:e[2],rightDelim:e[3],mathstyle:"auto"}}),ct(15,"\\overwithdelims"),ct(ot,"\\atopwithdelims"),et="Fractions",Ft("\\pdiff","{numerator}{denominator}",null,function(t,e){return{type:"genfrac",numer:e[0],denom:e[1],numerPrefix:"∂",denomPrefix:"∂",hasBarLine:!0,leftDelim:null,rightDelim:null,mathstyle:"auto"}}),et="Quantifiers",ut("\\forall","",xt,"∀",at),ut("\\exists","",xt,"∃",at),ut("\\nexists",vt,xt,"∄",at),ut("\\mid","",wt,"∣",ot),ut("\\top","",xt,"⊤","RARE"),ut("\\bot","",xt,"⊥","RARE"),et="Variable Sized Symbols",Ft(["\\sum","\\prod","\\bigcup","\\bigcap","\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","\\intop"],"",null,function(t){return{type:"mop",limits:"auto",symbol:!0,baseFontFamily:"cmr",body:{coprod:"∐",bigvee:"⋁",bigwedge:"⋀",biguplus:"⨄",bigcap:"⋂",bigcup:"⋃",intop:"∫",prod:"∏",sum:"∑",bigotimes:"⨂",bigoplus:"⨁",bigodot:"⨀",bigsqcup:"⨆",smallint:"∫"}[t.slice(1)]}}),Ft(["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","\\intclockwise","\\varointclockwise","\\ointctrclockwise","\\intctrclockwise"],"",null,function(t){return{type:"mop",limits:"nolimits",symbol:!0,body:{int:"∫",iint:"∬",iiint:"∭",oint:"∮",oiint:"∯",oiiint:"∰",intclockwise:"∱",varointclockwise:"∲",ointctrclockwise:"∳",intctrclockwise:"⨑"}[t.slice(1)]}}),ct(at,"\\sum","\\prod","\\bigcap","\\bigcup","\\int"),ct(ot,"\\bigoplus","\\smallint","\\iint","\\oint"),ct("RARE","\\bigwedge","\\bigvee"),ct(756,"\\coprod"),ct(723,"\\bigsqcup"),ct(1241,"\\bigotimes"),ct(150,"\\bigodot"),ct(174,"\\biguplus"),ct(878,"\\iiint"),ct(97,"\\intop"),et="Various",ut("\\sharp","",xt,"♯",ot),ut("\\flat","",xt,"♭",590),ut("\\natural","",xt,"♮",278),ut("\\#","",xt,"#","RARE"),ut("\\&","",xt,"&","RARE"),ut("\\clubsuit","",xt,"♣",172),ut("\\heartsuit","",xt,"♡","ARCANE"),ut("\\spadesuit","",xt,"♠","ARCANE"),ut("\\diamondsuit","",xt,"♢",st),ut("\\differencedelta","",wt,"∆",ot),et="Letters and Letter Like Forms",Ft("\\unicode","{charcode:number}",null,function(t,e){let i=parseInt(e[0]);return isFinite(i)||(i=10067),{type:"mord",body:String.fromCodePoint(i)}}),ut("\\backslash","",xt,"\\"),ut("?","",xt,"?"),ut("!","",xt,"!"),ut("\\nabla","",xt,"∇",at),ut("\\partial","",xt,"∂",at),ut("\\ell","",xt,"ℓ",ot),ut("\\imaginaryI","",xt,"i"),ut("\\imaginaryJ","",xt,"j"),Ft(["\\Re","\\Im"],"",null,function(t){return{type:"mop",limits:"nolimits",symbol:!1,isFunction:!0,body:{"\\Re":"ℜ","\\Im":"ℑ"}[t],baseFontFamily:"frak"}}),ut("\\hbar","",xt,"ℏ",ot),ut("\\hslash",vt,xt,"ℏ",ot),ut("\\differentialD","cmr",xt,"d"),ut("\\rd","cmr",xt,"d"),ut("\\capitalDifferentialD","cmr",xt,"D"),ut("\\rD","cmr",xt,"D"),ut("\\exponentialE","cmr",xt,"e"),ut("\\Finv",vt,xt,"Ⅎ",3),ut("\\Game",vt,xt,"⅁",1),ut("\\wp","",xt,"℘",1306),ut("\\eth",vt,xt,"ð",77),ut("\\mho",vt,xt,"℧",138),ut("\\Bbbk",vt,xt,"k"),ut("\\doubleStruckCapitalN","bb",xt,"N"),ut("\\N","bb",xt,"N"),ut("\\doubleStruckCapitalR","bb",xt,"R"),ut("\\R","bb",xt,"R"),ut("\\doubleStruckCapitalQ","bb",xt,"Q"),ut("\\Q","bb",xt,"Q"),ut("\\doubleStruckCapitalC","bb",xt,"C"),ut("\\C","bb",xt,"C"),ut("\\doubleStruckCapitalZ","bb",xt,"Z"),ut("\\Z","bb",xt,"Z"),ut("\\doubleStruckCapitalP","bb",xt,"P"),ut("\\P","bb",xt,"P"),ut("\\scriptCapitalE","scr",xt,"E"),ut("\\scriptCapitalH","scr",xt,"H"),ut("\\scriptCapitalL","scr",xt,"L"),ut("\\gothicCapitalC","frak",xt,"C"),ut("\\gothicCapitalH","frak",xt,"H"),ut("\\gothicCapitalI","frak",xt,"I"),ut("\\gothicCapitalR","frak",xt,"R"),ut("\\pounds","",xt,"£",509),ut("\\yen",vt,xt,"¥",57),ut("\\euro","",xt,"€",4),et="Crosses",ut("\\textdagger","",kt,"†"),ut("\\dagger","",kt,"†",ot),ut("\\dag","",kt,"†",ot),ut("\\ddag","",kt,"‡",500),ut("\\textdaggerdbl","",kt,"‡"),ut("\\ddagger","",kt,"‡",353),ut("\\maltese",vt,xt,"✠",24),et="Arrows",ut("\\longrightarrow","",wt,"⟶",at),ut("\\rightarrow","",wt,"→",at),ut("\\Longrightarrow","",wt,"⟹",at),ut("\\Rightarrow","",wt,"⇒",at),ut("\\longmapsto","",wt,"⟼",ot),ut("\\mapsto","",wt,"↦",ot),ut("\\Longleftrightarrow","",wt,"⟺",ot),ut("\\rightleftarrows",vt,wt,"⇄",ot),ut("\\leftarrow","",wt,"←",ot),ut("\\curvearrowleft",vt,wt,"↶",ot),ut("\\uparrow","",wt,"↑",ot),ut("\\downarrow","",wt,"↓",ot),ut("\\hookrightarrow","",wt,"↪",ot),ut("\\rightharpoonup","",wt,"⇀",ot),ut("\\rightleftharpoons","",wt,"⇌",ot),ut("\\Leftarrow","",wt,"⇐",1695),ut("\\longleftrightarrow","",wt,"⟷",1599),ut("\\longleftarrow","",wt,"⟵",878),ut("\\Longleftarrow","",wt,"⟸",296),ut("\\searrow","",wt,"↘",1609),ut("\\nearrow","",wt,"↗",1301),ut("\\swarrow","",wt,"↙",167),ut("\\nwarrow","",wt,"↖",108),ut("\\Uparrow","",wt,"⇑",257),ut("\\Downarrow","",wt,"⇓",556),ut("\\updownarrow","",wt,"↕",192),ut("\\Updownarrow","",wt,"⇕",161),ut("\\hookleftarrow","",wt,"↩",115),ut("\\leftharpoonup","",wt,"↼",93),ut("\\leftharpoondown","",wt,"↽",42),ut("\\rightharpoondown","",wt,"⇁",80),ut("\\leftrightarrows",vt,wt,"⇆",765),ut("\\dashrightarrow",vt,wt,"⇢",311),ut("\\dashleftarrow",vt,wt,"⇠",5),ut("\\leftleftarrows",vt,wt,"⇇",8),ut("\\Lleftarrow",vt,wt,"⇚",7),ut("\\twoheadleftarrow",vt,wt,"↞",32),ut("\\leftarrowtail",vt,wt,"↢",25),ut("\\looparrowleft",vt,wt,"↫",6),ut("\\leftrightharpoons",vt,wt,"⇋",205),ut("\\circlearrowleft",vt,wt,"↺",105),ut("\\Lsh",vt,wt,"↰",11),ut("\\upuparrows",vt,wt,"⇈",15),ut("\\downharpoonleft",vt,wt,"⇃",21),ut("\\multimap",vt,wt,"⊸",108),ut("\\leftrightsquigarrow",vt,wt,"↭",31),ut("\\twoheadrightarrow",vt,wt,"↠",835),ut("\\rightarrowtail",vt,wt,"↣",195),ut("\\looparrowright",vt,wt,"↬",37),ut("\\curvearrowright",vt,wt,"↷",209),ut("\\circlearrowright",vt,wt,"↻",63),ut("\\Rsh",vt,wt,"↱",18),ut("\\downdownarrows",vt,wt,"⇊",6),ut("\\upharpoonright",vt,wt,"↾",579),ut("\\downharpoonright",vt,wt,"⇂",39),ut("\\rightsquigarrow",vt,wt,"⇝",674),ut("\\leadsto",vt,wt,"⇝",709),ut("\\Rrightarrow",vt,wt,"⇛",62),ut("\\restriction",vt,wt,"↾",29),ut("\\upharpoonleft",vt,wt,"↿",st),ut("\\rightrightarrows",vt,wt,"⇉",st),et="Negated Arrows",ut("\\nrightarrow",vt,wt,"↛",324),ut("\\nRightarrow",vt,wt,"⇏",107),ut("\\nleftrightarrow",vt,wt,"↮",36),ut("\\nLeftrightarrow",vt,wt,"⇎",20),ut("\\nleftarrow",vt,wt,"↚",7),ut("\\nLeftarrow",vt,wt,"⇍",5),et="Negated Relations",ut("\\nless",vt,wt,"≮",146),ut("\\nleqslant",vt,wt,"",58),ut("\\lneq",vt,wt,"⪇",54),ut("\\lneqq",vt,wt,"≨",36),ut("\\nleqq",vt,wt,"",18),ut("\\unlhd",vt,kt,"⊴",253),ut("\\unrhd",vt,kt,"⊵",66),ut("\\lvertneqq",vt,wt,"",6),ut("\\lnsim",vt,wt,"⋦",4),ut("\\lnapprox",vt,wt,"⪉",st),ut("\\nprec",vt,wt,"⊀",71),ut("\\npreceq",vt,wt,"⋠",57),ut("\\precnsim",vt,wt,"⋨",4),ut("\\precnapprox",vt,wt,"⪹",2),ut("\\nsim",vt,wt,"≁",40),ut("\\nshortmid",vt,wt,"",1),ut("\\nmid",vt,wt,"∤",417),ut("\\nvdash",vt,wt,"⊬",266),ut("\\nvDash",vt,wt,"⊭",405),ut("\\ngtr",vt,wt,"≯",90),ut("\\ngeqslant",vt,wt,"",23),ut("\\ngeqq",vt,wt,"",12),ut("\\gneq",vt,wt,"⪈",29),ut("\\gneqq",vt,wt,"≩",35),ut("\\gvertneqq",vt,wt,"",6),ut("\\gnsim",vt,wt,"⋧",3),ut("\\gnapprox",vt,wt,"⪊",st),ut("\\nsucc",vt,wt,"⊁",44),ut("\\nsucceq",vt,wt,"⋡",st),ut("\\succnsim",vt,wt,"⋩",4),ut("\\succnapprox",vt,wt,"⪺",st),ut("\\ncong",vt,wt,"≆",128),ut("\\nshortparallel",vt,wt,"",6),ut("\\nparallel",vt,wt,"∦",54),ut("\\nVDash",vt,wt,"⊯",5),ut("\\nsupseteqq",vt,wt,"",1),ut("\\supsetneq",vt,wt,"⊋",286),ut("\\varsupsetneq",vt,wt,"",2),ut("\\supsetneqq",vt,wt,"⫌",49),ut("\\varsupsetneqq",vt,wt,"",3),ut("\\nVdash",vt,wt,"⊮",179),ut("\\precneqq",vt,wt,"⪵",11),ut("\\succneqq",vt,wt,"⪶",3),ut("\\nsubseteqq",vt,wt,"",16),et="Various",ut("\\checkmark",vt,xt,"✓",1025),ut("\\diagup",vt,xt,"╱",440),ut("\\diagdown",vt,xt,"╲",175),ut("\\measuredangle",vt,xt,"∡",271),ut("\\sphericalangle",vt,xt,"∢",156),ut("\\backprime",vt,xt,"‵",104),ut("\\backdoubleprime",vt,xt,"‶",st),et="Shapes",ut("\\ast","",kt,"∗",at),ut("\\star","",kt,"⋆",ot),ut("\\diamond","",kt,"⋄",1356),ut("\\Diamond",vt,xt,"◊",695),ut("\\lozenge",vt,xt,"◊",422),ut("\\blacklozenge",vt,xt,"⧫",344),ut("\\bigstar",vt,xt,"★",168),et="Hebrew",ut("\\aleph","",xt,"ℵ",1381),ut("\\beth",vt,xt,"ℶ",54),ut("\\daleth",vt,xt,"ℸ",43),ut("\\gimel",vt,xt,"ℷ",36),et="Fences",ut("\\lbrace","",St,"{",at),ut("\\rbrace","",Ct,"}",at),ut("\\langle","",St,"⟨",ot),ut("\\rangle","",Ct,"⟩",ot),ut("\\lfloor","",St,"⌊",ot),ut("\\rfloor","",Ct,"⌋",ot),ut("\\lceil","",St,"⌈",ot),ut("\\rceil","",Ct,"⌉",ot),ut("\\vert","",xt,"∣",at),ut("\\mvert","",wt,"∣"),ut("\\lvert","",St,"∣",496),ut("\\rvert","",Ct,"∣",496),ut("\\|","",xt,"∥"),ut("\\Vert","",xt,"∥",at),ut("\\mVert","",xt,"∥"),ut("\\lVert","",St,"∥",287),ut("\\rVert","",Ct,"∥",st),ut("\\lbrack","",St,"[",574),ut("\\rbrack","",Ct,"]",213),ut("\\{","",St,"{"),ut("\\}","",Ct,"}"),ut("(","",St,"("),ut(")","",Ct,")"),ut("[","",St,"["),ut("]","",Ct,"]"),ut("\\ulcorner",vt,St,"┌",296),ut("\\urcorner",vt,Ct,"┐",310),ut("\\llcorner",vt,St,"└",137),ut("\\lrcorner",vt,Ct,"┘",199),ut("\\lgroup","",St,"⟮",24),ut("\\rgroup","",Ct,"⟯",24),ut("\\lmoustache","",St,"⎰",st),ut("\\rmoustache","",Ct,"⎱",st),Ft(["\\middle"],"{:delim}",null,function(t,e){return{type:"delim",delim:e[0]}}),et="Sizing";const Dt={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}};Ft(["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],"{:delim}",null,function(t,e){return{type:"sizeddelim",size:Dt[t].size,cls:Dt[t].mclass,delim:e[0]}}),et="Relations",ut("=","",wt,"=",at),ut("\\ne","",wt,"≠",at),ut("\\neq","",wt,"≠",ot),ut("<","",wt,"<",at),ut("\\lt","",wt,"<",ot),ut(">","",wt,">",at),ut("\\gt","",wt,">",ot),ut("\\le","",wt,"≤",ot),ut("\\ge","",wt,"≥",ot),ut("\\leqslant",vt,wt,"⩽",at),ut("\\geqslant",vt,wt,"⩾",at),ut("\\leq","",wt,"≤",ot),ut("\\geq","",wt,"≥",ot),ut("\\ll","",wt,"≪"),ut("\\gg","",wt,"≫",ot),ut("\\coloneq","",wt,"≔",5),ut("\\measeq","",wt,"≝"),ut("\\eqdef","",wt,"≞"),ut("\\questeq","",wt,"≟"),ut(":","",wt,":"),ut("\\cong","",wt,"≅",ot),ut("\\equiv","",wt,"≡",ot),ut("\\prec","",wt,"≺",ot),ut("\\preceq","",wt,"⪯",ot),ut("\\succ","",wt,"≻",ot),ut("\\succeq","",wt,"⪰",1916),ut("\\perp","",wt,"⊥",ot),ut("\\parallel","",wt,"∥",ot),ut("\\propto","",wt,"∝",ot),ut("\\Colon","",wt,"∷"),ut("\\smile","",wt,"⌣",ot),ut("\\frown","",wt,"⌢",ot),ut("\\sim","",wt,"∼",ot),ut("\\gtrsim",vt,wt,"≳",ot),ut("\\approx","",wt,"≈",at),ut("\\approxeq",vt,wt,"≊",147),ut("\\thickapprox",vt,wt,"≈",377),ut("\\lessapprox",vt,wt,"⪅",146),ut("\\gtrapprox",vt,wt,"⪆",95),ut("\\precapprox",vt,wt,"⪷",50),ut("\\succapprox",vt,wt,"⪸",st),ut("\\thicksim",vt,wt,"∼",779),ut("\\succsim",vt,wt,"≿",251),ut("\\precsim",vt,wt,"≾",104),ut("\\backsim",vt,wt,"∽",251),ut("\\eqsim",vt,wt,"≂",62),ut("\\backsimeq",vt,wt,"⋍",91),ut("\\simeq","",wt,"≃",st),ut("\\lesssim",vt,wt,"≲",st),ut("\\nleq",vt,wt,"≰",369),ut("\\ngeq",vt,wt,"≱",164),ut("\\smallsmile",vt,wt,"⌣",31),ut("\\smallfrown",vt,wt,"⌢",71),ut("\\bowtie","",wt,"⋈",558),ut("\\asymp","",wt,"≍",755),ut("\\sqsubseteq","",wt,"⊑",1255),ut("\\sqsupseteq","",wt,"⊒",183),ut("\\leqq",vt,wt,"≦",1356),ut("\\eqslantless",vt,wt,"⪕",15),ut("\\lll",vt,wt,"⋘",157),ut("\\lessgtr",vt,wt,"≶",281),ut("\\lesseqgtr",vt,wt,"⋚",134),ut("\\lesseqqgtr",vt,wt,"⪋",st),ut("\\risingdotseq",vt,wt,"≓",8),ut("\\fallingdotseq",vt,wt,"≒",99),ut("\\subseteqq",vt,wt,"⫅",82),ut("\\Subset",vt,wt,"⋐"),ut("\\sqsubset",vt,wt,"⊏",309),ut("\\preccurlyeq",vt,wt,"≼",549),ut("\\curlyeqprec",vt,wt,"⋞",14),ut("\\vDash",vt,wt,"⊨",646),ut("\\Vvdash",vt,wt,"⊪",20),ut("\\bumpeq",vt,wt,"≏",13),ut("\\Bumpeq",vt,wt,"≎",12),ut("\\geqq",vt,wt,"≧",972),ut("\\eqslantgtr",vt,wt,"⪖",13),ut("\\ggg",vt,wt,"⋙",127),ut("\\gtrless",vt,wt,"≷",417),ut("\\gtreqless",vt,wt,"⋛",190),ut("\\gtreqqless",vt,wt,"⪌",91),ut("\\supseteqq",vt,wt,"⫆",6),ut("\\Supset",vt,wt,"⋑",34),ut("\\sqsupset",vt,wt,"⊐",71),ut("\\succcurlyeq",vt,wt,"≽",442),ut("\\curlyeqsucc",vt,wt,"⋟",10),ut("\\Vdash",vt,wt,"⊩",276),ut("\\shortmid",vt,wt,"∣",67),ut("\\shortparallel",vt,wt,"∥",17),ut("\\between",vt,wt,"≬",110),ut("\\pitchfork",vt,wt,"⋔",66),ut("\\varpropto",vt,wt,"∝",203),ut("\\backepsilon",vt,wt,"∍",176),ut("\\llless",vt,wt,"⋘",st),ut("\\gggtr",vt,wt,"⋙",st),ut("\\lhd",vt,kt,"⊲",447),ut("\\rhd",vt,kt,"⊳",338),ut("\\Join","",wt,"⋈",35),ut("\\doteq","",wt,"≐",1450),ut("\\doteqdot",vt,wt,"≑",60),ut("\\Doteq",vt,wt,"≑",st),ut("\\eqcirc",vt,wt,"≖",6),ut("\\circeq",vt,wt,"≗",31),ut("\\lessdot",vt,kt,"⋖",88),ut("\\gtrdot",vt,kt,"⋗",45),ut("\\~","",wt,"~"),et="Logic",ut("\\leftrightarrow","",wt,"↔",at),ut("\\Leftrightarrow","",wt,"⇔",at),ut("\\to","",wt,"→",at),ut("\\models","",wt,"⊨",ot),ut("\\vdash","",wt,"⊢",ot),ut("\\therefore",vt,wt,"∴",1129),ut("\\because",vt,wt,"∵",388),ut("\\implies","",wt,"⟹",1858),ut("\\gets","",wt,"←",150),ut("\\dashv","",wt,"⊣",299),ut("\\impliedby","",wt,"⟸",st),ut("\\biconditional","",wt,"⟷",st),ut("\\roundimplies","",wt,"⥰",st),et="Operators",ut("+","",kt,"+",at),ut("-","",kt,"−",at),ut("−","",kt,"−",at),ut("\\pm","",kt,"±",ot),ut("\\mp","",kt,"∓",ot),ut("*","",kt,"∗",ot),ut("\\times","",kt,"×",ot),ut("\\div","",kt,"÷",ot),ut("\\surd","",xt,"√",ot),ut("\\divides","",kt,"∣",st),ut("\\ltimes",vt,kt,"⋉",576),ut("\\rtimes",vt,kt,"⋊",946),ut("\\leftthreetimes",vt,kt,"⋋",34),ut("\\rightthreetimes",vt,kt,"⋌",14),ut("\\intercal",vt,kt,"⊺",478),ut("\\dotplus",vt,kt,"∔",81),ut("\\centerdot",vt,kt,"⋅",271),ut("\\doublebarwedge",vt,kt,"⩞",5),ut("\\divideontimes",vt,kt,"⋇",51),ut("\\cdot","",kt,"⋅",st),et="Others",ut("\\infty","",xt,"∞",at),ut("\\prime","",bt,"′",at),ut("\\doubleprime","",xt,"″"),ut("\\angle","",xt,"∠",ot),ut("`","",xt,"‘"),ut("\\$","",xt,"$"),ut("\\%","",xt,"%"),ut("\\_","",xt,"_"),et="Greek",ut("\\alpha","",bt,"α",ot),ut("\\beta","",bt,"β",ot),ut("\\gamma","",bt,"γ",ot),ut("\\delta","",bt,"δ",ot),ut("\\epsilon","",bt,"ϵ",ot),ut("\\varepsilon","",bt,"ε"),ut("\\zeta","",bt,"ζ",ot),ut("\\eta","",bt,"η",ot),ut("\\theta","",bt,"θ",ot),ut("\\vartheta","",bt,"ϑ",ot),ut("\\iota","",bt,"ι",ot),ut("\\kappa","",bt,"κ",ot),ut("\\varkappa",vt,bt,"ϰ",ot),ut("\\lambda","",bt,"λ",ot),ut("\\mu","",bt,"μ",ot),ut("\\nu","",bt,"ν",ot),ut("\\xi","",bt,"ξ",ot),ut("\\omicron","",bt,"o"),ut("\\pi","",bt,"π",ot),ut("\\varpi","",bt,"ϖ",ot),ut("\\rho","",bt,"ρ",ot),ut("\\varrho","",bt,"ϱ",ot),ut("\\sigma","",bt,"σ",ot),ut("\\varsigma","",bt,"ς",ot),ut("\\tau","",bt,"τ",ot),ut("\\phi","",bt,"ϕ",ot),ut("\\varphi","",bt,"φ",ot),ut("\\upsilon","",bt,"υ",ot),ut("\\chi","",bt,"χ",ot),ut("\\psi","",bt,"ψ",ot),ut("\\omega","",bt,"ω",ot),ut("\\Gamma","",bt,"Γ",ot),ut("\\Delta","",bt,"Δ",ot),ut("\\Theta","",bt,"Θ",ot),ut("\\Lambda","",bt,"Λ",ot),ut("\\Xi","",bt,"Ξ",ot),ut("\\Pi","",bt,"Π",ot),ut("\\Sigma","",bt,"Σ",ot),ut("\\Upsilon","",bt,"Υ",ot),ut("\\Phi","",bt,"Φ",ot),ut("\\Psi","",bt,"Ψ",ot),ut("\\Omega","",bt,"Ω",ot),ut("\\digamma",vt,bt,"ϝ",248),et="Others",ut("\\emptyset","",xt,"∅",at),ut("\\varnothing",vt,xt,"∅",at),et="Set Operators",ut("\\cap","",kt,"∩",at),ut("\\cup","",kt,"∪",at),ut("\\setminus","",kt,"∖",ot),ut("\\smallsetminus",vt,kt,"∖",254),ut("\\complement",vt,xt,"∁",200),et="Set Relations",ut("\\in","",wt,"∈",at),ut("\\notin","",wt,"∉",at),ut("\\not","",wt,"̸",ot),ut("\\ni","",wt,"∋",ot),ut("\\owns","",wt,"∋",18),ut("\\subset","",wt,"⊂",at),ut("\\supset","",wt,"⊃",at),ut("\\subseteq","",wt,"⊆",at),ut("\\supseteq","",wt,"⊇",at),ut("\\subsetneq",vt,wt,"⊊",1945),ut("\\varsubsetneq",vt,wt,"",198),ut("\\subsetneqq",vt,wt,"⫋",314),ut("\\varsubsetneqq",vt,wt,"",55),ut("\\nsubset",vt,wt,"⊄",st),ut("\\nsupset",vt,wt,"⊅",st),ut("\\nsubseteq",vt,wt,"⊈",950),ut("\\nsupseteq",vt,wt,"⊉",49),et="Spacing",ut("\\ ","",At," "),ut("~","",At," "),ut("\\space","",At," "),ut("\\!","",At,null),ut("\\,","",At,null),ut("\\:","",At,null),ut("\\;","",At,null),ut("\\enskip","",At,null),ut("\\enspace","",At,null,672),ut("\\quad","",At,null,ot),ut("\\qquad","",At,null,ot),Ft(["\\hspace","\\hspace*"],"{width:skip}",{allowedInText:!0},function(t,e){return{type:"spacing",width:e[0]||0}}),Ft(["\\mathop","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathord","\\mathinner"],"{:auto}",null,function(t,e){const i={type:{"\\mathop":"mop","\\mathbin":"mbin","\\mathrel":"mrel","\\mathopen":"mopen","\\mathclose":"mclose","\\mathpunct":"mpunct","\\mathord":"mord","\\mathinner":"minner"}[t],body:function(t){let e="",i=!0;for(const n of t)"string"==typeof n.body?e+=n.body:i=!1;return i?e:""}(e[0])||e[0],captureSelection:!0,baseFontFamily:"\\mathop"===t?"math":""};return"\\mathop"===t&&(i.limits="nolimits",i.isFunction=!0),i}),Ft(["\\operatorname","\\operatorname*"],"{operator:string}",null,function(t,e){const i={type:"mop",skipBoundary:!0,body:e[0],isFunction:!0,baseFontFamily:"cmr"};return"\\operatorname"===t?i.limits="nolimits":"\\operatorname*"===t&&(i.limits="limits"),i}),et="Punctuation",ut("\\colon","","mpunct",":",ot),ut("\\cdotp","","mpunct","⋅",ot),ut("\\ldots","","minner","…",ot),ut("\\cdots","","minner","⋯",ot),ut("\\ddots","","minner","⋱",ot),ut("\\mathellipsis","","minner","…",91),ut("\\vdots","",xt,"⋮",ot),ut("\\ldotp","","mpunct",".",18),ut(",","","mpunct",","),ut(";","","mpunct",";"),et="Logical Operators",ut("\\wedge","",kt,"∧",at),ut("\\vee","",kt,"∨",at),ut("\\lnot","",xt,"¬",ot),ut("\\neg","",xt,"¬",at),ut("\\land","",kt,"∧",659),ut("\\lor","",kt,"∨",364),ut("\\barwedge",vt,kt,"⊼",21),ut("\\veebar",vt,kt,"⊻",43),ut("\\nor",vt,kt,"⊻",7),ut("\\curlywedge",vt,kt,"⋏",58),ut("\\curlyvee",vt,kt,"⋎",57),et="Boxes",ut("\\square",vt,xt,"□",ot),ut("\\Box",vt,xt,"□",ot),ut("\\blacksquare",vt,xt,"■",1679),ut("\\boxminus",vt,kt,"⊟",79),ut("\\boxplus",vt,kt,"⊞",276),ut("\\boxtimes",vt,kt,"⊠",457),ut("\\boxdot",vt,kt,"⊡",120),et="Circles",ut("\\circ","",kt,"∘",at),ut("\\bigcirc","",kt,"◯",903),ut("\\bullet","",kt,"∙",ot),ut("\\circleddash",vt,kt,"⊝",ot),ut("\\circledast",vt,kt,"⊛",339),ut("\\oplus","",kt,"⊕",ot),ut("\\ominus","",kt,"⊖",1568),ut("\\otimes","",kt,"⊗",ot),ut("\\odot","",kt,"⊙",ot),ut("\\circledcirc",vt,kt,"⊚",93),ut("\\oslash","",kt,"⊘",497),ut("\\circledS",vt,xt,"Ⓢ",31),ut("\\circledR",vt,xt,"®",1329),et="Triangles",ut("\\triangle","",xt,"△",ot),ut("\\triangleq",vt,wt,"≜",ot),ut("\\bigtriangleup","",kt,"△",1773),ut("\\vartriangle",vt,wt,"△",762),ut("\\triangledown",vt,xt,"▽",520),ut("\\bigtriangledown","",kt,"▽",661),ut("\\triangleleft","",kt,"◃",534),ut("\\vartriangleleft",vt,wt,"⊲",281),ut("\\trianglelefteq",vt,wt,"⊴",176),ut("\\ntriangleleft",vt,wt,"⋪",13),ut("\\ntrianglelefteq",vt,wt,"⋬",22),ut("\\triangleright","",kt,"▹",516),ut("\\vartriangleright",vt,wt,"⊳",209),ut("\\trianglerighteq",vt,wt,"⊵",45),ut("\\ntriangleright",vt,wt,"⋫",15),ut("\\ntrianglerighteq",vt,wt,"⋭",6),ut("\\blacktriangle",vt,xt,"▲",360),ut("\\blacktriangledown",vt,xt,"▼",159),ut("\\blacktriangleleft",vt,wt,"◀",101),ut("\\blacktriangleright",vt,wt,"▶",271),et="Others",ut("\\/","",bt,"/"),ut("|","","textord","∣"),et="Big Operators",ut("\\sqcup","",kt,"⊔",1717),ut("\\sqcap","",kt,"⊓",735),ut("\\uplus","",kt,"⊎",597),ut("\\wr","",kt,"≀",286),ut("\\Cap",vt,kt,"⋒",2),ut("\\Cup",vt,kt,"⋓",2),ut("\\doublecap",vt,kt,"⋒",1),ut("\\doublecup",vt,kt,"⋓",1),ut("\\amalg","",kt,"⨿",st),ut("\\And","",kt,"&"),et="Accents",Ft(["\\acute","\\grave","\\dot","\\ddot","\\mathring","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec"],"{body:auto}",null,function(t,e){return{type:"accent",accent:{"\\acute":"ˊ","\\grave":"ˋ","\\dot":"˙","\\ddot":"¨","\\mathring":"˚","\\tilde":"~","\\bar":"ˉ","\\breve":"˘","\\check":"ˇ","\\hat":"^","\\vec":"⃗"}[t],limits:"accent",skipBoundary:!0,body:e[0]}}),ct(ot,"\\bar","\\ddot","\\acute","\\tilde","\\check"),ct(1548,"\\breve"),ct(735,"\\grave"),ct(at,"\\vec"),et="Letters and Letter Like Forms",ut("\\imath","",xt,"ı"),ut("\\jmath","",xt,"ȷ"),et="Others",ut("\\degree","",xt,"°",46),et="Others",ut("'","",xt,"′"),ut('"',"",xt,"”"),et="Others",Ft("\\^","{:string}",{allowedInText:!0},function(t,e){return{type:"mord",limits:"nolimits",symbol:!0,isFunction:!1,body:e[0]&&{a:"â",e:"ê",i:"î",o:"ô",u:"û",A:"Â",E:"Ê",I:"Î",O:"Ô",U:"Û"}[e[0]]||"^",baseFontFamily:"cmr"}}),Ft("\\`","{:string}",{allowedInText:!0},function(t,e){return{type:"mord",limits:"nolimits",symbol:!0,isFunction:!1,body:e[0]&&{a:"à",e:"è",i:"ì",o:"ò",u:"ù",A:"À",E:"È",I:"Ì",O:"Ò",U:"Ù"}[e[0]]||"`",baseFontFamily:"cmr"}}),Ft("\\'","{:string}",{allowedInText:!0},function(t,e){return{type:"mord",limits:"nolimits",symbol:!0,isFunction:!1,body:e[0]&&{a:"á",e:"é",i:"í",o:"ó",u:"ú",A:"Á",E:"É",I:"Í",O:"Ó",U:"Ú"}[e[0]]||"^",baseFontFamily:"cmr"}}),Ft("\\~","{:string}",{allowedInText:!0},function(t,e){return{type:"mord",limits:"nolimits",symbol:!0,isFunction:!1,body:e[0]&&{n:"ñ",N:"Ñ",a:"ã",o:"õ",A:"Ã",O:"Õ"}[e[0]]||"´",baseFontFamily:"cmr"}}),Ft("\\c","{:string}",{allowedInText:!0},function(t,e){return{type:"mord",limits:"nolimits",symbol:!0,isFunction:!1,body:e[0]&&{c:"ç",C:"Ç"}[e[0]]||"",baseFontFamily:"cmr"}});const Et={"\\#":"#","\\&":"&","\\$":"$","\\%":"%","\\_":"_","\\euro":"€","\\maltese":"✠","\\{":"{","\\}":"}","\\nobreakspace":" ","\\ldots":"…","\\textellipsis":"…","\\backslash":"\\","`":"‘","'":"’","``":"“","''":"”","\\degree":"°","\\textasciicircum":"^","\\textasciitilde":"~","\\textasteriskcentered":"*","\\textbackslash":"\\","\\textbraceleft":"{","\\textbraceright":"}","\\textbullet":"•","\\textdollar":"$","\\textsterling":"£","–":"–","—":"—","‘":"‘","’":"’","“":"“","”":"”",'"':"”","\\ss":"ß","\\ae":"æ","\\oe":"œ","\\AE":"Æ","\\OE":"Œ","\\O":"Ø","\\i":"ı","\\j":"ȷ","\\aa":"å","\\AA":"Å"},Ot="undefined"!=typeof navigator&&/firefox|edge/i.test(navigator.userAgent)?/[a-zA-ZаАбБвВгГдДеЕёЁжЖзЗиИйЙкКлЛмМнНоОпПрРсСтТуУфФхХцЦчЧшШщЩъЪыЫьЬэЭюЮяĄąĆćĘęŁłŃńÓóŚśŹźŻżàâäôéèëêïîçùûüÿæœÀÂÄÔÉÈËÊÏÎŸÇÙÛÜÆŒäöüßÄÖÜẞàèéìíîòóùúÀÈÉÌÍÎÒÓÙÚáéíñóúüÁÉÍÑÓÚÜ]/:new RegExp("\\p{Letter}","u"),It="undefined"!=typeof navigator&&/firefox|edge/i.test(navigator.userAgent)?/[0-9a-zA-ZаАбБвВгГдДеЕёЁжЖзЗиИйЙкКлЛмМнНоОпПрРсСтТуУфФхХцЦчЧшШщЩъЪыЫьЬэЭюЮяĄąĆćĘęŁłŃńÓóŚśŹźŻżàâäôéèëêïîçùûüÿæœÀÂÄÔÉÈËÊÏÎŸÇÙÛÜÆŒäöüßÄÖÜẞàèéìíîòóùúÀÈÉÌÍÎÒÓÙÚáéíñóúüÁÉÍÑÓÚÜ]/:new RegExp("[0-9\\p{Letter}]","u");var Nt={matchCodepoint:pt,commandAllowed:function(t,e){return!(!nt[e]||"text"===t&&!nt[e].allowedInText)||!!{text:Et,math:it}[t][e]},unicodeToMathVariant:gt,mathVariantToUnicode:function(t,e,i){if(!/[A-Za-z0-9]/.test(t))return t;if(!e&&!i)return t;const n=t.codePointAt(0);for(let t=0;t<mt.length;t++)if((!e||mt[t].variant===e)&&(!i||mt[t].style===i)&&n>=mt[t].offset&&n<mt[t].offset+mt[t].len){const e=mt[t].start+n-mt[t].offset;return String.fromCodePoint(ft[e]||e)}return t},unicodeStringToLatex:function(t,e){let i="";for(const n of e)i+=yt(t,n.codePointAt(0));return i},getInfo:function(t,e,i){if(0===t.length)return null;let n=null;if("\\"===t.charAt(0)){if(n=nt[t])return"math"===e||n.allowedInText?n:null;if(n||("math"===e?n=it[t]:Et[t]&&(n={value:Et[t]})),!n){const e=t.slice(1);if(i&&i[e]){let t=i[e];"object"==typeof t&&(t=t.def);let r=0;for(/(^|[^\\])#1/.test(t)&&(r=1),/(^|[^\\])#2/.test(t)&&(r=2),/(^|[^\\])#3/.test(t)&&(r=3),/(^|[^\\])#4/.test(t)&&(r=4),/(^|[^\\])#5/.test(t)&&(r=5),/(^|[^\\])#6/.test(t)&&(r=6),/(^|[^\\])#7/.test(t)&&(r=7),/(^|[^\\])#8/.test(t)&&(r=8),/(^|[^\\])#9/.test(t)&&(r=9),n={type:"group",allowedInText:!1,params:[],infix:!1};r>=1;)n.params.push({optional:!1,type:"math",defaultValue:null,placeholder:null}),r-=1}}}else"math"===e?n=it[t]:Et[t]&&(n={value:Et[t]});return!n||"mord"!==n.type||"f"!==n.value&&"g"!==n.value&&"h"!==n.value||(n.isFunction=!0),n},getValue:function(t,e){return"math"===t?it[e]&&it[e].value?it[e].value:e:Et[e]?Et[e]:e},getEnvironmentInfo:function(t){let e=rt[t];return e||(e={params:"",parser:null,mathstyle:"displaystyle",tabular:!0,colFormat:[],lFence:".",rFence:"."}),e},suggest:function(t){if(t.length<=1)return[];const e=[];for(const i in nt)Object.prototype.hasOwnProperty.call(nt,i)&&i.startsWith(t)&&!nt[i].infix&&e.push({match:i,frequency:nt[i].frequency});for(const i in it)Object.prototype.hasOwnProperty.call(it,i)&&i.startsWith(t)&&e.push({match:i,frequency:it[i].frequency});return e.sort((t,e)=>t.frequency===e.frequency?t.match.length-e.match.length:(e.frequency||0)-(t.frequency||0)),e},FREQUENCY_VALUE:lt,TEXT_SYMBOLS:Et,MATH_SYMBOLS:it,ENVIRONMENTS:rt,RIGHT_DELIM:{"(":")","{":"}","[":"]","|":"|","\\lbrace":"\\rbrace","\\{":"\\}","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache"},FUNCTIONS:nt,MACROS:{iff:"\\;⟺\\;",nicefrac:"^{#1}\\!\\!/\\!_{#2}",bra:"\\mathinner{\\langle{#1}|}",ket:"\\mathinner{|{#1}\\rangle}",braket:"\\mathinner{\\langle{#1}\\rangle}",set:"\\mathinner{\\lbrace #1 \\rbrace}",Bra:"\\left\\langle #1\\right|",Ket:"\\left|#1\\right\\rangle",Braket:"\\left\\langle{#1}\\right\\rangle",Set:"\\left\\lbrace #1 \\right\\rbrace"},COMMAND_MODE_CHARACTERS:/[a-zA-Z0-9!@*()-=+{}[\]\\';:?/.,~<>`|'$%#&^_" ]/,LETTER:Ot,LETTER_AND_DIGITS:It};const zt=tt.makeSymbol,Pt=tt.makeSpan,Rt=tt.makeVlist;function Bt(t,e,i,n,r,s){const o=zt("Size"+i+"-Regular",Nt.getValue("math",e)),a=tt.makeStyleWrap(t,Pt(o,"delimsizing size"+i),r.mathstyle,P.TEXT,s);return n&&a.setTop((1-r.mathstyle.sizeMultiplier)*r.mathstyle.metrics.axisHeight),a.setStyle("color",r.color),"number"==typeof r.opacity&&a.setStyle("opacity",r.opacity),a}function qt(t,e){let i="";return"Size1-Regular"===e?i=" delim-size1":"Size4-Regular"===e&&(i=" delim-size4"),Pt(zt(e,Nt.getValue("math",t)),"delimsizinginner"+i)}function $t(t,e,i,n,r,s){let o,a,l,c;o=l=c=Nt.getValue("math",e),a=null;let u="Size1-Regular";"\\vert"===e||"\\lvert"===e||"\\rvert"===e||"\\mvert"===e||"\\mid"===e?l=o=c="∣":"\\Vert"===e||"\\lVert"===e||"\\rVert"===e||"\\mVert"===e||"\\|"===e?l=o=c="∥":"\\uparrow"===e?l=c="⏐":"\\Uparrow"===e?l=c="‖":"\\downarrow"===e?o=l="⏐":"\\Downarrow"===e?o=l="‖":"\\updownarrow"===e?(o="↑",l="⏐",c="↓"):"\\Updownarrow"===e?(o="⇑",l="‖",c="⇓"):"["===e||"\\lbrack"===e?(o="⎡",l="⎢",c="⎣",u="Size4-Regular"):"]"===e||"\\rbrack"===e?(o="⎤",l="⎥",c="⎦",u="Size4-Regular"):"\\lfloor"===e?(l=o="⎢",c="⎣",u="Size4-Regular"):"\\lceil"===e?(o="⎡",l=c="⎢",u="Size4-Regular"):"\\rfloor"===e?(l=o="⎥",c="⎦",u="Size4-Regular"):"\\rceil"===e?(o="⎤",l=c="⎥",u="Size4-Regular"):"("===e?(o="⎛",l="⎜",c="⎝",u="Size4-Regular"):")"===e?(o="⎞",l="⎟",c="⎠",u="Size4-Regular"):"\\{"===e||"\\lbrace"===e?(o="⎧",a="⎨",c="⎩",l="⎪",u="Size4-Regular"):"\\}"===e||"\\rbrace"===e?(o="⎫",a="⎬",c="⎭",l="⎪",u="Size4-Regular"):"\\lgroup"===e?(o="⎧",c="⎩",l="⎪",u="Size4-Regular"):"\\rgroup"===e?(o="⎫",c="⎭",l="⎪",u="Size4-Regular"):"\\lmoustache"===e?(o="⎧",c="⎭",l="⎪",u="Size4-Regular"):"\\rmoustache"===e?(o="⎫",c="⎩",l="⎪",u="Size4-Regular"):"\\surd"===e?(o="",c="⎷",l="",u="Size4-Regular"):"\\ulcorner"===e?(o="┌",l=c=" "):"\\urcorner"===e?(o="┐",l=c=" "):"\\llcorner"===e?(c="└",l=o=" "):"\\lrcorner"===e&&(o="┘",l=o=" ");const h=A.getCharacterMetrics(Nt.getValue("math",o),u),d=h.height+h.depth,p=A.getCharacterMetrics(Nt.getValue("math",l),u),f=p.height+p.depth,m=A.getCharacterMetrics(Nt.getValue("math",c),u),g=m.height+m.depth;let y=0,v=1;if(null!==a){const t=A.getCharacterMetrics(Nt.getValue("math",a),u);y=t.height+t.depth,v=2}const b=d+g+y,x=Math.ceil((i-b)/(v*f)),k=b+x*v*f;let w=r.mathstyle.metrics.axisHeight;n&&(w*=r.mathstyle.sizeMultiplier);const S=k/2-w,C=[];if(C.push(qt(c,u)),null===a)for(let t=0;t<x;t++)C.push(qt(l,u));else{for(let t=0;t<x;t++)C.push(qt(l,u));C.push(qt(a,u));for(let t=0;t<x;t++)C.push(qt(l,u))}C.push(qt(o,u));const T=Rt(r,C,"bottom",S);return T.setStyle("color",r.color),"number"==typeof r.opacity&&T.setStyle("opacity",r.opacity),tt.makeStyleWrap(t,Pt(T,"delimsizing mult"),r.mathstyle,P.TEXT,s)}const Ht=["(",")","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\\lceil","\\rceil","\\surd"],Wt=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\mvert","\\mid","\\lgroup","\\rgroup","\\lmoustache","\\rmoustache"],jt=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Kt=[0,1.2,1.8,2.4,3],Ut=[{type:"small",mathstyle:P.SCRIPTSCRIPT},{type:"small",mathstyle:P.SCRIPT},{type:"small",mathstyle:P.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],Vt=[{type:"small",mathstyle:P.SCRIPTSCRIPT},{type:"small",mathstyle:P.SCRIPT},{type:"small",mathstyle:P.TEXT},{type:"stack"}],Gt=[{type:"small",mathstyle:P.SCRIPTSCRIPT},{type:"small",mathstyle:P.SCRIPT},{type:"small",mathstyle:P.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}];function Xt(t,e,i,n,r,s){if(!e||0===e.length||"."===e)return Zt(t,r,t);let o;"<"===e||"\\lt"===e?e="\\langle":">"!==e&&"\\gt"!==e||(e="\\rangle"),o=jt.includes(e)?Ut:Ht.includes(e)?Gt:Vt;const a=function(t,e,i,n){for(let s=Math.min(2,3-n.mathstyle.size);s<i.length&&"stack"!==i[s].type;s++){const n=A.getCharacterMetrics(t,"small"===(r=i[s]).type?"Main-Regular":"large"===r.type?"Size"+r.size+"-Regular":"Size4-Regular");if(n.defaultMetrics)return{type:"small",mathstyle:P.SCRIPT};let o=n.height+n.depth;if("small"===i[s].type&&(o*=i[s].mathstyle.sizeMultiplier),o>e)return i[s]}var r;return i[i.length-1]}(Nt.getValue("math",e),i,o,r);return"small"===a.type?function(t,e,i,n,r,s){const o=zt("AMS-Regular",Nt.getValue("math",e)),a=tt.makeStyleWrap(t,o,r.mathstyle,i,s);return n&&a.setTop((1-r.mathstyle.sizeMultiplier/i.sizeMultiplier)*r.mathstyle.metrics.axisHeight),a.setStyle("color",r.color),"number"==typeof r.opacity&&a.setStyle("opacity",r.opacity),a}(t,e,a.mathstyle,n,r,s):"large"===a.type?Bt(t,e,a.size,n,r,s):$t(t,e,i,n,r,s)}function Zt(t,e,i){return tt.makeSpanOfType(t,"","sizing"+e.mathstyle.adjustTo(P.TEXT)+" nulldelimiter "+(i||""))}var Yt={makeSizedDelim:function(t,e,i,n,r){return"."===e?Zt(t,n,r):("<"===e||"\\lt"===e?e="\\langle":">"!==e&&"\\gt"!==e||(e="\\rangle"),Ht.includes(e)||jt.includes(e)?Bt(t,e,i,!1,n,r):Wt.includes(e)?$t(t,e,Kt[i],!1,n,r):null)},makeCustomSizedDelim:Xt,makeLeftRightDelim:function(t,e,i,n,r,s){if("."===e)return Zt(t,r,s);const o=r.mathstyle.metrics.axisHeight*r.mathstyle.sizeMultiplier,a=5/A.METRICS.ptPerEm;let l=n+o,c=i-o,u=901*(c=Math.max(l,c))/500;return l=2*c-a,Xt(t,e,u=Math.max(u,l),!0,r,s)}};const Jt=tt.makeSpan,Qt=tt.makeOrd,te=tt.makeInner,ee=tt.makeHlist,ie=tt.makeVlist,ne=/\u0393|\u0394|\u0398|\u039b|\u039E|\u03A0|\u03A3|\u03a5|\u03a6|\u03a8|\u03a9|[\u03b1-\u03c9]|\u03d1|\u03d5|\u03d6|\u03f1|\u03f5/,re=/^([A-Za-z]|[\u03b1-\u03c9]|\u03d1|\u03d5|\u03d6|\u03f1|\u03f5)$/,se={size1:.5,size2:.7,size3:.8,size4:.9,size5:1,size6:1.2,size7:1.44,size8:1.73,size9:2.07,size10:2.49};class oe{constructor(t,e,i,n){this.mode=t,this.type=e,this.body=i,this.applyStyle(n)}getStyle(){return{color:this.phantom?"transparent":this.color,backgroundColor:this.phantom?"transparent":this.backgroundColor,fontFamily:this.baseFontFamily||this.fontFamily||this.autoFontFamily,fontShape:this.fontShape,fontSeries:this.fontSeries,fontSize:this.fontSize,cssId:this.cssId,cssClass:this.cssClass}}applyStyle(t){if(Object.assign(this,t),"none"===this.fontFamily&&(this.fontFamily=""),"auto"===this.fontShape&&(this.fontShape=""),"auto"===this.fontSeries&&(this.fontSeries=""),"none"===this.color&&(this.color=""),"none"===this.backgroundColor&&(this.backgroundColor=""),"auto"===this.fontSize&&(this.fontSize=""),this.fontSize&&(this.maxFontSize=se[this.fontSize]),"math"===this.mode){const t="string"==typeof this.body?this.body:"";this.autoFontFamily="cmr",re.test(t)?this.autoFontFamily="math":/\\imath|\\jmath|\\pounds/.test(t)?this.autoFontFamily="mainit":ne.test(t)||"math"!==this.baseFontFamily||(this.autoFontFamily="cmr")}else"text"===this.mode&&("root"!==this.type&&(this.type=""),delete this.baseFontFamily,delete this.autoFontFamily)}getInitialBaseElement(){let t=this;return Array.isArray(this.body)&&this.body.length>0&&("first"!==this.body[0].type?t=this.body[0].getInitialBaseElement():this.body[1]&&(t=this.body[1].getInitialBaseElement())),t}getFinalBaseElement(){return Array.isArray(this.body)&&this.body.length>0?this.body[this.body.length-1].getFinalBaseElement():this}isCharacterBox(){const t=this.getInitialBaseElement();return/minner|mbin|mrel|mpunct|mopen|mclose|textord/.test(t.type)}forEach(t){if(t(this),Array.isArray(this.body))for(const e of this.body)e&&e.forEach(t);else this.body&&"object"==typeof this.body&&t(this.body);if(this.superscript)for(const e of this.superscript)e&&e.forEach(t);if(this.subscript)for(const e of this.subscript)e&&e.forEach(t);if(this.overscript)for(const e of this.overscript)e&&e.forEach(t);if(this.underscript)for(const e of this.underscript)e&&e.forEach(t);if(this.numer)for(const e of this.numer)e&&e.forEach(t);if(this.denom)for(const e of this.denom)e&&e.forEach(t);if(this.index)for(const e of this.index)e&&e.forEach(t);if(this.array)for(const e of this.array)for(const i of e)for(const e of i)e.forEach(t)}filter(t){let e=[];t(this)&&e.push(this);for(const i of["body","superscript","subscript","overscript","underscript","numer","denom","index"])if(Array.isArray(this[i]))for(const n of this[i])n&&(e=e.concat(n.filter(t)));if(Array.isArray(this.array))for(const i of this.array)for(const n of i)n&&(e=e.concat(n.filter(t)));return e}decomposeGroup(t){const e=t.clone({mathstyle:this.mathstyle}),i=Qt(ue(e,this.body));return this.cssId&&(i.cssId=this.cssId),i.applyStyle({backgroundColor:this.backgroundColor,cssClass:this.cssClass}),i}decomposeArray(t){let e=this.colFormat;e&&0===e.length&&(e=[{align:"l"}]),e||(e=[{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"}]);const i=[];let n=0;for(const t of e)t.align&&n++;for(const t of this.array){let e=0;for(;e<t.length;){const r=[],s=Math.min(t.length,e+n);for(;e<s;)r.push(t[e++]);i.push(r)}}1===i[i.length-1].length&&0===i[i.length-1][0].length&&i.pop();const r=P.toMathstyle(this.mathstyle)||t.mathstyle,s=(this.arraystretch||1)*w.baselineskip,o=.7*s,a=.3*s;let l=0,c=0;const u=[],h=i.length;for(let e=0;e<h;++e){const n=i[e];c=Math.max(c,n.length);let r=o,s=a;const d=[];for(let e=0;e<n.length;++e){const i=ue(t.clone({mathstyle:this.mathstyle}),n[e])||[],o=[Qt(null)].concat(i);s=Math.max(s,tt.depth(o)),r=Math.max(r,tt.height(o)),d.push(o)}let p=e===h-1?0:this.jot||0;this.rowGaps&&this.rowGaps[e]&&((p=this.rowGaps[e])>0&&(s<(p+=a)&&(s=p),p=0)),d.height=r,d.depth=s,l+=r,d.pos=l,l+=s+p,u.push(d)}const d=l/2+r.metrics.axisHeight,p=[];for(let e=0;e<c;e++){const i=[];for(const t of u){const n=t[e];n&&(n.depth=t.depth,n.height=t.height,i.push(n),i.push(t.pos-d))}i.length>0&&p.push(ie(t,i,"individualShift"))}const f=[];let m=!1,g=!1,y=0,v=!this.lFence;for(const i of e){if(i.align&&y>=p.length)break;if(i.align&&y<p.length)m?f.push(ae(2*w.arraycolsep)):(g||v)&&f.push(ae(w.arraycolsep)),f.push(Jt(p[y],"col-align-"+i.align)),y++,m=!0,g=!1,v=!1;else if(void 0!==i.gap)"number"==typeof i.gap?f.push(ae(i.gap)):f.push(le(t,u,d,i.gap)),m=!1,g=!1,v=!1;else if(i.rule){const e=Jt(null,"vertical-separator");e.setStyle("height",l,"em"),e.setStyle("margin-top",3*t.mathstyle.metrics.axisHeight-d,"em"),e.setStyle("vertical-align","top");let i=0;g?i=w.doubleRuleSep-w.arrayrulewidth:m&&(i=w.arraycolsep-w.arrayrulewidth),e.setLeft(i,"em"),f.push(e),m=!1,g=!0,v=!1}}if(m&&!this.rFence&&f.push(ae(w.arraycolsep)),!(this.lFence&&"."!==this.lFence||this.rFence&&"."!==this.rFence))return Qt(f,"mtable");const b=Jt(f,"mtable"),x=tt.height(b),k=tt.depth(b);return Qt([this.bind(t,Yt.makeLeftRightDelim("mopen",this.lFence,x,k,t)),b,this.bind(t,Yt.makeLeftRightDelim("mclose",this.rFence,x,k,t))])}decomposeGenfrac(t){const e="auto"===this.mathstyle?t.mathstyle:P.toMathstyle(this.mathstyle),i=t.clone({mathstyle:e});let n=[];this.numerPrefix&&n.push(Qt(this.numerPrefix));const r=this.continuousFraction?e:e.fracNum();n=n.concat(ue(i.clone({mathstyle:r}),this.numer));const s=ee(n,t.mathstyle.adjustTo(r));let o=[];this.denomPrefix&&o.push(Qt(this.denomPrefix));const a=this.continuousFraction?e:e.fracDen();o=o.concat(ue(i.clone({mathstyle:a}),this.denom));const l=ee(o,t.mathstyle.adjustTo(a)),c=this.hasBarLine?w.defaultRuleThickness/e.sizeMultiplier:0;let u,h,d;e.size===P.DISPLAY.size?(u=e.metrics.num1,h=c>0?3*c:7*w.defaultRuleThickness,d=e.metrics.denom1):(c>0?(u=e.metrics.num2,h=c):(u=e.metrics.num3,h=3*w.defaultRuleThickness),d=e.metrics.denom2);const p=s?s.depth:0,f=l?l.height:0;let m;if(0===c){const t=u-p-(f-d);t<h&&(u+=.5*(h-t),d+=.5*(h-t)),m=ie(i,[s,-u,l,d],"individualShift")}else{const t=e.metrics.axisHeight;u-p-(t+.5*c)<h&&(u+=h-(u-p-(t+.5*c))),t-.5*c-(f-d)<h&&(d+=h-(t-.5*c-(f-d)));const n=Jt(null," frac-line");n.applyStyle(this.getStyle()),n.height=c;const r=[];s&&(r.push(s),r.push(-u)),r.push(n),r.push(c/2-t),l&&(r.push(l),r.push(d)),m=ie(i,r,"individualShift")}m.classes+=" mfrac",m.height*=e.sizeMultiplier/t.mathstyle.sizeMultiplier,m.depth*=e.sizeMultiplier/t.mathstyle.sizeMultiplier;const g=e.size===P.DISPLAY.size?e.metrics.delim1:e.metrics.delim2,y=this.bind(t,Yt.makeCustomSizedDelim("mopen",this.leftDelim,g,!0,t.clone({mathstyle:e}))),v=this.bind(t,Yt.makeCustomSizedDelim("mclose",this.rightDelim,g,!0,t.clone({mathstyle:e})));y.applyStyle(this.getStyle()),v.applyStyle(this.getStyle());const b=Qt([y,m,v],t.parentSize!==t.size?"sizing reset-"+t.parentSize+" "+t.size:"");return this.bind(t,b)}decomposeLeftright(t){if(!this.body)return this.leftDelim?new oe("math","mopen",this.leftDelim).decompose(t):this.rightDelim?new oe("math","mclose",this.rightDelim).decompose(t):null;const e=t.clone(),i=ue(e,this.body),n=e.mathstyle;let r=0,s=0,o=[];if(r=tt.height(i)*n.sizeMultiplier,s=tt.depth(i)*n.sizeMultiplier,this.leftDelim&&(o.push(this.bind(t,Yt.makeLeftRightDelim("mopen",this.leftDelim,r,s,e))),o[o.length-1].applyStyle(this.getStyle())),i){for(let n=0;n<i.length;n++)if(i[n].delim){const o=i[n].caret,a=/ML__selected/.test(i[n].classes);i[n]=this.bind(t,Yt.makeLeftRightDelim("minner",i[n].delim,r,s,e)),i[n].caret=o,i[n].selected(a)}o=o.concat(i)}if(this.rightDelim){let i,n=this.rightDelim;"?"===n&&(n=(n={"(":")","\\{":"\\}","\\[":"\\]","\\lbrace":"\\rbrace","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache"}[this.leftDelim])||this.leftDelim,i="ML__smart-fence__close"),o.push(this.bind(t,Yt.makeLeftRightDelim("mclose",n,r,s,e,i))),o[o.length-1].applyStyle(this.getStyle())}return this.inner?te(o,n.cls()):o}decomposeSurd(t){const e=t.mathstyle,i=ue(t.cramp(),this.body),n=w.defaultRuleThickness/e.sizeMultiplier;let r=n;e.id<P.TEXT.id&&(r=e.metrics.xHeight);let s=n+r/4;const o=Math.max(2*r,(tt.height(i)+tt.depth(i))*e.sizeMultiplier)+(s+n),a=Jt(Yt.makeCustomSizedDelim("","\\surd",o,!1,t),"sqrt-sign");a.applyStyle(this.getStyle());const l=a.height+a.depth-n;l>tt.height(i)+tt.depth(i)+s&&(s=(s+l-(tt.height(i)+tt.depth(i)))/2),a.setTop(a.height-tt.height(i)-(s+n));const c=Jt(null,t.mathstyle.adjustTo(P.TEXT)+" sqrt-line");c.applyStyle(this.getStyle()),c.height=n;const u=ie(t,[i,s,c,n]);if(!this.index)return this.bind(t,Qt([a,u],"sqrt"));const h=t.clone({mathstyle:P.SCRIPTSCRIPT}),d=Jt(ue(h,this.index),e.adjustTo(P.SCRIPTSCRIPT)),p=Math.max(a.height,u.height),f=Math.max(a.depth,u.depth),m=ie(t,[d],"shift",-.6*(p-f));return this.bind(t,Qt([Jt(m,"root"),a,u],"sqrt"))}decomposeAccent(t){const e=t.mathstyle;let i=ue(t.cramp(),this.body);(this.superscript||this.subscript)&&(i=this.attachSupsub(t,Qt(i),"mord"));let n=0;Array.isArray(this.body)&&1===this.body.length&&this.body[0].isCharacterBox()&&(n=tt.skew(i));const r=Math.min(tt.height(i),e.metrics.xHeight),s=tt.makeSymbol("Main-Regular",this.accent,"math");s.italic=0;const o="⃗"===this.accent?" accent-vec":"";let a=Jt(Jt(s),"accent-body"+o);return(a=ie(t,[i,-r,a])).children[1].setLeft(2*n),Qt(a,"accent")}decomposeLine(t){const e=t.mathstyle,i=ue(t.cramp(),this.body),n=w.defaultRuleThickness/e.sizeMultiplier,r=Jt(null,t.mathstyle.adjustTo(P.TEXT)+" "+this.position+"-line");let s;if(r.height=n,r.maxFontSize=1,"overline"===this.position)s=ie(t,[i,3*n,r,n]);else{const e=Jt(i);s=ie(t,[n,r,3*n,e],"top",tt.height(e))}return Qt(s,this.position)}decomposeOverunder(t){const e=ue(t,this.body),i=t.clone({mathstyle:"scriptstyle"});return ce(t,e,0,0,this.overscript?Jt(ue(i,this.overscript),t.mathstyle.adjustTo(i.mathstyle)):null,this.underscript?Jt(ue(i,this.underscript),t.mathstyle.adjustTo(i.mathstyle)):null,this.mathtype||"mrel")}decomposeOverlap(t){const e=Jt(ue(t,this.body),"inner");return Qt([e,Jt(null,"fix")],"left"===this.align?"llap":"rlap")}decomposeRule(t){const e=t.mathstyle,i=Qt("","rule");let n=this.shift&&!isNaN(this.shift)?this.shift:0;n/=e.sizeMultiplier;const r=this.width/e.sizeMultiplier,s=this.height/e.sizeMultiplier;return i.setStyle("border-right-width",r,"em"),i.setStyle("border-top-width",s,"em"),i.setStyle("margin-top",-(s-n),"em"),i.setStyle("border-color",t.color),i.width=r,i.height=s+n,i.depth=-n,i}decomposeOp(t){const e=t.mathstyle;let i,n=!1;e.size===P.DISPLAY.size&&"string"==typeof this.body&&"\\smallint"!==this.body&&(n=!0);let r=0,s=0;if(this.symbol){const o=n?"Size2-Regular":"Size1-Regular";(i=tt.makeSymbol(o,this.body,"op-symbol "+(n?"large-op":"small-op"))).type="mop",r=(i.height-i.depth)/2-e.metrics.axisHeight*e.sizeMultiplier,s=i.italic,this.bind(t,i)}else Array.isArray(this.body)?(i=tt.makeOp(ue(t,this.body)),this.bind(t,i)):i=this.makeSpan(t,this.body);if(this.superscript||this.subscript){const n=this.limits||"auto";return this.alwaysHandleSupSub||"limits"===n||"auto"===n&&e.size===P.DISPLAY.size?this.attachLimits(t,i,r,s):this.attachSupsub(t,i,"mop")}return this.symbol&&i.setTop(r),i}decomposeBox(t){const e=Qt(ue(t,this.body)),i=Jt();i.setStyle("position","absolute");const n="number"==typeof this.padding?this.padding:w.fboxsep;i.setStyle("height",e.height+e.depth+2*n,"em"),0!==n?i.setStyle("width","calc(100% + "+2*n+"em)"):i.setStyle("width","100%"),i.setStyle("top",-n,"em"),i.setStyle("left",-n,"em"),i.setStyle("z-index","-1"),this.backgroundcolor&&i.setStyle("background-color",this.backgroundcolor),this.framecolor&&i.setStyle("border",w.fboxrule+"em solid "+this.framecolor),this.border&&i.setStyle("border",this.border),e.setStyle("display","inline-block"),e.setStyle("height",e.height+e.depth,"em"),e.setStyle("vertical-align",-e.depth+n,"em");const r=Jt([i,e]);return r.setStyle("position","relative"),r.setStyle("vertical-align",-n+e.depth,"em"),r.height=e.height+n,r.depth=e.depth+n,r.setLeft(n),r.setRight(n),r}decomposeEnclose(t){const e=Qt(ue(t,this.body)),i="auto"===this.padding?.2:this.padding;e.setStyle("padding",i,"em"),e.setStyle("display","inline-block"),e.setStyle("height",e.height+e.depth,"em"),e.setStyle("left",-i,"em"),this.backgroundcolor&&"transparent"!==this.backgroundcolor&&e.setStyle("background-color",this.backgroundcolor);let n="";if(this.notation.box&&e.setStyle("border",this.borderStyle),this.notation.actuarial&&(e.setStyle("border-top",this.borderStyle),e.setStyle("border-right",this.borderStyle)),this.notation.madruwb&&(e.setStyle("border-bottom",this.borderStyle),e.setStyle("border-right",this.borderStyle)),this.notation.roundedbox&&(e.setStyle("border-radius",(tt.height(e)+tt.depth(e))/2,"em"),e.setStyle("border",this.borderStyle)),this.notation.circle&&(e.setStyle("border-radius","50%"),e.setStyle("border",this.borderStyle)),this.notation.top&&e.setStyle("border-top",this.borderStyle),this.notation.left&&e.setStyle("border-left",this.borderStyle),this.notation.right&&e.setStyle("border-right",this.borderStyle),this.notation.bottom&&e.setStyle("border-bottom",this.borderStyle),this.notation.horizontalstrike&&(n+='<line x1="3%"  y1="50%" x2="97%" y2="50%"',n+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,n+=' stroke-linecap="round"',this.svgStrokeStyle&&(n+=` stroke-dasharray="${this.svgStrokeStyle}"`),n+="/>"),this.notation.verticalstrike&&(n+='<line x1="50%"  y1="3%" x2="50%" y2="97%"',n+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,n+=' stroke-linecap="round"',this.svgStrokeStyle&&(n+=` stroke-dasharray="${this.svgStrokeStyle}"`),n+="/>"),this.notation.updiagonalstrike&&(n+='<line x1="3%"  y1="97%" x2="97%" y2="3%"',n+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,n+=' stroke-linecap="round"',this.svgStrokeStyle&&(n+=` stroke-dasharray="${this.svgStrokeStyle}"`),n+="/>"),this.notation.downdiagonalstrike&&(n+='<line x1="3%"  y1="3%" x2="97%" y2="97%"',n+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,n+=' stroke-linecap="round"',this.svgStrokeStyle&&(n+=` stroke-dasharray="${this.svgStrokeStyle}"`),n+="/>"),n){let t;return"none"!==this.shadow&&(t="auto"===this.shadow?"filter: drop-shadow(0 0 .5px rgba(255, 255, 255, .7)) drop-shadow(1px 1px 2px #333)":"filter: drop-shadow("+this.shadow+")"),tt.makeSVG(e,n,t)}return e}decompose(t,e){let i=null;if(!this.type||/mord|minner|mbin|mrel|mpunct|mopen|mclose|textord/.test(this.type))(i="string"==typeof this.body?this.makeSpan(t,this.body):this.makeSpan(t,ue(t,this.body))).type=this.type;else if("group"===this.type||"root"===this.type)i=this.decomposeGroup(t);else if("array"===this.type)i=this.decomposeArray(t);else if("genfrac"===this.type)i=this.decomposeGenfrac(t);else if("surd"===this.type)i=this.decomposeSurd(t);else if("accent"===this.type)i=this.decomposeAccent(t);else if("leftright"===this.type)i=this.decomposeLeftright(t);else if("delim"===this.type)(i=Jt(null,"")).delim=this.delim;else if("sizeddelim"===this.type)i=this.bind(t,Yt.makeSizedDelim(this.cls,this.delim,this.size,t));else if("line"===this.type)i=this.decomposeLine(t);else if("overunder"===this.type)i=this.decomposeOverunder(t);else if("overlap"===this.type)i=this.decomposeOverlap(t);else if("rule"===this.type)i=this.decomposeRule(t);else if("styling"===this.type);else if("msubsup"===this.type)i=Qt("​"),e&&(i.height=e[0].height,i.depth=e[0].depth);else if("mop"===this.type)i=this.decomposeOp(t);else if("space"===this.type)i=this.makeSpan(t," ");else if("spacing"===this.type)if("​"===this.body)i=this.makeSpan(t,"​");else if(" "===this.body)i="math"===this.mode?this.makeSpan(t," "):this.makeSpan(t," ");else if(this.width)i=Jt("​","mspace "),this.width>0?i.setWidth(this.width):i.setStyle("margin-left",this.width,"em");else{const t={qquad:"qquad",quad:"quad",enspace:"enspace",";":"thickspace",":":"mediumspace",",":"thinspace","!":"negativethinspace"}[this.body]||"quad";i=Jt("​","mspace "+t)}else"mathstyle"===this.type?t.setMathstyle(this.mathstyle):"box"===this.type?i=this.decomposeBox(t):"enclose"===this.type?i=this.decomposeEnclose(t):"command"===this.type||"error"===this.type?((i=this.makeSpan(t,this.body)).classes="",this.error&&(i.classes+=" ML__error"),this.suggestion&&(i.classes+=" ML__suggestion")):"placeholder"===this.type?i=this.makeSpan(t,"⬚"):"first"===this.type&&(i=this.makeSpan(t,"​"));if(!i)return i;if(this.caret&&"styling"!==this.type&&"msubsup"!==this.type&&"command"!==this.type&&"placeholder"!==this.type&&"first"!==this.type&&(Array.isArray(i)?i[i.length-1].caret=this.caret:i.caret=this.caret),!this.limits&&(this.superscript||this.subscript))if(Array.isArray(i)){const e=i[i.length-1];i[i.length-1]=this.attachSupsub(t,e,e.type)}else i=[this.attachSupsub(t,i,i.type)];return Array.isArray(i)?i:[i]}attachSupsub(t,e,i){if(!this.superscript&&!this.subscript)return e;const n=t.mathstyle;let r=null,s=null;if(this.superscript){const e=ue(t.sup(),this.superscript);r=Jt(e,n.adjustTo(n.sup()))}if(this.subscript){const e=ue(t.sub(),this.subscript);s=Jt(e,n.adjustTo(n.sub()))}let o,a=0,l=0;this.isCharacterBox()||(a=tt.height(e)-n.metrics.supDrop,l=tt.depth(e)+n.metrics.subDrop),o=n===P.DISPLAY?n.metrics.sup1:n.cramped?n.metrics.sup3:n.metrics.sup2;const c=P.TEXT.sizeMultiplier*n.sizeMultiplier,u=.5/w.ptPerEm/c;let h=null;if(s&&r){a=Math.max(a,o,r.depth+.25*n.metrics.xHeight),l=Math.max(l,n.metrics.sub2);const i=w.defaultRuleThickness;if(a-tt.depth(r)-(tt.height(s)-l)<4*i){l=4*i-(a-r.depth)+tt.height(s);const t=.8*n.metrics.xHeight-(a-tt.depth(r));t>0&&(a+=t,l-=t)}h=ie(t,[s,l,r,-a],"individualShift"),this.symbol&&h.children[0].setLeft(-tt.italic(e))}else s&&!r?(l=Math.max(l,n.metrics.sub1,tt.height(s)-.8*n.metrics.xHeight),(h=ie(t,[s],"shift",l)).children[0].setRight(u),this.isCharacterBox()&&h.children[0].setLeft(-tt.italic(e))):!s&&r&&(a=Math.max(a,o,r.depth+.25*n.metrics.xHeight),(h=ie(t,[r],"shift",-a)).children[0].setRight(u));const d=Jt(h,"msubsup");return this.caret&&(d.caret=this.caret),tt.makeSpanOfType(i,[e,d])}attachLimits(t,e,i,n){return ce(t,e,i,n,this.superscript?Jt(ue(t.sup(),this.superscript),t.mathstyle.adjustTo(t.mathstyle.sup())):null,this.subscript?Jt(ue(t.sub(),this.subscript),t.mathstyle.adjustTo(t.mathstyle.sub())):null,"mop")}bind(t,e){return"first"!==this.type&&"​"!==this.body&&(this.id=function(t){let e;return"boolean"==typeof t.generateID&&t.generateID?e=Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36):"object"==typeof t.generateID&&(t.generateID.overrideID?e=t.generateID.overrideID:(e=t.generateID.seed.toString(36),t.generateID.seed+=1)),e}(t),this.id&&(e.attributes||(e.attributes={}),e.attributes["data-atom-id"]=this.id)),e}makeSpan(t,e){const i="textord"===this.type?"mord":this.type,n=tt.makeSpanOfType(i,e),r=this.getStyle();n.applyStyle(r);const s=r&&r.fontSize?r.fontSize:"size5";return s!==t.parentSize?(n.classes+=" sizing reset-"+t.parentSize,n.classes+=" "+s):t.parentSize!==t.size&&(n.classes+=" sizing reset-"+t.parentSize,n.classes+=" "+t.size),n.maxFontSize=Math.max(n.maxFontSize,t.sizeMultiplier||1),"text"===this.mode&&(n.classes+=" ML__text"),t.mathstyle.isTight()&&(n.isTight=!0),"math"!==this.mode&&(n.italic=0),n.setRight(n.italic),"number"==typeof t.opacity&&n.setStyle("opacity",t.opacity),this.bind(t,n),this.caret&&(this.superscript||this.subscript||(n.caret=this.caret,t.mathstyle.isTight()&&(n.isTight=!0))),n}}function ae(t){const e=Jt("​","arraycolsep");return e.setWidth(t,"em"),e}function le(t,e,i,n){const r=[];for(const s of e){const e=Jt(ue(t,n));e.depth=s.depth,e.height=s.height,r.push(e),r.push(s.pos-i)}return ie(t,r,"individualShift")}function ce(t,e,i,n,r,s,o){if(!r&&!s)return e;e=Jt(e);let a=0,l=0;r&&(a=Math.max(w.bigOpSpacing1,w.bigOpSpacing3-r.depth)),s&&(l=Math.max(w.bigOpSpacing2,w.bigOpSpacing4-s.height));let c=null;if(s&&r){const o=w.bigOpSpacing5+tt.height(s)+tt.depth(s)+l+tt.depth(e)+i;(c=ie(t,[w.bigOpSpacing5,s,l,e,a,r,w.bigOpSpacing5],"bottom",o)).children[0].setLeft(-n),c.children[2].setLeft(n)}else if(s&&!r){const r=tt.height(e)-i;(c=ie(t,[w.bigOpSpacing5,s,l,e],"top",r)).children[0].setLeft(-n)}else if(!s&&r){const s=tt.depth(e)+i;(c=ie(t,[e,a,r,w.bigOpSpacing5],"bottom",s)).children[1].setLeft(n)}return tt.makeSpanOfType(o,c,"op-limits")}function ue(t,e){t instanceof B.Context||(t=new B.Context(t));const i=!t.generateID||!t.generateID.groupNumbers;let n=[];if(Array.isArray(e)){if(0===e.length)return n;if(1===e.length)(n=e[0].decompose(t))&&i&&e[0].isSelected&&n.forEach(t=>t.selected(!0));else{let r="none",s=e[1].type,o=[],a=null,l=null;for(let c=0;c<e.length;c++){"mbin"===e[c].type&&(/first|none|mrel|mpunct|mopen|mbin|mop/.test(r)||/none|mrel|mpunct|mclose/.test(s))&&(e[c].type="mord"),"​"===e[c].body&&(e[c].superscript||e[c].subscript)||(l=null),t.generateID.groupNumbers&&a&&"mord"===e[c].type&&/[0-9,.]/.test(e[c].latex)&&(t.generateID.overrideID=a);const u=e[c].decompose(t,l);if(t.generateID&&(t.generateID.overrideID=null),u){const r=[].concat.apply([],u);l=r,t.generateID&&t.generateID.groupNumbers&&("mord"===e[c].type&&/[0-9,.]/.test(e[c].latex)&&(a||(a=e[c].id)),("mord"!==e[c].type||/[0-9,.]/.test(e[c].latex)||e[c].superscript||e[c].subscript)&&a&&(a=null)),i&&e[c].isSelected?(o=o.concat(r)).forEach(t=>t.selected(!0)):(o.length>0&&(n=[...n,...o],o=[]),n=n.concat(r))}r=e[c].getFinalBaseElement().type,s=e[c+1]?e[c+1].getInitialBaseElement().type:"none"}o.length>0&&(n=[...n,...o],o=[])}}else e&&((n=e.decompose(t))&&i&&e.isSelected&&n.forEach(t=>t.selected(!0)));if(!n||0===n.length)return null;if(t.mathstyle!==t.parentMathstyle){const e=t.mathstyle.sizeMultiplier/t.parentMathstyle.sizeMultiplier;for(const t of n)t.height*=e,t.depth*=e}if(t.size!==t.parentSize){const e=se[t.size]/se[t.parentSize];for(const t of n)t.height*=e,t.depth*=e}return n}var he={MathAtom:oe,decompose:ue,makeRoot:function(t,e){const i=new oe(t=t||"math","root",e||[]);return 0!==i.body.length&&"first"===i.body[0].type||i.body.unshift(new oe("","first")),i},GREEK_REGEX:ne};const de={m0:"#3f3d99",m1:"#993d71",m2:"#998b3d",m3:"#3d9956",m4:"#3d5a99",m5:"#993d90",m6:"#996d3d",m7:"#43993d",m8:"#3d7999",m9:"#843d99"},pe={apricot:"#FBB982",aquamarine:"#00B5BE",bittersweet:"#C04F17",black:"#221E1F",blue:"#2D2F92",bluegreen:"#00B3B8",blueviolet:"#473992",brickred:"#B6321C",brown:"#792500",burntorange:"#F7921D",cadetblue:"#74729A",carnationpink:"#F282B4",cerulean:"#00A2E3",cornflowerblue:"#41B0E4",cyan:"#00AEEF",dandelion:"#FDBC42",darkorchid:"#A4538A",emerald:"#00A99D",forestgreen:"#009B55",fuchsia:"#8C368C",goldenrod:"#FFDF42",gray:"#949698",green:"#00A64F",greenyellow:"#DFE674",junglegreen:"#00A99A",lavender:"#F49EC4",limegreen:"#8DC73E",magenta:"#EC008C",mahogany:"#A9341F",maroon:"#AF3235",melon:"#F89E7B",midnightblue:"#006795",mulberry:"#A93C93",navyblue:"#006EB8",olivegreen:"#3C8031",orange:"#F58137",orangered:"#ED135A",orchid:"#AF72B0",peach:"#F7965A",periwinkle:"#7977B8",pinegreen:"#008B72",plum:"#92268F",processblue:"#00B0F0",purple:"#99479B",rawsienna:"#974006",red:"#ED1B23",redorange:"#F26035",redviolet:"#A1246B",rhodamine:"#EF559F",royalblue:"#0071BC",royalpurple:"#613F99",rubinered:"#ED017D",salmon:"#F69289",seagreen:"#3FBC9D",sepia:"#671800",skyblue:"#46C5DD",springgreen:"#C6DC67",tan:"#DA9D76",tealblue:"#00AEB3",thistle:"#D883B7",turquoise:"#00B4CE",violet:"#58429B",violetred:"#EF58A0",white:"#FFFFFF",wildstrawberry:"#EE2967",yellow:"#FFF200",yellowgreen:"#98CC70",yelloworange:"#FAA21A"};var fe={stringToColor:function(t){const e=t.toLowerCase().split("!");let i,n,r,s=255,o=255,a=255,l=-1;const c=e.length>0&&"-"===e[0].charAt(0);c&&(e[0]=e[0].slice(1));for(let t=0;t<e.length;t++){i=s,n=o,r=a;let c=e[t].match(/([a-z0-9]*)/);c&&(c=c[1]);let u=pe[c]||de[c];u||(u=e[t]);let h=u.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i);if(h&&h[1]&&h[2]&&h[3])s=Math.max(0,Math.min(255,parseInt(h[1],16))),o=Math.max(0,Math.min(255,parseInt(h[2],16))),a=Math.max(0,Math.min(255,parseInt(h[3],16)));else if((h=u.match(/^#([0-9a-f]{3})$/i))&&h[1]){const t=parseInt(h[1][0],16),e=parseInt(h[1][1],16),i=parseInt(h[1][2],16);s=Math.max(0,Math.min(255,16*t+t)),o=Math.max(0,Math.min(255,16*e+e)),a=Math.max(0,Math.min(255,16*i+i))}else{if(!((h=u.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i))&&h[1]&&h[2]&&h[3]))return null;s=Math.max(0,Math.min(255,parseInt(h[1]))),o=Math.max(0,Math.min(255,parseInt(h[2]))),a=Math.max(0,Math.min(255,parseInt(h[3])))}l>=0&&(s=(1-l)*s+l*i,o=(1-l)*o+l*n,a=(1-l)*a+l*r,l=-1),t+1<e.length&&(l=Math.max(0,Math.min(100,parseInt(e[++t])))/100)}return l>=0&&(s=l*s+(1-l)*i,o=l*o+(1-l)*n,a=l*a+(1-l)*r),c&&(s=255-s,o=255-o,a=255-a),"#"+("00"+Math.round(s).toString(16)).slice(-2)+("00"+Math.round(o).toString(16)).slice(-2)+("00"+Math.round(a).toString(16)).slice(-2)},colorToString:function(t){let e=t.toUpperCase();for(const t in pe)if(pe[t]===e){e=t;break}for(const t in de)if(de[t]===e){e=t;break}return e},AREA_COLORS:["#d35d60","#7293cb","#e1974d","#84bb5d","#9066a7","#aD6a58","#f5a4ce","#fff590","#212121","#818787","#d4d5d2","#ffffff"],LINE_COLORS:["#cc2428","#3769b1","#da7e30","#409852","#6b4c9a","#922426","#e7298a","#ffe907","#000000","#525055","#adafaa","#ffffff"]};const me=he.MathAtom;class ge{constructor(t,e,i){this.tokens=t,this.index=0,this.args=e,this.macros=i,this.mathList=[],this.style={},this.parseMode="math",this.tabularMode=!1,this.endCount=0}swapMathList(t){const e=this.mathList;return this.mathList=t||[],e}swapParseMode(t){const e=this.parseMode;return this.parseMode=t,e}end(){return this.endCount++,this.index>=this.tokens.length||this.endCount>1e3}get(){return this.endCount=0,this.index<this.tokens.length?this.tokens[this.index++]:null}peek(t){const e=this.index+(t||0);return e<this.tokens.length?this.tokens[e]:null}lastMathAtom(){const t=0===this.mathList.length?"none":this.mathList[this.mathList.length-1].type;if("mop"!==t&&"msubsup"!==t){const t=new me(this.parseMode,"msubsup","​");t.attributes={"aria-hidden":!0},this.mathList.push(t)}return this.mathList[this.mathList.length-1]}hasToken(t){const e=this.index;return e<this.tokens.length&&this.tokens[e].type===t}hasLiteral(t){const e=this.index;return e<this.tokens.length&&"literal"===this.tokens[e].type&&(!t||this.tokens[e].value===t)}hasLiteralPattern(t){return this.hasToken("literal")&&t.test(this.tokens[this.index].value)}hasCommand(t){const e=this.index;return e<this.tokens.length&&"command"===this.tokens[e].type&&this.tokens[e].value===t}hasInfixCommand(){const t=this.index;if(t<this.tokens.length&&"command"===this.tokens[t].type){const e=Nt.getInfo("\\"+this.tokens[t].value,this.parseMode,this.macros);return e&&e.infix}return!1}hasColumnSeparator(){const t=this.index;return!!(this.tabularMode&&t<this.tokens.length)&&"literal"===this.tokens[t].type&&"&"===this.tokens[t].value}hasRowSeparator(){const t=this.index;return!!(this.tabularMode&&t<this.tokens.length)&&"command"===this.tokens[t].type&&("\\"===this.tokens[t].value||"cr"===this.tokens[t].value)}parseColumnSeparator(){return!!this.hasColumnSeparator()&&(this.index++,!0)}placeholder(){if(this.args&&"string"==typeof this.args["?"])return ye(v.tokenize(this.args["?"]),this.parseMode,null,this.macros);const t=new me(this.parseMode,"placeholder","?",this.style);return t.captureSelection=!0,[t]}hasImplicitCommand(t){if(this.index<this.tokens.length){const e=this.tokens[this.index];if("command"===e.type)return t.includes(e.value)}return!1}parseRowSeparator(){return!!this.hasRowSeparator()&&(this.index++,!0)}parseToken(t){return!!this.hasToken(t)&&(this.index++,!0)}skipWhitespace(){let t=!1;for(;this.hasToken("space");)this.index++,t=!0;return t}skipUntilToken(t){for(;!this.end()&&!this.parseToken(t);)this.get()}parseCommand(t){return!!this.hasCommand(t)&&(this.index++,!0)}parseLiteral(t){return!!this.hasLiteral(t)&&(this.index++,!0)}parseFiller(){let t=!1,e=!1;do{const i=this.skipWhitespace(),n=this.parseCommand("relax");t=t||i||n,e=!i&&!n}while(!e);return t}parseKeyword(t){const e=this.index;let i=this.end(),n="";for(;!i;){const e=this.get();"literal"===e.type&&(n+=e.value),i=this.end()||"literal"!==e.type||n.length>=t.length}const r=t.toUpperCase()===n.toUpperCase();return r||(this.index=e),r}scanString(){let t="",e=this.end();for(;!e;){if(this.hasLiteral("]"))e=!0;else if(this.hasToken("literal"))t+=this.get().value;else if(this.skipWhitespace())t+=" ";else if(this.hasToken("command")){const e=this.get();"space"===e.value?t+=" ":t+=e.value}else e=!0;e=e||this.end()}return t}scanColor(){return fe.stringToColor(this.scanString())}scanNumber(t){const e=this.parseLiteral("-");e||this.parseLiteral("+"),this.skipWhitespace(),t=!!t;let i=10,n=/[0-9]/;this.parseLiteral("'")?(i=8,n=/[0-7]/,t=!0):(this.parseLiteral('"')||this.parseLiteral("x"))&&(i=16,n=/[0-9A-F]/,t=!0);let r="";for(;this.hasLiteralPattern(n);)r+=this.get().value;if(!t&&(this.parseLiteral(".")||this.parseLiteral(",")))for(r+=".";this.hasLiteralPattern(n);)r+=this.get().value;const s=t?parseInt(r,i):parseFloat(r);return e?-s:s}scanDimen(){const t=this.scanNumber(!1);let e;return this.skipWhitespace(),e=this.parseKeyword("pt")?A.toEm(t,"pt"):this.parseKeyword("mm")?A.toEm(t,"mm"):this.parseKeyword("cm")?A.toEm(t,"cm"):this.parseKeyword("ex")?A.toEm(t,"ex"):this.parseKeyword("px")?A.toEm(t,"px"):this.parseKeyword("em")?A.toEm(t,"em"):this.parseKeyword("bp")?A.toEm(t,"bp"):this.parseKeyword("dd")?A.toEm(t,"dd"):this.parseKeyword("pc")?A.toEm(t,"pc"):this.parseKeyword("in")?A.toEm(t,"in"):this.parseKeyword("mu")?A.toEm(t,"mu"):A.toEm(t,"pt")}scanSkip(){const t=this.scanDimen();return this.skipWhitespace(),this.parseKeyword("plus")&&this.scanDimen(),this.skipWhitespace(),this.parseKeyword("minus")&&this.scanDimen(),t}scanColspec(){this.skipWhitespace();const t=[];for(;!this.end()&&!this.hasToken("}")&&!this.hasLiteral("]");)if(this.hasLiteral()){const e=this.get().value;if("lcr".includes(e))t.push({align:e});else if("|"===e)t.push({rule:!0});else if("@"===e){if(this.parseToken("{")){const e=this.swapParseMode("math");t.push({gap:this.scanImplicitGroup(t=>"}"===t.type)}),this.swapParseMode(e)}this.parseToken("}")}}return t}scanModeSet(){let t;if(this.parseCommand("(")&&(t=")"),!t&&this.parseCommand("[")&&(t="]"),!t)return null;const e=this.swapParseMode("math"),i=new me("math","group");return i.mathstyle=")"===t?"textstyle":"displaystyle",i.body=this.scanImplicitGroup(e=>"command"===e.type&&e.value===t),this.parseCommand(t),this.swapParseMode(e),i.body&&0!==i.body.length?i:null}scanModeShift(){if(!this.hasToken("$")&&!this.hasToken("$$"))return null;const t=this.get().type,e=new me("math","group");e.mathstyle="$"===t?"textstyle":"displaystyle",e.latexOpen="textstyle"===e.mathstyle?"$":"$$",e.latexClose=e.latexOpen;const i=this.swapParseMode("math");return e.body=this.scanImplicitGroup(e=>e.type===t),this.parseToken(t),this.swapParseMode(i),e.body&&0!==e.body.length?e:null}scanEnvironment(){if(!this.parseCommand("begin"))return null;const t=this.scanArg("string"),e=Nt.getEnvironmentInfo(t),i=[];if(e&&e.params)for(const t of e.params)if(t.optional){const e=this.scanOptionalArg(t.type);i.push(e)}else i.push(this.scanArg(t.type));const n=this.parseMode,r=this.tabularMode,s=this.swapMathList([]);this.tabularMode=e.tabular;const o=[],a=[];let l=[],c=!1;do{if(!(c=this.end())&&this.parseCommand("end")&&(c=this.scanArg("string")===t),!c)if(this.parseColumnSeparator())l.push(this.swapMathList([]));else if(this.parseRowSeparator()){l.push(this.swapMathList([]));let t=0;this.skipWhitespace(),this.parseLiteral("[")&&(t=this.scanDimen(),this.skipWhitespace(),this.parseLiteral("]")),a.push(t||0),o.push(l),l=[]}else this.mathList=this.mathList.concat(this.scanImplicitGroup())}while(!c);l.push(this.swapMathList([])),l.length>0&&o.push(l);const u=this.swapMathList(s);if(this.parseMode=n,this.tabularMode=r,!e.tabular&&0===u.length)return null;if(e.tabular&&0===o.length)return null;const h=new me(this.parseMode,"array",u,e.parser?e.parser(t,i,o):{});return h.array=o,h.rowGaps=a,h.env={...e},h.env.name=t,h}scanImplicitGroup(t){const e=this.style;t||(t=(t=>"}"===t.type||"literal"===t.type&&"&"===t.value||"command"===t.type&&/^(end|cr|\\)$/.test(t.value)));let i=null,n=null;const r=this.swapMathList([]);for(;!this.end()&&!t(this.peek());)if(this.hasImplicitCommand(["displaystyle","textstyle","scriptstyle","scriptscriptstyle"])){this.parseMode="math";const t=new me("math","mathstyle");t.mathstyle=this.get().value,this.mathList.push(t)}else this.hasInfixCommand()&&!i?(i=this.get(),n=this.swapMathList([])):this.parseAtom();let s;if(i){const t=this.swapMathList(r),e=Nt.getInfo("\\"+i.value,"math",this.macros);s=e?[new me(this.parseMode,e.type,e.value||i.value,e.parse?e.parse("\\"+i.value,[n,t]):null)]:[new me(this.parseMode,"mop",i.value)]}else s=this.swapMathList(r);return this.style=e,s}scanGroup(){if(!this.parseToken("{"))return null;const t=new me(this.parseMode,"group");return t.body=this.scanImplicitGroup(t=>"}"===t.type),this.parseToken("}"),t.latexOpen="{",t.latexClose="}",t}scanSmartFence(){if(this.skipWhitespace(),!this.parseLiteral("("))return null;const t=new me(this.parseMode,"leftright");t.leftDelim="(",t.inner=!1;const e=this.swapMathList([]);let i=1;for(;!this.end()&&0!==i;)this.hasLiteral("(")&&(i+=1),this.hasLiteral(")")&&(i-=1),0!==i&&this.parseAtom();return 0===i&&this.parseLiteral(")"),t.rightDelim=0===i?")":"?",t.body=this.swapMathList(e),t}scanDelim(){this.skipWhitespace();const t=this.get();if(!t)return null;let e=".";"command"===t.type?e="\\"+t.value:"literal"===t.type&&(e=t.value);const i=Nt.getInfo(e,"math",this.macros);return i?"mopen"===i.type||"mclose"===i.type?e:/^(\?|\||<|>|\\vert|\\Vert|\\\||\\surd|\\uparrow|\\downarrow|\\Uparrow|\\Downarrow|\\updownarrow|\\Updownarrow|\\mid|\\mvert|\\mVert)$/.test(e)?e:null:null}scanLeftRight(){if(this.parseCommand("right")||this.parseCommand("mright")){const t=new me(this.parseMode,"leftright");return t.rightDelim=this.scanDelim()||".",t}const t=this.style;let e="right";if(!this.parseCommand("left")){if(!this.parseCommand("mleft"))return null;e="mright"}const i=this.scanDelim()||".",n=this.swapMathList([]);for(;!this.end()&&!this.parseCommand(e);)this.parseAtom();this.style=t;const r=this.scanDelim(),s=new me(this.parseMode,"leftright");return s.leftDelim=i,s.rightDelim=r,s.inner="right"===e,s.body=this.swapMathList(n),s}parseSupSub(){if("math"!==this.parseMode)return!1;let t=!1;for(;this.hasLiteral("^")||this.hasLiteral("_")||this.hasLiteral("'");){let e;if(this.hasLiteral("^")?e="superscript":this.hasLiteral("_")&&(e="subscript"),this.parseLiteral("^")||this.parseLiteral("_")){const i=this.scanArg();if(i){const n=this.lastMathAtom();n[e]=n[e]||[],n[e]=n[e].concat(i),t=!0}}else if(this.parseLiteral("'")){const e=this.lastMathAtom();e.superscript=e.superscript||[],e.superscript.push(new me(e.parseMode,"mord","′")),t=!0}}return t}parseLimits(){if(this.parseCommand("limits")){const t=this.lastMathAtom();return t.limits="limits",t.explicitLimits=!0,!0}if(this.parseCommand("nolimits")){const t=this.lastMathAtom();return t.limits="nolimits",t.explicitLimits=!0,!0}return!1}scanOptionalArg(t){if(t=t&&"auto"!==t?t:this.parseMode,this.skipWhitespace(),!this.parseLiteral("["))return null;const e=this.parseMode;this.parseMode=t;const i=this.swapMathList();let n;for(;!this.end()&&!this.parseLiteral("]");)if("string"===t)n=this.scanString();else if("number"===t)n=this.scanNumber();else if("dimen"===t)n=this.scanDimen();else if("skip"===t)n=this.scanSkip();else if("colspec"===t)n=this.scanColspec();else if("color"===t)n=this.scanColor()||"#ffffff";else if("bbox"===t){const t=this.scanString().toLowerCase().trim().split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(const e of t){const t=fe.stringToColor(e);if(t)(n=n||{}).backgroundcolor=t;else{const t=e.match(/^\s*([0-9.]+)\s*([a-z][a-z])/);if(t)(n=n||{}).padding=A.toEm(t[1],t[2]);else{const t=e.match(/^\s*border\s*:\s*(.*)/);t&&((n=n||{}).border=t[1])}}}}else this.mathList=this.mathList.concat(this.scanImplicitGroup(t=>"literal"===t.type&&"]"===t.value));this.parseMode=e;const r=this.swapMathList(i);return n||r}scanArg(t){let e;if(t=t&&"auto"!==t?t:this.parseMode,this.parseFiller(),!this.parseToken("{")){if("delim"===t)return this.scanDelim()||".";if(/^(math|text)$/.test(t)){const e=this.parseMode;this.parseMode=t;const i=this.scanToken();return this.parseMode=e,Array.isArray(i)?i:i?[i]:null}}if(this.hasToken("#")){const t=this.get();return this.skipUntilToken("}"),"?"===t.value?this.placeholder():this.args?void 0===this.args[t.value]&&void 0!==this.args["?"]?this.placeholder():this.args[t.value]||null:null}const i=this.parseMode;this.parseMode=t;const n=this.swapMathList([]);if("string"===t)e=this.scanString(),this.skipUntilToken("}");else if("number"===t)e=this.scanNumber(),this.skipUntilToken("}");else if("dimen"===t)e=this.scanDimen(),this.skipUntilToken("}");else if("skip"===t)e=this.scanSkip(),this.skipUntilToken("}");else if("colspec"===t)e=this.scanColspec(),this.skipUntilToken("}");else if("color"===t)e=this.scanColor()||"#ffffff",this.skipUntilToken("}");else if("delim"===t)e=this.scanDelim()||".",this.skipUntilToken("}");else do{this.mathList=this.mathList.concat(this.scanImplicitGroup())}while(!this.parseToken("}")&&!this.end());this.parseMode=i;const r=this.swapMathList(n);return e||r}scanToken(){const t=this.get();if(!t)return null;let e=null;if("space"===t.type)"text"===this.parseMode&&(e=new me("text",""," ",this.style));else if("placeholder"===t.type)(e=new me(this.parseMode,"placeholder",t.value)).captureSelection=!0;else if("command"===t.type){if("placeholder"===t.value)(e=new me(this.parseMode,"placeholder",this.scanArg("string"),this.style)).captureSelection=!0;else if("char"===t.value){let t=Math.floor(this.scanNumber(!0));(!isFinite(t)||t<0||t>1114111)&&(t=10067),(e=new me(this.parseMode,"math"===this.parseMode?"mord":"",String.fromCodePoint(t))).latex='{\\char"'+("000000"+t.toString(16)).toUpperCase().substr(-6)+"}"}else if("hskip"===t.value||"kern"===t.value){const i=this.scanSkip();isFinite(i)&&((e=new me(this.parseMode,"spacing",null,this.style)).width=i),e.latex="\\"+t.value}else if(!(e=this.scanMacro(t.value))){const i=Nt.getInfo("\\"+t.value,this.parseMode,this.macros),n=[];let r="",s="";if(i&&i.params)for(const t of i.params)if(t.optional){const e=this.scanOptionalArg(t.type);n.push(e)}else if(t.type.endsWith("*"))s=t.type.slice(0,-1);else{const e=this.scanArg(t.type);if(e&&1===e.length&&"placeholder"===e[0].type&&t.placeholder&&(e[0].value=t.placeholder),e)n.push(e);else if(t.placeholder){const e=new me(this.parseMode,"placeholder",t.placeholder);e.captureSelection=!0,n.push([e])}else n.push(this.placeholder());"math"!==t.type&&"string"==typeof e&&(r+=e)}if(i&&!i.infix){if(i.parse){const r=i.parse("\\"+t.value,n);if(r.type)e=new me(this.parseMode,i.type,s?this.scanArg(s):null,{...this.style,...r});else{const t=this.parseMode;if(r.mode&&(this.parseMode=r.mode,delete r.mode),s){const t=this.style;this.style={...this.style,...r},e=this.scanArg(s),this.style=t}else this.style={...this.style,...r};this.parseMode=t}}else{const n={...this.style};i.baseFontFamily&&(n.baseFontFamily=i.baseFontFamily),e=new me(this.parseMode,i.type||"mop",i.value||t.value,n),i.skipBoundary&&(e.skipBoundary=!0)}if(e&&!/^(llap|rlap|class|cssId)$/.test(t.value)&&(e.latex="\\"+t.value,r&&(e.latex+="{"+r+"}"),e.isFunction&&this.smartFence)){const t=this.scanSmartFence();t&&(e=[e,t])}}i||((e=new me(this.parseMode,"error","\\"+t.value)).latex="\\"+t.value)}}else if("literal"===t.type){const i=Nt.getInfo(t.value,this.parseMode,this.macros);if(i){const n={...this.style};i.baseFontFamily&&(n.baseFontFamily=i.baseFontFamily),e=new me(this.parseMode,i.type,i.value||t.value,n),i.isFunction&&(e.isFunction=!0)}else e=new me(this.parseMode,"math"===this.parseMode?"mord":"",t.value,this.style);if(e.latex=Nt.matchCodepoint(this.parseMode,t.value.codePointAt(0)),i&&i.isFunction&&this.smartFence){const t=this.scanSmartFence();t&&(e=[e,t])}}else if("#"===t.type)if("?"===t.value)e=this.placeholder();else if(this.args)if(e=this.args[t.value]||null,Array.isArray(e)&&1===e.length)e=e[0];else if(Array.isArray(e)){const t=new me(this.parseMode,"group");t.body=e,e=t}else e=this.placeholder();return e}scanMacro(t){if(!this.macros||!this.macros[t])return null;const e={};let i,n=0;"string"==typeof this.macros[t]?(i=this.macros[t],/(^|[^\\])#1/.test(i)&&(n=1),/(^|[^\\])#2/.test(i)&&(n=2),/(^|[^\\])#3/.test(i)&&(n=3),/(^|[^\\])#4/.test(i)&&(n=4),/(^|[^\\])#5/.test(i)&&(n=5),/(^|[^\\])#6/.test(i)&&(n=6),/(^|[^\\])#7/.test(i)&&(n=7),/(^|[^\\])#8/.test(i)&&(n=8),/(^|[^\\])#9/.test(i)&&(n=9)):(i=this.macros[t].def,n=this.macros[t].args||0);for(let t=1;t<=n;t++)e[t]=this.scanArg();this.args&&"string"==typeof this.args["?"]&&(e["?"]=this.args["?"]);const r=new me(this.parseMode,"group",ye(v.tokenize(i),this.parseMode,e,this.macros));r.captureSelection=!0,r.latex="\\"+t;let s="";for(let t=1;t<=n;t++){if(s+="{",Array.isArray(e[t]))for(let i=0;i<e[t].length;i++)s+=e[t][i].latex;s+="}"}return r.latex+=s||"",r}parseAtom(){let t=this.scanEnvironment()||this.scanModeShift()||this.scanModeSet()||this.scanGroup()||this.scanLeftRight();return!(t||!this.parseSupSub()&&!this.parseLimits())||(t||(t=this.scanToken()),Array.isArray(t)?this.mathList=this.mathList.concat(t):t&&this.mathList.push(t),null!==t)}}function ye(t,e,i,n,r){let s=[];const o=new ge(t,i,n);for(o.parseMode=e||"math",r&&(o.smartFence=!0);!o.end();)s=s.concat(o.scanImplicitGroup());return s}var ve={Parser:ge,parseTokens:ye};function be(t,e){let i="";for(const e of t)i+=e.relation+":"+e.offset+"/";return e&&(i+="#"+e),i}function xe(t){const e={path:[],extent:0},i=t.split("#");i.length>1&&(e.extent=parseInt(i[1]));const n=i[0].split("/");for(const t of n){const i=t.match(/([^:]*):(.*)/);i&&e.path.push({relation:i[1],offset:parseInt(i[2])})}return e}var ke={pathFromString:xe,pathToString:be,pathDistance:function(t,e){let i=0,n=-1,r=!1;for(;!r;)r=(r=(n+=1)>=t.length||n>=e.length)||!(t[n].relation===e[n].relation&&t[n].offset===e[n].offset);return i=n===t.length&&n===e.length?0:n+1===t.length&&n+1===e.length&&t[n].relation===e[n].relation?1:2},pathCommonAncestor:function(t,e){const i=[],n=Math.min(t.length-1,e.length-1);let r=0;for(;r<=n&&t[r].relation===e[r].relation&&t[r].offset===e[r].offset;)i.push(t[r]),r+=1;return i},clone:function(t){return xe(be(t)).path}};const we={Left:"moveToPreviousChar",Right:"moveToNextChar",Up:"moveUp",Down:"moveDown","Shift-Left":"extendToPreviousChar","Shift-Right":"extendToNextChar","Shift-Up":"extendUp","Shift-Down":"extendDown",Backspace:"deletePreviousChar","Alt-Del":"deletePreviousChar",Del:"deleteNextChar","Alt-Backspace":"deleteNextChar","Alt-Left":"moveToPreviousWord","Alt-Right":"moveToNextWord","Alt-Shift-Left":"extendToPreviousWord","Alt-Shift-Right":"extendToNextWord","Ctrl-Left":"moveToGroupStart","Ctrl-Right":"moveToGroupEnd","Ctrl-Shift-Left":"extendToGroupStart","Ctrl-Shift-Right":"extendToGroupEnd","math:Spacebar":"moveAfterParent","math:Shift-Spacebar":"moveBeforeParent",Home:"moveToMathFieldStart","mac:Meta-Left":"moveToMathFieldStart","Shift-Home":"extendToMathFieldStart","mac:Meta-Shift-Left":"extendToMathFieldStart",End:"moveToMathFieldEnd","mac:Meta-Right":"moveToMathFieldEnd","Shift-End":"extendToMathFieldEnd","mac:Meta-Shift-Right":"extendToMathFieldEnd",PageUp:"moveToGroupStart",PageDown:"moveToGroupEnd","math:Tab":"moveToNextPlaceholder","math:F8":"moveToNextPlaceholder","math:Shift-Tab":"moveToPreviousPlaceholder","math:Shift-F8":"moveToPreviousPlaceholder","text:Tab":"moveToNextPlaceholder","text:F8":"moveToNextPlaceholder","text:Shift-Tab":"moveToPreviousPlaceholder","text:Shift-F8":"moveToPreviousPlaceholder","math:Esc":["switch-mode","command"],"math:Backslash":["switch-mode","command"],"math:IntlBackslash":["switch-mode","command"],"math:Alt-Equal":["apply-style",{mode:"text"}],"text:Alt-Equal":["apply-style",{mode:"math"}],"command:Esc":["complete",{discard:!0}],"command:Tab":["complete",{acceptSuggestion:!0}],"command:Return":"complete","command:Enter":"complete","command:Shift-Esc":["complete",{discard:!0}],"command:Down":"nextSuggestion","ios:command:Tab":"nextSuggestion","command:Up":"previousSuggestion","!mac:Ctrl-KeyA":"selectAll","mac:Meta-KeyA":"selectAll",Cut:"cut",Copy:"copy",Paste:"paste",Clear:"delete","!mac:Ctrl-KeyZ":"undo","mac:Meta-KeyZ":"undo",Undo:"undo","!mac:Ctrl-KeyY":"redo","mac:Meta-Shift-KeyY":"redo","!mac:Ctrl-Shift-KeyZ":"redo","mac:Meta-Shift-KeyZ":"redo",Redo:"redo",EraseEof:"deleteToGroupEnd","mac:Ctrl-KeyB":"moveToPreviousChar","mac:Ctrl-KeyF":"moveToNextChar","mac:Ctrl-KeyP":"moveUp","mac:Ctrl-KeyN":"moveDown","mac:Ctrl-KeyA":"moveToMathFieldStart","mac:Ctrl-KeyE":"moveToMathFieldEnd","mac:Ctrl-Shift-KeyB":"extendToPreviousChar","mac:Ctrl-Shift-KeyF":"extendToNextChar","mac:Ctrl-Shift-KeyP":"extendUp","mac:Ctrl-Shift-KeyN":"extendDown","mac:Ctrl-Shift-KeyA":"extendToMathFieldStart","mac:Ctrl-Shift-KeyE":"extendToMathFieldEnd","mac:Ctrl-Alt-KeyB":"moveToPreviousWord","mac:Ctrl-Alt-KeyF":"moveToNextWord","mac:Ctrl-Shift-Alt-KeyB":"extendToPreviousWord","mac:Ctrl-Shift-Alt-KeyF":"extendToNextWord","mac:Ctrl-KeyH":"deletePreviousChar","mac:Ctrl-KeyD":"deleteNextChar","mac:Ctrl-KeyL":"scrollIntoView","mac:Ctrl-KeyT":"transpose","math:Shift-Quote":["switch-mode","text","","“"],"text:Shift-Quote":["switch-mode","math","”",""],"math:Ctrl-Digit2":["insert","\\sqrt{#0}"],"math:Ctrl-Digit5":"moveToOpposite","math:Ctrl-Digit6":"moveToSuperscript","math:Ctrl-Minus":"moveToSubscript","math:Alt-BracketLeft":["insert","\\left\\lbrack #0 \\right\\rbrack"],"math:Alt-Shift-BracketLeft":["insert","\\left\\lbrace #0 \\right\\rbrace"],"math:Return":"addRowAfter","math:Enter":"addRowAfter","math:Ctrl-Comma":"addColumnAfter","math:Alt-KeyQ":["insert","\\theta"],"math:Alt-KeyP":["insert","\\pi"],"math:Alt-KeyV":["insert","\\sqrt{#0}"],"math:Alt-KeyW":["insert","\\sum_{i=#?}^{#?}"],"math:Alt-KeyB":["insert","\\int_{#?}^{#?}"],"math:Alt-KeyU":["insert","\\cup"],"math:Alt-KeyN":["insert","\\cap"],"math:Alt-KeyO":["insert","\\emptyset"],"math:Alt-KeyD":["insert","\\differentialD"],"math:Alt-Shift-KeyO":["insert","\\varnothing"],"math:Alt-Shift-KeyD":["insert","\\partial"],"math:Alt-Shift-KeyP":["insert","\\prod_{i=#?}^{#?}"],"math:Alt-Shift-KeyU":["insert","\\bigcup"],"math:Alt-Shift-KeyN":["insert","\\bigcap"],"math:Alt-Shift-KeyA":["insert","\\forall"],"math:Alt-Shift-KeyE":["insert","\\exists"],"math:Alt-Digit5":["insert","\\infty"],"math:Alt-Digit6":["insert","\\wedge"],"math:Alt-Shift-Digit6":["insert","\\vee"],"math:Alt-Digit9":["insert","("],"math:Alt-Digit0":["insert",")"],"math:Alt-Shift-Backslash":["insert","|"],"math:Alt-Backslash":["insert","\\backslash"],"math:Slash":["insert","\\frac{#@}{#?}"],"math:Alt-Slash":["insert","\\frac{#?}{#@}"],"math:NumpadDivide":["insert","\\frac{#@}{#?}"],"math:Alt-NumpadDivide":["insert","\\frac{#?}{#@}"],"math:Shift-Backquote":["insert","\\~"],"math:Alt-Shift-Slash":["insert","\\/"],"Alt-Shift-KeyK":"toggleKeystrokeCaption","Alt-Space":"toggleVirtualKeyboard","mac:Ctrl-Meta-Up":["speak","parent",{withHighlighting:!1}],"!mac:Ctrl-Alt-Up":["speak","parent",{withHighlighting:!1}],"mac:Ctrl-Meta-Down":["speak","all",{withHighlighting:!1}],"!mac:Ctrl-Alt-Down":["speak","all",{withHighlighting:!1}],"mac:Ctrl-Meta-Left":["speak","left",{withHighlighting:!1}],"!mac:Ctrl-Alt-Left":["speak","left",{withHighlighting:!1}],"mac:Ctrl-Meta-Right":["speak","right",{withHighlighting:!1}],"!mac:Ctrl-Alt-Right":["speak","right",{withHighlighting:!1}],"!mac:Ctrl-Alt-Period":["speak","selection",{withHighlighting:!1}],"mac:Ctrl-Meta-Period":["speak","selection",{withHighlighting:!1}],"mac:Ctrl-Meta-Shift-Up":["speak","parent",{withHighlighting:!0}],"!mac:Ctrl-Alt-Shift-Up":["speak","parent",{withHighlighting:!0}],"mac:Ctrl-Meta-Shift-Down":["speak","all",{withHighlighting:!0}],"!mac:Ctrl-Alt-Shift-Down":["speak","all",{withHighlighting:!0}],"mac:Ctrl-Meta-Shift-Left":["speak","left",{withHighlighting:!0}],"!mac:Ctrl-Alt-Shift-Left":["speak","left",{withHighlighting:!0}],"mac:Ctrl-Meta-Shift-Right":["speak","right",{withHighlighting:!0}],"!mac:Ctrl-Alt-Shift-Right":["speak","right",{withHighlighting:!0}],"!mac:Ctrl-Alt-Shift-Period":["speak","selection",{withHighlighting:!0}],"mac:Ctrl-Meta-Shift-Period":["speak","selection",{withHighlighting:!0}]},Se={"\\theta":"Alt-KeyQ","\\sqrt":["Alt-KeyV","Ctrl-Digit2"],"\\pi":"Alt-KeyP","\\prod":"Alt-Shift-KeyP","\\sum":"Alt-KeyW","\\int":"Alt-KeyB","\\cup":"Alt-KeyU","\\cap":"Alt-KeyN","\\bigcup":"Alt-Shift-KeyU","\\bigcap":"Alt-Shift-KeyN","\\forall":"Alt-Shift-KeyA","\\exists":"Alt-Shift-KeyE","\\infty":"Alt-Digit5","\\wedge":"Alt-Digit5","\\vee":"Alt-Shift-Digit6","\\differentialD":"Alt-keyD","\\partial":"Alt-Shift-KeyD","\\frac":"Slash","\\emptyset":"Alt-KeyO","\\varnothing":"Alt-Shift-KeyO","\\~":"~"},Ce={"''":{mode:"math",value:"^{\\doubleprime}"},alpha:"\\alpha",delta:"\\delta",Delta:"\\Delta",pi:{mode:"math",value:"\\pi"},"pi ":{mode:"text",value:"\\pi "},Pi:{mode:"math",value:"\\Pi"},theta:"\\theta",Theta:"\\Theta",ii:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryI"},jj:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryJ"},ee:{mode:"math",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\exponentialE"},nabla:{mode:"math",value:"\\nabla"},grad:{mode:"math",value:"\\nabla"},del:{mode:"math",value:"\\partial"},"∞":"\\infty",oo:{mode:"math",after:"nothing+digit+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\infty"},"∑":{mode:"math",value:"\\sum"},sum:{mode:"math",value:"\\sum_{#?}^{#?}"},prod:{mode:"math",value:"\\prod_{#?}^{#?}"},sqrt:{mode:"math",value:"\\sqrt"},"∆":{mode:"math",value:"\\differentialD"},"∂":{mode:"math",value:"\\differentialD"},sin:{mode:"math",value:"\\sin"},cos:{mode:"math",value:"\\cos"},tan:{mode:"math",value:"\\tan"},tanh:{mode:"math",value:"\\tanh"},log:{mode:"math",value:"\\log"},ln:{mode:"math",value:"\\ln"},exp:{mode:"math",value:"\\exp"},lim:{mode:"math",value:"\\lim_{#?}"},dx:"\\differentialD x",dy:"\\differentialD y",dt:"\\differentialD t",AA:{mode:"math",value:"\\forall"},EE:{mode:"math",value:"\\exists"},"!EE":{mode:"math",value:"\\nexists"},"&&":{mode:"math",value:"\\land"},xin:{mode:"math",after:"nothing+text+relop+punct+openfence+space",value:"x \\in"},in:{mode:"math",after:"nothing+letter+closefence",value:"\\in"},"!in":{mode:"math",value:"\\notin"},NN:"\\N",ZZ:"\\Z",QQ:"\\Q",RR:"\\R",CC:"\\C",PP:"\\P",xx:"\\times","+-":"\\pm","!=":"\\ne",">=":"\\ge","<=":"\\le","<<":"\\ll",">>":"\\gg","~~":"\\approx","≈":"\\approx","?=":"\\questeq","÷":"\\div","¬":"\\neg",":=":"\\coloneq","::":"\\Colon","(:":"\\langle",":)":"\\rangle",beta:"\\beta",chi:"\\chi",epsilon:"\\epsilon",varepsilon:"\\varepsilon",eta:{mode:"math",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\eta"},"eta ":{mode:"text",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\eta "},gamma:"\\gamma",Gamma:"\\Gamma",iota:"\\iota",kappa:"\\kappa",lambda:"\\lambda",Lambda:"\\Lambda",mu:{mode:"math",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\mu"},"mu ":{mode:"text",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\mu "},nu:{mode:"math",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\nu"},"nu ":{mode:"text",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\nu "},"µ":"\\mu",phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\phi"},Phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Phi"},varphi:"\\varphi",psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\psi"},Psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Psi"},rho:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\rho"},sigma:"\\sigma",Sigma:"\\Sigma",tau:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\tau"},vartheta:"\\vartheta",upsilon:"\\upsilon",xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\xi"},Xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Xi"},zeta:"\\zeta",omega:"\\omega",Omega:"\\Omega","Ω":"\\omega",forall:"\\forall",exists:{mode:"math",value:"\\exists"},"!exists":{mode:"math",value:"\\nexists"},":.":{mode:"math",value:"\\therefore"},liminf:"\\operatorname*{lim~inf}_{#?}",limsup:"\\operatorname*{lim~sup}_{#?}",argmin:"\\operatorname*{arg~min}_{#?}",argmax:"\\operatorname*{arg~max}_{#?}",det:"\\det",mod:{mode:"math",value:"\\mod"},max:{mode:"math",value:"\\max"},min:{mode:"math",value:"\\min"},erf:"\\operatorname{erf}",erfc:"\\operatorname{erfc}",bessel:{mode:"math",value:"\\operatorname{bessel}"},mean:{mode:"math",value:"\\operatorname{mean}"},median:{mode:"math",value:"\\operatorname{median}"},fft:{mode:"math",value:"\\operatorname{fft}"},lcm:{mode:"math",value:"\\operatorname{lcm}"},gcd:{mode:"math",value:"\\operatorname{gcd}"},randomReal:"\\operatorname{randomReal}",randomInteger:"\\operatorname{randomInteger}",Re:{mode:"math",value:"\\operatorname{Re}"},Im:{mode:"math",value:"\\operatorname{Im}"},mm:{mode:"math",after:"nothing+digit",value:"\\operatorname{mm}"},cm:{mode:"math",after:"nothing+digit",value:"\\operatorname{cm}"},km:{mode:"math",after:"nothing+digit",value:"\\operatorname{km}"},kg:{mode:"math",after:"nothing+digit",value:"\\operatorname{kg}"},"...":"\\ldots","+...":"+\\cdots","-...":"-\\cdots","->...":"\\to\\cdots","->":"\\to","|->":"\\mapsto","--\x3e":"\\longrightarrow","<--":"\\longleftarrow","=>":"\\Rightarrow","==>":"\\Longrightarrow","<=>":"\\Leftrightarrow","<->":"\\leftrightarrow","(.)":"\\odot","(+)":"\\oplus","(/)":"\\oslash","(*)":"\\otimes","(-)":"\\ominus","||":"\\Vert","{":"\\{","}":"\\}","*":"\\cdot"};function Ae(t,e,i){if(!i)return i;if("string"==typeof i)return i;if("string"==typeof i.mode&&i.mode!==t)return null;if(!e)return i?i.value:void 0;let n=!1,r=!1,s=!1,o=!1,a=!1,l=!1,c=!1,u=!1,h=!1,d=!1,p=!1,f=!1,m=!1,g=!1,y=e[e.length-1],v=e.length-1;for(;y&&/msubsup|placeholder/.test(y.type);)y=e[v-=1];return n=!y||"first"===y.type,y&&(r=!(m="text"===y.mode)&&"mord"===y.type&&Nt.LETTER.test(y.body),s=!m&&"mord"===y.type&&/[0-9]+$/.test(y.body),o=!m&&y.isFunction,a="genfrac"===y.type,l="surd"===y.type,c="mbin"===y.type,u="mrel"===y.type,h="mpunct"===y.type||"minner"===y.type,d=y.array,p="mopen"===y.type,f="mclose"===y.type||"leftright"===y.type,g="space"===y.type),void 0!==i.after?/nothing/.test(i.after)&&n||/letter/.test(i.after)&&r||/digit/.test(i.after)&&s||/function/.test(i.after)&&o||/frac/.test(i.after)&&a||/surd/.test(i.after)&&l||/binop/.test(i.after)&&c||/relop/.test(i.after)&&u||/punct/.test(i.after)&&h||/array/.test(i.after)&&d||/openfence/.test(i.after)&&p||/closefence/.test(i.after)&&f||/text/.test(i.after)&&m||/space/.test(i.after)&&g?i.value:null:i.value}function Te(t){let e="other";return navigator&&navigator.platform&&navigator.userAgent&&(/^(mac)/i.test(navigator.platform)?e="mac":/^(win)/i.test(navigator.platform)?e="win":/(android)/i.test(navigator.userAgent)?e="android":/(iphone)/i.test(navigator.userAgent)||/(ipod)/i.test(navigator.userAgent)||/(ipad)/i.test(navigator.userAgent)?e="ios":/\bCrOS\b/i.test(navigator.userAgent)&&(e="chromeos")),e===t?t:"!"+t}function _e(t){let e=t;return Array.isArray(e)&&e.length>0&&(e=e[0]+"("+e.slice(1).join("")+")"),e}function Me(t,e){let i="";Array.isArray(t)||(t=[t]);for(const n of t){let t;const r=n.match(/(^[^:]*):/),s=r?r[1]:"";if(s===Te("mac")||s===Te("win")||s===Te("ios")||s===Te("android")||s===Te("chromeos")||s===Te("other")){const e=n.match(/:([^:]*)$/);t=e?e[1]:n}else if(!["mac","!mac","win","!win","ios","!ios","android","!android","chromeos","!chromeos","other","!other"].includes(s)){const e=n.match(/:([^:]*)$/);t=e?e[1]:n}if(t){const n="mac"===Te("mac")||"ios"===Te("ios"),r=t.length>1?t.split("-"):[t];let s="";for(const t of r)!n&&s.length>0&&(s+='<span class="ML__shortcut-join">+</span>'),"Key"===t.substr(0,3)?s+=t.substr(3,1):"Digit"===t.substr(0,5)?s+=t.substr(5,1):s+={Meta:n?"⌘":"command",Shift:n?"⇧":"shift",Alt:n?"⌥":"alt",Ctrl:n?"⌃":"control","\n":n?"⏎":"return",Return:n?"⏎":"return",Enter:n?"⌤":"enter",Tab:n?"⇥":"tab",Esc:"esc",Backspace:n?"⌫":"backspace",Del:n?"⌦":"del",PageUp:n?"⇞":"page up",PageDown:n?"⇟":"page down",Home:n?"⤒":"home",End:n?"⤓":"end",Spacebar:"space",Semicolon:";",Period:".",Comma:",",Minus:"-",Equal:"=",Quote:"'",BracketLeft:"[",BracketRight:"]",Backslash:"\\",IntlBackslash:"\\",Backquote:"`",Slash:"/",NumpadMultiply:"* &#128290;",NumpadDivide:"/ &#128290;",NumpadSubtract:"- &#128290;",NumpadAdd:"+ &#128290;",NumpadDecimal:". &#128290;",NumpadComma:", &#128290;",Help:"help",Left:"⇠",Up:"⇡",Right:"⇢",Down:"⇣"}[t]||t;i.length>0&&(i+=e||" or "),i+=s}}return i}var Le={KEYBOARD_SHORTCUTS:we,INLINE_SHORTCUTS:Ce,stringify:Me,startsWithString:function(t,e){const i=[];for(let n=0;n<=t.length-1;n++){const r=t.substring(n);e&&e.overrideDefaultInlineShortcuts||Object.keys(Ce).forEach(t=>{t.startsWith(r)&&!i.includes(t)&&i.push(t)});const s=e&&e.inlineShortcuts?e.inlineShortcuts:null;s&&Object.keys(s).forEach(t=>{t.startsWith(r)&&i.push(t)})}return i},forString:function(t,e,i,n){let r="";n&&n.overrideDefaultInlineShortcuts||(r=Ae(t,e,Ce[i]));const s=n&&n.inlineShortcuts?n.inlineShortcuts:null;let o;return s&&(o=Ae(t,e,s[i])),o||r},selectorForKeystroke:function(t,e){for(const i of[Te("mac")+":"+t+":"+e,Te("win")+":"+t+":"+e,Te("ios")+":"+t+":"+e,Te("android")+":"+t+":"+e,Te("chromeos")+":"+t+":"+e,Te("other")+":"+t+":"+e,Te("mac")+":"+e,Te("win")+":"+e,Te("ios")+":"+e,Te("android")+":"+e,Te("chromeos")+":"+e,t+":"+e,e])if(we[i])return we[i];return""},forCommand:function(t){let e=[];if("string"==typeof t){const i=Se[t];Array.isArray(i)?e=i.slice():i&&e.push(i)}t=_e(t);const i=new RegExp("^"+t.replace("\\","\\\\").replace("|","\\|").replace("*","\\*").replace("$","\\$").replace("^","\\^")+"([^*a-zA-Z]|$)");return Object.keys(we).forEach(t=>{if(i.test(_e(we[t]))){const i=t.match(/:([^:]*)$/);i&&e.push(i[1])}}),Me(e)}};function Fe(t,e){this.root=he.makeRoot(),this.path=[{relation:"body",offset:0}],this.extent=0,this.config=t?{...t}:{},this.target=e,this.suppressChangeNotifications=!1}function De(t){const e=Object.assign(new Fe(t.config,t.target),t);return e.path=ke.clone(t.path),e}function Ee(t,e){let i=0;for(let n=0;n<e.row;n++)for(let e=0;e<t[n].length;e++)i+=1;return i+=e.col}function Oe(t,e){if("string"==typeof e){const t=e.match(/cell([0-9]*)$/);t&&(e=parseInt(t[1]))}const i={row:0,col:0};for(;e>0;)i.col+=1,(!t[i.row]||i.col>=t[i.row].length)&&(i.col=0,i.row+=1),e-=1;return i}function Ie(t,e){let i;return"object"!=typeof e&&(e=Oe(t,e)),Array.isArray(t[e.row])&&(i=t[e.row][e.col]||null),!i||0!==i.length&&"first"===i[0].type||i.unshift(Ke()),i}function Ne(t){let e=0,i=0,n=1;for(const e of t)i+=1,e.length>n&&(n=e.length);return e=i*n}function ze(t,e,i){if(!t)return[];e||(e=",");let n,r=[];for(let s of t)s&&s.length>0&&"first"===s[0].type&&(s=s.slice(1)),s&&s.length>0&&(n?r.push(n):n=new he.MathAtom("math","mpunct",e,i),r=r.concat(s));return r}function Pe(t,e,i){const n={...e};if(n.row+=i,n.row<0){if(n.col+=i,n.row=t.length-1,n.col<0)return null;for(;n.row>=0&&!Ie(t,n);)n.row-=1;if(n.row<0)return null}else if(n.row>=t.length){for(n.col+=i,n.row=0;n.row<t.length&&!Ie(t,n);)n.row+=1;if(n.row>t.length-1)return null}return n}function Re(t){return!!t&&("mord"===t.type&&/[0-9.]/.test(t.body)||"mpunct"===t.type&&","===t.body)}function Be(t,e){if(!t)return!1;if(Array.isArray(t)){for(const i of t)if(Be(i,e))return!0}else{if(t===e)return!0;if(["body","numer","denom","index","subscript","superscript","underscript","overscript"].some(function(i){return i===e||Be(t[i],e)}))return!0;if(t.array)for(let i=Ne(t.array);i>=0;i--)if(Be(Ie(t.array,i),e))return!0}return!1}function qe(t){if(t)return 1===t.length&&"leftright"===t[0].type&&"("===t[0].leftDelim&&(t=t[0].body),t}function $e(t,e){return t?t.length<=1?t:(e&&"ASCIIMath"===e.format||(t=t.replace(/\\\\([^\s\n])/g,"\\$1")),e&&"ASCIIMath"===e.format||!/\\/.test(t)?He(t=(t=(t=(t=(t=(t=t.replace(/\u2061/gu,"")).replace(/\u3016/gu,"{")).replace(/\u3017/gu,"}")).replace(/([^\\])sinx/g,"$1\\sin x")).replace(/([^\\])cosx/g,"$1\\cos x ")).replace(/\u2013/g,"-"),e):t):""}function He(t,e){if(!t)return"";let i,n=!1;if(n||"^"!==t[0]&&"_"!==t[0]||(i=We(t.substr(1),{...e,noWrap:!0}),t=t[0]+"{"+i.match+"}",t+=He(i.rest,e),n=!0),n||(i=t.match(/^(sqrt|\u221a)(.*)/))&&(t="\\sqrt{"+(i=We(i[2],{...e,noWrap:!0})).match+"}",t+=He(i.rest,e),n=!0),n||(i=t.match(/^(\\cbrt|\u221b)(.*)/))&&(t="\\sqrt[3]{"+(i=We(i[2],{...e,noWrap:!0})).match+"}",t+=He(i.rest,e),n=!0),n||(i=t.match(/^abs(.*)/))&&(t="\\left|"+(i=We(i[1],{...e,noWrap:!0})).match+"\\right|",t+=He(i.rest,e),n=!0),n||(i=t.match(/^["”“](.*?)["”“](.*)/))&&(t="\\text{"+i[1]+"}",t+=He(i[2],e),n=!0),n||(i=t.match(/^([^a-zA-Z({[_^\\\s"]+)(.*)/))&&(t=je(i[1],e),t+=He(i[2],e),n=!0),!n&&/^(f|g|h)[^a-zA-Z]/.test(t)&&(i=We(t.substring(1),e),t=t[0],t+=i.match,t+=He(i.rest,e),n=!0),n||(i=t.match(/^([a-zA-Z]+)(.*)/))&&(t=je(i[1],e),t+=He(i[2],e),n=!0),!n)if((i=We(t,{...e,noWrap:!0})).match&&"/"===i.rest[0]){const r=We(i.rest.substr(1),{...e,noWrap:!0});r.match&&(t="\\frac{"+i.match+"}{"+r.match+"}"+He(r.rest,e)),n=!0}else i.match&&/^(\(|\{|\[)$/.test(t[0])?(t="\\left"+t[0]+i.match+"\\right"+{"(":")","{":"}","[":"]"}[t[0]]+He(i.rest,e),n=!0):i.match&&(t=i.match,t+=He(i.rest,e),n=!0);return n||(i=t.match(/^(\s+)(.*)$/))&&(t=" "+He(i[2],e),n=!0),t}function We(t,e){let i="",n=t=t.trim();const r=t.charAt(0),s={"(":")","{":"}","[":"]"}[r];if(s){let o=1,a=1;for(;a<t.length&&o>0;)t[a]===r&&o++,t[a]===s&&o--,a++;0===o?(i=e.noWrap&&"("===r&&")"===s?He(t.substring(1,a-1),e):"\\mleft"+r+He(t.substring(1,a-1),e)+"\\mright"+s,n=t.substring(a)):(i=t.substring(1,a),n="")}else{let r=t.match(/^([a-zA-Z]+)/);if(r){let i=Le.forString("math",null,t,e);if(i)return{match:i=(i=i.replace("_{#?}","")).replace("^{#?}",""),rest:t.substring(i.length)}}if(r=t.match(/^([a-zA-Z])/))return{match:r[1],rest:t.substring(1)};if(r=t.match(/^(-)?\d+(\.\d*)?/))return{match:r[0],rest:t.substring(r[0].length)};/^\\(left|right)/.test(t)||(r=t.match(/^(\\[a-zA-Z]+)/))&&(n=t.substring(r[1].length),i=r[1])}return{match:i,rest:n}}function je(t,e){let i=Le.forString("math",null,t,e);return i?(i=(i=i.replace("_{#?}","")).replace("^{#?}",""),i+=" "):i=t,i}function Ke(){return new he.MathAtom("","first")}Fe.prototype._announce=function(t,e,i){"function"==typeof this.config.onAnnounce&&this.config.onAnnounce(this.target,t,e,i)},Fe.prototype.filter=function(t,e){e=e<0?-1:1;const i=[],n=new Fe;n.path=ke.clone(this.path),n.extent=this.extent,n.root=this.root,e>=0?n.collapseForward():(n.collapseBackward(),n.move(1));const r=n.anchor();do{t.bind(n)(n.path,n.anchor())&&i.push(n.toString()),e>=0?n.next({iterateAll:!0}):n.previous({iterateAll:!0})}while(r!==n.anchor());return i},Fe.prototype.forEach=function(t){this.root.forEach(t)},Fe.prototype.forEachSelected=function(t,e){(e=e||{}).recursive=void 0!==e.recursive&&e.recursive;const i=this.siblings(),n=this.startOffset()+1,r=this.endOffset()+1;if(e.recursive)for(let e=n;e<r;e++)i[e]&&"first"!==i[e].type&&i[e].forEach(t);else for(let e=n;e<r;e++)i[e]&&"first"!==i[e].type&&t(i[e])},Fe.prototype.toString=function(){return ke.pathToString(this.path,this.extent)},Fe.prototype.adjustPlaceholder=function(){const t=this.siblings();if(t&&t.length<=1){let e;const i=this.relation();if("numer"===i?e="numerator":"denom"===i?e="denominator":"surd"===this.parent().type&&"body"===i?e="radicand":"overunder"===this.parent().type&&"body"===i?e="base":"underscript"!==i&&"overscript"!==i||(e="annotation"),e){const e=[new he.MathAtom("math","placeholder","⬚",this.anchorStyle())];Array.prototype.splice.apply(t,[1,0].concat(e))}}},Fe.prototype.selectionWillChange=function(){"function"!=typeof this.config.onSelectionWillChange||this.suppressChangeNotifications||this.config.onSelectionWillChange(this.target)},Fe.prototype.selectionDidChange=function(){"function"!=typeof this.config.onSelectionDidChange||this.suppressChangeNotifications||this.config.onSelectionDidChange(this.target)},Fe.prototype.contentWillChange=function(){"function"!=typeof this.config.onContentWillChange||this.suppressChangeNotifications||this.config.onContentWillChange(this.target)},Fe.prototype.contentDidChange=function(){"function"!=typeof this.config.onContentDidChange||this.suppressChangeNotifications||this.config.onContentDidChange(this.target)},Fe.prototype.setPath=function(t,e){if("string"==typeof t)t=ke.pathFromString(t);else if(Array.isArray(t)){const i=ke.clone(t),n=this.path;this.path=i,0===e&&"placeholder"===this.anchor().type&&(i[i.length-1].offset=0,e=1),t={path:i,extent:e||0},this.path=n}const i=0!==ke.pathDistance(this.path,t.path),n=t.extent!==this.extent;return(i||n)&&(i&&this.adjustPlaceholder(),this.selectionWillChange(),this.path=ke.clone(t.path),this.siblings().length<this.anchorOffset()?(this.path=[{relation:"body",offset:0}],this.extent=0):this.setExtent(t.extent),this.selectionDidChange()),i||n},Fe.prototype.wordBoundary=function(t,e){e=e<0?-1:1;const i=new Fe;i.path=ke.clone(t),i.root=this.root;let n=0;for(;i.sibling(n)&&"text"===i.sibling(n).mode&&Nt.LETTER_AND_DIGITS.test(i.sibling(n).body);)n+=e;return i.sibling(n)||(n-=e),i.path[i.path.length-1].offset+=n,i.path},Fe.prototype.wordBoundaryOffset=function(t,e){e=e<0?-1:1;const i=this.siblings();if(!i[t])return t;if("text"!==i[t].mode)return t;let n;if(Nt.LETTER_AND_DIGITS.test(i[t].body)){let r,s=t;do{r="text"===i[s].mode&&Nt.LETTER_AND_DIGITS.test(i[s].body),s+=e}while(i[s]&&r);n=i[s]?s-2*e:s-e}else if(/\s/.test(i[t].body)){let r=t;for(;i[r]&&"text"===i[r].mode&&/\s/.test(i[r].body);)r+=e;if(i[r]){let t=!0;do{t="text"===i[r].mode&&!/\s/.test(i[r].body),r+=e}while(i[r]&&t);n=i[r]?r-2*e:r-e}else n=r-e}else{let r=t;for(;i[r]&&"text"===i[r].mode&&!/\s/.test(i[r].body);)r+=e;n=i[r]?r:r-e;let s=!0;for(;i[r]&&s;)(s="text"===i[r].mode&&/\s/.test(i[r].body))&&(n=r),r+=e;n=i[r]?r-2*e:r-e}return n-(e>0?0:1)},Fe.prototype.setRange=function(t,e,i){i=i||{};const n=ke.pathDistance(t,e);if(0===n)return i.extendToWordBoundary?(t=this.wordBoundary(t,-1),e=this.wordBoundary(e,1),this.setRange(t,e)):this.setPath(ke.clone(t),0);if(1===n){const n=e[e.length-1].offset-t[t.length-1].offset;return i.extendToWordBoundary?(t=this.wordBoundary(t,n<0?1:-1),e=this.wordBoundary(e,n<0?-1:1),this.setRange(t,e)):this.setPath(ke.clone(t),n)}let r=ke.pathCommonAncestor(t,e);const s=r.length;if(t.length===s||e.length===s||t[s].relation!==e[s].relation)return this.setPath(r,-1);r.push(t[s]),r=ke.clone(r);let o=e[s].offset-t[s].offset+1;return o<=0?e.length>s+1?(r[s].relation=e[s].relation,r[s].offset=e[s].offset,r[r.length-1].offset-=1,o=2-o):(r[s].relation=e[s].relation,r[s].offset=e[s].offset,o=1-o):e.length<=t.length?r[r.length-1].offset-=1:e.length>t.length&&(r[s].offset-=1),this.setPath(r,o)},Fe.prototype.ancestor=function(t){if(t>this.path.length)return null;let e=this.root;for(let i=0;i<this.path.length-t;i++){const t=this.path[i];if(e.array)e=Ie(e.array,t.relation)[t.offset];else{if(!e[t.relation])return null;{0!==e[t.relation].length&&"first"===e[t.relation][0].type||e[t.relation].unshift(Ke());const i=Math.min(t.offset,e[t.relation].length-1);e=e[t.relation][i]}}}return e},Fe.prototype.anchor=function(){if(this.parent().array)return Ie(this.parent().array,this.relation())[this.anchorOffset()];const t=this.siblings();return t[Math.min(t.length-1,this.anchorOffset())]},Fe.prototype.parent=function(){return this.ancestor(1)},Fe.prototype.relation=function(){return this.path.length>0?this.path[this.path.length-1].relation:""},Fe.prototype.anchorOffset=function(){return this.path.length>0?this.path[this.path.length-1].offset:0},Fe.prototype.focusOffset=function(){return this.path.length>0?this.path[this.path.length-1].offset+this.extent:0},Fe.prototype.startOffset=function(){return Math.min(this.focusOffset(),this.anchorOffset())},Fe.prototype.endOffset=function(){return Math.max(this.focusOffset(),this.anchorOffset())},Fe.prototype.insertFirstAtom=function(){this.siblings()},Fe.prototype.siblings=function(){if(0===this.path.length)return[];let t;return this.parent().array?t=Ie(this.parent().array,this.relation()):"string"==typeof(t=this.parent()[this.relation()]||[])&&(t=[]),0!==t.length&&"first"===t[0].type||t.unshift(Ke()),t},Fe.prototype.sibling=function(t){return this.siblings()[this.startOffset()+t]},Fe.prototype.isCollapsed=function(){return 0===this.extent},Fe.prototype.setExtent=function(t){this.extent=t},Fe.prototype.collapseForward=function(){return 0!==this.extent&&(this.setSelection(this.endOffset()),!0)},Fe.prototype.collapseBackward=function(){return 0!==this.extent&&(this.setSelection(this.startOffset()),!0)},Fe.prototype.selectGroup_=function(){const t=this.siblings();if("text"===this.anchorMode()){let e=this.startOffset(),i=this.endOffset();for(;t[e]&&"text"===t[e].mode&&Nt.LETTER_AND_DIGITS.test(t[e].body);)e-=1;for(;t[i]&&"text"===t[i].mode&&Nt.LETTER_AND_DIGITS.test(t[i].body);)i+=1;if(e>=(i-=1))return void this.setSelection(this.endOffset()-1,1);this.setSelection(e,i-e)}else if("mord"===this.sibling(0).type&&/[0-9,.]/.test(this.sibling(0).body)){let e=this.startOffset(),i=this.endOffset();for(;Re(t[e]);)e-=1;for(;Re(t[i]);)i+=1;i-=1,this.setSelection(e,i-e)}else this.setSelection(0,"end")},Fe.prototype.selectAll_=function(){this.path=[{relation:"body",offset:0}],this.setSelection(0,"end")},Fe.prototype.deleteAll_=function(){this.selectAll_(),this.delete_()},Fe.prototype.contains=function(t){if(this.isCollapsed())return!1;const e=this.siblings(),i=this.startOffset(),n=this.endOffset();for(let r=i;r<n;r++)if(Be(e[r],t))return!0;return!1},Fe.prototype.getSelectedAtoms=function(){if(this.isCollapsed())return null;const t=[],e=this.siblings(),i=this.startOffset()+1,n=this.endOffset()+1;for(let r=i;r<n;r++)e[r]&&"first"!==e[r].type&&t.push(e[r]);return t},Fe.prototype.commandOffsets=function(){const t=this.siblings();if(t.length<=1)return null;let e=Math.min(this.endOffset(),t.length-1);if("command"!==t[e].type)return null;for(;e>0&&"command"===t[e].type;)e-=1;let i=this.startOffset()+1;for(;i<=t.length-1&&"command"===t[i].type;)i+=1;return i>e?{start:e+1,end:i}:null},Fe.prototype.extractCommandStringAroundInsertionPoint=function(t){let e="";const i=this.commandOffsets();if(i){const n=t?this.anchorOffset()+1:i.end,r=this.siblings();for(let t=i.start;t<n;t++)e+=r[t].body||""}return e},Fe.prototype.decorateCommandStringAroundInsertionPoint=function(t){const e=this.commandOffsets();if(e){const i=this.siblings();for(let n=e.start;n<e.end;n++)i[n].error=t}},Fe.prototype.commitCommandStringBeforeInsertionPoint=function(){const t=this.commandOffsets();if(t){const e=this.siblings(),i=this.anchorOffset()+1;for(let n=t.start;n<i;n++)e[n]&&(e[n].suggestion=!1)}},Fe.prototype.spliceCommandStringAroundInsertionPoint=function(t){const e=this.commandOffsets();if(e){if(this.contentWillChange(),t){Array.prototype.splice.apply(this.siblings(),[e.start,e.end-e.start].concat(t));let i=[];for(const e of t)i=i.concat(e.filter(t=>"placeholder"===t.type));this.setExtent(0),this.path[this.path.length-1].offset=e.start-1,0!==i.length&&this.leap(1,!1)||this.setSelection(e.start+t.length-1)}else this.siblings().splice(e.start,e.end-e.start),this.setSelection(e.start-1,0);this.contentDidChange()}},Fe.prototype.removeCommandString=function(){this.contentWillChange();const t=this.suppressChangeNotifications;this.suppressChangeNotifications=!0,function t(e){if(e)if(Array.isArray(e))for(let i=e.length-1;i>=0;i--)"command"===e[i].type?e.splice(i,1):t(e[i]);else if(t(e.body),t(e.superscript),t(e.subscript),t(e.underscript),t(e.overscript),t(e.numer),t(e.denom),t(e.index),e.array)for(let i=Ne(e.array);i>=0;i--)t(Ie(e.array,i))}(this.root.body),this.suppressChangeNotifications=t,this.contentDidChange()},Fe.prototype.extractArgBeforeInsertionPoint=function(){const t=this.siblings();if(t.length<=1)return[];const e=[];let i=this.startOffset();if("text"===t[i].mode)for(;i>=1&&"text"===t[i].mode;)e.unshift(t[i]),i--;else for(;i>=1&&/^(mord|surd|msubsup|leftright|mop)$/.test(t[i].type);)e.unshift(t[i]),i--;return e},Fe.prototype.setSelection=function(t,e,i){t=t||0,e=e||0;const n=this.path[this.path.length-1].relation;i||(i=n);const r=this.parent();if(!r&&"body"!==i)return!1;const s=i.startsWith("cell");if(!s&&!r[i]||s&&!r.array)return!1;const o=i!==n;this.path[this.path.length-1].relation=i;const a=this.siblings().length;this.path[this.path.length-1].relation=n;const l=this.extent;"end"===e?e=a-t-1:"start"===e&&(e=-t),this.setExtent(e);const c=this.extent!==l;this.setExtent(l),t<0&&(t=a+t),t=Math.max(0,Math.min(t,a-1));const u=this.path[this.path.length-1].offset;return(o||u!==t||c)&&(o&&this.adjustPlaceholder(),this.selectionWillChange(),this.path[this.path.length-1].relation=i,this.path[this.path.length-1].offset=t,this.setExtent(e),this.selectionDidChange()),!0},Fe.prototype.next=function(t){t=t||{};const e={body:"numer",numer:"denom",denom:"index",index:"overscript",overscript:"underscript",underscript:"subscript",subscript:"superscript"};if(this.anchorOffset()===this.siblings().length-1){this.adjustPlaceholder();let i=e[this.relation()];const n=this.parent();for(;i&&!n[i];)i=e[i];if(i)return void this.setSelection(0,0,i);if(this.parent().array){const t=Ne(this.parent().array);let e=parseInt(this.relation().match(/cell([0-9]*)$/)[1])+1;for(;e<t;){if(Ie(this.parent().array,e)&&this.setSelection(0,0,"cell"+e))return void this.selectionDidChange();e+=1}}if(1===this.path.length)(this.suppressChangeNotifications||!this.config.onMoveOutOf||this.config.onMoveOutOf(this,"forward"))&&(this.path[0].offset=0);else{const e=!t.iterateAll&&this.parent().skipBoundary;this.path.pop(),e&&this.next(t)}return void this.selectionDidChange()}this.setSelection(this.anchorOffset()+1);const i=this.anchor();if(i&&!i.captureSelection){let n;if(i.array){let t=0;n="";const e=Ne(i.array);for(;!n&&t<e;)Ie(i.array,t)&&(n="cell"+t.toString()),t+=1;return this.path.push({relation:n,offset:0}),void this.setSelection(0,0,n)}for(n="body";n;){if(Array.isArray(i[n]))return this.path.push({relation:n,offset:0}),this.insertFirstAtom(),void(!t.iterateAll&&i.skipBoundary&&this.next(t));n=e[n]}}},Fe.prototype.previous=function(t){const e={numer:"body",denom:"numer",index:"denom",overscript:"index",underscript:"overscript",subscript:"underscript",superscript:"subscript"};if(!(t=t||{}).iterateAll&&1===this.anchorOffset()&&this.parent()&&this.parent().skipBoundary&&this.setSelection(0),this.anchorOffset()<1){let t=e[this.relation()];for(;t&&!this.setSelection(-1,0,t);)t=e[t];const i=this.parent()?this.parent().type:"none";if("body"!==t||"msubsup"!==i&&"mop"!==i||(t=null),t)return;if(this.adjustPlaceholder(),this.selectionWillChange(),this.relation().startsWith("cell")){let t=parseInt(this.relation().match(/cell([0-9]*)$/)[1])-1;for(;t>=0;){if(Ie(this.parent().array,t)&&this.setSelection(-1,0,"cell"+t))return void this.selectionDidChange();t-=1}}return 1===this.path.length?(this.suppressChangeNotifications||!this.config.onMoveOutOf||this.config.onMoveOutOf.bind(this)(-1))&&(this.path[0].offset=this.root.body.length-1):(this.path.pop(),this.setSelection(this.anchorOffset()-1)),void this.selectionDidChange()}const i=this.anchor();if(!i.captureSelection){let t;if(i.array){t="";const e=Ne(i.array);let n=e-1;for(;!t&&n<e;)Ie(i.array,n)&&(t="cell"+n.toString()),n-=1;return n+=1,this.path.push({relation:t,offset:Ie(i.array,n).length-1}),void this.setSelection(-1,0,t)}for(t="superscript";t;){if(Array.isArray(i[t]))return this.path.push({relation:t,offset:i[t].length-1}),void this.setSelection(-1,0,t);t=e[t]}}this.setSelection(this.anchorOffset()-1),!t.iterateAll&&this.sibling(0)&&this.sibling(0).skipBoundary&&this.previous(t)},Fe.prototype.move=function(t,e){const i=(e=e||{extend:!1}).extend||!1;if(this.removeSuggestion(),i)this.extend(t,e);else{const e=De(this);if(t>0)for(this.collapseForward()&&t--;t>0;)this.next(),t--;else if(t<0)for(this.collapseBackward()&&t++;0!==t;)this.previous(),t++;this._announce("move",e)}},Fe.prototype.up=function(t){const e=(t=t||{extend:!1}).extend||!1;this.collapseBackward();const i=this.relation();if("denom"===i)e?(this.selectionWillChange(),this.path.pop(),this.path[this.path.length-1].offset-=1,this.setExtent(1),this.selectionDidChange()):this.setSelection(this.anchorOffset(),0,"numer"),this._announce("moveUp");else if(this.parent().array){let e=Oe(this.parent().array,i);(e=Pe(this.parent().array,e,-1))&&Ie(e)?(this.path[this.path.length-1].relation="cell"+Ee(this.parent().array,e),this.setSelection(this.anchorOffset()),this._announce("moveUp")):this.move(-1,t)}else this._announce("line")},Fe.prototype.down=function(t){const e=(t=t||{extend:!1}).extend||!1;this.collapseForward();const i=this.relation();if("numer"===i)e?(this.selectionWillChange(),this.path.pop(),this.path[this.path.length-1].offset-=1,this.setExtent(1),this.selectionDidChange()):this.setSelection(this.anchorOffset(),0,"denom"),this._announce("moveDown");else if(this.parent().array){let e=Oe(this.parent().array,i);(e=Pe(this.parent().array,e,1))&&Ie(e)?(this.path[this.path.length-1].relation="cell"+Ee(this.parent().array,e),this.setSelection(this.anchorOffset()),this._announce("moveDown")):this.move(1,t)}else this._announce("line")},Fe.prototype.extend=function(t){let e=this.path[this.path.length-1].offset,i=0;const n=De(this),r=e+(i=this.extent+t);if(r<0&&0!==i){if(this.path.length>1)return this.selectionWillChange(),this.path.pop(),this.setExtent(-1),this.selectionDidChange(),void this._announce("move",n);e=this.path[this.path.length-1].offset,i=this.extent}else if(r>=this.siblings().length){if(this.path.length>1)return this.selectionWillChange(),this.path.pop(),this.path[this.path.length-1].offset-=1,this.setExtent(1),this.selectionDidChange(),void this._announce("move",n);this.isCollapsed()&&(e-=1),i-=1}this.setSelection(e,i),this._announce("move",n)},Fe.prototype.skip=function(t,e){const i=(e=e||{extend:!1}).extend||!1;t=t<0?-1:1;const n=De(this),r=this.siblings(),s=this.focusOffset();let o=s+t;if(i&&(o=Math.min(Math.max(0,o),r.length-1)),o<0||o>=r.length)this.move(t,e);else{if(r[o]&&"text"===r[o].mode){if((o=this.wordBoundaryOffset(o,t))<0&&!i)return void this.setSelection(0);if(o>r.length)return this.setSelection(r.length-1),void this.move(t,e)}else{const e=r[o]?r[o].type:"";if("mopen"===e&&t>0||"mclose"===e&&t<0){let i="mopen"===e?1:-1;for(o+=t>0?1:-1;o>=0&&o<r.length&&0!==i;)"mopen"===r[o].type?i+=1:"mclose"===r[o].type&&(i-=1),o+=t;0!==i&&(o=s+t),t>0&&(o-=1)}else{for(;r[o]&&"math"===r[o].mode&&r[o].type===e;)o+=t;o-=t>0?1:0}}if(i){const t=this.anchorOffset();this.setSelection(t,o-t)}else this.setSelection(o);this._announce("move",n)}},Fe.prototype.jump=function(t,e){const i=(e=e||{extend:!1}).extend||!1;t=t<0?-1:1;const n=this.siblings();let r=this.focusOffset();t>0&&(r=Math.min(r+1,n.length-1));const s=t<0?0:n.length-1;i?this.extend(s-r):this.move(s-r)},Fe.prototype.jumpToMathFieldBoundary=function(t,e){const i=(e=e||{extend:!1}).extend||!1;t=(t=t||1)<0?-1:1;const n=De(this),r=[{relation:"body",offset:this.path[0].offset}];let s;i?t<0?r[0].offset>0&&(s=-r[0].offset):r[0].offset<this.siblings().length-1&&(s=this.siblings().length-1-r[0].offset):(r[0].offset=t<0?0:this.root.body.length-1,s=0),this.setPath(r,s),this._announce("move",n)},Fe.prototype.leap=function(t,e){t=(t=t||1)<0?-1:1,e=e||!0;const i=this.suppressChangeNotifications;this.suppressChangeNotifications=!0;const n=De(this),r=this.extent;this.move(t),"placeholder"===this.anchor().type&&this.move(t);const s=this.filter((t,e)=>"placeholder"===e.type||t.length>1&&1===this.siblings().length,t);if(0===s.length){if(this.setPath(n,r),e)if(this.config.onTabOutOf)this.config.onTabOutOf(this.target,t>0?"forward":"backward");else if(document.activeElement){const e='a[href]:not([disabled]),\n                    button:not([disabled]),\n                    textarea:not([disabled]),\n                    input[type=text]:not([disabled]),\n                    select:not([disabled]),\n                    [contentEditable="true"],\n                    [tabindex]:not([disabled]):not([tabindex="-1"])',i=Array.prototype.filter.call(document.querySelectorAll(e),t=>(t.offsetWidth>0||t.offsetHeight>0)&&!t.contains(document.activeElement)||t===document.activeElement);let n=i.indexOf(document.activeElement)+t;n<0&&(n=i.length-1),n>=i.length&&(n=0),i[n].focus()}return this.suppressChangeNotifications=i,!1}return this.selectionWillChange(),this.setPath(s[0]),"placeholder"===this.anchor().type&&this.setExtent(-1),this._announce("move",n),this.selectionDidChange(),this.suppressChangeNotifications=i,!0},Fe.prototype.anchorMode=function(){const t=this.isCollapsed()?this.anchor():this.sibling(1);let e;if(t){if("commandliteral"===t.type||"command"===t.type)return"command";e=t.mode}let i=1,n=this.ancestor(i);for(;!e&&n;)n&&(e=n.mode),i+=1,n=this.ancestor(i);return e},Fe.prototype.anchorStyle=function(){const t=this.isCollapsed()?this.anchor():this.sibling(1);let e;if(t&&"first"!==t.type){if("commandliteral"===t.type||"command"===t.type)return{};e={color:t.color,backgroundColor:t.backgroundColor,fontFamily:t.fontFamily,fontShape:t.fontShape,fontSeries:t.fontSeries,fontSize:t.fontSize}}let i=1,n=this.ancestor(i);for(;!e&&n;)n&&(e={color:n.color,backgroundColor:n.backgroundColor,fontFamily:n.fontFamily,fontShape:n.fontShape,fontSeries:n.fontSeries,fontSize:n.fontSize}),i+=1,n=this.ancestor(i);return e},Fe.prototype.simplifyParen=function(t){if(t&&this.config.removeExtraneousParentheses){for(let e=0;t[e];e++)if("leftright"===t[e].type&&"("===t[e].leftDelim&&Array.isArray(t[e].body)){let i=0,n=0,r=0;for(let s=0;t[e].body[s];s++)"genfrac"===t[e].body[s].type&&(i++,n=s),"first"!==t[e].body[s].type&&r++;0===r&&1===i&&(t[e]=t[e].body[n])}t.forEach(t=>{if("genfrac"===t.type&&(this.simplifyParen(t.numer),this.simplifyParen(t.denom),t.numer=qe(t.numer),t.denom=qe(t.denom)),t.superscript&&(this.simplifyParen(t.superscript),t.superscript=qe(t.superscript)),t.subscript&&(this.simplifyParen(t.subscript),t.subscript=qe(t.subscript)),t.underscript&&(this.simplifyParen(t.underscript),t.underscript=qe(t.underscript)),t.overscript&&(this.simplifyParen(t.overscript),t.overscript=qe(t.overscript)),t.index&&(this.simplifyParen(t.index),t.index=qe(t.index)),"surd"===t.type?(this.simplifyParen(t.body),t.body=qe(t.body)):t.body&&Array.isArray(t.body)&&this.simplifyParen(t.body),t.array)for(let e=Ne(t.array);e>=0;e--)this.simplifyParen(Ie(t.array,e))})}},Fe.prototype.insert=function(t,e){if((e=e||{}).smartFence&&this._insertSmartFence(t,e.style))return;const i=this.suppressChangeNotifications;e.suppressChangeNotifications&&(this.suppressChangeNotifications=!0),this.contentWillChange();const n=this.suppressChangeNotifications;this.suppressChangeNotifications=!0,e.insertionMode||(e.insertionMode="replaceSelection"),e.selectionMode||(e.selectionMode="placeholder"),e.format||(e.format="auto"),e.macros=e.macros||this.config.macros;const r=e.mode||this.anchorMode();let s;const o=[this.getSelectedAtoms()];void 0!==e.placeholder&&(o["?"]=e.placeholder),"replaceSelection"!==e.insertionMode||this.isCollapsed()?"replaceAll"===e.insertionMode?(this.root.body.splice(1),this.path=[{relation:"body",offset:0}],this.extent=0):"insertBefore"===e.insertionMode?this.collapseBackward():"insertAfter"===e.insertionMode&&this.collapseForward():this.delete_();const a=this.siblings(),l=this.startOffset();if(l+1<a.length&&a[l+1]&&"placeholder"===a[l+1].type?this.delete_(1):l>0&&a[l]&&"placeholder"===a[l].type&&this.delete_(-1),"math"===r&&"ASCIIMath"===e.format)t=$e(t,{...this.config,format:"ASCIIMath"}),s=ve.parseTokens(v.tokenize(t),"math",null,e.macros,!1),this.simplifyParen(s);else if("text"!==r&&"auto"===e.format)if("command"===r){s=[];for(const e of t)Nt.COMMAND_MODE_CHARACTERS.test(e)&&s.push(new he.MathAtom("command","command",e))}else""===t?s=[new he.MathAtom("command","command","\\")]:(t=$e(t,this.config),o[0]?t=t.replace(/(^|[^\\])#@/g,"$1#0"):/(^|[^\\])#@/.test(t)?(t=t.replace(/(^|[^\\])#@/g,"$1#0"),o[0]=this.extractArgBeforeInsertionPoint(),this._deleteAtoms(-o[0].length),Array.isArray(o[0])&&0===o[0].length&&(o[0]=void 0)):t=t.replace(/(^|[^\\])#@/g,"$1#?"),s=ve.parseTokens(v.tokenize(t),r,o,e.macros,e.smartFence),this.simplifyParen(s));else"latex"===e.format?s=ve.parseTokens(v.tokenize(t),r,o,e.macros,e.smartFence):"text"!==r&&"text"!==e.format||(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/\\/g,"\\textbackslash ")).replace(/#/g,"\\#")).replace(/\$/g,"\\$")).replace(/%/g,"\\%")).replace(/&/g,"\\&")).replace(/_/g,"\\_")).replace(/{/g,"\\textbraceleft ")).replace(/}/g,"\\textbraceright ")).replace(/\^/g,"\\textasciicircum ")).replace(/~/g,"\\textasciitilde ")).replace(/£/g,"\\textsterling "),s=ve.parseTokens(v.tokenize(t),"text",o,e.macros,!1));!function t(e,i){e&&i&&(Array.isArray(e)?e.forEach(e=>t(e,i)):"object"==typeof e&&(e.color||e.backgroundColor||e.fontFamily||e.fontShape||e.fontSeries||e.fontSize||(e.applyStyle(i),t(e.body,i),t(e.numer,i),t(e.denom,i),t(e.index,i),t(e.overscript,i),t(e.underscript,i),t(e.subscript,i),t(e.superscript,i))))}(s,e.style);const c=this.parent();if(this.config.removeExtraneousParentheses&&c&&"leftright"===c.type&&"("===c.leftDelim&&function(t){return 0===t.length||1===t.length&&"first"===t[0].type}(c.body)&&s&&1===s.length&&"genfrac"===s[0].type?(this.path.pop(),this.siblings()[this.anchorOffset()]=s[0]):Array.prototype.splice.apply(this.siblings(),[this.anchorOffset()+1,0].concat(s)),this.insertFirstAtom(),this.suppressChangeNotifications=n,"placeholder"===e.selectionMode){let t=[];for(const e of s)t=t.concat(e.filter(t=>"placeholder"===t.type));0!==t.length&&this.leap(1,!1)?this._announce("move"):this.setSelection(this.anchorOffset()+s.length)}else"before"===e.selectionMode||("after"===e.selectionMode?this.setSelection(this.anchorOffset()+s.length):"item"===e.selectionMode&&this.setSelection(this.anchorOffset(),s.length));this.contentDidChange(),this.suppressChangeNotifications=i},Fe.prototype._insertSmartFence=function(t,e){const i=this.parent();if("leftright"===i.type&&"|"!==i.leftDelim&&/\||\\vert|\\Vert|\\mvert|\\mid/.test(t))return this.insert("\\,\\middle"+t+"\\, ",{mode:"math",format:"latex",style:e}),!0;"{"!==t&&"\\{"!==t||(t="\\lbrace"),"}"!==t&&"\\}"!==t||(t="\\rbrace"),"["!==t&&"\\["!==t||(t="\\lbrack"),"]"!==t&&"\\]"!==t||(t="\\rbrack");const n=Nt.RIGHT_DELIM[t];if(n&&("leftright"!==i.type||"|"!==i.leftDelim)){let i="";const r=this.isCollapsed()||"placeholder"===this.anchor().type;i=this.sibling(0).isFunction?"\\mleft"+t+"\\mright":"\\left"+t+"\\right",i+=r?"?":n;let s=[];return r&&(s=this.siblings().splice(this.anchorOffset()+1,this.siblings().length)),this.insert(i,{mode:"math",format:"latex",style:e}),r&&(this.sibling(0).body=s,this.move(-1)),!0}let r;if(Object.keys(Nt.RIGHT_DELIM).forEach(e=>{t===Nt.RIGHT_DELIM[e]&&(r=e)}),r){if(i&&"leftright"===i.type&&this.endOffset()===this.siblings().length-1)return this.contentWillChange(),i.rightDelim=t,this.move(1),this.contentDidChange(),!0;const n=this.siblings();let r;for(r=this.endOffset();r>=0&&("leftright"!==n[r].type||"?"!==n[r].rightDelim);r--);if(r>=0)return this.contentWillChange(),n[r].rightDelim=t,n[r].body=n[r].body.concat(n.slice(r+1,this.endOffset()+1)),n.splice(r+1,this.endOffset()-r),this.setSelection(r),this.contentDidChange(),!0;if(i&&"leftright"===i.type&&"?"===i.rightDelim){this.contentWillChange(),i.rightDelim=t;const e=n.slice(this.endOffset()+1);return n.splice(this.endOffset()+1),this.path.pop(),Array.prototype.splice.apply(this.siblings(),[this.endOffset()+1,0].concat(e)),this.contentDidChange(),!0}const s=this.ancestor(2);return s&&"leftright"===s.type&&"?"===s.rightDelim&&this.endOffset()===n.length-1?(this.move(1),this._insertSmartFence(t,e)):(this.insert(t,{mode:"math",format:"latex",style:e}),!0)}return!1},Fe.prototype.positionInsertionPointAfterCommitedCommand=function(){const t=this.siblings(),e=this.commandOffsets();let i=e.start;for(;i<e.end&&!t[i].suggestion;)i++;this.setSelection(i-1)},Fe.prototype.removeSuggestion=function(){const t=this.siblings();for(let e=t.length-1;e>=0;e--)t[e].suggestion&&t.splice(e,1)},Fe.prototype.insertSuggestion=function(t,e){this.removeSuggestion();const i=[],n=t.substr(e);for(const t of n){const e=new he.MathAtom("command","command",t);e.suggestion=!0,i.push(e)}Array.prototype.splice.apply(this.siblings(),[this.anchorOffset()+1,0].concat(i))},Fe.prototype._deleteAtoms=function(t){t>0?this.siblings().splice(this.anchorOffset()+1,t):(this.siblings().splice(this.anchorOffset()+t+1,-t),this.setSelection(this.anchorOffset()+t))},Fe.prototype.delete=function(t){if(0===(t=t||0))this.delete_(0);else if(t>0)for(;t>0;)this.delete_(1),t--;else for(;t<0;)this.delete_(-1),t++},Fe.prototype.delete_=function(t){this.contentWillChange(),this.selectionWillChange();const e=this.suppressChangeNotifications;if(this.suppressChangeNotifications=!0,t=(t=t||0)<0?-1:t>0?1:t,this.removeSuggestion(),this.parent().array&&t<0&&0===this.startOffset()){const t=this.parent().array;if(function(t){const e={col:0,row:0};for(;e.row<t.length&&!Ie(t,e);)e.row+=1;return Ie(t,e)?"cell"+Ee(t,e):""}(t)===this.relation()){const e=function(t,e,i){e||(e=[";",","]);let n,r=[];for(const i of t)n?r.push(n):n=new he.MathAtom("math","mpunct",e[0],void 0),r=r.concat(ze(i,e[1]));return r}(t);this.path.pop(),this.siblings().splice(this.anchorOffset(),1,...e),this.setSelection(this.anchorOffset()-1,e.length)}else{const e=Oe(t,this.relation());if(0===e.col){const i=Pe(t,e,-1);i.col=t[i.row].length-1,this.path[this.path.length-1].relation="cell"+Ee(t,i);const n=t[i.row][i.col].length,r=ze(t[e.row]);t[i.row][i.col]=t[i.row][i.col].concat(r),this.setSelection(n-1,r.length),function(t,e){t.splice(e,1)}(t,e.row)}else if(0===function(t,e){let i=0;const n={col:e,row:0};for(;n.row<t.length;){const e=Ie(t,n);if(e&&e.length>0){let t=e.length;"first"===e[0].type&&(t-=1),t>0&&(i+=1)}n.row+=1}return i}(t,e.col)){!function(t,e){let i=0;for(;i<t.length;)t[i][e]&&t[i].splice(e,1),i+=1}(t,e.col),e.col-=1,this.path[this.path.length-1].relation="cell"+Ee(t,e);const i=t[e.row][e.col];this.setSelection(i.length-1,0)}}return this.suppressChangeNotifications=e,this.selectionDidChange(),void this.contentDidChange()}const i=this.siblings();if(this.isCollapsed()){const e=this.anchorOffset();if(t<0)if(0!==e){const t=this.sibling(0);"leftright"===t.type?(t.rightDelim="?",this.move(-1)):!t.captureSelection&&/^(group|array|genfrac|surd|leftright|overlap|overunder|box|mathstyle|sizing)$/.test(t.type)?this.move(-1):(this._announce("delete",null,i.slice(e,e+1)),i.splice(e,1),this.setSelection(e-1))}else{const t=this.relation();if("superscript"===t||"subscript"===t){const e=this.parent()[t].filter(t=>"placeholder"!==t.type&&"first"!==t.type);this.parent()[t]=null,this.path.pop(),Array.prototype.splice.apply(this.siblings(),[this.anchorOffset(),0].concat(e)),this.setSelection(this.anchorOffset()-1),this._announce("deleted: "+t)}else if("denom"===t){const t=this.parent().numer.filter(t=>"placeholder"!==t.type&&"first"!==t.type),e=this.parent().denom.filter(t=>"placeholder"!==t.type&&"first"!==t.type);this.path.pop(),Array.prototype.splice.apply(this.siblings(),[this.anchorOffset(),1].concat(e)),Array.prototype.splice.apply(this.siblings(),[this.anchorOffset(),0].concat(t)),this.setSelection(this.anchorOffset()+t.length-1),this._announce("deleted: denominator")}else if("body"===t){const t=this.siblings().filter(t=>"placeholder"!==t.type);this.path.length>1&&(t.shift(),this.path.pop(),Array.prototype.splice.apply(this.siblings(),[this.anchorOffset(),1].concat(t)),this.setSelection(this.anchorOffset()-1),this._announce("deleted: root"))}else this.move(-1),this.delete(-1)}else if(t>0)if(e!==i.length-1)/^(group|array|genfrac|surd|leftright|overlap|overunder|box|mathstyle|sizing)$/.test(this.sibling(1).type)?this.move(1):(this._announce("delete",null,i.slice(e+1,e+2)),i.splice(e+1,1));else if("numer"===this.relation()){const t=this.parent().numer.filter(t=>"placeholder"!==t.type&&"first"!==t.type),e=this.parent().denom.filter(t=>"placeholder"!==t.type&&"first"!==t.type);this.path.pop(),Array.prototype.splice.apply(this.siblings(),[this.anchorOffset(),1].concat(e)),Array.prototype.splice.apply(this.siblings(),[this.anchorOffset(),0].concat(t)),this.setSelection(this.anchorOffset()+t.length-1),this._announce("deleted: numerator")}else this.move(1),this.delete(1)}else{const t=this.startOffset()+1,e=this.endOffset()+1;this._announce("deleted",null,i.slice(t,e)),i.splice(t,e-t),this.setSelection(t-1)}this.suppressChangeNotifications=e,this.selectionDidChange(),this.contentDidChange()},Fe.prototype.moveToNextPlaceholder_=function(){this.leap(1)},Fe.prototype.moveToPreviousPlaceholder_=function(){this.leap(-1)},Fe.prototype.moveToNextChar_=function(){this.move(1)},Fe.prototype.moveToPreviousChar_=function(){this.move(-1)},Fe.prototype.moveUp_=function(){this.up()},Fe.prototype.moveDown_=function(){this.down()},Fe.prototype.moveToNextWord_=function(){this.skip(1)},Fe.prototype.moveToPreviousWord_=function(){this.skip(-1)},Fe.prototype.moveToGroupStart_=function(){this.setSelection(0)},Fe.prototype.moveToGroupEnd_=function(){this.setSelection(-1)},Fe.prototype.moveToMathFieldStart_=function(){this.jumpToMathFieldBoundary(-1)},Fe.prototype.moveToMathFieldEnd_=function(){this.jumpToMathFieldBoundary(1)},Fe.prototype.deleteNextChar_=function(){this.delete_(1)},Fe.prototype.deletePreviousChar_=function(){this.delete_(-1)},Fe.prototype.deleteNextWord_=function(){this.extendToNextBoundary(),this.delete_()},Fe.prototype.deletePreviousWord_=function(){this.extendToPreviousBoundary(),this.delete_()},Fe.prototype.deleteToGroupStart_=function(){this.extendToGroupStart(),this.delete_()},Fe.prototype.deleteToGroupEnd_=function(){this.extendToMathFieldStart(),this.delete_()},Fe.prototype.deleteToMathFieldEnd_=function(){this.extendToMathFieldEnd(),this.delete_()},Fe.prototype.transpose_=function(){},Fe.prototype.extendToNextChar_=function(){this.extend(1)},Fe.prototype.extendToPreviousChar_=function(){this.extend(-1)},Fe.prototype.extendToNextWord_=function(){this.skip(1,{extend:!0})},Fe.prototype.extendToPreviousWord_=function(){this.skip(-1,{extend:!0})},Fe.prototype.extendUp_=function(){this.up({extend:!0})},Fe.prototype.extendDown_=function(){this.down({extend:!0})},Fe.prototype.extendToNextBoundary_=function(){this.skip(1,{extend:!0})},Fe.prototype.extendToPreviousBoundary_=function(){this.skip(-1,{extend:!0})},Fe.prototype.extendToGroupStart_=function(){this.setExtent(-this.anchorOffset())},Fe.prototype.extendToGroupEnd_=function(){this.setExtent(this.siblings().length-this.anchorOffset())},Fe.prototype.extendToMathFieldStart_=function(){this.jumpToMathFieldBoundary(-1,{extend:!0})},Fe.prototype.extendToMathFieldEnd_=function(){this.jumpToMathFieldBoundary(1,{extend:!0})},Fe.prototype.moveToSuperscript_=function(){if(this.collapseForward(),!this.anchor().superscript)if(this.anchor().subscript)this.anchor().superscript=[Ke()];else{const t=this.sibling(1);t&&t.superscript?this.path[this.path.length-1].offset+=1:t&&t.subscript?(this.path[this.path.length-1].offset+=1,this.anchor().superscript=[Ke()]):("limits"!==this.anchor().limits&&(this.siblings().splice(this.anchorOffset()+1,0,new he.MathAtom(this.parent().anchorMode,"msubsup","​",this.anchorStyle())),this.path[this.path.length-1].offset+=1),this.anchor().superscript=[Ke()])}this.path.push({relation:"superscript",offset:0}),this.selectGroup_()},Fe.prototype.moveToSubscript_=function(){if(this.collapseForward(),!this.anchor().subscript)if(this.anchor().superscript)this.anchor().subscript=[Ke()];else{const t=this.sibling(1);t&&t.subscript?this.path[this.path.length-1].offset+=1:t&&t.superscript?(this.path[this.path.length-1].offset+=1,this.anchor().subscript=[Ke()]):("limits"!==this.anchor().limits&&(this.siblings().splice(this.anchorOffset()+1,0,new he.MathAtom(this.parent().anchorMode,"msubsup","​",this.anchorStyle())),this.path[this.path.length-1].offset+=1),this.anchor().subscript=[Ke()])}this.path.push({relation:"subscript",offset:0}),this.selectGroup_()},Fe.prototype.moveToOpposite_=function(){const t={superscript:"subscript",subscript:"superscript",denom:"numer",numer:"denom"}[this.relation()];t||this.moveToSuperscript_(),this.parent()[t]||(this.parent()[t]=[Ke()]),this.setSelection(0,"end",t)},Fe.prototype.moveBeforeParent_=function(){this.path.length>1?(this.path.pop(),this.setSelection(this.anchorOffset()-1)):this._announce("plonk")},Fe.prototype.moveAfterParent_=function(){if(this.path.length>1){const t=De(this);this.path.pop(),this.setExtent(0),this._announce("move",t)}else this._announce("plonk")},Fe.prototype._addCell=function(t){const e=this.parent();if(e&&"array"===e.type&&Array.isArray(e.array)){const i=this.relation();if(e.array){const n=Oe(e.array,i);"after row"===t||"before row"===t?(n.col=0,n.row=n.row+("after row"===t?1:0),e.array.splice(n.row,0,[[]])):(n.col+="after column"===t?1:0,e.array[n.row].splice(n.col,0,[]));const r=Ee(e.array,n);this.path.pop(),this.path.push({relation:"cell"+r.toString(),offset:0}),this.insertFirstAtom()}}},Fe.prototype.convertParentToArray=function(){const t=this.parent();if("leftright"===t.type){t.type="array";const e={"(":"pmatrix","\\lbrack":"bmatrix","\\lbrace":"cases"}[t.leftDelim]||"matrix",i=Nt.getEnvironmentInfo(e),n=[[t.body]];i.parser&&Object.assign(t,i.parser(e,[],n)),t.tabularMode=i.tabular,t.parseMode=this.anchorMode(),t.env={...i},t.env.name=e,t.array=n,t.rowGaps=[0],delete t.body,this.path[this.path.length-1].relation="cell0"}},Fe.prototype.addRowAfter_=function(){this.contentWillChange(),this.convertParentToArray(),this._addCell("after row"),this.contentDidChange()},Fe.prototype.addRowBefore_=function(){this.contentWillChange(),this.convertParentToArray(),this._addCell("before row"),this.contentDidChange()},Fe.prototype.addColumnAfter_=function(){this.contentWillChange(),this.convertParentToArray(),this._addCell("after column"),this.contentDidChange()},Fe.prototype.addColumnBefore_=function(){this.contentWillChange(),this.convertParentToArray(),this._addCell("before column"),this.contentDidChange()},Fe.prototype._applyStyle=function(t){if(this.isCollapsed())return;const e=this;function i(t,i){let n=!0;return e.forEachSelected(e=>{n=n&&e[t]===i},{recursive:!0}),n}t.color&&i("color",t.color)&&(t.color="none"),t.backgroundColor&&i("backgroundColor",t.backgroundColor)&&(t.backgroundColor="none"),t.fontFamily&&i("fontFamily",t.fontFamily)&&(t.fontFamily="none"),t.series&&(t.fontSeries=t.series),t.fontSeries&&i("fontSeries",t.fontSeries)&&(t.fontSeries="auto"),t.shape&&(t.fontShape=t.shape),t.fontShape&&i("fontShape",t.fontShape)&&(t.fontShape="auto"),t.size&&(t.fontSize=t.size),t.fontSize&&i("fontSize",t.fontSize)&&(t.fontSize="size5"),this.contentWillChange(),this.forEachSelected(e=>e.applyStyle(t),{recursive:!0}),this.contentDidChange()};var Ue={EditableMathlist:Fe,parseMathString:$e};const Ve={"#":"#","|":"|","[":"BracketLeft","]":"BracketRight","-":"Minus","+":"Plus","=":"Equal","/":"Slash","\\":"Backslash"},Ge={Space:"Spacebar"," ":"Spacebar",Escape:"Esc",ArrowLeft:"Left",ArrowUp:"Up",ArrowRight:"Right",ArrowDown:"Down",Delete:"Del"},Xe={q:"KeyQ",w:"KeyW",e:"KeyE",r:"KeyR",t:"KeyT",y:"KeyY",u:"KeyU",i:"KeyI",o:"KeyO",p:"KeyP",a:"KeyA",s:"KeyS",d:"KeyD",f:"KeyF",g:"KeyG",h:"KeyH",j:"KeyJ",k:"KeyK",l:"KeyL",z:"KeyZ",x:"KeyX",c:"KeyC",v:"KeyV",b:"KeyB",n:"KeyN",m:"KeyM",1:"Digit1",2:"Digit2",3:"Digit3",4:"Digit4",5:"Digit5",6:"Digit6",7:"Digit7",8:"Digit8",9:"Digit9",0:"Digit0","!":"Shift-Digit1","@":"Shift-Digit2","#":"Shift-Digit3",$:"Shift-Digit4","%":"Shift-Digit5","^":"Shift-Digit6","&":"Shift-Digit7","*":"Shift-Digit8","(":"Shift-Digit9",")":"Shift-Digit0","-":"Minus",_:"Shift-Minus","/":"Slash","\\":"Backslash","|":"Shift-Backslash","?":"Shift-Slash"," ":"Spacebar"};function Ze(t){let e,i=!0;"Unidentified"===t.key&&t.target&&(e=Xe[t.target.value]||t.target.value),e||(Ve[t.key]?(e=Ve[t.key],i=!1):e=Ge[t.key],e||(e=Xe[t.key.toLowerCase()]||t.key)),!e&&t.code&&(e=Ge[t.code]||t.code);const n=[];return t.ctrlKey&&n.push("Ctrl"),t.metaKey&&n.push("Meta"),i&&t.altKey&&n.push("Alt"),i&&t.shiftKey&&n.push("Shift"),0===n.length?e:(n.push(e),n.join("-"))}function Ye(t,e){let i,n=null,r=null,s=!1,o=!1;function a(t){clearTimeout(i),i=setTimeout(function(){clearTimeout(i),t()})}function l(){if(function(t){return t.selectionStart!==t.selectionEnd}(t))return;const i=t.value;t.value="",i.length>0&&e.typedText(i)}const c=t||e.container;c.addEventListener("keydown",function(i){if("function"==typeof e.allowDeadKey&&e.allowDeadKey()||"Dead"!==i.key&&"Unidentified"!==i.key&&229!==i.keyCode)o=!1;else{o=!0,s=!1;const i=e.blur,n=e.focus;e.blur=null,e.focus=null,t.blur(),t.focus(),e.blur=i,e.focus=n}return!(!s&&"CapsLock"!==i.code&&!/(Control|Meta|Alt|Shift)(Right|Left)/.test(i.code))||(n=i,r=null,e.keystroke(Ze(i),i))},!0),c.addEventListener("keypress",function(t){s||(n&&r&&e.keystroke(Ze(n),n),r=t,a(l))},!0),c.addEventListener("keyup",function(){s||!n||r||l()},!0),c.addEventListener("paste",function(){t.focus();const i=t.value;t.value="",i.length>0&&e.paste(i)},!0),c.addEventListener("copy",function(t){e.copy&&e.copy(t)},!0),c.addEventListener("cut",function(t){e.cut&&e.cut(t)},!0),c.addEventListener("blur",function(){n=null,r=null,e.blur&&e.blur()},!0),c.addEventListener("focus",function(){e.focus&&e.focus()},!0),c.addEventListener("compositionstart",()=>{s=!0},!0),c.addEventListener("compositionend",()=>{s=!1,a(l)},!0),c.addEventListener("input",()=>{if(o){const i=e.blur,n=e.focus;e.blur=null,e.focus=null,t.blur(),t.focus(),e.blur=i,e.focus=n,o=!1,s=!1,a(l)}else s||a(l)})}var Je={delegateKeyboardEvents:Ye,select:Ye.select,keyboardEventToString:Ze,eventToChar:function(t){if(!t)return"";let e;return"Unidentified"===t.key&&t.target&&(e=t.target.value),e=e||t.key||t.code,/^(Return|Enter|Tab|Escape|Delete|PageUp|PageDown|Home|End|Help|ArrowLeft|ArrowRight|ArrowUp|ArrowDown)$/.test(e)&&(e=""),e},charToEvent:function(t){return{key:t,metaKey:!1,ctrlKey:!1,altKey:!1,shiftKey:!1}}},Qe={UndoManager:class{constructor(t){this.mathlist=t,this.maximumDepth=1e3,this.record=!1,this.canCoalesce=!1,this.reset()}reset(){this.stack=[],this.index=-1}startRecording(){this.record=!0}canUndo(){return this.index>0}canRedo(){return this.index!==this.stack.length-1}undo(t){this.canUndo()&&(t&&"function"==typeof t.onUndoStateWillChange&&t.onUndoStateWillChange(this.mathlist.target,"undo"),this.restore(this.stack[this.index-1],t),this.index-=1,t&&"function"==typeof t.onUndoStateDidChange&&t.onUndoStateDidChange(this.mathlist.target,"undo"),this.canCoalesce=!1)}redo(t){this.canRedo()&&(t&&"function"===t.onUndoStateWillChange&&t.onUndoStateWillChange(this.mathlist.target,"redo"),this.index+=1,this.restore(this.stack[this.index],t),t&&"function"==typeof t.onUndoStateDidChange&&t.onUndoStateDidChange(this.mathlist.target,"redo"),this.canCoalesce=!1)}pop(){this.canUndo()&&(this.index-=1,this.stack.pop())}snapshot(t){this.record&&(t&&"function"===t.onUndoStateWillChange&&t.onUndoStateWillChange(this.mathlist.target,"snapshot"),this.stack.splice(this.index+1,this.stack.length-this.index-1),this.stack.push({latex:this.mathlist.root.toLatex(),selection:this.mathlist.toString()}),this.index++,this.stack.length>this.maximumDepth&&this.stack.shift(),t&&"function"==typeof t.onUndoStateDidChange&&t.onUndoStateDidChange(this.mathlist.target,"snapshot"),this.canCoalesce=!1)}snapshotAndCoalesce(t){this.canCoalesce&&this.pop(),this.snapshot(t),this.canCoalesce=!0}save(){return{latex:this.mathlist.root.toLatex(),selection:this.mathlist.toString()}}restore(t,e){const i=this.mathlist.suppressChangeNotifications;void 0!==e.suppressChangeNotifications&&(this.mathlist.suppressChangeNotifications=e.suppressChangeNotifications),this.mathlist.insert(t?t.latex:"",{mode:"math",insertionMode:"replaceAll",selectionMode:"after",format:"latex",...e}),this.mathlist.setPath(t?t.selection:[{relation:"body",offset:0}]),this.mathlist.suppressChangeNotifications=i}}};const ti={"\\mathrm":"\\mathrm{x=+3.14, x\\in A}","\\mathbf":"\\mathbf{x=+3.14, x\\in A}","\\bf":"\\bf{x=+3.14, x\\in A}","\\bm":"\\bm{x=+3.14, x\\in A}","\\bold":"\\bold{x=+3.14, x\\in A}","\\mathit":"\\mathbb{x=+3.14}","\\mathbb":"\\mathbb{ABCD}","\\Bbb":"\\mathbb{ABCD}","\\frak":"\\frak{ABCD}","\\mathfrak":"\\mathfrak{ABCD}","\\mathscr":"\\mathscr{ABCD}","\\mathsf":"\\mathsf{ABab01}","\\mathtt":"\\mathtt{x=+3.14, x\\in A}","\\mathcal":"\\mathcal{ABCD}","\\boldsymbol":"\\boldsymbol{ABab01+=}","\\text":"\\text{ABC abc}","\\textrm":"\\textrm{ABC abc}","\\textnormal":"\\textnormal{ABC abc}","\\textit":"\\textit{ABC abc}","\\textbf":"\\textbf{ABC abc}","\\texttt":"\\texttt{ABC abc}","\\textsf":"\\textsf{ABC abc}","\\textcolor":"{\\textcolor{m0}A}{\\textcolor{m1}B}{\\textcolor{m2}C }{\\textcolor{m3}a}{\\textcolor{m4}b}{\\textcolor{m5}c}{\\textcolor{m6}8}","\\color":"{\\color{m0}A}{\\color{m1}B}{\\color{m2}C}{\\color{m3}a}{\\color{m4}b}{\\color{m5}c}{\\color{m6}8}","\\underline":'\\underline{\\unicode{"2B1A}}',"\\overline":'\\overline{\\unicode{"2B1A}}',"\\vec":'\\vec{\\unicode{"25CC}}',"\\check":'\\check{\\unicode{"25CC}}',"\\acute":'\\acute{\\unicode{"25CC}}',"\\breve":'\\breve{\\unicode{"25CC}}',"\\tilde":'\\tilde{\\unicode{"25CC}}',"\\hat":'\\hat{\\unicode{"25CC}}',"\\ddot":'\\ddot{\\unicode{"25CC}}',"\\dot":'\\dot{\\unicode{"25CC}}',"\\bar":'\\bar{\\unicode{"25CC}}',"\\!":'\\unicode{"203A}\\!\\unicode{"2039}',"\\,":'\\unicode{"203A}\\,\\unicode{"2039}',"\\:":'\\unicode{"203A}\\:\\unicode{"2039}',"\\;":'\\unicode{"203A}\\;\\unicode{"2039}',"\\quad":'\\unicode{"203A}\\quad\\unicode{"2039}',"\\qquad":'\\unicode{"203A}\\qquad\\unicode{"2039}',"\\enskip":'\\unicode{"203A}\\enskip\\unicode{"2039}',"\\space":'\\unicode{"203A}\\space\\unicode{"2039}',"\\frac":'\\frac{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\dfrac":'\\dfrac{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\cfrac":'\\cfrac{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\tfrac":'\\tfrac{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\dbinom":'\\dbinom{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\tbinom":'\\tbinom{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\binom":'\\binom{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\pdiff":'\\pdiff{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\in":"n\\in\\N","\\notin":"n\\notin\\N","\\not":"B \\not A","\\ni":"N\\in n","\\owns":"N\\owns n","\\subset":"A\\subset B","\\supset":"B\\supset A","\\subseteq":"A\\subseteq B","\\supseteq":"B\\supseteq A","\\nsubseteq":"A\\nsubseteq B","\\nsupseteq":"B\\nsupseteq A","\\subsetneq":"A\\subsetneq B","\\supsetneq":"B\\supsetneq A","\\varsubsetneq":"A\\varsubsetneq B","\\varsupsetneq":"B\\varsupsetneq A","\\nsubseteqq":"A\\varsupsetneq B","\\subsetneqq":"A\\subsetneqq B","\\varsubsetneqq":"A\\varsubsetneqq B","\\nsubset":"A\\nsubset B","\\nsupset":"B\\nsupset A","\\complement":"A^\\complement","\\bigcup":'\\bigcup_{\\unicode{"2B1A}}',"\\bigcap":'\\bigcap_{\\unicode{"2B1A}}',"\\sqrt":'\\sqrt{\\unicode{"2B1A}}',"\\prod":'\\prod_{\\unicode{"2B1A}}^{\\unicode{"2B1A}}',"\\sum":'\\sum_{\\unicode{"2B1A}}^{\\unicode{"2B1A}}',"\\int":'\\int_{\\unicode{"2B1A}}^{\\unicode{"2B1A}}',"\\stackrel":'\\stackrel{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\stackbin":'\\stackbin{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\underset":'\\underset{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\overset":'\\overset{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\prime":'\\unicode{"2B1A}^{\\prime}',"\\boxed":'\\boxed{\\unicode{"2B1A}}',"\\colorbox":'\\colorbox{#fbc0bd}{\\unicode{"2B1A}}',"\\bbox":'\\bbox[#ffd400, solid 2px #ffd400]{\\unicode{"2B1A}}',"\\enclose":'\\enclose{updiagonalstrike,roundedbox}[1px solid red, mathbackground="#fbc0bd"]{23+45}',"\\fcolorbox":'\\fcolorbox{#cd0030}{#ffd400}{\\unicode{"2B1A}}',"\\ ":'\\char"2423',"\\top":"{\\color{red}P}\\top","\\bot":"{\\color{#0F0}P}\\bot","\\mid":"P(p\\mid q)","\\rlap":"\\rlap{x}o","\\llap":"o\\llap{/}"},ei={"\\text":"roman text","\\textrm":"roman text","\\textnormal":"roman text","\\textit":"italic text","\\textbf":"bold text","\\texttt":"monospaced text","\\textsf":"sans-serif text","\\mathrm":["roman","(upright)"],"\\mathbf":"bold","\\bf":"bold","\\bold":"bold","\\mathit":"italic","\\mathbb":"blackboard","\\Bbb":"blackboard","\\mathscr":"script","\\mathtt":["typewriter","(monospaced)"],"\\mathsf":"sans-serif","\\mathcal":"caligraphic","\\frak":["fraktur","(gothic)"],"\\mathfrak":["fraktur","(gothic)"],"\\textcolor":"text color","\\color":"color","\\forall":"for all","\\exists":"there exists","\\nexists":"there does not exist","\\frac":"fraction","\\dfrac":"display fraction","\\cfrac":"continuous fraction","\\tfrac":"text fraction","\\binom":"binomial coefficient","\\dbinom":"display binomial coefficient","\\tbinom":"text binomial coefficient","\\pdiff":"partial differential","\\vec":"vector","\\check":"caron","\\acute":"acute","\\breve":"breve","\\tilde":"tilde","\\dot":"dot","\\hat":["hat","circumflex"],"\\ddot":"double dot","\\bar":"bar","\\prime":"prime","\\doubleprime":"double prime","\\varnothing":"empty set","\\emptyset":"empty set","\\subseteq":"subset of or <br>equal to","\\supseteq":"superset of or <br>equal to","\\supset":"superset of","\\subset":"subset of","\\partial":"partial derivative","\\bigcup":"union","\\bigcap":"intersection","\\approx":"approximately equal to","\\notin":"not an element of","\\in":["element of","included in"],"\\infty":"infinity","\\land":"logical and","\\sqrt":"square root","\\prod":"product","\\sum":"summation","\\amalg":["amalgamation","coproduct","free product","disjoint union"],"\\cup":"union with","\\cap":"intersection with","\\int":"integral","\\iint":"surface integral","\\oint":"curve integral","\\iiint":"volume integral","\\iff":"if and only if","\\ln":"natural logarithm","\\boldsymbol":"bold","\\setminus":"set subtraction","\\stackrel":"relation with symbol above","\\stackbin":"operator with symbol above","\\underset":"symbol with annotation below","\\overset":"symbol with annotation above","\\hslash":["h-bar","Planck constant"],"\\gtrsim":"greater than or <br>similar to","\\propto":"proportional to","\\equiv":"equivalent to","\\!":["negative thin space","(-3 mu)"],"\\ ":["space","(6 mu)"],"\\,":["thin space","(3 mu)"],"\\:":["medium space","(4 mu)"],"\\;":["thick space","(5 mu)"],"\\quad":["1 em space","(18 mu)"],"\\qquad":["2 em space","(36 mu)"],"\\enskip":["&#189; em space","(9 mu)"],"\\mp":"minus or plus","\\pm":"plus or minus","\\Im":"Imaginary part of","\\Re":"Real part of","\\gothicCapitalR":"Real part of","\\gothicCapitalI":"Imaginary part part of","\\differentialD":"differential d","\\aleph":["aleph","infinite cardinal",'<a target="_blank" href="https://en.wikipedia.org/wiki/Cardinal_number">Wikipedia <big>&#x203A;</big></a>'],"\\beth":["beth","beth number",'<a target="_blank" href="https://en.wikipedia.org/wiki/Beth_number">Wikipedia <big>&#x203A;</big></a>'],"\\gimel":["gimel","gimel function",'<a target="_blank" href="https://en.wikipedia.org/wiki/Gimel_function">Wikipedia <big>&#x203A;</big></a>'],"\\O":"empty set","\\N":"set of <br>natural numbers","\\Z":"set of <br>integers","\\Q":"set of <br>rational numbers","\\C":"set of <br>complex numbers","\\R":"set of <br>real numbers","\\P":"set of <br>prime numbers","\\lesseqqgtr":"less than, equal to or<br> greater than","\\gnapprox":"greater than and <br>not approximately","\\lnapprox":"lesser than and <br>not approximately","\\j":"dotless j","\\i":"dotless i","\\cdot":"centered dot","\\lmoustache":"left moustache","\\rmoustache":"right moustache","\\nabla":["nabla","del","differential vector operator"],"\\square":["square","d’Alembert operator",'<a target="_blank" href="https://en.wikipedia.org/wiki/D%27Alembert_operator">Wikipedia <big>&#x203A;</big></a>'],"\\blacksquare":["black square","end of proof","tombstone","Halmos symbol"],"\\Box":"end of proof","\\colon":["such that","ratio"],"\\coloneq":["is defined by","is assigned"],"\\Colon":["is defined by","as"],"\\_":["underbar","underscore"],"\\ll":"much less than","\\gg":"much greater than","\\doteq":"approximately equal to","\\Doteq":"approximately equal to","\\doteqdot":"approximately equal to","\\cong":["isomorphism of","(for algebras, modules...)"],"\\det":["determinant of","(of a matrix)"],"\\dotplus":"Cartesian product algebra","\\otimes":["tensor product","(of algebras)","Kronecker product","(of matrices)"],"\\oplus":["direct sum","(of modules)"],"\\lb":"base-2 logarithm","\\lg":"base-10 logarithm","\\wp":["Weierstrass P",'<a target="_blank" href="https://en.wikipedia.org/wiki/Weierstrass%27s_elliptic_functions">Wikipedia <big>&#x203A;</big></a>'],"\\wr":["wreath product",'<a target="_blank" href="https://en.wikipedia.org/wiki/Wreath_product">Wikipedia <big>&#x203A;</big></a>'],"\\top":["tautology","Proposition P is universally true"],"\\bot":["contradiction","Proposition P is contradictory"],"\\mid":["probability","of event A given B"],"\\mho":["Siemens","electrical conductance in SI unit",'<a target="_blank" href="https://en.wikipedia.org/wiki/Siemens_(unit)">Wikipedia <big>&#x203A;</big></a>'],"\\Longrightarrow":"implies","\\Longleftrightarrow":"if, and only if,","\\prec":"precedes","\\preceq":"precedes or is equal to","\\succ":"succeedes","\\succeq":"succeedes or is equal to","\\perp":["is perpendicular to","is independent of"],"\\models":["entails","double-turnstyle, models","is a semantic consequence of",'<a target="_blank" href="https://en.wikipedia.org/wiki/Double_turnstile">Wikipedia <big>&#x203A;</big></a>'],"\\vdash":["satisfies","turnstyle, assertion sign","syntactic inference",'<a target="_blank" href="https://en.wikipedia.org/wiki/Turnstile_(symbol)">Wikipedia <big>&#x203A;</big></a>'],"\\implies":["implies","logical consequence"],"\\impliedby":["implied by","logical consequence"],"\\surd":["surd","root of","checkmark"],"\\ltimes":["semi direct product",'<a target="_blank" href="https://en.wikipedia.org/wiki/Semidirect_product">Wikipedia <big>&#x203A;</big></a>'],"\\rtimes":["semi direct product",'<a target="_blank" href="https://en.wikipedia.org/wiki/Semidirect_product">Wikipedia <big>&#x203A;</big></a>'],"\\leftthreetimes":["semi direct product",'<a target="_blank" href="https://en.wikipedia.org/wiki/Semidirect_product">Wikipedia <big>&#x203A;</big></a>'],"\\rightthreetimes":["semi direct product",'<a target="_blank" href="https://en.wikipedia.org/wiki/Semidirect_product">Wikipedia <big>&#x203A;</big></a>'],"\\divideontimes":["divide on times"],"\\curlywedge":"nor","\\curlyvee":"nand","\\simeq":"is group isomorphic with","\\vartriangleleft":["is a normal subgroup of","is an ideal ring of"],"\\circ":["circle","ring","function composition"],"\\rlap":["overlap right","\\rlap{x}o"],"\\llap":["overlap left","o\\llap{/}"],"\\colorbox":["color box","\\colorbox{#fbc0bd}{...}"],"\\ast":["asterisk","reflexive closure (as a superscript)"],"\\bullet":"bullet","\\lim":"limit"};function ii(t){let e=ei[t]||"";return Array.isArray(e)&&(e=e.join("<br>")),e}function ni(t,e){t.popover.innerHTML=e;const i=t._getCaretPosition();i&&ri(t,i),t.popover.classList.add("is-visible")}function ri(t,e){const i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,r=window.innerWidth-document.documentElement.clientWidth,s=window.innerHeight-document.documentElement.clientHeight,o=t.virtualKeyboardVisible?t.virtualKeyboard.offsetHeight:0;e.x+t.popover.offsetWidth/2>n-r?t.popover.style.left=n-t.popover.offsetWidth-r+"px":e.x-t.popover.offsetWidth/2<0?t.popover.style.left=0:t.popover.style.left=e.x-t.popover.offsetWidth/2+"px",e.y+t.popover.offsetHeight+5>i-s-o?(t.popover.classList.add("reverse-direction"),t.popover.style.top=e.y-e.height-t.popover.offsetHeight-5+"px"):(t.popover.classList.remove("reverse-direction"),t.popover.style.top=e.y+5+"px")}function si(t){t.popover.classList.remove("is-visible")}var oi={getNote:ii,SAMPLES:ti,NOTES:ei,showPopoverWithLatex:function(t,e,i){if(!e||0===e.length)return void si(t);const n=e,r=function(t,e){const i=ve.parseTokens(v.tokenize(t),"math",null,e.config.macros),n=he.decompose({mathstyle:"displaystyle",macros:e.config.macros},i),r=tt.makeSpan(n,"ML__base"),s=tt.makeSpan("","ML__strut");s.setStyle("height",r.height,"em");const o=tt.makeSpan("","ML__strut--bottom");return o.setStyle("height",r.height+r.depth,"em"),o.setStyle("vertical-align",-r.depth,"em"),tt.makeSpan([s,o,r],"ML__mathlive").toMarkup()}(ti[n]||e,t),s=ii(n),o=Le.forCommand(n);let a=i?'<div class="ML__popover__prev-shortcut" role="button" aria-label="Previous suggestion"><span><span>&#x25B2;</span></span></div>':"";a+='<span class="ML__popover__content" role="button">',a+='<div class="ML__popover__command">'+r+"</div>",s&&(a+='<div class="ML__popover__note">'+s+"</div>"),o&&(a+='<div class="ML__popover__shortcut">'+o+"</div>"),a+="</span>",ni(t,a+=i?'<div class="ML__popover__next-shortcut" role="button" aria-label="Next suggestion"><span><span>&#x25BC;</span></span></div>':"");let l=t.popover.getElementsByClassName("ML__popover__content");l&&l.length>0&&t._attachButtonHandlers(l[0],["complete",{acceptSuggestion:!0}]),(l=t.popover.getElementsByClassName("ML__popover__prev-shortcut"))&&l.length>0&&t._attachButtonHandlers(l[0],"previousSuggestion"),(l=t.popover.getElementsByClassName("ML__popover__next-shortcut"))&&l.length>0&&t._attachButtonHandlers(l[0],"nextSuggestion")},showPopover:ni,hidePopover:si,updatePopoverPosition:function t(e,i){if(e.element&&e.element.mathfield===e&&e.popover.classList.contains("is-visible"))if(i&&i.deferred)window.requestAnimationFrame(()=>t(e));else if(e.mathlist.anchor()&&"command"===e.mathlist.anchor().type){const t=e._getCaretPosition();t&&ri(e,t)}else si(e)}};function ai(t,e,i){let n="";if(Array.isArray(e)&&e.length>0){if("first"===e[0].type&&0===(e=e.slice(1)).length)return"";n=function t(e,i,n,r){if(0===n.length)return"";if(0===i.length)return n.map(t=>t.toLatex(r)).join("");let s="",o="",a="";const l=i[0];let c=n[0][l];"fontFamily"===l&&(c=n[0].fontFamily||n[0].baseFontFamily);const u=function(t,e,i){let n=0;if("fontFamily"===e)for(;t[n]&&("mop"===t[n].type||(t[n].fontFamily||t[n].baseFontFamily)===i);)n++;else for(;t[n]&&("mop"===t[n].type||t[n][e]===i);)n++;return n}(n,l,c);if("text"===n[0].mode){if("fontShape"===l&&n[0].fontShape)"it"===n[0].fontShape?(o="\\textit{",a="}"):"sl"===n[0].fontShape?(o="\\textsl{",a="}"):"sc"===n[0].fontShape?(o="\\textsc{",a="}"):"n"===n[0].fontShape?(o="\\textup{",a="}"):(o="\\text{\\fontshape{"+n[0].fontShape+"}",a="}");else if("fontSeries"===l&&n[0].fontSeries)"b"===n[0].fontSeries?(o="\\textbf{",a="}"):"l"===n[0].fontSeries?(o="\\textlf{",a="}"):"m"===n[0].fontSeries?(o="\\textmd{",a="}"):(o="\\text{\\fontseries{"+n[0].fontSeries+"}",a="}");else if("mode"===l){let t=!0;for(let e=0;e<u;e++)if(!(n[e].fontSeries||n[e].fontShape||n[e].fontFamily||n[e].baseFontFamily)){t=!1;break}t||(o="\\text{",a="}")}else if("fontSize"===l&&n[0].fontSize)o="{\\"+({size1:"tiny",size2:"scriptsize",size3:"footnotesize",size4:"small",size5:"normalsize",size6:"large",size7:"Large",size8:"LARGE",size9:"huge",size10:"Huge"}[n[0].fontSize]||"")+" ",a="}";else if("fontFamily"===l&&(n[0].fontFamily||n[0].baseFontFamily)){const t={cmr:"textrm",cmtt:"texttt",cmss:"textsf"}[n[0].fontFamily||n[0].baseFontFamily]||"";t?(o="\\"+t+"{",a="}"):(o+="{\\fontfamily{"+(n[0].fontFamily||n[0].baseFontFamily)+"}",a="}")}}else if("math"===n[0].mode)if("fontSeries"===l)"b"===n[0].fontSeries?(o="\\mathbf{",a="}"):n[0].fontSeries&&"n"!==n[0].fontSeries&&(o="{\\fontSeries{"+n[0].fontSeries+"}",a="}");else if("fontShape"===l)"it"===n[0].fontShape?(o="\\mathit{",a="}"):"n"===n[0].fontShape?(o="{\\upshape ",a="}"):n[0].fontShape&&"n"!==n[0].fontShape&&(o="{\\fontShape{"+n[0].fontShape+"}",a="}");else if("fontSize"===l&&n[0].fontSize)o="{\\"+({size1:"tiny",size2:"scriptsize",size3:"footnotesize",size4:"small",size5:"normalsize",size6:"large",size7:"Large",size8:"LARGE",size9:"huge",size10:"Huge"}[n[0].fontSize]||"")+" ",a="}";else if("fontFamily"===l&&n[0].fontFamily){if(!/^(math|main)$/.test(n[0].fontFamily)){const s={cal:"mathcal",frak:"mathfrak",bb:"mathbb",scr:"mathscr",cmr:"mathrm",cmtt:"mathtt",cmss:"mathsf"}[n[0].fontFamily]||"";if(s){if(/^\\operatorname{/.test(n[0].latex))return n[0].latex+t(e,i,n.slice(u),r);n[0].isFunction||(o="\\"+s+"{",a="}"),i=[]}else o+="{\\fontfamily{"+n[0].fontFamily+"}",a="}"}}else if("fontFamily"===l&&n[0].baseFontFamily)if(n[0].latex&&n[0].latex.startsWith("\\"))o="",a="";else{const t={cal:"mathcal",frak:"mathfrak",bb:"mathbb",scr:"mathscr",cmr:"mathrm",cmtt:"mathtt",cmss:"mathsf"}[n[0].baseFontFamily]||"";t&&(o="\\"+t+"{",a="}")}return"color"!==l||!n[0].color||"none"===n[0].color||e&&e.color===n[0].color||(o="\\textcolor{"+fe.colorToString(n[0].color)+"}{",a="}"),"backgroundColor"!==l||!n[0].backgroundColor||"none"===n[0].backgroundColor||e&&e.backgroundColor===n[0].backgroundColor||(o="\\colorbox{"+fe.colorToString(n[0].backgroundColor)+"}{",a="}"),s+=o,s+=t(e,i.slice(1),n.slice(0,u),r),s+=a,s+=t(e,i,n.slice(u),r)}(t,["mode","color","backgroundColor","fontSize","fontFamily","fontShape","fontSeries"],e,i)}else"number"==typeof e||"boolean"==typeof e?n=e.toString():"string"==typeof e?n=e.replace(/\s/g,"~"):e&&"function"==typeof e.toLatex&&(n=e.toLatex(i));return n}function li(t){const e=li.locale.substring(0,2);let i="";return li.strings[li.locale]&&(i=li.strings[li.locale][t]),!i&&li.strings[e]&&(i=li.strings[e][t]),i||(i=li.strings.en[t]),i||(i=t),i}he.MathAtom.prototype.toLatex=function(t){t=void 0!==t&&t;let e,i="",n=0,r=0;const s=this.latex?this.latex.match(/^(\\[^{\s0-9]+)/):null,o=s?s[1]:null;switch(this.type){case"group":i+=this.latexOpen||(this.cssId||this.cssClass?"":"{"),this.cssId&&(i+="\\cssId{"+this.cssId+"}{"),"ML__emph"===this.cssClass?i+="\\emph{"+ai(this,this.body,t)+"}":(this.cssClass&&(i+="\\class{"+this.cssClass+"}{"),i+=t?ai(this,this.body,!0):this.latex||ai(this,this.body,!1),this.cssClass&&(i+="}")),this.cssId&&(i+="}"),i+=this.latexClose||(this.cssId||this.cssClass?"":"}");break;case"array":if(i+="\\begin{"+this.env.name+"}","array"===this.env.name){if(i+="{",this.colFormat)for(r=0;r<this.colFormat.length;r++)this.colFormat[r].align?i+=this.colFormat[r].align:this.colFormat[r].rule&&(i+="|");i+="}"}for(n=0;n<this.array.length;n++){for(e=0;e<this.array[n].length;e++)e>0&&(i+=" & "),i+=ai(this,this.array[n][e],t);n<this.array.length-1&&(i+=" \\\\ ")}i+="\\end{"+this.env.name+"}";break;case"root":i=ai(this,this.body,t);break;case"genfrac":/^(choose|atop|over)$/.test(this.body)?(i+="{",i+=ai(this,this.numer,t),i+="\\"+this.body+" ",i+=ai(this,this.denom,t),i+="}"):(i+=o,i+=`{${ai(this,this.numer,t)}}{${ai(this,this.denom,t)}}`);break;case"surd":i+="\\sqrt",this.index&&(i+="[",i+=ai(this,this.index,t),i+="]"),i+=`{${ai(this,this.body,t)}}`;break;case"leftright":this.inner?(i+="\\left"+(this.leftDelim||"."),this.leftDelim&&this.leftDelim.length>1&&(i+=" "),i+=ai(this,this.body,t),i+="\\right"+(this.rightDelim||"."),this.rightDelim&&this.rightDelim.length>1&&(i+=" ")):(i+="\\mleft"+(this.leftDelim||"."),this.leftDelim&&this.leftDelim.length>1&&(i+=" "),i+=ai(this,this.body,t),i+="\\mright"+(this.rightDelim||"."),this.rightDelim&&this.rightDelim.length>1&&(i+=" "));break;case"delim":case"sizeddelim":i+=o+"{"+this.delim+"}";break;case"rule":i+=o,this.shift&&(i+=`[${ai(this,this.shift,t)}em]`),i+=`{${ai(this,this.width,t)}em}{${ai(this,this.height,t)}em}`;break;case"line":case"overlap":case"accent":i+=`${o}{${ai(this,this.body,t)}}`;break;case"overunder":i+=`${o}{${ai(this,this.overscript||this.underscript,t)}}{${ai(parent,this.body,t)}}`;break;case"mord":case"minner":case"mbin":case"mrel":case"mpunct":case"mopen":case"mclose":case"textord":case"":/^\\(mathbin|mathrel|mathopen|mathclose|mathpunct|mathord|mathinner)/.test(o)?i+=o+"{"+ai(this,this.body,t)+"}":'\\char"'===o?i+=this.latex+" ":"\\unicode"===o?(i+='\\unicode{"',i+=("000000"+this.body.charCodeAt(0).toString(16)).toUpperCase().substr(-6),i+="}"):(this.latex||"string"==typeof this.body)&&(this.latex&&"\\"===this.latex[0]?(i+=this.latex,/[a-zA-Z0-9]$/.test(this.latex)&&(i+=" ")):i+=o||("​"!==this.body?this.latex||this.body:""));break;case"mop":"​"!==this.body&&("\\mathop"===o?i+=o+"{"+ai(this,this.body,t)+"}":"\\operatorname"===o?i+=o+"{"+this.body+"}":this.latex&&"\\"===this.latex[0]?(i+=this.latex,/[a-zA-Z0-9]$/.test(this.latex)&&(i+=" ")):i+=o||("​"!==this.body?this.latex||this.body:"")),this.explicitLimits&&("limits"===this.limits&&(i+="\\limits "),"nolimits"===this.limits&&(i+="\\nolimits "));break;case"box":if("\\bbox"===o){if(i+=o,isFinite(this.padding)||void 0!==this.border||void 0!==this.backgroundcolor){const t=[];isFinite(this.padding)&&t.push(Math.floor(100*this.padding)/100+"em"),this.border&&t.push("border:"+this.border),this.backgroundcolor&&t.push(fe.colorToString(this.backgroundcolor)),i+=`[${t.join(",")}]`}i+=`{${ai(this,this.body,t)}}`}else"\\boxed"===o?i+=`\\boxed{${ai(this,this.body,t)}}`:(i+=o,this.framecolor&&(i+=`{${fe.colorToString(this.framecolor)}}`),this.backgroundcolor&&(i+=`{${fe.colorToString(this.backgroundcolor)}}`),i+=`{${ai(this,this.body,t)}}`);break;case"spacing":i+=o,"\\hspace"===o||"\\hspace*"===o?(i+="{",this.width?i+=this.width+"em":i+="0em",i+="}"):(i+=" ",this.width&&(i+=this.width+"em "));break;case"enclose":if(i+=o,"\\enclose"===o){i+="{";let t="";for(const e in this.notation)Object.prototype.hasOwnProperty.call(this.notation,e)&&this.notation[e]&&(i+=t+e,t=" ");i+="}";let e="";t="",this.backgroundcolor&&"transparent"!==this.backgroundcolor&&(e+=t+'mathbackground="'+fe.colorToString(this.backgroundcolor)+'"',t=","),this.shadow&&"auto"!==this.shadow&&(e+=t+'shadow="'+this.shadow+'"',t=","),1!==this.strokeWidth||"solid"!==this.strokeStyle?(e+=t+this.borderStyle,t=","):this.strokeColor&&"currentColor"!==this.strokeColor&&(e+=t+'mathcolor="'+fe.colorToString(this.strokeColor)+'"',t=","),e&&(i+=`[${e}]`)}i+=`{${ai(this,this.body,t)}}`;break;case"mathstyle":i+="\\"+this.mathstyle+" ";break;case"space":i+=this.latex;break;case"placeholder":i+="\\placeholder{"+(this.value||"")+"}";break;case"first":case"command":case"msubsup":break;case"error":i+=this.latex}if(this.superscript){let e=ai(this,this.superscript,t);1===e.length?("′"===e?e="\\prime ":"″"===e&&(e="\\doubleprime "),i+="^"+e):i+="^{"+e+"}"}if(this.subscript){const e=ai(this,this.subscript,t);1===e.length?i+="_"+e:i+="_{"+e+"}"}return i},li.plural=function(t,e,i){(i=i||{}).type=i.type||"cardinal";const n=li.locale.substring(0,2),r="ordinal"===i.type?li.ordinal:li.cardinal;let s,o="ordinal"===i.type?li._ordinalPluralCategories.indexOf(r.select(t)):li._cardinalPluralCategories.indexOf(r.select(t));return li.strings[li.locale]&&(s=li.strings[li.locale][e]),!s&&li.strings[n]&&(s=li.strings[n][e]),s||((s=li.strings.en[e])||(s=e),o="ordinal"===i.type?li._ordinalPluralCategories.indexOf(li._ordinalEnglish.select(t)):li._cardinalPluralCategories.indexOf(li._cardinalEnglish.select(t))),s.split(";")[o]||s.split(";")[0]},li.merge=function(t,e){if(t&&e){const i=li._locale;li.locale=t,li.strings[t]={...li.strings[t],...e},li.locale=i}else t&&!e&&(e=t,Object.keys(e).forEach(t=>li.merge(t,e[t])))},Object.defineProperty(li,"locale",{set(t){li._locale=t,li._ordinal=null,li._cardinal=null},get:()=>(li._locale||(li._locale="undefined"==typeof navigator?"en":navigator.language.slice(0,5)),li._locale)}),Object.defineProperty(li,"ordinal",{get:()=>(li._ordinal||(li._ordinalEnglish=new Intl.PluralRules("en",{type:"ordinal"}),li._ordinalEnglishPluralCategories=li._ordinalEnglish.resolvedOptions().pluralCategories,li._ordinal=new Intl.PluralRules(li.locale,{type:"ordinal"}),li._ordinalPluralCategories=li._ordinal.resolvedOptions().pluralCategories),li._ordinal)}),Object.defineProperty(li,"cardinal",{get:()=>(li._cardinal||(li._cardinalEnglish=new Intl.PluralRules("en",{type:"cardinal"}),li._cardinalEnglishPluralCategories=li._cardinalEnglish.resolvedOptions().pluralCategories,li._cardinal=new Intl.PluralRules(li.locale,{type:"cardinal"}),li._cardinaPluralCategories=li._ordinal.resolvedOptions().pluralCategories),li._cardinal)}),li.strings={en:{"keyboard.tooltip.functions":"Functions","keyboard.tooltip.greek":"Greek Letters","keyboard.tooltip.command":"LaTeX Command Mode","keyboard.tooltip.numeric":"Numeric","keyboard.tooltip.roman":"Symbols and Roman Letters","tooltip.copy to clipboard":"Copy to Clipboard","tooltip.redo":"Redo","tooltip.toggle virtual keyboard":"Toggle Virtual Keyboard","tooltip.undo":"Undo"},ar:{"keyboard.tooltip.functions":"مهام","keyboard.tooltip.greek":"حروف يونانية","keyboard.tooltip.command":"حالة تلقي الأوامر اللاتك","keyboard.tooltip.numeric":"الرقمية","keyboard.tooltip.roman":"رموز الاحرف الرومانية","tooltip.copy to clipboard":"نسخ إلى الحافظة","tooltip.redo":"الإعادة","tooltip.toggle virtual keyboard":"تبديل لوحة المفاتيح الإفتراضية","tooltip.undo":"إلغاء"},de:{"keyboard.tooltip.functions":"Funktionen","keyboard.tooltip.greek":"Griechische Buchstaben","keyboard.tooltip.command":"LaTeX-Befehlsmodus","keyboard.tooltip.numeric":"Numerisch","keyboard.tooltip.roman":"Symbole und römische Buchstaben","tooltip.copy to clipboard":"In die Zwischenablage kopieren","tooltip.redo":"Wiederholen","tooltip.toggle virtual keyboard":"Virtuelle Tastatur umschalten","tooltip.undo":"Widerrufen"},el:{"keyboard.tooltip.functions":"συναρτήσεις","keyboard.tooltip.greek":"ελληνικά γράμματα","keyboard.tooltip.command":"Λειτουργία εντολών LaTeX","keyboard.tooltip.numeric":"Αριθμητικός","keyboard.tooltip.roman":"Σύμβολα και ρωμαϊκά γράμματα","tooltip.copy to clipboard":"Αντιγραφή στο πρόχειρο","tooltip.redo":"Ξανακάνω","tooltip.toggle virtual keyboard":"Εναλλαγή εικονικού πληκτρολογίου","tooltip.undo":"Ξεκάνω"},es:{"keyboard.tooltip.functions":"Funciones","keyboard.tooltip.greek":"Letras griegas","keyboard.tooltip.command":"Modo Comando LaTeX","keyboard.tooltip.numeric":"Numérico","keyboard.tooltip.roman":"Símbolos y letras romanas","tooltip.copy to clipboard":"Copiar al portapapeles","tooltip.redo":"Rehacer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Deshacer"},fa:{"keyboard.tooltip.functions":"توابع","keyboard.tooltip.greek":"حروف یونانی","keyboard.tooltip.command":"حالت دستور لاتک","keyboard.tooltip.numeric":"عددی","keyboard.tooltip.roman":"علائم و حروف لاتین","tooltip.copy to clipboard":"کپی به کلیپبورد","tooltip.redo":"بازگشت به بعد","tooltip.toggle virtual keyboard":"نمایش/نهفتن کیبورد مجازی","tooltip.undo":"بازگشت به قبل"},fr:{"keyboard.tooltip.functions":"Fonctions","keyboard.tooltip.greek":"Lettres grecques","keyboard.tooltip.command":"Mode de commandes LaTeX","keyboard.tooltip.numeric":"Numérique","keyboard.tooltip.roman":"Lettres et symboles romains","tooltip.copy to clipboard":"Copier dans le presse-papiers","tooltip.redo":"Rétablir","tooltip.toggle virtual keyboard":"Afficher/Masquer le clavier virtuel","tooltip.undo":"Annuler"},it:{"keyboard.tooltip.functions":"Funzioni","keyboard.tooltip.greek":"Lettere greche","keyboard.tooltip.command":"Modalità di comando LaTeX","keyboard.tooltip.numeric":"Numerico","keyboard.tooltip.roman":"Simboli e lettere romane","tooltip.copy to clipboard":"Copia negli appunti","tooltip.redo":"Rifare","tooltip.toggle virtual keyboard":"Attiva / disattiva la tastiera virtuale","tooltip.undo":"Disfare"},ja:{"keyboard.tooltip.functions":"関数","keyboard.tooltip.greek":"ギリシャ文字","keyboard.tooltip.command":"LaTeXコマンドモード","keyboard.tooltip.numeric":"数値","keyboard.tooltip.roman":"記号とローマ字","tooltip.copy to clipboard":"クリップボードにコピー","tooltip.redo":"やり直し","tooltip.toggle virtual keyboard":"仮想キーボードの切り替え","tooltip.undo":"元に戻す"},pl:{"keyboard.tooltip.functions":"Funkcje","keyboard.tooltip.greek":"Litery greckie","keyboard.tooltip.command":"Tryb poleceń LaTeX","keyboard.tooltip.numeric":"Numeryczne","keyboard.tooltip.roman":"Symbole i litery rzymskie","tooltip.copy to clipboard":"Kopiuj do Schowka","tooltip.redo":"Przywróć","tooltip.toggle virtual keyboard":"Przełącz wirtualną klawiaturę","tooltip.undo":"Cofnij"},ru:{"keyboard.tooltip.functions":"Функции","keyboard.tooltip.greek":"Греческие буквы","keyboard.tooltip.command":"Режим командной строки LaTeX","keyboard.tooltip.numeric":"числовой","keyboard.tooltip.roman":"Символы и римские буквы","tooltip.copy to clipboard":"Скопировать в буфер обмена","tooltip.redo":"переделывать","tooltip.toggle virtual keyboard":"Переключить виртуальную клавиатуру","tooltip.undo":"расстегивать"}};const ci={numeric:{tooltip:"keyboard.tooltip.numeric",layer:"math",label:"123",layers:["math"]},roman:{tooltip:"keyboard.tooltip.roman",layer:"lower-roman",label:"ABC",layers:["lower-roman","upper-roman","symbols"]},greek:{tooltip:"keyboard.tooltip.greek",layer:"lower-greek",label:"&alpha;&beta;&gamma;",classes:"tex-math",layers:["lower-greek","upper-greek"]},functions:{tooltip:"keyboard.tooltip.functions",layer:"functions",label:"<i>f</i>&thinsp;()",classes:"tex",layers:["functions"]},command:{tooltip:"keyboard.tooltip.command",command:"enterCommandMode",label:"<svg><use xlink:href='#svg-command' /></svg>",layers:["lower-command","upper-command","symbols-command"]},style:{tooltip:"keyboard.tooltip.style",layer:"style",label:"<b>b</b><i>i</i>𝔹"}},ui={"\\varphi ":{label:"&Phi;",insert:"\\Phi "},"\\varsigma ":{label:"&Sigma;",insert:"\\Sigma "},"\\epsilon ":{label:"&#x0190;",insert:'{\\char"0190}'},"\\rho ":{label:"&#x3A1",insert:'{\\char"3A1}'},"\\tau ":{label:"&#x3A4;",insert:'{\\char"3A4}'},"\\upsilon ":{label:"&Upsilon;",insert:"\\Upsilon "},"\\theta ":{label:"&Theta;",insert:"\\Theta "},"\\iota ":{label:"&Iota;",insert:'{\\char"399}'},"\\omicron ":{label:"&#x039F;",insert:'{\\char"39F}'},"\\pi ":{label:"&Pi;",insert:"\\Pi "},"\\alpha ":{label:"&Alpha;",insert:'{\\char"391}'},"\\sigma ":{label:"&Sigma;",insert:"\\Sigma "},"\\delta ":{label:"&Delta;",insert:"\\Delta "},"\\phi ":{label:"&#x03a6;",insert:"\\Phi "},"\\gamma ":{label:"&Gamma;",insert:"\\Gamma "},"\\eta ":{label:"&Eta;",insert:'{\\char"397}'},"\\xi ":{label:"&Xi;",insert:"\\Xi "},"\\kappa ":{label:"&Kappa;",insert:'{\\char"39A}'},"\\lambda ":{label:"&Lambda;",insert:"\\Lambda "},"\\zeta ":{label:"&Zeta;",insert:'{\\char"396}'},"\\chi ":{label:"&Chi;",insert:'{\\char"3A7}'},"\\psi ":{label:"&Psi;",insert:"\\Psi "},"\\omega ":{label:"&Omega;",insert:"\\Omega "},"\\beta ":{label:"&Beta;",insert:'{\\char"392}'},"\\nu ":{label:"&Nu;",insert:'{\\char"39D}'},"\\mu ":{label:"&Mu;",insert:'{\\char"39C}'}},hi={0:["\\emptyset","\\varnothing","\\infty",{latex:"#?_0",insert:"#@_0"},"\\circ","\\bigcirc","\\bullet"],2:["\\frac{1}{2}",{latex:"#?^2",insert:"#@^2"}],3:["\\frac{1}{3}",{latex:"#?^3",insert:"#@^3"}],".":[",",";","\\colon",{latex:":",aside:"ratio"},{latex:"\\cdotp",aside:"center dot",classes:"box"},{latex:"\\cdots",aside:"center ellipsis",classes:"box"},{latex:"\\ldotp",aside:"low dot",classes:"box"},{latex:"\\ldots",aside:"low ellipsis",classes:"box"},{latex:"\\vdots",aside:"",classes:"box"},{latex:"\\ddots",aside:"",classes:"box"},"\\odot","\\oslash","\\circledcirc"],"*":["\\cdot","\\ast","\\star","\\bigstar","\\ltimes","\\rtimes","\\rightthreetimes","\\leftthreetimes","\\intercal","\\prod",{latex:"\\prod_{n\\mathop=0}^{\\infty}",classes:"small"}],"+":["\\pm","\\mp","\\sum",{latex:"\\sum_{n\\mathop=0}^{\\infty}",classes:"small"},"\\dotplus","\\oplus"],"-":["\\pm","\\mp","\\ominus","\\vert #0  \\vert"],"/":["\\divideontimes","/","\\div"],"(":["\\left( #0\\right)","\\left[ #0\\right]","\\left\\{ #0\\right\\}","\\left\\langle #0\\right\\rangle","\\lfloor","\\llcorner","(","\\lbrack","\\lvert","\\lVert","\\lgroup","\\langle","\\lceil","\\ulcorner","\\lmoustache","\\lbrace"],")":["\\rfloor","\\lrcorner",")","\\rbrack","\\rvert","\\rVert","\\rgroup","\\rangle","\\rceil","\\urcorner","\\rmoustache","\\rbrace"],"=":["\\cong","\\asymp","\\equiv","\\differencedelta","\\varpropto","\\thickapprox","\\approxeq","\\thicksim","\\backsim","\\eqsim","\\simeq","\\Bumpeq","\\bumpeq","\\doteq","\\Doteq","\\fallingdotseq","\\risingdotseq","\\coloneq","\\eqcirc","\\circeq","\\triangleq","\\between"],"!=":["\\neq","\\ncong","","\\nsim"],"<":["\\leq","\\leqq","\\lneqq","\\ll","\\nless","\\nleq","\\precsim","\\lesssim","\\lessgtr","\\prec","\\preccurlyeq","\\lessdot","\\nprec"],">":["\\geq","\\geqq","\\gneqq","\\gg","\\ngtr","\\ngeq","\\succsim","\\gtrsim","\\gtrless","\\succ","\\succcurlyeq","\\gtrdot","\\nsucc"],set:["\\in","\\owns","\\subset","\\nsubset","\\supset","\\nsupset"],"!set":["\\notin","\\backepsilon"],subset:[],supset:[],infinity:["\\aleph_0","\\aleph_1","\\omega","\\mathfrak{m}"],"numeric-pi":["\\prod","\\theta","\\rho","\\sin","\\cos","\\tan"],ee:["\\times 10^{#?}","\\ln","\\ln_{10}","\\log"],"^":["_{#?}"],int:[{latex:"\\int_{#?}^{#?}",classes:"small"},{latex:"\\int",classes:"small"},{latex:"\\smallint",classes:"small"},{latex:"\\iint",classes:"small"},{latex:"\\iiint",classes:"small"},{latex:"\\oint",classes:"small"},{latex:"\\dfrac{\\rd}{\\rd x}",classes:"small"},{latex:"\\frac{\\partial}{\\partial x}",classes:"small"},"\\capitalDifferentialD","\\rd","\\partial"],nabla:["\\nabla\\times","\\nabla\\cdot","\\nabla^{2}"],"!":["!!","\\Gamma","\\Pi"],accents:["\\bar{#@}","\\vec{#@}","\\hat{#@}","\\check{#@}","\\dot{#@}","\\ddot{#@}","\\mathring{#@}","\\breve{#@}","\\acute{#@}","\\tilde{#@}","\\grave{#@}"],A:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"}],a:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"}],b:[{latex:"\\beth",aside:"beth"}],B:[{latex:"\\beth",aside:"beth"}],c:[{latex:"\\C",aside:"set of complex numbers"}],d:[{latex:"\\daleth",aside:"daleth"}],D:[{latex:"\\daleth",aside:"daleth"}],e:[{latex:"\\exponentialE",aside:"exponential e"},{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isn’t"}],g:[{latex:"\\gimel",aside:"gimel"}],G:[{latex:"\\gimel",aside:"gimel"}],h:[{latex:"\\hbar",aside:"h bar"},{latex:"\\hslash",aside:"h slash"}],i:[{latex:"\\imaginaryI",aside:"imaginary i"}],j:[{latex:"\\imaginaryJ",aside:"imaginary j"}],l:[{latex:"\\ell",aside:"ell"}],n:[{latex:"\\N",aside:"set of natural numbers"}],p:[{latex:"\\P",aside:"set of primes"}],q:[{latex:"\\Q",aside:"set of rational numbers"}],r:[{latex:"\\R",aside:"set of real numbers"}],z:[{latex:"\\Z",aside:"set of integers"}],"x-var":["y","z","t","r",{latex:"f(#?)",classes:"small"},{latex:"g(#?)",classes:"small"},"x^2","x^n","x_n","x_{n+1}","x_i","x_{i+1}"],"n-var":["i","j","p","k","a","u"],ii:["\\Re","\\Im","\\imaginaryJ","\\Vert #0 \\Vert"],logic:[{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isn’t"},{latex:"\\ni",aside:"such that"},{latex:"\\Colon",aside:"such that"},{latex:"\\implies",aside:"implies"},{latex:"\\impliedby",aside:"implied by"},{latex:"\\iff",aside:"if and only if"},{latex:"\\land",aside:"and"},{latex:"\\lor",aside:"or"},{latex:"\\oplus",aside:"xor"},{latex:"\\lnot",aside:"not"},{latex:"\\downarrow",aside:"nor"},{latex:"\\uparrow",aside:"nand"},{latex:"\\curlywedge",aside:"nor"},{latex:"\\bar\\curlywedge",aside:"nand"},{latex:"\\therefore",aside:"therefore"},{latex:"\\because",aside:"because"},{latex:"^\\biconditional",aside:"biconditional"},"\\leftrightarrow","\\Leftrightarrow","\\to","\\models","\\vdash","\\gets","\\dashv","\\roundimplies"],"set-operators":["\\cap","\\cup","\\setminus","\\smallsetminus","\\complement"],"set-relations":["\\in","\\notin","\\ni","\\owns","\\subset","\\supset","\\subseteq","\\supseteq","\\subsetneq","\\supsetneq","\\varsubsetneq","\\subsetneqq","\\nsubset","\\nsupset","\\nsubseteq","\\nsupseteq"],space:[{latex:'\\char"203A\\!\\char"2039',insert:"\\!",aside:"negative thin space<br>⁻³⧸₁₈ em"},{latex:'\\unicode{"203A}\\,\\unicode{"2039}',insert:"\\,",aside:"thin space<br>³⧸₁₈ em"},{latex:'\\unicode{"203A}\\:\\unicode{"2039}',insert:"\\:",aside:"medium space<br>⁴⧸₁₈ em"},{latex:'\\unicode{"203A}\\;\\unicode{"2039}',insert:"\\;",aside:"thick space<br>⁵⧸₁₈ em"},{latex:'\\unicode{"203A}\\ \\unicode{"2039}',insert:"\\ ",aside:"⅓ em"},{latex:'\\unicode{"203A}\\enspace\\unicode{"2039}',insert:"\\enspace",aside:"½ em"},{latex:'\\unicode{"203A}\\quad\\unicode{"2039}',insert:"\\quad",aside:"1 em"},{latex:'\\unicode{"203A}\\qquad\\unicode{"2039}',insert:"\\qquad",aside:"2 em"}],delete:[{label:'<span class="warning"><svg><use xlink:href="#svg-trash" /></svg></span>',command:'"deleteAll"'}],"->|":[]};let di={};const pi={math:"\n        <div class='rows'>\n            <ul>\n                <li class='keycap tex' data-alt-keys='x-var'><i>x</i></li>\n                <li class='keycap tex' data-alt-keys='n-var'><i>n</i></li>\n                <li class='separator w5'></li>\n                <row name='numpad-1'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-key='ee' data-alt-keys='ee'>e</li>\n                <li class='keycap tex' data-key='ii' data-alt-keys='ii'>i</li>\n                <li class='keycap tex' data-latex='\\pi' data-alt-keys='numeric-pi'></li>\n            </ul>\n            <ul>\n                <li class='keycap tex' data-key='<' data-alt-keys='<'>&lt;</li>\n                <li class='keycap tex' data-key='>' data-alt-keys='>'>&gt;</li>\n                <li class='separator w5'></li>\n                <row name='numpad-2'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-alt-keys='x2' data-insert='#@^{2}'><span><i>x</i>&thinsp;²</span></li>\n                <li class='keycap tex' data-alt-keys='^' data-insert='#@^{#?}'><span><i>x</i><sup>&thinsp;<small>&#x2b1a;</small></sup></span></li>\n                <li class='keycap tex' data-alt-keys='sqrt' data-insert='\\sqrt{#0}' data-latex='\\sqrt{#0}'></li>\n            </ul>\n            <ul>\n                <li class='keycap tex' data-alt-keys='(' >(</li>\n                <li class='keycap tex' data-alt-keys=')' >)</li>\n                <li class='separator w5'></li>\n                <row name='numpad-3'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex small' data-alt-keys='int' data-latex='\\int_0^\\infty'><span></span></li>\n                <li class='keycap tex' data-latex='\\forall' data-alt-keys='logic' ></li>\n                <li class='action font-glyph bottom right' data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'>&#x232b;</li></ul>\n            </ul>\n            <ul>\n                <li class='keycap' data-alt-keys='foreground-color' data-command='[\"applyStyle\",{\"color\":\"#cc2428\"}]'><span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428; box-sizing: border-box'></span></li>\n                <li class='keycap' data-alt-keys='background-color' data-command='[\"applyStyle\",{\"backgroundColor\":\"#fff590\"}]'><span style='border-radius: 50%;width:22px;height:22px; background:#fff590; box-sizing: border-box'></span></li>\n                <li class='separator w5'></li>\n                <row name='numpad-4'/>\n                <li class='separator w5'></li>\n                <arrows/>\n            </ul>\n        </div>\n    ","lower-roman":"\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <row name='lower-1' shift-layer='upper-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <row name='lower-2'  shift-layer='upper-roman''/>\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <row name='lower-3'  shift-layer='upper-roman''/>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='symbols'>&infin;≠</li>\n                <li class='keycap' data-alt-keys=','>,</li>\n                <li class='keycap w50' data-key=' ' data-alt-keys='space'>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>","upper-roman":"\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <row name='upper-1'  shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <row name='upper-2' shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <row name='upper-3' shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='symbols'>&infin;≠</li>\n                <li class='keycap' data-alt-keys='.'>;</li>\n                <li class='keycap w50' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>",symbols:"\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\lbrace '>{</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\rbrace '>}</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-alt-keys='set' data-insert='\\in '>&#x2208;</li>\n                <li class='keycap tex' data-alt-keys='!set' data-insert='\\notin '>&#x2209;</li>\n                <li class='keycap tex' data-insert='\\Re '>&#x211c;<aside>Real</aside></li>\n                <li class='keycap tex' data-insert='\\Im '>&#x2111;<aside>Imaginary</aside></li>\n                <li class='keycap w15' data-insert='\\ulcorner#0\\urcorner '><span><sup>&#x250c;</sup><span><span style='color:#ddd'>o</span><sup>&#x2510;</sup></span><aside>ceil</aside></li>\n                <li class='keycap tex' data-alt-keys='nabla' data-insert='\\nabla '>&#x2207;<aside>nabla</aside></li>\n                <li class='keycap tex' data-alt-keys='infinity' data-insert='\\infty '>&#x221e;</li>\n\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\lbrack '>[</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\rbrack '>]</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-alt-keys='subset' data-insert='\\subset '>&#x2282;</li>\n                <li class='keycap tex' data-alt-keys='supset' data-insert='\\supset '>&#x2283;</li>\n                <li class='keycap tex' data-key='!' data-alt-keys='!'>!<aside>factorial</aside></li>\n                <li class='keycap' data-insert='^{\\prime} '><span><sup><span><span style='color:#ddd'>o</span>&#x2032</sup></span><aside>prime</aside></li>\n                <li class='keycap w15' data-insert='\\llcorner#0\\lrcorner '><span><sub>&#x2514;</sub><span style='color:#ddd'>o</span><sub>&#x2518;</sub></span><aside>floor</aside></li>\n                <li class='keycap tex' data-insert='\\partial '>&#x2202;<aside>partial<br>derivative</aside></li>\n                <li class='keycap tex' data-insert='\\emptyset '>&#x2205;<aside>empty set</aside></li>\n\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\langle '>&#x27e8;</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\rangle '>&#x27e9;</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-insert='\\subseteq '>&#x2286;</li>\n                <li class='keycap tex' data-insert='\\supseteq '>&#x2287;</li>\n                <li class='keycap tex' data-alt-keys='accents' data-insert='\\vec{#@}' data-latex='\\vec{#?}' data-aside='vector'></li>\n                <li class='keycap tex' data-alt-keys='accents' data-insert='\\bar{#@}' data-latex='\\bar{#?}' data-aside='bar'></li>\n                <li class='keycap tex' data-alt-keys='absnorm' data-insert='\\lvert #@ \\rvert ' data-latex='\\lvert #? \\rvert' data-aside='abs'></li>\n                <li class='keycap tex' data-insert='\\ast '>&#x2217;<aside>asterisk</aside></li>\n\n                <li class='action font-glyph bottom right w15'\n                    data-shifted='<span class=\"warning\"><svg><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'\n                >&#x232b;</li>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='lower-roman'>abc</li>\n                <li class='keycap tex' data-insert='\\cdot '>&#x22c5;<aside>centered dot</aside></li>\n                <li class='keycap tex' data-insert='\\colon '>:<aside>colon</aside></li>\n                <li class='keycap tex' data-insert='\\circ '>&#x2218;<aside>circle</aside></li>\n                <li class='keycap tex' data-insert='\\approx '>&#x2248;<aside>approx.</aside></li>\n                <li class='keycap tex' data-insert='\\ne '>&#x2260;</li>\n                <li class='keycap tex' data-insert='\\pm '>&#x00b1;</li>\n                <arrows/>\n            </ul>\n        </div>","lower-greek":"\n        <div class='rows'>\n            <ul><li class='keycap tex' data-insert='\\varphi '><i>&#x03c6;</i><aside>phi var.</aside></li>\n                <li class='keycap tex' data-insert='\\varsigma '><i>&#x03c2;</i><aside>sigma var.</aside></li>\n                <li class='keycap tex' data-insert='\\epsilon '><i>&#x03f5;</i></li>\n                <li class='keycap tex' data-insert='\\rho '><i>&rho;</i></li>\n                <li class='keycap tex' data-insert='\\tau '><i>&tau;</i></li>\n                <li class='keycap tex' data-insert='\\upsilon '><i>&upsilon;</i></li>\n                <li class='keycap tex' data-insert='\\theta '><i>&theta;</i></li>\n                <li class='keycap tex' data-insert='\\iota '><i>&iota;</i></li>\n                <li class='keycap tex' data-insert='\\omicron '>&omicron;</i></li>\n                <li class='keycap tex' data-insert='\\pi '><i>&pi;</i></li>\n            </ul>\n            <ul><li class='keycap tex' data-insert='\\alpha ' data-shifted='&Alpha;' data-shifted-command='[\"insert\",\"{\\\\char\\\"391}\"]'><i>&alpha;</i></li>\n                <li class='keycap tex' data-insert='\\sigma '><i>&sigma;</i></li>\n                <li class='keycap tex' data-insert='\\delta '><i>&delta;</i></li>\n                <li class='keycap tex' data-insert='\\phi '><i>&#x03d5;</i></i></li>\n                <li class='keycap tex' data-insert='\\gamma '><i>&gamma;</i></li>\n                <li class='keycap tex' data-insert='\\eta '><i>&eta;</i></li>\n                <li class='keycap tex' data-insert='\\xi '><i>&xi;</i></li>\n                <li class='keycap tex' data-insert='\\kappa '><i>&kappa;</i></li>\n                <li class='keycap tex' data-insert='\\lambda '><i>&lambda;</i></li>\n            </ul>\n            <ul><li class='shift modifier font-glyph bottom left w15 layer-switch' data-layer='upper-greek'>&#x21e7;</li>\n                <li class='keycap tex' data-insert='\\zeta '><i>&zeta;</i></li>\n                <li class='keycap tex' data-insert='\\chi '><i>&chi;</i></li>\n                <li class='keycap tex' data-insert='\\psi '><i>&psi;</i></li>\n                <li class='keycap tex' data-insert='\\omega '><i>&omega;</i></li>\n                <li class='keycap tex' data-insert='\\beta '><i>&beta;</i></li>\n                <li class='keycap tex' data-insert='\\nu '><i>&nu;</i></li>\n                <li class='keycap tex' data-insert='\\mu '><i>&mu;</i></li>\n                <li class='action font-glyph bottom right w15'\n                    data-shifted='<span class=\"warning\"><svg><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'\n                >&#x232b;</li>\n            </ul>\n            <ul>\n                <li class='keycap ' data-key=' '>&nbsp;</li>\n                <li class='keycap'>,</li>\n                <li class='keycap tex' data-insert='\\varepsilon '><i>&#x03b5;</i><aside>epsilon var.</aside></li>\n                <li class='keycap tex' data-insert='\\vartheta '><i>&#x03d1;</i><aside>theta var.</aside></li>\n                <li class='keycap tex' data-insert='\\varkappa '><i>&#x3f0;</i><aside>kappa var.</aside></li>\n                <li class='keycap tex' data-insert='\\varpi '><i>&#x03d6;<aside>pi var.</aside></i></li>\n                <li class='keycap tex' data-insert='\\varrho '><i>&#x03f1;</i><aside>rho var.</aside></li>\n                <arrows/>\n            </ul>\n        </div>","upper-greek":"\n        <div class='rows'>\n            <ul><li class='keycap tex' data-insert='\\Phi '>&Phi;<aside>phi</aside></li>\n                <li class='keycap tex' data-insert='\\Sigma '>&Sigma;<aside>sigma</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"0190}'>&#x0190;<aside>epsilon</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"3A1}'>&#x3A1;<aside>rho</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"3A4}'>&#x3A4;<aside>tau</aside></li>\n                <li class='keycap tex' data-insert='\\Upsilon '>&Upsilon;<aside>upsilon</aside></li>\n                <li class='keycap tex' data-insert='\\Theta '>&Theta;<aside>theta</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"399}'>&Iota;<aside>iota</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"39F}'>&#x039F;<aside>omicron</aside></li>\n                <li class='keycap tex' data-insert='\\Pi '>&Pi;<aside>pi</aside></li></ul>\n            <ul><li class='keycap tex' data-insert='{\\char\"391}'>&#x391;<aside>alpha</aside></li>\n                <li class='keycap tex' data-insert='\\Sigma '>&Sigma;<aside>sigma</aside></li>\n                <li class='keycap tex' data-insert='\\Delta '>&Delta;<aside>delta</aside></li>\n                <li class='keycap tex' data-insert='\\Phi '>&#x03a6;<aside>phi</aside></li>\n                <li class='keycap tex' data-insert='\\Gamma '>&Gamma;<aside>gamma</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"397}'>&Eta;<aside>eta</aside></li>\n                <li class='keycap tex' data-insert='\\Xi '>&Xi;<aside>xi</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"39A}'>&Kappa;<aside>kappa</aside></li>\n                <li class='keycap tex' data-insert='\\Lambda '>&Lambda;<aside>lambda</aside></li></ul>\n            <ul><li class='shift modifier font-glyph bottom left selected w15 layer-switch' data-layer='lower-greek'>&#x21e7;</li>\n                <li class='keycap tex' data-insert='{\\char\"396}'>&Zeta;<aside>zeta</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"3A7}'>&Chi;<aside>chi</aside></li>\n                <li class='keycap tex' data-insert='\\Psi '>&Psi;<aside>psi</aside></li>\n                <li class='keycap tex' data-insert='\\Omega '>&Omega;<aside>omega</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"392}'>&Beta;<aside>beta</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"39D}'>&Nu;<aside>nu</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"39C}'>&Mu;<aside>mu</aside></li>\n                <li class='action font-glyph bottom right w15' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'>&#x232b;</li></ul>\n            <ul>\n                <li class='separator w10'>&nbsp;</li>\n                <li class='keycap'>.</li>\n                <li class='keycap w50' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>","lower-command":"\n        <div class='rows'>\n            <ul><row name='lower-1' class='tt' shift-layer='upper-command'/></ul>\n            <ul><row name='lower-2' class='tt' shift-layer='upper-command'/></ul>\n            <ul><row name='lower-3' class='tt' shift-layer='upper-command'/></ul>\n            <ul>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='symbols-command'>01#</li>\n                <li class='keycap tt' data-shifted='[' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \"[\"]'>{</li>\n                <li class='keycap tt' data-shifted=']' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \"]\"]'>}</li>\n                <li class='keycap tt' data-shifted='(' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \"(\"]'>^</li>\n                <li class='keycap tt' data-shifted=')' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \")\"]'>_</li>\n                <li class='keycap w20' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>","upper-command":"\n        <div class='rows'>\n            <ul><row name='upper-1' class='tt' shift-layer='lower-command'/></ul>\n            <ul><row name='upper-2' class='tt' shift-layer='lower-command'/></ul>\n            <ul><row name='upper-3' class='tt' shift-layer='lower-command'/></ul>\n            <ul>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='symbols-command'01#</li>\n                <li class='keycap tt'>[</li>\n                <li class='keycap tt'>]</li>\n                <li class='keycap tt'>(</li>\n                <li class='keycap tt'>)</li>\n                <li class='keycap w20' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>","symbols-command":"\n        <div class='rows'>\n            <ul><li class='keycap tt'>1</li><li class='keycap tt'>2</li><li class='keycap tt'>3</li><li class='keycap tt'>4</li><li class='keycap tt'>5</li><li class='keycap tt'>6</li><li class='keycap tt'>7</li><li class='keycap tt'>8</li><li class='keycap tt'>9</li><li class='keycap tt'>0</li></ul>\n            <ul><li class='keycap tt'>!</li><li class='keycap tt'>@</li><li class='keycap tt'>#</li><li class='keycap tt'>$</li><li class='keycap tt'>%</li><li class='keycap tt'>^</li><li class='keycap tt'>&</li><li class='keycap tt'>*</li><li class='keycap tt'>+</li><li class='keycap tt'>=</li></ul>\n            <ul>\n                <li class='keycap tt'>\\</li>\n                <li class='keycap tt'>|</li>\n                <li class='keycap tt'>/</li>\n                <li class='keycap tt'>`</li>\n                <li class='keycap tt'>;</li>\n                <li class='keycap tt'>:</li>\n                <li class='keycap tt'>?</li>\n                <li class='keycap tt'>'</li>\n                <li class='keycap tt'>\"</li>\n                <li class='action font-glyph bottom right'\n                    data-shifted='<span class=\"warning\"><svg><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'\n                >&#x232b;</li>\n            </ul>\n            <ul>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='lower-command'>abc</li>\n                <li class='keycap tt'>&lt;</li>\n                <li class='keycap tt'>&gt;</li>\n                <li class='keycap tt'>~</li>\n                <li class='keycap tt'>,</li>\n                <li class='keycap tt'>.</li>\n                <li class='keycap' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>",functions:"\n        <div class='rows'>\n            <ul><li class='separator'></li>\n                <li class='fnbutton' data-insert='\\sin'></li>\n                <li class='fnbutton' data-insert='\\sin^{-1}'></li>\n                <li class='fnbutton' data-insert='\\ln'></li>\n                <li class='fnbutton' data-insert='\\exponentialE^{#?}'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{lcm}(#?)' data-latex='\\operatorname{lcm}()'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{ceil}(#?)' data-latex='\\operatorname{ceil}()'></li>\n                <li class='bigfnbutton' data-insert='\\lim_{n\\to\\infty}'></li>\n                <li class='bigfnbutton' data-insert='\\int'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{abs}(#?)' data-latex='\\operatorname{abs}()'></li>\n            </ul>\n            <ul><li class='separator'></li>\n                <li class='fnbutton' data-insert='\\cos'></li>\n                <li class='fnbutton' data-insert='\\cos^{-1}'></li>\n                <li class='fnbutton' data-insert='\\ln_{10}'></li>\n                <li class='fnbutton' data-insert='10^{#?}'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{gcd}(#?)' data-latex='\\operatorname{gcd}()'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{floor}(#?)' data-latex='\\operatorname{floor}()'></li>\n                <li class='bigfnbutton' data-insert='\\sum_{n\\mathop=0}^{\\infty}'></li>\n                <li class='bigfnbutton' data-insert='\\int_{0}^{\\infty}'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{sign}(#?)' data-latex='\\operatorname{sign}()'></li>\n            </ul>\n            <ul><li class='separator'></li>\n                <li class='fnbutton' data-insert='\\tan'></li>\n                <li class='fnbutton' data-insert='\\tan^{-1}'></li>\n                <li class='fnbutton' data-insert='\\log_{#?}'></li>\n                <li class='fnbutton' data-insert='\\sqrt[#?]{#0}'></li>\n                <li class='bigfnbutton' data-insert='#0 \\mod' data-latex='\\mod'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{round}(#?) ' data-latex='\\operatorname{round}()'></li>\n                <li class='bigfnbutton' data-insert='\\prod_{n\\mathop=0}^{\\infty}' data-latex='{\\tiny \\prod_{n=0}^{\\infty}}'></li>\n                <li class='bigfnbutton' data-insert='\\frac{\\differentialD #0}{\\differentialD x}'></li>\n                <li class='action font-glyph bottom right' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'>&#x232b;</li></ul>\n            <ul><li class='separator'></li>\n                <li class='fnbutton'>(</li>\n                <li class='fnbutton'>)</li>\n                <li class='fnbutton' data-insert='^{#?} ' data-latex='x^{#?} '></li>\n                <li class='fnbutton' data-insert='_{#?} ' data-latex='x_{#?} '></li>\n                <li class='keycap w20 ' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>",style:"\n        <div class='rows'>\n            <ul>\n                <li class='keycap' data-alt-keys='foreground-color' data-command='[\"applyStyle\",{\"color\":\"#cc2428\"}]'><span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428'></span></li>\n                <li class='keycap' data-alt-keys='background-color' data-command='[\"applyStyle\",{\"backgroundColor\":\"#fff590\"}]'><span style='border-radius: 50%;width:22px;height:22px; background:#fff590'></span></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"size3\"}]' data-latex='\\scriptsize\\text{small}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"size5\"}]' data-latex='\\scriptsize\\text{normal}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"size9\"}]' data-latex='\\huge\\text{big}'></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-latex='\\langle' data-command='[\"insert\", \"\\\\langle\", {\"smartFence\":true}]'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"l\"}]' data-latex='\\fontseries{l}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"m\"}]' data-latex='\\fontseries{m}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"b\"}]' data-latex='\\fontseries{b}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"bx\"}]' data-latex='\\fontseries{bx}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"sb\"}]' data-latex='\\fontseries{sb}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"c\"}]' data-latex='\\fontseries{c}\\text{Ab}'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"up\"}]' data-latex='\\textup{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"it\"}]' data-latex='\\textit{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"sl\"}]' data-latex='\\textsl{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"sc\"}]' data-latex='\\textsc{Ab}'></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-insert='\\emph{#?} ' data-latex='\\text{\\emph{emph}}'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmr\"}]' data-latex='\\textrm{Az}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmtt\"}]' data-latex='\\texttt{Az}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmss\"}]' data-latex='\\textsf{Az}'></li>\n\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"bb\"}]'  data-latex='\\mathbb{AZ}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"scr\"}]'  data-latex='\\mathscr{AZ}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cal\"}]' data-latex='\\mathcal{A1}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"frak\"}]' data-latex='\\mathfrak{Az}'></li>\n            </ul>\n        </div>"};function fi(t,e,i){t=t.replace(/(^|[^\\])#@/g,"$1#?");const n=ve.parseTokens(v.tokenize(t),"math",e,i.config.macros),r=he.decompose({mathstyle:"displaystyle",macros:i.config.macros},n),s=tt.makeSpan(r,"ML__base"),o=tt.makeSpan("","ML__strut");o.setStyle("height",s.height,"em");const a=tt.makeSpan("","ML__strut--bottom");return a.setStyle("height",s.height+s.depth,"em"),a.setStyle("vertical-align",-s.depth,"em"),tt.makeSpan([o,a,s],"ML__mathlive").toMarkup()}function mi(t,e,i){let n="<div class='left'>";const r=e.replace(/\s+/g," ").split(" ");if(r.length>1){const e=Object.assign({},ci,t.config.customVirtualKeyboards||{});for(const t of r){if(!e[t])break;n+="<div class='",t===i?n+="selected ":e[t].command?n+="action ":n+="layer-switch ",n+=(e[t].classes||"")+"'",e[t].tooltip&&(n+="data-tooltip='"+li(e[t].tooltip)+"' ",n+="data-placement='top' data-delay='1s'"),t!==i&&(e[t].command&&(n+="data-command='\""+e[t].command+"\"'"),e[t].layer&&(n+="data-layer='"+e[t].layer+"'")),n+=">"+e[t].label+"</div>"}}return n+="</div>","<div class='keyboard-toolbar' role='toolbar'>"+(n+=`\n        <div class='right'>\n            <div class='action'\n                data-command='"copyToClipboard"'\n                data-tooltip='${li("tooltip.copy to clipboard")}' data-placement='top' data-delay='1s'>\n                <svg><use xlink:href='#svg-copy' /></svg>\n            </div>\n            <div class='action disabled'\n                data-command='"undo"'\n                data-tooltip='${li("tooltip.undo")}' data-placement='top' data-delay='1s'>\n                <svg><use xlink:href='#svg-undo' /></svg>\n            </div>\n            <div class='action disabled'\n                data-command='"redo"'\n                data-tooltip='${li("tooltip.redo")}' data-placement='top' data-delay='1s'>\n                <svg><use xlink:href='#svg-redo' /></svg>\n            </div>\n        </div>\n    `)+"</div>"}function gi(t,e,i){for(let n=0;n<e.length;++n){const r=e[n];r.getAttribute("data-latex")?r.innerHTML=fi(r.getAttribute("data-latex").replace(/&quot;/g,'"'),{"?":'{\\color{#555}{\\tiny \\char"2B1A}}'},t):""===r.innerHTML&&r.getAttribute("data-insert")?r.innerHTML=fi(r.getAttribute("data-insert").replace(/&quot;/g,'"'),{"?":'{\\color{#555}{\\tiny \\char"2B1A}}'},t):r.getAttribute("data-content")&&(r.innerHTML=r.getAttribute("data-content").replace(/&quot;/g,'"')),r.getAttribute("data-aside")&&(r.innerHTML+="<aside>"+r.getAttribute("data-aside").replace(/&quot;/g,'"')+"</aside>"),r.getAttribute("data-classes")&&r.classList.add(r.getAttribute("data-classes"));let s,o=r.getAttribute("data-insert");if(o&&(o=o.replace(/&quot;/g,'"')),o&&ui[o]&&(r.setAttribute("data-shifted",ui[o].label),r.setAttribute("data-shifted-command",JSON.stringify(["insertAndUnshiftKeyboardLayer",ui[o].insert]))),s=r.getAttribute("data-command")?JSON.parse(r.getAttribute("data-command")):r.getAttribute("data-insert")?["insert",r.getAttribute("data-insert"),{focus:!0,feedback:!0,mode:"math",format:"auto",resetStyle:!0}]:r.getAttribute("data-latex")?["insert",r.getAttribute("data-latex"),{focus:!0,feedback:!0,mode:"math",format:"auto",resetStyle:!0}]:["typedText",r.getAttribute("data-key")||r.textContent,{focus:!0,feedback:!0,simulateKeystroke:!0}],i&&(s=[i,s]),r.getAttribute("data-alt-keys")){const t=di[r.getAttribute("data-alt-keys")];t&&(s={default:s,pressAndHoldStart:["showAlternateKeys",r.getAttribute("data-alt-keys"),t],pressAndHoldEnd:"hideAlternateKeys"})}t._attachButtonHandlers(r,s)}}function yi(t,e){const i={qwerty:{"lower-1":"qwertyuiop","lower-2":" asdfghjkl ","lower-3":"^zxcvbnm~","upper-1":"QWERTYUIOP","upper-2":" ASDFGHJKL ","upper-3":"^ZXCVBNM~","numpad-1":"789/","numpad-2":"456*","numpad-3":"123-","numpad-4":"0.=+"},azerty:{"lower-1":"azertyuiop","lower-2":"qsdfghjklm","lower-3":"^ wxcvbn ~","upper-1":"AZERTYUIOP","upper-2":"QSDFGHJKLM","upper-3":"^ WXCVBN ~"},qwertz:{"lower-1":"qwertzuiop","lower-2":" asdfghjkl ","lower-3":"^yxcvbnm~","upper-1":"QWERTZUIOP","upper-2":" ASDFGHJKL","upper-3":"^YXCVBNM~"},dvorak:{"lower-1":"^  pyfgcrl ","lower-2":"aoeuidhtns","lower-3":"qjkxbmwvz~","upper-1":"^  PYFGCRL ","upper-2":"AOEUIDHTNS","upper-3":"QJKXBMWVZ~"},colemak:{"lower-1":" qwfpgjluy ","lower-2":"arstdhneio","lower-3":"^zxcvbkm~","upper-1":" QWFPGNLUY ","upper-2":"ARSTDHNEIO","upper-3":"^ZXCVBKM~"}},n=i[t.config.virtualKeyboardLayout]?i[t.config.virtualKeyboardLayout]:i.qwerty;let r,s=e,o=(s=s.replace(/<arrows\/>/g,"\n        <li class='action' data-command='[\"performWithFeedback\",\"moveToPreviousChar\"]'\n            data-shifted='<svg><use xlink:href=\"#svg-angle-double-left\" /></svg>'\n            data-shifted-command='[\"performWithFeedback\",\"extendToPreviousChar\"]'>\n            <svg><use xlink:href='#svg-arrow-left' /></svg>\n        </li>\n        <li class='action' data-command='[\"performWithFeedback\",\"moveToNextChar\"]'\n            data-shifted='<svg><use xlink:href=\"#svg-angle-double-right\" /></svg>'\n            data-shifted-command='[\"performWithFeedback\",\"extendToNextChar\"]'>\n            <svg><use xlink:href='#svg-arrow-right' /></svg>\n        </li>\n        <li class='action' data-command='[\"performWithFeedback\",\"moveToNextPlaceholder\"]'>\n        <svg><use xlink:href='#svg-tab' /></svg></li>")).match(/(<row\s+)(.*)((?:<\/row|\/)>)/);for(;o;){r="";const t=o[2].match(/[a-zA-Z][a-zA-Z0-9-]*=(['"])(.*?)\1/g),e={};for(const i of t){const t=i.match(/([a-zA-Z][a-zA-Z0-9-]*)=(['"])(.*?)\2/);e[t[1]]=t[3]}let a=n[e.name];if(a||(a=i.qwerty[e.name]),a)for(const t of a){let i=e.class||"";i&&(i=" "+i),"~"===t?(r+="<li class='action font-glyph bottom right ",r+=a.length-(a.match(/ /g)||[]).length/2==10?"w10":"w15",r+='\' data-shifted=\'<span class="warning"><svg><use xlink:href="#svg-trash" /></svg></span>\'\n                        data-shifted-command=\'"deleteAll"\'\n                        data-alt-keys=\'delete\' data-command=\'["performWithFeedback","deletePreviousChar"]\'\n                        >&#x232b;</li>'):" "===t?r+="<li class='separator w5'></li>":"^"===t?r+="<li class='shift modifier font-glyph bottom left w15 layer-switch' data-layer='"+e["shift-layer"]+"'>&#x21e7;</li>":"/"===t?r+="<li class='keycap"+i+"' data-alt-keys='/' data-insert='\\frac{#0}{#?}'>&divide;</li>":"*"===t?r+="<li class='keycap"+i+"' data-alt-keys='*' data-insert='\\times '>&times;</li>":"-"===t?r+="<li class='keycap"+i+"' data-alt-keys='*' data-key='-' data-alt-keys='-'>&#x2212;</li>":/tt/.test(i)?r+="<li class='keycap"+i+"' data-alt-keys='"+t+'\' data-command=\'["typedText","'+t+'",{"commandMode":true, "focus":true, "feedback":true}]\'>'+t+"</li>":r+="<li class='keycap"+i+"' data-alt-keys='"+t+"'>"+t+"</li>"}o=(s=s.replace(new RegExp(o[1]+o[2]+o[3]),r)).match(/(<row\s+)(.*)((?:<\/row|\/)>)/)}return s}var vi={make:function(t,e){let i='<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">\n\n            <symbol id="svg-command" viewBox="0 0 640 512">\n                <path d="M34.495 36.465l211.051 211.05c4.686 4.686 4.686 12.284 0 16.971L34.495 475.535c-4.686 4.686-12.284 4.686-16.97 0l-7.071-7.07c-4.686-4.686-4.686-12.284 0-16.971L205.947 256 10.454 60.506c-4.686-4.686-4.686-12.284 0-16.971l7.071-7.07c4.686-4.687 12.284-4.687 16.97 0zM640 468v-10c0-6.627-5.373-12-12-12H300c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h328c6.627 0 12-5.373 12-12z"/>\n            </symbol>\n\n            <symbol id="svg-undo" viewBox="0 0 512 512">\n                <path d="M20 8h10c6.627 0 12 5.373 12 12v110.625C85.196 57.047 165.239 7.715 256.793 8.001 393.18 8.428 504.213 120.009 504 256.396 503.786 393.181 392.834 504 256 504c-63.926 0-122.202-24.187-166.178-63.908-5.113-4.618-5.354-12.561-.482-17.433l7.069-7.069c4.503-4.503 11.749-4.714 16.482-.454C150.782 449.238 200.935 470 256 470c117.744 0 214-95.331 214-214 0-117.744-95.331-214-214-214-82.862 0-154.737 47.077-190.289 116H180c6.627 0 12 5.373 12 12v10c0 6.627-5.373 12-12 12H20c-6.627 0-12-5.373-12-12V20c0-6.627 5.373-12 12-12z"/>\n            </symbol>\n            <symbol id="svg-redo" viewBox="0 0 512 512">\n                <path d="M492 8h-10c-6.627 0-12 5.373-12 12v110.625C426.804 57.047 346.761 7.715 255.207 8.001 118.82 8.428 7.787 120.009 8 256.396 8.214 393.181 119.166 504 256 504c63.926 0 122.202-24.187 166.178-63.908 5.113-4.618 5.354-12.561.482-17.433l-7.069-7.069c-4.503-4.503-11.749-4.714-16.482-.454C361.218 449.238 311.065 470 256 470c-117.744 0-214-95.331-214-214 0-117.744 95.331-214 214-214 82.862 0 154.737 47.077 190.289 116H332c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h160c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12z"/>\n            </symbol>\n            <symbol id="svg-arrow-left" viewBox="0 0 192 512">\n                <path d="M25.1 247.5l117.8-116c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L64.7 256l102.2 100.4c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L25 264.5c-4.6-4.7-4.6-12.3.1-17z"/>\n            </symbol>\n            <symbol id="svg-arrow-right" viewBox="0 0 192 512">\n                    <path d="M166.9 264.5l-117.8 116c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L127.3 256 25.1 155.6c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0l117.8 116c4.6 4.7 4.6 12.3-.1 17z"/>\n            </symbol>\n            <symbol id="svg-tab" viewBox="0 0 448 512">\n                    <path d="M32 217.1c0-8.8 7.2-16 16-16h144v-93.9c0-7.1 8.6-10.7 13.6-5.7l143.5 143.1c6.3 6.3 6.3 16.4 0 22.7L205.6 410.4c-5 5-13.6 1.5-13.6-5.7v-93.9H48c-8.8 0-16-7.2-16-16v-77.7m-32 0v77.7c0 26.5 21.5 48 48 48h112v61.9c0 35.5 43 53.5 68.2 28.3l143.6-143c18.8-18.8 18.8-49.2 0-68L228.2 78.9c-25.1-25.1-68.2-7.3-68.2 28.3v61.9H48c-26.5 0-48 21.6-48 48zM436 64h-8c-6.6 0-12 5.4-12 12v360c0 6.6 5.4 12 12 12h8c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12z"/>\n            </symbol>\n            <symbol id="svg-copy" viewBox="0 0 448 512">\n                <path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM352 32.491a15.88 15.88 0 0 1 7.431 4.195l51.882 51.883A15.885 15.885 0 0 1 415.508 96H352V32.491zM288 464c0 8.822-7.178 16-16 16H48c-8.822 0-16-7.178-16-16V144c0-8.822 7.178-16 16-16h80v240c0 26.51 21.49 48 48 48h112v48zm128-96c0 8.822-7.178 16-16 16H176c-8.822 0-16-7.178-16-16V48c0-8.822 7.178-16 16-16h144v72c0 13.2 10.8 24 24 24h72v240z"/>\n            </symbol>\n            <symbol id="svg-angle-double-right" viewBox="0 0 320 512">\n                <path d="M166.9 264.5l-117.8 116c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L127.3 256 25.1 155.6c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0l117.8 116c4.6 4.7 4.6 12.3-.1 17zm128-17l-117.8-116c-4.7-4.7-12.3-4.7-17 0l-7.1 7.1c-4.7 4.7-4.7 12.3 0 17L255.3 256 153.1 356.4c-4.7 4.7-4.7 12.3 0 17l7.1 7.1c4.7 4.7 12.3 4.7 17 0l117.8-116c4.6-4.7 4.6-12.3-.1-17z"/>\n            </symbol>\n            <symbol id="svg-angle-double-left" viewBox="0 0 320 512">\n                <path d="M153.1 247.5l117.8-116c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L192.7 256l102.2 100.4c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L153 264.5c-4.6-4.7-4.6-12.3.1-17zm-128 17l117.8 116c4.7 4.7 12.3 4.7 17 0l7.1-7.1c4.7-4.7 4.7-12.3 0-17L64.7 256l102.2-100.4c4.7-4.7 4.7-12.3 0-17l-7.1-7.1c-4.7-4.7-12.3-4.7-17 0L25 247.5c-4.6 4.7-4.6 12.3.1 17z"/>\n            </symbol>\n            <symbol id="svg-trash" viewBox="0 0 448 512">\n                <path d="M336 64l-33.6-44.8C293.3 7.1 279.1 0 264 0h-80c-15.1 0-29.3 7.1-38.4 19.2L112 64H24C10.7 64 0 74.7 0 88v2c0 3.3 2.7 6 6 6h26v368c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V96h26c3.3 0 6-2.7 6-6v-2c0-13.3-10.7-24-24-24h-88zM184 32h80c5 0 9.8 2.4 12.8 6.4L296 64H152l19.2-25.6c3-4 7.8-6.4 12.8-6.4zm200 432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V96h320v368zm-176-44V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm-80 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm160 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12z"/>\n            </symbol>\n        </svg>\n        ';hi["foreground-color"]=[];for(const t of fe.LINE_COLORS)hi["foreground-color"].push({classes:"small-button",content:'<span style="border-radius:50%;width:32px;height:32px; box-sizing: border-box; border: 3px solid '+t+'"></span>',command:'["applyStyle",{"color":"'+t+'"}]'});hi["background-color"]=[];for(const t of fe.AREA_COLORS)hi["background-color"].push({classes:"small-button",content:'<span style="border-radius:50%;width:32px;height:32px; background:'+t+'"></span>',command:'["applyStyle",{"backgroundColor":"'+t+'"}]'});di={...hi},Object.keys(di).forEach(t=>{di[t]=di[t].slice()});const n="abcdefghijklmnopqrstuvwxyz";for(let t=0;t<26;t++){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ"[t];di[e]||(di[e]=[]),di[e].unshift({latex:"\\mathbb{"+e+"}",aside:"blackboard",insert:"\\mathbb{"+e+"}"}),di[e].unshift({latex:"\\mathbf{"+e+"}",aside:"bold",insert:"\\mathbf{"+e+"}"}),di[e].unshift({latex:"\\mathsf{"+e+"}",aside:"sans",insert:"\\mathsf{"+e+"}"}),di[e].unshift({latex:"\\mathtt{"+e+"}",aside:"monospace",insert:"\\mathtt{"+e+"}"}),di[e].unshift({latex:"\\mathcal{"+e+"}",aside:"script",insert:"\\mathcal{"+e+"}"}),di[e].unshift({latex:"\\mathfrak{"+e+"}",aside:"fraktur",insert:"\\mathfrak{"+e+"}"}),di[e].unshift({latex:"\\mathbb{"+n[t]+"}",aside:"blackboard",insert:"\\mathbb{"+n[t]+"}"}),di[e].unshift({latex:"\\mathbf{"+n[t]+"}",aside:"bold",insert:"\\mathbf{"+n[t]+"}"}),di[e].unshift({latex:"\\mathsf{"+n[t]+"}",aside:"sans",insert:"\\mathsf{"+n[t]+"}"}),di[e].unshift({latex:"\\mathcal{"+n[t]+"}",aside:"script",insert:"\\mathcal{"+n[t]+"}"}),di[e].unshift({latex:"\\mathfrak{"+n[t]+"}",aside:"fraktur",insert:"\\mathfrak{"+n[t]+"}"})}for(let t=0;t<=26;t++){const e=n[t];di[e]||(di[e]=[]),di[e].unshift({latex:"\\mathsf{"+e+"}",aside:"sans",insert:"\\mathbb{"+e+"}"}),di[e].unshift({latex:"\\mathbf{"+e+"}",aside:"bold",insert:"\\mathbf{"+e+"}"}),di[e].unshift({latex:"\\mathtt{"+e+"}",aside:"monospace",insert:"\\mathtt{"+e+"}"}),di[e].unshift({latex:"\\mathfrak{"+e+"}",aside:"fraktur",insert:"\\mathfrak{"+e+"}"})}for(let t=0;t<10;t++){const e="0123456789"[t];di[e]||(di[e]=[]),di[e].unshift({latex:"\\mathbf{"+e+"}",aside:"bold",insert:"\\mathbf{"+e+"}"}),di[e].unshift({latex:"\\mathsf{"+e+"}",aside:"sans",insert:"\\mathsf{"+e+"}"}),di[e].unshift({latex:"\\mathtt{"+e+"}",aside:"monospace",insert:"\\mathtt{"+e+"}"}),di[e].unshift({latex:"\\mathcal{"+e+"}",aside:"script",insert:"\\mathcal{"+e+"}"}),di[e].unshift({latex:"\\mathfrak{"+e+"}",aside:"fraktur",insert:"\\mathfrak{"+e+"}"})}let r=t.config.virtualKeyboards;r||(r="all"),r=r.replace(/\ball\b/i,"numeric roman greek functions command");const s=Object.assign({},pi,t.config.customVirtualKeyboardLayers||{}),o=Object.assign({},ci,t.config.customVirtualKeyboards||{}),a=r.replace(/\s+/g," ").split(" ");for(const e of a){if(!o[e])break;let n=o[e].layers||[];o[e].layer&&n.push(o[e].layer),n=Array.from(new Set(n));for(const o of n){if(!s[o])break;if("object"==typeof s[o]){let t="";if(s[o].styles&&(t+=`<style>${s[o].styles}</style>`),s[o].backdrop&&(t+=`<div class='${s[o].backdrop}'>`),s[o].container&&(t+=`<div class='${s[o].container}'>`),s[o].rows){t+="<div class='rows'>";for(const e of s[o].rows){t+="<ul>";for(const i of e)t+="<li",i.class&&(t+=` class="${i.class}"`),i.key&&(t+=` data-key="${i.key}"`),i.command&&("string"==typeof i.command?t+=` data-command='"${i.command}"'`:(t+=" data-command='",t+=JSON.stringify(i.command),t+="'")),i.insert&&(t+=` data-insert="${i.insert}"`),i.latex&&(t+=` data-latex="${i.latex}"`),i.aside&&(t+=` data-aside="${i.aside}"`),i.altKeys&&(t+=` data-alt-keys="${i.altKeys}"`),i.shifted&&(t+=` data-shifted="${i.shifted}"`),i.shiftedCommand&&(t+=` data-shifted-command="${i.shiftedCommand}"`),t+=`>${i.label?i.label:""}</li>`;t+="</ul>"}t+="</div>",s[o].container&&(t+="</div'>"),s[o].backdrop&&(t+="</div'>")}s[o]=t}i+="<div tabindex=\"-1\" class='keyboard-layer' data-layer='"+o+"'>",i+=mi(t,r,e);const n="function"==typeof s[o]?s[o]():s[o];i+=yi(t,n),i+="</div>"}}const l=document.createElement("div");l.className="ML__keyboard",e?l.classList.add(e):t.config.virtualKeyboardTheme?l.classList.add(t.config.virtualKeyboardTheme):/android|cros/i.test(navigator.userAgent)&&l.classList.add("material"),l.innerHTML=i,gi(t,l.querySelectorAll(".keycap, .action, .fnbutton, .bigfnbutton"));const c=l.getElementsByClassName("layer-switch");for(let e=0;e<c.length;++e)c[e].classList.contains("shift")?t._attachButtonHandlers(c[e],{pressed:["shiftKeyboardLayer","shift"],default:["switchKeyboardLayer",c[e].getAttribute("data-layer")],pressAndHoldEnd:"unshiftKeyboardLayer"}):t._attachButtonHandlers(c[e],{default:["switchKeyboardLayer",c[e].getAttribute("data-layer")]});const u=l.getElementsByClassName("keyboard-layer");return Array.from(u).forEach(t=>{t.addEventListener("mousedown",t=>{t.preventDefault(),t.stopPropagation()}),t.addEventListener("touchstart",t=>{t.preventDefault(),t.stopPropagation()})}),u[0].classList.add("is-visible"),window.addEventListener("mouseup",function(){t.hideAlternateKeys_(),t.unshiftKeyboardLayer_()}),window.addEventListener("blur",function(){t.hideAlternateKeys_(),t.unshiftKeyboardLayer_()}),window.addEventListener("touchend",function(){t.hideAlternateKeys_(),t.unshiftKeyboardLayer_()}),window.addEventListener("touchcancel",function(){t.hideAlternateKeys_(),t.unshiftKeyboardLayer_()}),l},makeKeycap:gi};const bi={"−":"-","-":"-","\\alpha":"alpha","\\beta":"beta","\\gamma":"gamma","\\delta":"delta","\\epsilon":"epsilon","\\varepsilon":"varepsilon","\\zeta":"zeta","\\eta":"eta","\\theta":"theta","\\vartheta":"vartheta","\\iota":"iota","\\kappa":"kappa","\\lambda":"lambda","\\mu":"mu","\\nu":"nu","\\xi":"xi","\\pi":"pi","\\rho":"rho","\\sigma":"sigma","\\tau":"tau","\\upsilon":"upsilon","\\phi":"phi","\\varphi":"varphi","\\chi":"chi","\\psi":"psi","\\omega":"omega","\\Gamma":"Gamma","\\Delta":"Delta","\\Theta":"Theta","\\Lambda":"Lambda","\\Xi":"Xi","\\Pi":"Pi","\\Sigma":"Sigma","\\Phi":"Phi","\\Psi":"Psi","\\Omega":"Omega"},xi={"\\pm":"+-","\\times":"xx","\\colon":":","\\vert":"|","\\Vert":"||","\\mid":"|","\\lbrace":"{","\\rbrace":"}","\\langle":"(:","\\rangle":":)"},ki={"\\pm":"&PlusMinus;","\\times":"&times;","\\colon":":","\\vert":"|","\\Vert":"∥","\\mid":"∣","\\lbrace":"{","\\rbrace":"}","\\langle":"⟨","\\rangle":"⟩","\\lfloor":"⌊","\\rfloor":"⌋","\\lceil":"⌈","\\rceil":"⌉","\\vec":"&#x20d7;","\\acute":"&#x00b4;","\\grave":"&#x0060;","\\dot":"&#x02d9;","\\ddot":"&#x00a8;","\\tilde":"&#x007e;","\\bar":"&#x00af;","\\breve":"&#x02d8;","\\check":"&#x02c7;","\\hat":"&#x005e;"};function wi(t){return t.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Si(t,e){return t&&e.generateID?' extid="'+t+'"':""}function Ci(t,e,i){let n=!1;e=e||t.atoms.length;let r="",s="",o=-1,a=-1;const l=t.atoms[t.index];if(t.index<e&&("mord"===l.type||"textord"===l.type)&&"0123456789,.".indexOf(l.body)<0&&(s=l.toMathML(i),l.superscript&&(o=t.index),l.subscript&&(a=t.index),t.index+=1),s.length>0){if(n=!0,Ai(t)&&(o=t.index,t.index+=1),Ti(t)&&(a=t.index,t.index+=1),o>=0&&a>=0)r="<msubsup>"+s,r+=Ei(t.atoms[a].subscript,0,0,i).mathML,r+=Ei(t.atoms[o].superscript,0,0,i).mathML,r+="</msubsup>";else if(o>=0){if(r="<msup>"+s,Ai(t)){const e=Ei(t.atoms[o].superscript,0,0,i).mathML,n=Ei(t.atoms[o+1].superscript,0,0,i).mathML;r+="<mi>′</mi>"!==e&&"<mi>&#x2032;</mi>"!==e||"<mi>′</mi>"!==n&&"<mi>&#x2032;</mi>"!==n?"<mi>′</mi>"===e||"<mi>&#x2032;</mi>"===e?"<mi>&#x2032;</mi>":e:"<mi>&#x2033;</mi>"}else r+=Ei(t.atoms[o].superscript,0,0,i).mathML;r+="</msup>"}else a>=0?(r="<msub>"+s,r+=Ei(t.atoms[a].subscript,0,0,i).mathML,r+="</msub>"):r=s;"mi"!==t.lastType&&"mn"!==t.lastType&&"mtext"!==t.lastType&&"fence"!==t.lastType||/^<mo>(.*)<\/mo>$/.test(r)||(r="<mo>&InvisibleTimes;</mo>"+r),s.endsWith(">f</mi>")||s.endsWith(">g</mi>")?(r+="<mo> &ApplyFunction; </mo>",t.lastType="applyfunction"):t.lastType=/^<mo>(.*)<\/mo>$/.test(r)?"mo":"mi",t.mathML+=r}return n}function Ai(t){return t.index<t.atoms.length&&t.atoms[t.index].superscript&&"msubsup"===t.atoms[t.index].type}function Ti(t){return t.index<t.atoms.length&&t.atoms[t.index].subscript&&"msubsup"===t.atoms[t.index].type}function _i(t,e,i){let n=!1,r="",s=e.atoms[e.index-1];return!!s&&(s.superscript||s.subscript||(Ai(e)||Ti(e))&&(s=e.atoms[e.index],e.index+=1),!!s&&(s.superscript&&s.subscript?(r="<msubsup>"+t,r+=Ei(s.subscript,0,0,i).mathML,r+=Ei(s.superscript,0,0,i).mathML,r+="</msubsup>"):s.superscript?(r="<msup>"+t,r+=Ei(s.superscript,0,0,i).mathML,r+="</msup>"):s.subscript&&(r="<msub>"+t,r+=Ei(s.subscript,0,0,i).mathML,r+="</msub>"),r.length>0&&(n=!0,e.mathML+=r,e.lastType=""),n))}function Mi(t,e,i){let n=!1;e=e||t.atoms.length;const r=t.index;let s="";for(;t.index<e&&"text"===t.atoms[t.index].mode;)s+=t.atoms[t.index].body?t.atoms[t.index].body:" ",t.index+=1;return s.length>0&&(n=!0,s="<mtext"+Si(t.atoms[r].id,i)+">"+s+"</mtext>",t.mathML+=s,t.lastType="mtext"),n}function Li(t,e,i){let n=!1;e=e||t.atoms.length;const r=t.index;let s="",o=function(t){let e=-1,i=t.index,n=!1,r=!1;for(;i<t.atoms.length&&!n&&!r;)r=!(n="mord"!==t.atoms[i].type||"0123456789,.".indexOf(t.atoms[i].body)<0)&&t.atoms[i].superscript,i++;return r&&(e=i-1),e}(t);for(o>=0&&o<e&&(e=o);t.index<e&&"mord"===t.atoms[t.index].type&&"0123456789,.".indexOf(t.atoms[t.index].body)>=0;)s+=t.atoms[t.index].body,t.index+=1;return s.length>0&&(n=!0,s="<mn"+Si(t.atoms[r].id,i)+">"+s+"</mn>",o<0&&Ai(t)&&(o=t.index,t.index+=1),o>=0&&(s="<msup>"+s,s+=Ei(t.atoms[o].superscript,0,0,i).mathML,s+="</msup>"),t.mathML+=s,t.lastType="mn"),n}function Fi(t,e,i){let n=!1;e=e||t.atoms.length;let r="",s="";if(t.index<e&&"mopen"===t.atoms[t.index].type){let o=!1,a=0;const l=t.index;let c=-1,u=l+1;for(;u<e&&!o;)"mopen"===t.atoms[u].type?a+=1:"mclose"===t.atoms[u].type&&(a-=1),-1===a&&(o=!0,c=u),u+=1;o&&(r="<mrow>",r+=Oi(t.atoms[l],i),r+=Ei(t.atoms,l+1,c,i).mathML,r+=Oi(t.atoms[c],i),r+="</mrow>","mi"!==t.lastType&&"mn"!==t.lastType&&"mfrac"!==t.lastType&&"fence"!==t.lastType||(r="<mo>&InvisibleTimes;</mo>"+r),t.index=c+1,_i(r,t,i)&&(n=!0,t.lastType="",r=""),s="fence")}return r.length>0&&(n=!0,t.mathML+=r,t.lastType=s),n}function Di(t,e,i){let n=!1;e=e||t.atoms.length;let r="",s="";const o=t.atoms[t.index];if(t.index<e&&("mbin"===o.type||"mrel"===o.type))r+=t.atoms[t.index].toMathML(i),t.index+=1,s="mo";else if(t.index<e&&"mop"===o.type){if("limits"===o.limits&&(o.superscript||o.subscript)){const t=Oi(o,i);o.superscript&&o.subscript?(r+=("nolimits"!==o.limits?"<munderover>":"<msubsup>")+t,r+=Ei(o.subscript,0,0,i).mathML,r+=Ei(o.superscript,0,0,i).mathML,r+="nolimits"!==o.limits?"</munderover>":"</msubsup>"):o.superscript?(r+=("nolimits"!==o.limits?"<mover>":"<msup>")+t,r+=Ei(o.superscript,0,0,i).mathML,r+="nolimits"!==o.limits?"</mover>":"</msup>"):(r+=("nolimits"!==o.limits?"<munder>":"<msub>")+t,r+=Ei(o.subscript,0,0,i).mathML,r+="nolimits"!==o.limits?"</munder>":"</msub>"),s="mo"}else{const e=t.atoms[t.index],o=0===e.latex.indexOf("\\operatorname"),a=o?'<mi class="MathML-Unit"'+Si(e.id,i)+">"+Ii(e.body)+"</mi>":Oi(e,i);r+=a,t.index+=1,_i(r,t,i)&&(n=!0,t.lastType="",r=""),t.index-=1,o||/^<mo>(.*)<\/mo>$/.test(a)?s=o?"mi":"mo":(r+="<mo>&#x2061;</mo>",s="applyfunction")}"mi"!==t.lastType&&"mn"!==t.lastType||/^<mo>(.*)<\/mo>$/.test(r)||(r="<mo>&InvisibleTimes;</mo>"+r),t.index+=1}return r.length>0&&(n=!0,t.mathML+=r,t.lastType=s),n}function Ei(t,e,i,n){const r={atoms:t,index:e||0,mathML:"",lastType:""};if(i=i||(t?t.length:0),"number"==typeof t||"boolean"==typeof t)r.mathML=t.toString();else if("string"==typeof t)r.mathML=t;else if(t&&"function"==typeof t.toMathML)r.mathML=t.toMathML(n);else if(Array.isArray(t)){let t=0;for(;r.index<i;)if(Mi(r,i,n)||Li(r,i,n)||Ci(r,i,n)||Di(r,i,n)||Fi(r,i,n))t+=1;else if(r.index<i){let e=r.atoms[r.index].toMathML(n);"mn"===r.lastType&&e.length>0&&"genfrac"===r.atoms[r.index].type&&(e="<mo>&#x2064;</mo>"+e),"genfrac"===r.atoms[r.index].type?r.lastType="mfrac":r.lastType="",e.length>0&&(r.mathML+=e,t+=1),r.index+=1}t>1&&(r.mathML="<mrow>"+r.mathML+"</mrow>")}return r}function Oi(t,e){let i="";const n=Ii(t.body);return n&&(i="<mo"+Si(t.id,e)+">"+n+"</mo>"),i}function Ii(t){if(!t)return"";if("string"==typeof t)return wi(t);if(!Array.isArray(t)&&"string"==typeof t.body)return wi(t.body);let e="";for(const i of t)"string"==typeof i.body&&(e+=i.body);return wi(e)}he.MathAtom.prototype.toMathML=function(t){const e={"\\exponentialE":"&#x02147;","\\imaginaryI":"&#x2148;","\\differentialD":"&#x2146;","\\capitalDifferentialD":"&#x2145;","\\alpha":"&#x03b1;","\\pi":"&#x03c0;","\\infty":"&#x221e;","\\forall":"&#x2200;","\\nexists":"&#x2204;","\\exists":"&#x2203;","\\hbar":"ℏ","\\cdotp":"⋅","\\ldots":"…","\\cdots":"⋯","\\ddots":"⋱","\\vdots":"⋮","\\ldotp":"."},i={"\\!":-3/18,"\\ ":6/18,"\\,":3/18,"\\:":4/18,"\\;":5/18,"\\enspace":.5,"\\quad":1,"\\qquad":2,"\\enskip":.5};let n,r,s,o,a,l,c="",u="",h={cal:"script",frak:"fraktur",bb:"double-struck",scr:"script",cmtt:"monospace",cmss:"sans-serif"}[this.fontFamily||this.font]||"";h&&(h=' mathvariant="'+h+'"');const d=this.latex?this.latex.trim():null;let p;switch(this.type){case"group":case"root":c=Ei(this.body,0,0,t).mathML;break;case"array":if((this.lFence&&"."!==this.lFence||this.rFence&&"."!==this.rFence)&&(c+="<mrow>",this.lFence&&"."!==this.lFence&&(c+="<mo>"+(ki[this.lFence]||this.lFence)+"</mo>")),c+="<mtable",this.colFormat){for(c+=' columnalign="',s=0;s<this.colFormat.length;s++)this.colFormat[s].align&&(c+={l:"left",c:"center",r:"right"}[this.colFormat[s].align]+" ");c+='"'}for(c+=">",r=0;r<this.array.length;r++){for(c+="<mtr>",n=0;n<this.array[r].length;n++)c+="<mtd>"+Ei(this.array[r][n],0,0,t).mathML+"</mtd>";c+="</mtr>"}c+="</mtable>",(this.lFence&&"."!==this.lFence||this.rFence&&"."!==this.rFence)&&(this.rFence&&"."!==this.rFence&&(c+="<mo>"+(ki[this.lFence]||this.rFence)+"</mo>"),c+="</mrow>");break;case"genfrac":(this.leftDelim||this.rightDelim)&&(c+="<mrow>"),this.leftDelim&&"."!==this.leftDelim&&(c+="<mo"+Si(this.id,t)+">"+(ki[this.leftDelim]||this.leftDelim)+"</mo>"),this.hasBarLine?(c+="<mfrac>",c+=Ei(this.numer,0,0,t).mathML||"<mi>&nbsp;</mi>",c+=Ei(this.denom,0,0,t).mathML||"<mi>&nbsp;</mi>",c+="</mfrac>"):(c+="<mtable"+Si(this.id,t)+">",c+="<mtr>"+Ei(this.numer,0,0,t).mathML+"</mtr>",c+="<mtr>"+Ei(this.denom,0,0,t).mathML+"</mtr>",c+="</mtable>"),this.rightDelim&&"."!==this.rightDelim&&(c+="<mo"+Si(this.id,t)+">"+(ki[this.rightDelim]||this.rightDelim)+"</mo>"),(this.leftDelim||this.rightDelim)&&(c+="</mrow>");break;case"surd":this.index?(c+="<mroot"+Si(this.id,t)+">",c+=Ei(this.body,0,0,t).mathML,c+=Ei(this.index,0,0,t).mathML,c+="</mroot>"):(c+="<msqrt"+Si(this.id,t)+">",c+=Ei(this.body,0,0,t).mathML,c+="</msqrt>");break;case"leftright":c="<mrow>",this.leftDelim&&"."!==this.leftDelim&&(c+="<mo"+Si(this.id,t)+">"+(ki[this.leftDelim]||this.leftDelim)+"</mo>"),this.body&&(c+=Ei(this.body,0,0,t).mathML),this.rightDelim&&"."!==this.rightDelim&&(c+="<mo"+Si(this.id,t)+">"+(ki[this.rightDelim]||this.rightDelim)+"</mo>"),c+="</mrow>";break;case"sizeddelim":case"delim":c+='<mo separator="true"'+Si(this.id,t)+">"+(ki[this.delim]||this.delim)+"</mo>";break;case"accent":c+='<mover accent="true"'+Si(this.id,t)+">",c+=Ei(this.body,0,0,t).mathML,c+="<mo>"+(ki[d]||this.accent)+"</mo>",c+="</mover>";break;case"line":case"overlap":break;case"overunder":a=this.overscript,o=this.underscript,a&&o?l=this.body:a?(l=this.body,this.body[0]&&this.body[0].underscript?(o=this.body[0].underscript,l=this.body[0].body):this.body[0]&&"first"===this.body[0].type&&this.body[1]&&this.body[1].underscript&&(o=this.body[1].underscript,l=this.body[1].body)):o&&(l=this.body,this.body[0]&&this.body[0].overscript?(a=this.body[0].overscript,l=this.body[0].body):this.body[0]&&"first"===this.body[0].type&&this.body[1]&&this.body[1].overscript&&(a=this.body[1].overscript,l=this.body[1].body)),a&&o?(c+="<munderover"+h+Si(this.id,t)+">"+Ei(l,0,0,t).mathML,c+=Ei(o,0,0,t).mathML,c+=Ei(a,0,0,t).mathML,c+="</munderover>"):a?(c+="<mover"+h+Si(this.id,t)+">"+Ei(l,0,0,t).mathML,c+=Ei(a,0,0,t).mathML,c+="</mover>"):o&&(c+="<munder"+h+Si(this.id,t)+">"+Ei(l,0,0,t).mathML,c+=Ei(o,0,0,t).mathML,c+="</munder>");break;case"mord":{c=e[d]||d||("string"==typeof this.body?this.body:""),(p=d?d.match(/[{]?\\char"([0-9abcdefABCDEF]*)[}]?/):null)?c="&#x"+p[1]+";":c.length>0&&"\\"===c.charAt(0)&&(c="string"==typeof this.body&&this.body.charCodeAt(0)>255?"&#x"+("000000"+this.body.charCodeAt(0).toString(16)).substr(-4)+";":"string"==typeof this.body?this.body.charAt(0):this.body);const i=/\d/.test(c)?"mn":"mi";c="<"+i+h+Si(this.id,t)+">"+wi(c)+"</"+i+">";break}case"mbin":case"mrel":case"textord":case"minner":c=d&&e[d]?"<mi"+Si(this.id,t)+">"+e[d]+"</mi>":d&&ki[d]?"<mo"+Si(this.id,t)+">"+ki[d]+"</mo>":Oi(this,t);break;case"mpunct":c='<mo separator="true"'+Si(this.id,t)+">"+(ki[d]||d)+"</mo>";break;case"mop":"​"!==this.body&&(c="<mo"+Si(this.id,t)+">",c+="\\operatorname"===d?this.body:d||this.body,c+="</mo>");break;case"mathstyle":break;case"box":c='<menclose notation="box"',this.backgroundcolor&&(c+=' mathbackground="'+fe.stringToColor(this.backgroundcolor)+'"'),c+=Si(this.id,t)+">"+Ei(this.body,0,0,t).mathML+"</menclose>";break;case"spacing":c+='<mspace width="'+(i[d]||0)+'em"/>';break;case"enclose":c='<menclose notation="';for(const t in this.notation)Object.prototype.hasOwnProperty.call(this.notation,t)&&this.notation[t]&&(c+=u+t,u=" ");c+=Si(this.id,t)+'">'+Ei(this.body,0,0,t).mathML+"</menclose>";break;case"space":c+="&nbsp;"}return c},he.toMathML=function(t,e){return Ei(t,0,0,e).mathML};const Ni={"\\imaginaryI":"ⅈ","\\imaginaryJ":"ⅉ","\\pi":"π","\\exponentialE":"ℯ","﹢":"+","＋":"+","−":"-","-":"-","﹣":"-","－":"-","\\times":"*","\\cdot":"*","⨉":"*","️✖":"*","️×":"*",".":"*","÷":"/","⁄":"/","／":"/","!":"factorial","\\mp":"minusplus","\\ne":"!=","\\coloneq":":=","\\questeq":"?=","\\approx":"approx","\\cong":"congruent","\\sim":"similar","\\equiv":"equiv","\\pm":"plusminus","\\land":"and","\\wedge":"and","\\lor":"or","\\vee":"or","\\oplus":"xor","\\veebar":"xor","\\lnot":"not","\\neg":"not","\\exists":"exists","\\nexists":"!exists","\\forall":"forAll","\\backepsilon":"suchThat","\\therefore":"therefore","\\because":"because","\\nabla":"nabla","\\circ":"circle","\\ominus":"ominus","\\odot":"odot","\\otimes":"otimes","\\zeta":"Zeta","\\Gamma":"Gamma","\\min":"min","\\max":"max","\\mod":"mod","\\lim":"lim","\\sum":"sum","\\prod":"prod","\\int":"integral","\\iint":"integral2","\\iiint":"integral3","\\Re":"Re","\\gothicCapitalR":"Re","\\Im":"Im","\\gothicCapitalI":"Im","\\binom":"nCr","\\partial":"partial","\\differentialD":"differentialD","\\capitalDifferentialD":"capitalDifferentialD","\\Finv":"Finv","\\Game":"Game","\\wp":"wp","\\ast":"ast","\\star":"star","\\asymp":"asymp","\\to":"to","\\gets":"gets","\\in":"elementof","\\notin":"!elementof","\\ni":"ownedby","\\owns":"ownedby","\\subset":"subset","\\supset":"superset","\\complement":"complement","\\rightarrow":"shortLogicalImplies","\\leftarrow":"shortLogicalImpliedBy","\\leftrightarrow":"shortLogicalEquivalent","\\longrightarrow":"logicalImplies","\\longleftarrow":"logicalImpliedBy","\\longleftrightarrow":"logicalEquivalent","\\Rightarrow":"shortImplies","\\Leftarrow":"shortImpliedBy","\\Leftrightarrow":"shortEquivalent","\\implies":"implies","\\Longrightarrow":"implies","\\impliedby":"impliedBy","\\Longleftarrow":"impliedBy","\\iff":"equivalent","\\Longleftrightarrow":"equivalent"},zi={"+":"add","*":"multiply","-":"subtract","/":"divide","=":"equal",":=":"assign","!=":"ne","?=":"questeq",approx:"approx",congruent:"congruent",similar:"similar",equiv:"equiv","<":"lt",">":"gt","<=":"le",">=":"ge","≤":"le","≥":"ge",">>":"gg","<<":"ll","**":"pow","++":"increment","--":"decrement"},Pi={equal:"%0 = %1",ne:"%0 \\ne %1",questeq:"%0 \\questeq %1",approx:"%0 \\approx %1",congruent:"%0 \\cong %1",similar:"%0 \\sim %1",equiv:"%0 \\equiv %1",assign:"%0 := %1",lt:"%0 < %1",gt:"%0 > %1",le:"%0 \\le %1",ge:"%0 \\ge %1",sin:"\\sin%_%^ %0",cos:"\\cos%_%^ %0",tan:"\\tan%_%^ %0",cot:"\\cot%_%^ %0",sec:"\\sec%_%^ %0",csc:"\\csc%_%^ %0",sinh:"\\sinh %0",cosh:"\\cosh %0",tanh:"\\tanh %0",csch:"\\csch %0",sech:"\\sech %0",coth:"\\coth %0",arcsin:"\\arcsin %0",arccos:"\\arccos %0",arctan:"\\arctan %0",arccot:"\\arcctg %0",arcsec:"\\arcsec %0",arccsc:"\\arccsc %0",arsinh:"\\arsinh %0",arcosh:"\\arcosh %0",artanh:"\\artanh %0",arcsch:"\\arcsch %0",arsech:"\\arsech %0",arcoth:"\\arcoth %0",ln:"\\ln%_%^ %",log:"\\log%_%^ %",lg:"\\lg %",lb:"\\lb %",sum:"\\sum%_%^ %0",prod:"\\prod%_%^ %0",Zeta:"\\zeta%_%^ %",Gamma:"\\Gamma %",min:"\\min%_%^ %",max:"\\max%_%^ %",mod:"\\mod%_%^ %",lim:"\\lim%_%^ %",binom:"\\binom %",nabla:"\\nabla %",curl:"\\nabla\\times %0",div:"\\nabla\\cdot %0",floor:"\\lfloor %0 \\rfloor%_%^",ceil:"\\lceil %0 \\rceil%_%^",abs:"\\left| %0 \\right|%_%^",norm:"\\lVert %0 \\rVert%_%^",ucorner:"\\ulcorner %0 \\urcorner%_%^",lcorner:"\\llcorner %0 \\lrcorner%_%^",angle:"\\langle %0 \\rangle%_%^",group:"\\lgroup %0 \\rgroup%_%^",moustache:"\\lmoustache %0 \\rmoustache%_%^",brace:"\\lbrace %0 \\rbrace%_%^","sqrt[]":"\\sqrt[%^]{%0}",sqrt:"\\sqrt{%0}",lcm:"\\operatorname{lcm}%",gcd:"\\operatorname{gcd}%",erf:"\\operatorname{erf}%",erfc:"\\operatorname{erfc}%",randomReal:"\\operatorname{randomReal}%",randomInteger:"\\operatorname{randomInteger}%",and:"%0 \\land %1",or:"%0 \\lor %1",xor:"%0 \\oplus %1",not:"%0 \\lnot %1",circle:"%0 \\circ %1",ast:"%0 \\ast %1",star:"%0 \\star %1",asymp:"%0 \\asymp %1","/":"\\frac{%0}{%1}",Re:"\\Re{%0}",Im:"\\Im{%0}",factorial:"%0!",factorial2:"%0!!"},Ri={degree:880,nabla:740,curl:740,partial:740,differentialD:740,capitalDifferentialD:740,"**":720,odot:710,not:680,div:660,solidus:660,"/":660,setminus:650,"%":640,otimes:410,union:350,intersection:350,"*":390,ast:390,".":390,oplus:300,ominus:300,"+":275,"-":275,"+-":275,"-+":275,circle:265,circledast:265,circledcirc:265,star:265,"..":263,to:262,in:262,"|":261,congruent:265,equiv:260,"=":260,"!=":255,"?=":255,similar:250,approx:247,"<":245,">":243,">=":242,"≥":242,"<=":241,complement:240,subset:240,superset:240,elementof:240,"!elementof":240,exists:230,"!exists":230,forall:230,and:200,xor:195,or:190,suchThat:110,":":100,assign:80,":=":80,therefore:70,because:70,shortLogicalImplies:52,shortImplies:51,logicalImplies:50,implies:49,shortLogicalImpliedBy:48,shortImpliedBy:47,logicalImpliedBy:46,impliedBy:45,shortLogicalEquivalent:44,shortEquivalent:43,logicalEquivalent:42,equivalent:41,",":40,";":30};function Bi(t,e){return Array.isArray(t.arg)?t.arg[e]:void 0}function qi(t){return t&&Ri[t]||-1}function $i(t){return/=|=>/.test(t)?"right":"left"}function Hi(t){if("f"===t||"g"===t)return!0;const e=Pi[t];return!!e&&!!/%[^01_^]?/.test(e)}function Wi(t){t=(t||"").trim();let e=Ni[t];if(!e)if(/^\\[^{}]+$/.test(t)){const i=Nt.getInfo(t,"math",{});e=i&&i.value||t.slice(1)}else e=t;return e}function ji(t){if(!t)return null;const e=Wi(Zi(t)),i=[qi(e),$i(e)];return i[0]<=0?null:i}function Ki(t){return null!==ji(t)}const Ui={"\\lfloor\\rfloor":"floor","\\lceil\\rceil":"ceil","\\vert\\vert":"abs","\\lvert\\rvert":"abs","||":"abs","\\Vert\\Vert":"norm","\\lVert\\rVert":"norm","\\ulcorner\\urcorner":"ucorner","\\llcorner\\lrcorner":"lcorner","\\langle\\rangle":"angle","\\lgroup\\rgroup":"group","\\lmoustache\\rmoustache":"moustache","\\lbrace\\rbrace":"brace"},Vi={"!":"factorial","\\dag":"dagger","\\dagger":"dagger","\\ddagger":"dagger2","\\maltese":"maltese","\\backprime":"backprime","\\backdoubleprime":"backprime2","\\prime":"prime","\\doubleprime":"prime2","\\$":"$","\\%":"%","\\_":"_","\\degree":"degree"},Gi={"+":"add","-":"add","*":"multiply","=":"equal",",":"list",";":"list2",and:"and",or:"or",xor:"xor",union:"union",shortLogicalEquivalent:"logicalEquivalent",logicalEquivalent:"logicalEquivalent",shortEquivalent:"equivalent",equivalent:"equivalent"},Xi={",":"list",";":"list2"};function Zi(t){if(Array.isArray(t)){let e="";for(const i of t)e+=Zi(i);return e}if(t.latex&&!/^\\math(op|bin|rel|open|punct|ord|inner)/.test(t.latex))return t.latex.trim();if("leftright"===t.type)return"";if("string"==typeof t.body)return t.body;if(Array.isArray(t.body)){let e="";for(const i of t.body)e+=Zi(i);return e}return""}function Yi(t){return"string"==typeof t.sym?function(t){let e=Pi[t];if(e)return e.replace("%1","").replace("%0","").replace("%","");if(t.length>1){const i=Nt.getInfo("\\"+t,"math");!i||i.fontFamily&&"cmr"!==i.fontFamily&&"ams"!==i.fontFamily||(e="\\"+t)}return e||(e=Nt.unicodeStringToLatex("math",t)),e}(t.sym)||t.sym:""}function Ji(t){return parseFloat(t.num)}function Qi(t){return"object"==typeof t&&void 0!==t.num}function tn(t){let e=0;return Qi(t)&&(e="object"==typeof t.num?void 0!==t.num.re?bn(t.num.re):0:parseFloat(t.num)),e}function en(t){let e=0;return Qi(t)&&"object"==typeof t.num&&(e=void 0!==t.num.im?bn(t.num.im):0),e}function nn(t){return t&&void 0!==t.sup}function rn(t){return t&&void 0!==t.sub}function sn(t,e,i){let n=!1;const r=t.atoms[t.index];return r&&r.type===e&&(n=void 0===i||Zi(r)===i),n}function on(t,...e){const i={fn:t};if(e){const t=[];for(const i of e)i&&t.push(i);t.length>0&&(i.arg=t)}return i}function an(t){return"number"==typeof t?{num:t.toString()}:"string"==typeof t?{num:t}:"object"==typeof t?{num:t}:void 0}function ln(t){if(Qi(t)){const e=tn(t),i=en(t);return 0!==i?(0!==e&&(t.num.re=(-e).toString()),t.num.im=(-i).toString()):t.num=(-e).toString(),t}return on("negate",t)}function cn(t){const e=t.atoms[t.index+1];return e&&"msubsup"===e.type}function un(t,e){let i=t.atoms[t.index];return!i||void 0===i.superscript&&void 0===i.subscript?i=null:t.index+=1,i||((i=t.atoms[t.index+1])&&"msubsup"===i.type&&(i.superscript||i.subscript)?t.index+=2:i=null),i?(void 0!==i.subscript&&(t.ast.sub=gn(i.subscript,e)),void 0!==i.superscript&&("msubsup"===i.type?/['\u2032]|\\prime/.test(Zi(i.superscript))?(t.index+=1,(i=t.atoms[t.index+1])&&"msubsup"===i.type&&/['\u2032]|\\prime/.test(Zi(i.superscript))?t.ast.sup={sym:"″"}:(t.ast.sup={sym:"′"},t.index-=1)):/['\u2033]|\\doubleprime/.test(Zi(i.superscript))?t.ast.sup={sym:"″"}:t.ast&&(t.ast.sup=gn(i.superscript,e)):t.ast.sup=gn(i.superscript,e))):t.index+=1,t}function hn(t,e){const i=t.ast;if(pn(t,"!!"))return t.index+=1,t.ast=on("factorial2",i),hn(t=un(t,e),e);if(pn(t,"++"))return t.index+=1,t.ast=on("increment",i),hn(t=un(t,e),e);if(pn(t,"--"))return t.index+=1,t.ast=on("decrement",i),hn(t=un(t,e),e);const n=t.atoms[t.index];return n&&n.latex&&Vi[n.latex.trim()]&&(t.ast=on(Vi[n.latex.trim()],i),t=hn(t=un(t,e),e)),t}function dn(t,e,i,n){if(t.index=t.index||0,0===t.atoms.length||t.index>=t.atoms.length)return t.ast=void 0,t;const r=t.minPrec;t.minPrec=0;let s=t.atoms[t.index];if(e){if("mopen"===s.type&&Zi(s)===e)t.index+=1,(s=(t=mn(t,n)).atoms[t.index])&&"mclose"===s.type&&Zi(s)===i&&(cn(t)&&(t.ast={group:t.ast}),t=hn(t=un(t,n),n));else if("textord"===s.type&&Zi(s)===e)t.index+=1,(s=(t=mn(t,n)).atoms[t.index])&&"textord"===s.type&&Zi(s)===i&&(t.index+=1,t=hn(t=un(t,n),n));else if("\\lVert"===e&&"textord"===s.type&&"|"===s.latex){if((s=t.atoms[t.index+1])&&"textord"===s.type&&"|"===s.latex){t.index+=2,s=(t=mn(t,n)).atoms[t.index];const e=t.atoms[t.index+1];s&&"textord"===s.type&&"|"===s.latex&&e&&"textord"===e.type&&"|"===e.latex&&(t.index+=2,t=hn(t=un(t,n),n))}}else if("sizeddelim"===s.type&&s.delim===e)t.index+=1,(s=(t=mn(t,n)).atoms[t.index])&&"sizeddelim"===s.type&&s.delim===i&&(t.index+=1,t=hn(t=un(t,n),n));else{if("leftright"!==s.type||s.leftDelim!==e||"?"!==s.rightDelim&&s.rightDelim!==i)return;t.ast=gn(s.body,n),cn(t)&&(t.ast={group:t.ast}),t=hn(t=un(t,n),n)}return t.minPrec=r,t}{let n=!0;if("mopen"===s.type?(e=s.latex.trim(),i=Nt.RIGHT_DELIM[e]):"sizeddelim"===s.type?(e=s.delim,i=Nt.RIGHT_DELIM[e]):"leftright"===s.type?(n=!1,e=s.leftDelim,"?"===(i=s.rightDelim)&&(i=Nt.RIGHT_DELIM[e])):"textord"===s.type&&(e=s.latex.trim(),i=Nt.RIGHT_DELIM[e]),e&&i){if("|"===e&&"|"===i){const n=t.atoms[t.index+1];n&&"textord"===n.type&&"|"===n.latex&&(e="\\lVert",i="\\rVert")}if(t=dn(t,e,i))return n&&(t.index+=1),t.ast={fn:Ui[e+i]||e+i,arg:[t.ast]},t.minPrec=r,t}}}function pn(t,e){return t.index=t.index||0,!(t.atoms.length<=1||t.index>=t.atoms.length-1)&&e===Zi(t.atoms[t.index])+Zi(t.atoms[t.index+1])}function fn(t){if(t.index=t.index||0,!(t.atoms.length<=1||t.index>=t.atoms.length-1)){if(!sn(t,"textord","\\nabla")){const e=t.atoms[t.index].latex+t.atoms[t.index+1].latex,i=/^(>=|<=|>>|<<|:=|!=|\*\*|\+\+|--)$/.test(e)?e:"";return i&&(t.index+=1),i}return t.index+=1,sn(t,"mbin","\\times")?(t.index+=1,t.ast="curl",t):sn(t,"mbin","\\cdot")?(t.index+=1,t.ast="div",t):void(t.index-=1)}}function mn(t,e){if(t.index=t.index||0,t.ast=void 0,0===t.atoms.length||t.index>=t.atoms.length)return t;t.minPrec=t.minPrec||0;let i=function t(e,i){if(e.index=e.index||0,e.ast=void 0,0===e.atoms.length||e.index>=e.atoms.length)return e;let n=e.atoms[e.index];const r=Wi(Zi(n));if(fn(e))e.ast=on(e.ast,t(e,i).ast);else{if("root"===n.type)return e.index=0,e.atoms=n.body,t(e,i);if("mbin"===n.type&&"-"===r)e.index+=1,(e=t(e,i)).ast=ln(e.ast);else if("mbin"===n.type&&"+"===r)e.index+=1,(e=t(e,i)).ast=on("add",e.ast);else if("mord"===n.type&&/^[0-9.]$/.test(n.latex)){let r="",s=!1,o=/^[0-9.eEdD]$/;for(;e.index<e.atoms.length&&!s&&(sn(e,"spacing")||(sn(e,"mord")||sn(e,"mpunct",",")||sn(e,"mbin"))&&o.test(e.atoms[e.index].latex));)if("spacing"===e.atoms[e.index].type)e.index+=1;else if(void 0!==e.atoms[e.index].superscript||void 0!==e.atoms[e.index].subscript)s=!0;else{let t=e.atoms[e.index].latex;"d"===t||"D"===t?(t="e",o=/^[0-9+-.]$/):"e"===t||"E"===t?cn(e)?(t="",e.index-=1,s=!0):(t="E",o=/^[0-9+-.]$/):o===/^[0-9+-.]$/&&(o=/^[0-9]$/),r+=","===t?"":t,e.index+=1}if(e.ast=r?an(r):void 0,(n=e.atoms[e.index])&&"genfrac"===n.type&&!isNaN(e.ast.num)){const n=e.ast;(e=t(e,i)).ast=on("add",n,e.ast)}if(n&&"group"===n.type&&n.latex&&n.latex.startsWith("\\nicefrac")){const n=e.ast;(e=t(e,i)).ast=on("add",n,e.ast)}n&&"msubsup"===n.type&&(e=un(e,i)),e=hn(e,i)}else if("genfrac"===n.type||"surd"===n.type)e.ast=n.toAST(i),e=hn(e=un(e,i),i);else if("mord"===n.type||"mbin"===n.type){if(Hi(r)&&!Ki(n)){e.ast={fn:r};const n=(e=un(e,i)).ast,s=t(e,i).ast;s&&/^(list0|list|list2)$/.test(s.fn)?n.arg=s.arg:s&&(n.arg=[s]),e.ast=n}else e.ast=n.toAST(i),"ⅈ"===e.ast.sym&&(e.ast=an({im:"1"})),e=un(e);e=hn(e,i)}else if("textord"===n.type){if(!Ki(n)&&!Nt.RIGHT_DELIM[n.latex?n.latex.trim():n.body])if(Hi(r)){e.ast={fn:r};const n=(e=un(e,i)).ast;e.index+=1,n.arg=[t(e,i).ast],e.ast=n,e=hn(e,i)}else e.ast=n.toAST(i),void 0===n.superscript&&(e.index+=1),e=hn(e=un(e,i),i)}else if("mop"===n.type){if((/^\\(mathop|operatorname|operatorname\*)/.test(n.latex)||Hi(r))&&!Ki(n))if(e.ast={fn:/^\\(mathop|operatorname|operatorname\*)/.test(n.latex)?n.body:r},nn((e=un(e,i)).ast)){const n={sin:"arcsin",cos:"arccos",tan:"arctan",cot:"arccot",sec:"arcsec",csc:"arccsc",sinh:"arsinh",cosh:"arcosh",tanh:"artanh",csch:"arcsch",sech:"arsech",coth:"arcoth"};if(-1===Ji(e.ast.sup)&&n[r])e.ast=on(n[r],t(e,i).ast);else{const n=e.ast;n.arg=[t(e,i).ast],e.ast=n}}else{const n=e.ast,r=t(e,i).ast;r&&/^(list0|list|list2)$/.test(r.fn)?n.arg=r.arg:r&&(n.arg=[r]),e.ast=n}}else if("array"===n.type)e.index+=1,e.ast=n.toAST(i);else if("group"===n.type)e.index+=1,e.ast=n.toAST(i);else{if("mclose"===n.type)return e;if("error"===n.type)return e.index+=1,e.ast={error:n.latex},e}}if(void 0===e.ast){const t=dn(e,"(",")",i)||dn(e,null,null,i);t?e=t:Ki(n)||("placeholder"===n.type?e.ast=an(0):(e.ast={text:"?"},e.ast.error="Unexpected token '"+n.type+"'",n.latex?e.ast.latex=n.latex:n.body&&n.toLatex&&(e.ast.latex=n.toLatex())),e.index+=1)}if((n=e.atoms[e.index])&&("mord"===n.type||"surd"===n.type||"mop"===n.type||"mopen"===n.type||"sizeddelim"===n.type||"leftright"===n.type)){if("sizeddelim"===n.type)for(const t in Nt.RIGHT_DELIM)if(n.delim===Nt.RIGHT_DELIM[t])return e.index+=1,e;if(("mord"===n.type||"textord"===n.type||"mop"===n.type)&&Ki(n))return e;const r=e.ast;e.ast={},(e=t(e,i))&&e.ast&&r?Hi(r.fn)&&void 0===r.arg||Array.isArray(r.arg)&&0===r.arg.length?"list2"===e.ast.fn||"list"===e.ast.fn?e.ast=on(r.fn,e.ast.arg):e.ast=on("multiply",r,e.ast):"multiply"===e.ast.fn?e.ast.arg.unshift(r):0===en(r)&&0!==tn(r)&&1===en(e.ast)&&0===tn(e.ast)?e.ast=an({im:tn(r).toString()}):e.ast=on("multiply",r,e.ast):e.ast=r}return e}(t,e).ast,n=!1;const r=t.minPrec;for(;!n;){const s=t.atoms[t.index],o=fn(t);let a,l;if((n=!s||"text"===s.mode||!o&&!Ki(s))||([a,l]=o?[qi(o),$i(o)]:ji(s),n=a<r),!n){const r=o||Wi(Zi(s));if(t.minPrec="left"===l?a+1:a,t.index+=1,"|"===r)if(void 0!==s.subscript||t.atoms[t.index]&&void 0!==t.atoms[t.index].subscript&&"msubsup"===t.atoms[t.index].type){t.ast={};const n=un(t,e).ast.sub;if(i=on("bind",i),n&&"equal"===n.fn&&i.arg)i.arg.push(Bi(n,0)),i.arg.push(Bi(n,1));else if(n&&i.arg&&("list"===n.fn||"list2"===n.fn)){let t={sym:"x"};for(let e=0;e<n.arg.length;e++)"equal"===n.arg[e].fn?(t=Bi(n.arg[e],0),i.arg.push(t),i.arg.push(Bi(n.arg[e],1))):(i.arg.push(t),i.arg.push(n.arg[e]))}else n&&(i.arg.push({sym:"x"}),i.arg.push(n))}else n=!0;else{const n=mn(t,e).ast;let s=Xi[r];s&&i&&i.fn!==s&&(i=on(s,i)),"-"===r?i&&i.arg&&"add"===i.fn?void 0!==n&&i.arg.push(ln(n)):i=i&&"subtract"===i.fn?on("add",Bi(i,0),ln(Bi(i,1)),ln(n)):!Qi(i)||nn(i)||!Qi(n)||nn(n)||void 0!==n.num.re&&"0"!==n.num.re||void 0===n.num.im?on("subtract",i,n):{num:{re:i.num,im:(-parseFloat(n.num.im)).toString()}}:"add"===(s=Gi[r])&&i&&"subtract"===i.fn?i=on("add",Bi(i,0),ln(Bi(i,1)),n):s&&i&&i.fn===s&&!nn(i)?void 0!==n&&(n.fn===s&&!nn(n)&&n.arg?i.arg=[...i.arg,...n.arg]:i.arg&&i.arg.push(n)):s&&n&&n.arg&&n.fn===s?(n.arg.unshift(i),i=n):i="multiply"===s&&Qi(i)&&!nn(i)&&n&&10===Ji(n)&&Qi(n.sup)?an(Ji(i)*Math.pow(10,Ji(n.sup))):"add"===s&&Qi(i)&&!nn(i)&&n&&0!==en(n)&&!nn(n)?{num:{re:i.num,im:n.num.im}}:on(s||zi[r]||r,i,n)}}}return t.ast=i,t}function gn(t,e){return function(t,e){t.index=t.index||0,t.ast=void 0;const i=[];for(;t.atoms[t.index];)if("text"===t.atoms[t.index].mode){let e="";for(;t.atoms[t.index]&&"text"===t.atoms[t.index].mode;)e+=t.atoms[t.index].body,t.index+=1;i.push(e)}else{const n=mn(t,e).ast;if(!n)return;i.push(n)}return i.length>1?on("text",...i):i[0]||void 0}({atoms:function t(e){if(!e)return[];let i;if(Array.isArray(e)){i=[];for(const n of e){const e=t(n);i=i.concat(e)}}else{if("spacing"===e.type)return[];"first"===e.type||"box"===e.type?i=t(e.body):(e.body&&Array.isArray(e.body)&&(e.body=t(e.body)),e.superscript&&Array.isArray(e.superscript)&&(e.superscript=t(e.superscript)),e.subscript&&Array.isArray(e.subscript)&&(e.subscript=t(e.subscript)),e.index&&Array.isArray(e.index)&&(e.index=t(e.index)),e.denom&&Array.isArray(e.denom)&&(e.denom=t(e.denom)),e.numer&&Array.isArray(e.numer)&&(e.numer=t(e.numer)),e.array&&Array.isArray(e.array)&&(e.array=e.array.map(e=>e.map(e=>t(e)))),i=[e])}return i}(t)},e)}function yn(t){const e=Array.prototype.slice.call(arguments);e.shift(),t=t||".. ";let i="";if(e.length>0){"."!==t[0]&&(i+=t[0]);let n="";for(const r of e)i+=n+r,n=t[2];"."!==t[1]&&(i+=t[1])}return i}function vn(t,e){const i=t.length;t=t.substr(0,e.precision-2);for(let i=0;i<t.length-16;i++){const n=t.substr(0,i);for(let r=0;r<17;r++){const s=t.substr(i,r+1),o=Math.floor((t.length-n.length)/s.length);if(o>1&&(n+s.repeat(o+1)).startsWith(t))return"0"===s?n.replace(/(\d{3})/g,"$1"+e.groupSeparator):n.replace(/(\d{3})/g,"$1"+e.groupSeparator)+e.beginRepeatingDigits+s.replace(/(\d{3})/g,"$1"+e.groupSeparator)+e.endRepeatingDigits}}return i!==t.length&&(t+="\\ldots"),t.replace(/(\d{3})/g,"$1"+e.groupSeparator)}function bn(t){return parseFloat(parseFloat(t).toPrecision(15))}function xn(t,e){let i="";if("number"==typeof e.precision){if("number"!=typeof t){let i="",n="";if("-"===t[0]?(i="-",t=t.substr(1)):"+"===t[0]&&(t=t.substr(1)),t.indexOf(".")>=0){const r=t.match(/(\d*).(\d*)([e|E]([-+]?[0-9]*))?/),s=r[1],o=r[2].substring(0,Math.min(e.precision-s.length,r[2].length));if(n=r[4]||"","0"===s){let n=0;for(;"0"===o[n]&&n<o.length;)n+=1;let r="";if(n<=4)r="0"+e.decimalMarker,r+=o.substr(0,n),r+=vn(t.substr(r.length),e);else if(n+1>=e.precision)r="0",i="";else{r=t[n];const i=vn(t.substr(n+1),e);i&&(r+=e.decimalMarker+i)}"0"!==r&&(t.length-1>e.precision&&!r.endsWith("}")&&!r.endsWith("\\ldots")&&(r+="\\ldots"),n>4&&(r+=e.exponentProduct,e.exponentMarker?r+=e.exponentMarker+(1-n).toString():r+="10^{"+(1-n).toString()+"}")),t=r}else{t=s.replace(/\B(?=(\d{3})+(?!\d))/g,e.groupSeparator);const i=vn(o,e);i&&(t+=e.decimalMarker+i)}}else if(t.length>e.precision){const i=t.length;let n=t[0];const r=vn(t.substr(2),e);r&&("}"!==(n+=e.decimalMarker+r)[n.length-1]&&(n+="\\ldots")),"1"!==n?n+=e.exponentProduct:n="",e.exponentMarker?n+=e.exponentMarker+(i-2).toString():n+="10^{"+(i-2).toString()+"}",t=n}else t=t.replace(/\B(?=(\d{3})+(?!\d))/g,e.groupSeparator);return n&&(n=e.exponentMarker?e.exponentMarker+n:e.exponentProduct+" 10^{"+n+"}"),i+t+n}t=bn(t)}if("engineering"===e.scientificNotation)if(0===t)i="0";else{const n=Math.abs(t);let r=Math.round(Math.log10(n));r-=r%3,n<1e3&&(r=0);let s=n/Math.pow(10,r);const o=s.toString().match(/^(.*)\.(.*)$/);o&&o[1]&&o[2]&&(s=o[1]+e.decimalMarker+o[2]),e.groupSeparator&&(s=vn(s.toExponential(),e)),r=0===r?"":e.exponentMarker?e.exponentMarker+r:e.exponentProduct+" 10^{"+r+"}",i=(t<0?"-":"")+s+r}else{const n="string"==typeof t?t:t.toString();let r,s,o,a=n.match(/^(.*)[e|E]([-+]?[0-9]*)$/i);r=n,o="",a&&a[1]&&a[2]&&(r=a[1],s=e.exponentMarker?e.exponentMarker+a[2]:e.exponentProduct+" 10^{"+a[2]+"}"),(a=r.match(/^(.*)\.(.*)$/))&&a[1]&&a[2]&&(r=a[1],o=a[2]),e.groupSeparator&&(r=r.replace(/\B(?=(\d{3})+(?!\d))/g,e.groupSeparator),o=vn(o,e)),o&&(o=e.decimalMarker+o),i=r+o+(s||"")}return i}he.MathAtom.prototype.toAST=function(t){let e,i,n,r,s={},o="",a={bb:"double-struck",cal:"script",scr:"script",frak:"fraktur",cmrss:"sans-serif",cmrtt:"monospace"}[this.baseFontFamily||this.fontFamily],l="";"b"===this.fontSeries&&(l+="bold"),"it"===this.fontShape&&(l+="italic");const c=this.latex?this.latex.trim():null;switch(this.type){case"root":case"group":this.latex&&this.latex.startsWith("\\nicefrac")?(e=this.latex.slice(9).match(/({.*}|[^}])({.*}|[^}])/))?(i=1===e[1].length?e[1]:e[1].substr(1,e[1].length-2),i=ve.parseTokens(v.tokenize(i),"math",null,t.macros),n=1===e[2].length?e[2]:e[2].substr(1,e[2].length-2),n=ve.parseTokens(v.tokenize(n),"math",null,t.macros),s=on("divide",gn(i,t),gn(n,t))):s.fn="divide":s.group=gn(this.body,t);break;case"genfrac":s=on("divide",gn(this.numer,t),this.denom&&this.denom[0]&&"placeholder"===this.denom[0].type?an(1):gn(this.denom,t));break;case"surd":s=this.index?on("pow",gn(this.body,t),on("divide",1,gn(this.index,t))):on("sqrt",gn(this.body,t));break;case"rule":break;case"line":case"overlap":case"accent":case"overunder":break;case"mord":case"textord":case"mbin":(e=c?c.match(/[{]?\\char"([0-9abcdefABCDEF]*)[}]?/):void 0)?o=String.fromCodePoint(parseInt(e[1],16)):(o=Wi(Zi(this))).length>0&&"\\"===o.charAt(0)&&"string"==typeof this.body&&(o=this.body),(r=Nt.mathVariantToUnicode(o,a,l).replace(/[\\]/g,"\\\\").replace(/["]/g,'\\"').replace(/[\b]/g,"\\b").replace(/[\f]/g,"\\f").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t"))!==o?(s={sym:r},a="normal"):s={sym:o};break;case"minner":case"mop":break;case"box":s=gn(this.body,t);break;case"enclose":break;case"array":if("cardinality"===this.env.name)s=on("card",gn(this.array,t));else if(/array|matrix|pmatrix|bmatrix/.test(this.env.name)){s={fn:"array",args:[]};for(const e of this.array)s.args.push(e.map(e=>gn(e,t)))}else if("cases"===this.env.name){s={fn:"cases",args:[]};for(const e of this.array)if(e[0]){const i=[];i.push(gn(e[0],t));let n=gn(e[1],t);n&&"text"===n.fn&&n.arg&&/^(if|when|for)$/i.test(n.arg[0].trim())&&(n=n.arg.filter(t=>"string"!=typeof t)),i.push(n||{}),s.args.push(i)}}break;case"spacing":case"space":case"mathstyle":break;default:s=void 0}return s&&a&&"normal"!==a&&(s.variant=a),s&&"string"==typeof this.cssClass&&(s.class=this.cssClass),s&&"string"==typeof this.cssId&&(s.id=this.cssId),s},he.toAST=function(t,e){return gn(t,e)};const kn={"\\alpha":"alpha ","\\mu":"mew ","\\sigma":"sigma ","\\pi":"pie ","\\imaginaryI":"eye ","\\sum":"Summation ","\\prod":"Product ",a:'<phoneme alphabet="ipa" ph="eɪ">a</phoneme>',A:'capital <phoneme alphabet="ipa" ph="eɪ">A</phoneme>',"+":"plus ","-":"minus ",";":'<break time="150ms"/> semi-colon <break time="150ms"/>',",":'<break time="150ms"/> comma  <break time="150ms"/>',"|":'<break time="150ms"/>Vertical bar<break time="150ms"/>',"(":'<break time="150ms"/>Open paren. <break time="150ms"/>',")":'<break time="150ms"/> Close paren. <break time="150ms"/>',"=":"equals ","<":"is less than ","\\lt":"is less than ","<=":"is less than or equal to ","\\le":"is less than or equal to ","\\gt":"is greater than ",">":"is greater than ","\\ge":"is greater than or equal to ","\\geq":"is greater than or equal to ","\\leq":"is less than or equal to ","!":"factorial ","\\sin":"sine ","\\cos":"cosine ","​":"","−":"minus ",":":'<break time="150ms"/> such that <break time="200ms"/> ',"\\colon":'<break time="150ms"/> such that <break time="200ms"/> ',"\\hbar":"etch bar ","\\iff":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\Longleftrightarrow":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\land":"and ","\\lor":"or ","\\neg":"not ","\\div":"divided by ","\\forall":"for all ","\\exists":"there exists ","\\nexists":"there does not exists ","\\in":"element of ","\\N":'the set <break time="150ms"/><say-as interpret-as="character">n</say-as>',"\\C":'the set <break time="150ms"/><say-as interpret-as="character">c</say-as>',"\\Z":'the set <break time="150ms"/><say-as interpret-as="character">z</say-as>',"\\Q":'the set <break time="150ms"/><say-as interpret-as="character">q</say-as>',"\\infty":"infinity ","\\nabla":"nabla ","\\partial":"partial derivative of ","\\cdots":"dot dot dot ","\\Rightarrow":"implies ","\\lbrace":'<break time="150ms"/>open brace<break time="150ms"/>',"\\{":'<break time="150ms"/>open brace<break time="150ms"/>',"\\rbrace":'<break time="150ms"/>close brace<break time="150ms"/>',"\\}":'<break time="150ms"/>close brace<break time="150ms"/>',"\\langle":'<break time="150ms"/>left angle bracket<break time="150ms"/>',"\\rangle":'<break time="150ms"/>right angle bracket<break time="150ms"/>',"\\lfloor":'<break time="150ms"/>open floor<break time="150ms"/>',"\\rfloor":'<break time="150ms"/>close floor<break time="150ms"/>',"\\lceil":'<break time="150ms"/>open ceiling<break time="150ms"/>',"\\rceil":'<break time="150ms"/>close ceiling<break time="150ms"/>',"\\vert":'<break time="150ms"/>vertical bar<break time="150ms"/>',"\\mvert":'<break time="150ms"/>divides<break time="150ms"/>',"\\lvert":'<break time="150ms"/>left vertical bar<break time="150ms"/>',"\\rvert":'<break time="150ms"/>right vertical bar<break time="150ms"/>',"\\lbrack":'<break time="150ms"/> open square bracket <break time="150ms"/>',"\\rbrack":'<break time="150ms"/> close square bracket <break time="150ms"/>',mm:"millimeters",cm:"centimeters",km:"kilometers",kg:"kilograms"};function wn(t){let e=0;if(t&&Array.isArray(t))for(const i of t)"first"!==i.type&&(e+=1);return 1===e}function Sn(t){let e="";if(t&&Array.isArray(t))for(const i of t)"first"!==i.type&&"string"==typeof i.body&&(e+=i.body);return e}he.toSpeakableFragment=function(t,e){function i(t){return"<emphasis>"+t+"</emphasis>"}if(!t)return"";let n="";if(t.id&&"math"===e.speechMode&&(n+='<mark name="'+t.id.toString()+'"/>'),Array.isArray(t)){let r=!1;for(let s=0;s<t.length;s++)s<t.length-2&&"mopen"===t[s].type&&"mclose"===t[s+2].type&&"mord"===t[s+1].type?(n+=" of ",n+=i(he.toSpeakableFragment(t[s+1],e)),s+=2):"text"===t[s].mode?n+=t[s].body?t[s].body:" ":"mord"===t[s].type&&/[0123456789,.]/.test(t[s].body)?r?n+=t[s].body:(r=!0,n+=he.toSpeakableFragment(t[s],e)):(r=!1,n+=he.toSpeakableFragment(t[s],e))}else{let r="",s="",o="",a=!1;switch(t.type){case"group":case"root":n+=he.toSpeakableFragment(t.body,e);break;case"genfrac":if(r=he.toSpeakableFragment(t.numer,e),s=he.toSpeakableFragment(t.denom,e),wn(t.numer)&&wn(t.denom)){const e={"1/2":" half ","1/3":" one third ","2/3":" two third","1/4":" one quarter ","3/4":" three quarter ","1/5":" one fifth ","2/5":" two fifths ","3/5":" three fifths ","4/5":" four fifths ","1/6":" one sixth ","5/6":" five sixths ","1/8":" one eight ","3/8":" three eights ","5/8":" five eights ","7/8":" seven eights ","1/9":" one ninth ","2/9":" two ninths ","4/9":" four ninths ","5/9":" five ninths ","7/9":" seven ninths ","8/9":" eight ninths "}[Sn(t.numer)+"/"+Sn(t.denom)];e?n=e:n+=r+" over "+s}else n+=' the fraction <break time="150ms"/>'+r+', over <break time="150ms"/>'+s+'.<break time="150ms"/> End fraction.<break time="150ms"/>';break;case"surd":if(o=he.toSpeakableFragment(t.body,e),t.index){let i=he.toSpeakableFragment(t.index,e);const r=(i=i.trim()).replace(/<mark([^/]*)\/>/g,"");n+="3"===r?' the cube root of <break time="200ms"/>'+o+'. <break time="200ms"/> End cube root':"n"===r?' the nth root of <break time="200ms"/>'+o+'. <break time="200ms"/> End root':' the root with index: <break time="200ms"/>'+i+', of <break time="200ms"/>'+o+'. <break time="200ms"/> End root'}else wn(t.body)?n+=" the square root of "+o+" , ":n+=' the square root of <break time="200ms"/>'+o+'. <break time="200ms"/> End square root';break;case"accent":break;case"leftright":n+=kn[t.leftDelim]||t.leftDelim,n+=he.toSpeakableFragment(t.body,e),n+=kn[t.rightDelim]||t.rightDelim;break;case"line":case"rule":case"overunder":case"overlap":break;case"placeholder":n+="placeholder "+t.body;break;case"delim":case"sizeddelim":case"mord":case"minner":case"mbin":case"mrel":case"mpunct":case"mopen":case"mclose":case"textord":{const i=t.latex?t.latex.trim():"";if("\\mathbin"===i||"\\mathrel"===i||"\\mathopen"===i||"\\mathclose"===i||"\\mathpunct"===i||"\\mathord"===i||"\\mathinner"===i){n=he.toSpeakableFragment(t.body,e);break}let r=t.body,s=t.latex;if("delim"!==t.type&&"sizeddelim"!==t.type||(r=s=t.delim),"text"===e.speechMode)n+=r;else{if("mbin"===t.type&&(n+='<break time="150ms"/>'),r){const t=kn[r]||(s?kn[s.trim()]:"");if(t)n+=" "+t;else{n+=(s?function(t){let e=oi.NOTES[t];return e||"\\"!==t.charAt(0)||(e=" "+t.replace("\\","")+" "),Array.isArray(e)&&(e=e[0]),e}(s.trim()):"")||function(t){let i="";return e.textToSpeechMarkup?/[a-z]/.test(t)?i+=' <say-as interpret-as="character">'+t+"</say-as>":/[A-Z]/.test(t)?i+="capital "+t.toLowerCase():i+=t:/[a-z]/.test(t)?i+=" '"+t.toUpperCase()+"'":/[A-Z]/.test(t)?i+=" 'capital "+t.toUpperCase()+"'":i+=t,i}(r)}}else n+=he.toSpeakableFragment(t.body,e);"mbin"===t.type&&(n+='<break time="150ms"/>')}break}case"mop":if("​"!==t.body){const r=t.latex?t.latex.trim():"";if("\\sum"===r)if(t.superscript&&t.subscript){let i=he.toSpeakableFragment(t.superscript,e);i=i.trim();let r=he.toSpeakableFragment(t.subscript,e);n+=' the summation from <break time="200ms"/>'+(r=r.trim())+'<break time="200ms"/> to  <break time="200ms"/>'+i+'<break time="200ms"/> of <break time="150ms"/>',a=!0}else if(t.subscript){let i=he.toSpeakableFragment(t.subscript,e);n+=' the summation from <break time="200ms"/>'+(i=i.trim())+'<break time="200ms"/> of <break time="150ms"/>',a=!0}else n+=" the summation of";else if("\\prod"===r)if(t.superscript&&t.subscript){let i=he.toSpeakableFragment(t.superscript,e);i=i.trim();let r=he.toSpeakableFragment(t.subscript,e);n+=' the product from <break time="200ms"/>'+(r=r.trim())+'<break time="200ms"/> to <break time="200ms"/>'+i+'<break time="200ms"/> of <break time="150ms"/>',a=!0}else if(t.subscript){let i=he.toSpeakableFragment(t.subscript,e);n+=' the product from <break time="200ms"/>'+(i=i.trim())+'<break time="200ms"/> of <break time="150ms"/>',a=!0}else n+=" the product  of ";else if("\\int"===r)if(t.superscript&&t.subscript){let r=he.toSpeakableFragment(t.superscript,e);r=r.trim();let s=he.toSpeakableFragment(t.subscript,e);n+=' the integral from <break time="200ms"/>'+i(s=s.trim())+'<break time="200ms"/> to <break time="200ms"/>'+i(r)+' <break time="200ms"/> of ',a=!0}else n+=' the integral of <break time="200ms"/> ';else"string"==typeof t.body?n+=kn[t.body]||kn[t.latex.trim()]||" "+t.body:t.latex&&t.latex.length>0&&("\\"===t.latex[0]?n+=" "+t.latex.substr(1):n+=" "+t.latex)}break;case"enclose":o=he.toSpeakableFragment(t.body,e),wn(t.body)?n+=" crossed out "+o+" , ":n+=" crossed out "+o+". End cross out"}if(!a&&t.superscript){let i=he.toSpeakableFragment(t.superscript,e);const r=(i=i.trim()).replace(/<[^>]*>/g,"");if(wn(t.superscript)){if("math"===e.speechMode){const e=function(t){if(t&&Array.isArray(t))for(const e of t)if("first"!==e.type&&e.id)return e.id.toString();return""}(t.superscript);e&&(n+='<mark name="'+e+'"/>')}"′"===r?n+=" prime ":"2"===r?n+=" squared ":"3"===r?n+=" cubed ":isNaN(parseInt(r))?n+=" to the "+i+"; ":n+=' to the <say-as interpret-as="ordinal">'+r+"</say-as> power; "}else isNaN(parseInt(r))?n+=" raised to the "+i+"; ":n+=' raised to the <say-as interpret-as="ordinal">'+r+"</say-as> power; "}if(!a&&t.subscript){let i=he.toSpeakableFragment(t.subscript,e);i=i.trim(),wn(t.subscript)?n+=" sub "+i:n+=" subscript "+i+". End subscript. "}}return n},he.toSpeakableText=function(t,e){const i=e?JSON.parse(JSON.stringify(e)):{textToSpeechMarkup:"",textToSpeechRules:"mathlive"};if(i.speechMode="math",window.sre&&"sre"===i.textToSpeechRules){i.generateID=!0;const e=he.toMathML(t,i);return e?(i.textToSpeechMarkup&&(i.textToSpeechRulesOptions=i.textToSpeechRulesOptions||{},i.textToSpeechRulesOptions.markup=i.textToSpeechMarkup,"ssml"===i.textToSpeechRulesOptions.markup&&(i.textToSpeechRulesOptions.markup="ssml_step"),i.textToSpeechRulesOptions.rate=i.speechEngineRate),i.textToSpeechRulesOptions&&window.sre.System.getInstance().setupEngine(i.textToSpeechRulesOptions),window.sre.System.getInstance().toSpeech(e)):""}let n=he.toSpeakableFragment(t,i);if("ssml"===i.textToSpeechMarkup){let t="";i.speechEngineRate&&(t='<prosody rate="'+i.speechEngineRate+'">'),n='<?xml version="1.0"?><speak version="1.1" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US"><amazon:auto-breaths>'+t+"<p><s>"+n+"</s></p>"+(t?"</prosody>":"")+"</amazon:auto-breaths></speak>"}else n="mac"===i.textToSpeechMarkup&&"mac"===function(t){let e="other";return navigator&&navigator.platform&&navigator.userAgent&&(/^(mac)/i.test(navigator.platform)?e="mac":/^(win)/i.test(navigator.platform)?e="win":/(android)/i.test(navigator.userAgent)?e="android":/(iphone)/i.test(navigator.userAgent)||/(ipod)/i.test(navigator.userAgent)||/(ipad)/i.test(navigator.userAgent)?e="ios":/\bCrOS\b/i.test(navigator.userAgent)&&(e="chromeos")),e===t?t:"!"+t}("mac")?n.replace(/<mark([^/]*)\/>/g,"").replace(/<emphasis>/g,"[[emph+]]").replace(/<\/emphasis>/g,"").replace(/<break time="([0-9]*)ms"\/>/g,"[[slc $1]]").replace(/<say-as[^>]*>/g,"").replace(/<\/say-as>/g,""):n.replace(/<[^>]*>/g,"").replace(/\s{2,}/g," ");return n};const Cn=3,An=.5;function Tn(t,e,i,n){e=e.split(" ");for(const r of e){const e=r.match(/(.*):(.*)/);if(e){const r=n||{};"active"===e[2]?r.passive=!1:r[e[2]]=!0,t.addEventListener(e[1],i,r)}else t.addEventListener(r,i,n)}}function _n(t,e,i,n){e=e.split(" ");for(const r of e){const e=r.match(/(.*):(.*)/);if(e){const r=n||{};"active"===e[2]?r.passive=!1:r[e[2]]=!0,t.removeEventListener(e[1],i,r)}else t.removeEventListener(r,i,n)}}function Mn(t,e){let i=document.getElementById(t);return i?i.setAttribute("data-refcount",parseInt(i.getAttribute("data-refcount"))+1):((i=document.createElement("div")).setAttribute("aria-hidden","true"),i.setAttribute("data-refcount","1"),i.className=e,i.id=t,document.body.appendChild(i)),i}function Ln(t){if(!t)return null;const e=parseInt(t.getAttribute("data-refcount"));return e&&1!==e?t.setAttribute("data-refcount",e-1):t.remove(),t}function Fn(t){return t.element&&t.element.mathfield===t}class Dn{constructor(t,e){this.$setConfig(e||{}),this.element=t,t.mathfield=this,this.originalContent=t.innerHTML;let i=this.element.textContent;i&&(i=i.trim());let n="";this.config.substituteTextArea?"string"==typeof this.config.substituteTextArea?n+=this.config.substituteTextArea:n+="<span></span>":/android|ipad|ipod|iphone/i.test(navigator.userAgent)?n+="<span class='ML__textarea'>\n                <span class='ML__textarea__textarea'\n                    tabindex=\"0\" role=\"textbox\"\n                    style='display:inline-block;height:1px;width:1px' >\n                </span>\n            </span>":n+='<span class="ML__textarea"><textarea class="ML__textarea__textarea" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" aria-hidden="true" tabindex="0"></textarea></span>',n+='<span class="ML__fieldcontainer"><span class="ML__fieldcontainer__field"></span>',this.config.virtualKeyboardMode||(this.config.virtualKeyboardMode=window.matchMedia&&window.matchMedia("(any-pointer: coarse)").matches?"onfocus":"off"),"manual"===this.config.virtualKeyboardMode?(n+=`<button class="ML__virtual-keyboard-toggle" data-tooltip="${li("tooltip.toggle virtual keyboard")}">`,this.config.virtualKeyboardToggleGlyph?n+=this.config.virtualKeyboardToggleGlyph:n+='<span style="width: 21px; margin-top: 4px;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm16 336c0 8.823-7.177 16-16 16H48c-8.823 0-16-7.177-16-16V112c0-8.823 7.177-16 16-16h480c8.823 0 16 7.177 16 16v288zM168 268v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-336 80v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm384 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zM120 188v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-96 152v-8c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z"/></svg></span>',n+="</button>"):n+="<span ></span>",n+="</span>",n+='\n        <div class="sr-only">\n            <span aria-live="assertive" aria-atomic="true"></span>\n            <span></span>\n        </div>\n    ',this.element.innerHTML=n;let r=0;"function"==typeof this.config.substituteTextArea?this.textarea=this.config.substituteTextArea():this.textarea=this.element.children[r++].firstElementChild,this.field=this.element.children[r].children[0],this.field.addEventListener("wheel",t=>{t.preventDefault(),t.stopPropagation();let e=void 0===t.deltaX?t.detail:-t.deltaX;isFinite(e)||(e=t.wheelDelta/10),this.field.scroll({top:0,left:this.field.scrollLeft-5*e})},{passive:!1}),this.virtualKeyboardToggleDOMNode=this.element.children[r++].children[1],this._attachButtonHandlers(this.virtualKeyboardToggleDOMNode,{default:"toggleVirtualKeyboard",alt:"toggleVirtualKeyboardAlt",shift:"toggleVirtualKeyboardShift"}),this.ariaLiveText=this.element.children[r].children[0],this.accessibleNode=this.element.children[r++].children[1],this.popover=Mn("mathlive-popover-panel","ML__popover"),this.keystrokeCaption=Mn("mathlive-keystroke-caption-panel","ML__keystroke-caption"),this.keystrokeCaptionVisible=!1,this.virtualKeyboardVisible=!1,this.keystrokeBuffer="",this.keystrokeBufferStates=[],this.keystrokeBufferResetTimer=null,this.suggestionIndex=0,this.mode=e.defaultMode||"math",this.smartModeSuppressed=!1,this.style={},this.blurred=!0,Tn(this.element,"focus",this),Tn(this.element,"blur",this),Tn(this.textarea,"cut",this),Tn(this.textarea,"copy",this),Tn(this.textarea,"paste",this),Je.delegateKeyboardEvents(this.textarea,{container:this.element,allowDeadKey:()=>"text"===this.mode,typedText:this._onTypedText.bind(this),paste:this._onPaste.bind(this),keystroke:this._onKeystroke.bind(this),focus:this._onFocus.bind(this),blur:this._onBlur.bind(this)}),window.PointerEvent?Tn(this.field,"pointerdown",this):Tn(this.field,"touchstart:active mousedown",this),Tn(window,"resize",this);const s={...e};s.onSelectionDidChange=Dn.prototype._onSelectionDidChange.bind(this),s.onContentDidChange=Dn.prototype._onContentDidChange.bind(this),s.onAnnounce=this.config.onAnnounce,s.macros=this.config.macros,s.removeExtraneousParentheses=this.config.removeExtraneousParentheses,this.mathlist=new Ue.EditableMathlist(s,this),this.undoManager=new Qe.UndoManager(this.mathlist),i.length>0&&this.$latex(i),this.undoManager.startRecording(),this.undoManager.snapshot(this.config)}handleEvent(t){switch(t.type){case"focus":this._onFocus(t);break;case"blur":this._onBlur(t);break;case"touchstart":case"mousedown":case"pointerdown":this._onPointerDown(t);break;case"resize":this._resizeTimer&&window.cancelAnimationFrame(this._resizeTimer),this._resizeTimer=window.requestAnimationFrame(()=>Fn(this)&&this._onResize());break;case"cut":this._onCut(t);break;case"copy":this._onCopy(t);break;case"paste":this._onPaste(t)}}$revertToOriginalContent(){this.element.innerHTML=this.originalContent,this.element.mathfield=null,delete this.accessibleNode,delete this.ariaLiveText,delete this.field,_n(this.textarea,"cut",this),_n(this.textarea,"copy",this),_n(this.textarea,"paste",this),this.textarea.remove(),delete this.textarea,this.virtualKeyboardToggleDOMNode.remove(),delete this.virtualKeyboardToggleDOMNode,Ln(this.popover),Ln(this.keystrokeCaption),Ln(this.virtualKeyboard),Ln(document.getElementById("mathlive-alternate-keys-panel")),_n(this.element,"pointerdown",this),_n(this.element,"touchstart:active mousedown",this),_n(this.element,"focus",this),_n(this.element,"blur",this),_n(window,"resize",this),delete this.element}_resetKeystrokeBuffer(){this.keystrokeBuffer="",this.keystrokeBufferStates=[],clearTimeout(this.keystrokeBufferResetTimer)}_getCaretPosition(){const t=function t(e){if(e.classList.contains("ML__caret")||e.classList.contains("ML__text-caret")||e.classList.contains("ML__command-caret"))return e;let i;return Array.from(e.children).forEach(function(e){i=i||t(e)}),i}(this.field);if(t){const e=t.getBoundingClientRect();return{x:e.right,y:e.bottom,height:e.height}}return null}_getSelectionBounds(){const t=this.field.querySelectorAll(".ML__selected");if(t&&t.length>0){const e={top:1/0,bottom:-1/0,left:1/0,right:-1/0};t.forEach(t=>{const i=t.getBoundingClientRect();i.left<e.left&&(e.left=i.left),i.right>e.right&&(e.right=i.right),i.bottom>e.bottom&&(e.bottom=i.bottom),i.top<e.top&&(e.top=i.top)});const i=this.field.getBoundingClientRect(),n=e.right-e.left,r=e.bottom-e.top;return e.left=Math.ceil(e.left-i.left+this.field.scrollLeft),e.right=e.left+n,e.top=Math.ceil(e.top-i.top),e.bottom=e.top+r,e}return null}_pathFromPoint(t,e,i){let n;(i=i||{}).bias=i.bias||0;const r=function t(e,i,n){let r={element:null,distance:Number.POSITIVE_INFINITY},s=!0;if(e.getAttribute("data-atom-id")){r.element=e;const t=e.getBoundingClientRect(),o=i-(t.left+t.right)/2,a=n-(t.top+t.bottom)/2;r.distance=o*o+a*a,s=i>=t.left&&i<=t.right}return s&&e.children&&Array.from(e.children).forEach(function(e){const s=t(e,i,n);s.element&&s.distance<=r.distance&&(r=s)}),r}(this.field,t,e).element,s=r?r.getAttribute("data-atom-id"):null;if(s){const e=this.mathlist.filter(function(t,e){return e.captureSelection?e.filter(t=>t.id===s).length>0:e.id===s});if(e&&e.length>0)if(n=ke.pathFromString(e[0]).path,0===i.bias){const e=r.getBoundingClientRect();t<e.left+e.width/2&&!r.classList.contains("ML__placeholder")&&(n[n.length-1].offset=Math.max(0,n[n.length-1].offset-1))}else i.bias<0&&(n[n.length-1].offset=Math.min(this.mathlist.siblings().length-1,Math.max(0,n[n.length-1].offset+i.bias)))}return n}_onPointerDown(t){const e=this;let i,n=!1,r=!1,s=!1;if(1!==t.buttons)return;function o(t){window.PointerEvent?(_n(e.field,"pointermove",u),_n(e.field,"pointerend pointerleave pointercancel",o),e.field.releasePointerCapture(t.pointerId)):(_n(e.field,"touchmove",u),_n(e.field,"touchend touchleave",o),_n(window,"mousemove",u),_n(window,"mouseup blur",o)),n=!1,clearInterval(c),e.element.querySelectorAll(".ML__scroller").forEach(t=>t.parentNode.removeChild(t)),t.preventDefault(),t.stopPropagation()}let a=!1,l=!1;const c=setInterval(()=>{a?e.field.scroll({top:0,left:e.field.scrollLeft-16}):l&&e.field.scroll({top:0,left:e.field.scrollLeft+16})},32);function u(t){const n=t.touches?t.touches[0].clientX:t.clientX,s=t.touches?t.touches[0].clientY:t.clientY,o="touch"===t.pointerType?20:5;if(Date.now()<p+500&&Math.abs(h-n)<o&&Math.abs(d-s)<o)return t.preventDefault(),void t.stopPropagation();const c=e.field.getBoundingClientRect();l=n>c.right,a=n<c.left;let u=i;window.PointerEvent?t.isPrimary||(u=e._pathFromPoint(t.clientX,t.clientY,{bias:0})):t.touches&&2===t.touches.length&&(u=e._pathFromPoint(t.touches[1].clientX,t.touches[1].clientY,{bias:0}));const f=e._pathFromPoint(n,s,{bias:n<=h?n===h?0:-1:1});f&&e.mathlist.setRange(u,f,{extendToWordBoundary:r})&&e._requestUpdate(),t.preventDefault(),t.stopPropagation()}const h=t.touches?t.touches[0].clientX:t.clientX,d=t.touches?t.touches[0].clientY:t.clientY,p=Date.now();En&&Math.abs(En.x-h)<5&&Math.abs(En.y-d)<5&&Date.now()<En.time+500?(On+=1,En.time=p):(En={x:h,y:d,time:p},On=1);const f=this.field.getBoundingClientRect();if(h>=f.left&&h<=f.right&&d>=f.top&&d<=f.bottom){if(this.$hasFocus()||(s=!0,this.textarea.focus&&this.textarea.focus()),this._resetKeystrokeBuffer(),this.smartModeSuppressed=!1,i=this._pathFromPoint(h,d,{bias:0})){let a=document.createElement("div");a.className="ML__scroller",this.element.appendChild(a),a.style.left=f.left-200+"px",(a=document.createElement("div")).className="ML__scroller",this.element.appendChild(a),a.style.left=f.right+"px",t.shiftKey?(this.mathlist.setRange(this.mathlist.path,i),(i=ke.clone(this.mathlist.path))[i.length-1].offset-=1):this.mathlist.setPath(i,0),s=!0,this.style={},3===t.detail||On>2?(o(t),3!==t.detail&&3!==On||this.mathlist.selectAll_()):n||(n=!0,window.PointerEvent?(Tn(e.field,"pointermove",u),Tn(e.field,"pointerend pointercancel pointerup",o),e.field.setPointerCapture(t.pointerId)):(Tn(window,"blur",o),t.touches?(Tn(t.target,"touchmove",u),Tn(t.target,"touchend",o)):(Tn(window,"mousemove",u),Tn(window,"mouseup",o))),2!==t.detail&&2!==On||(r=!0,this.mathlist.selectGroup_()))}}else En=null;s&&this._requestUpdate(),t.preventDefault()}_onSelectionDidChange(){this.mathlist.commitCommandStringBeforeInsertionPoint();let t="";this.mathlist.forEachSelected(e=>{t+=e.toLatex()}),t?(this.textarea.value=t,this.$hasFocus()&&this.textarea.select&&this.textarea.select()):(this.textarea.value="",this.textarea.setAttribute("aria-label",""));{const t=this.mode;this.mode=this.mathlist.anchorMode()||this.config.defaultMode,this.mode!==t&&"function"==typeof this.config.onModeChange&&this.config.onModeChange(this,this.mode),"command"===t&&"command"!==this.mode&&(oi.hidePopover(this),this.mathlist.removeCommandString())}oi.updatePopoverPosition(this,{deferred:!0}),"function"==typeof this.config.onSelectionDidChange&&this.config.onSelectionDidChange(this)}_onContentDidChange(){this.undoManager.canRedo()?this.element.classList.add("can-redo"):this.element.classList.remove("can-redo"),this.undoManager.canUndo()?this.element.classList.add("can-undo"):this.element.classList.remove("can-undo"),"function"==typeof this.config.onContentDidChange&&this.config.onContentDidChange(this)}_nextAtomSpeechText(t){function e(t,e){return"body"===e.relation?{enclose:"cross out",leftright:"fence",surd:"square root",root:"math field"}[t.type]:{numer:"numerator",denom:"denominator",index:"index",body:"parent",subscript:"subscript",superscript:"superscript"}[e.relation]}const i=t?t.path:[],n=this.mathlist.path,r=n[n.length-1];let s="";for(;i.length>n.length;)s+="out of "+e(t.parent(),i[i.length-1])+"; ",i.pop();if(!this.mathlist.isCollapsed())return In(this,"",this.mathlist.getSelectedAtoms());const o=e(this.mathlist.parent(),r);0===r.offset&&(s+=(o?"start of "+o:"unknown")+": ");const a=this.mathlist.sibling(Math.max(1,this.mathlist.extent));return a?s+=In(this,"",a):0!==r.offset&&(s+=o?"end of "+o:"unknown"),s}_announce(t,e,i){"function"==typeof this.config.onAnnounce&&this.config.onAnnounce(this,t,e,i)}_onFocus(){this.blurred&&(this.blurred=!1,this.textarea.focus&&this.textarea.focus(),"onfocus"===this.config.virtualKeyboardMode&&this.showVirtualKeyboard_(),oi.updatePopoverPosition(this),this.config.onFocus&&this.config.onFocus(this),this._requestUpdate())}_onBlur(){this.blurred||(this.blurred=!0,this.ariaLiveText.textContent="","onfocus"===this.config.virtualKeyboardMode&&this.hideVirtualKeyboard_(),this.complete_({discard:!0}),this._requestUpdate(),this.config.onBlur&&this.config.onBlur(this))}_onResize(){this.element.classList.remove("ML__isNarrowWidth","ML__isWideWidth","ML__isExtendedWidth"),window.innerWidth>=1024?this.element.classList.add("ML__isExtendedWidth"):window.innerWidth>=768?this.element.classList.add("ML__isWideWidth"):this.element.classList.add("ML__isNarrowWidth"),oi.updatePopoverPosition(this)}toggleKeystrokeCaption_(){this.keystrokeCaptionVisible=!this.keystrokeCaptionVisible,this.keystrokeCaption.innerHTML="",this.keystrokeCaptionVisible||(this.keystrokeCaption.style.visibility="hidden")}_showKeystroke(t){const e=this.keystrokeCaption;if(e&&this.keystrokeCaptionVisible){const i=this.element.getBoundingClientRect();e.style.left=i.left+"px",e.style.top=i.top-64+"px",e.innerHTML="<span>"+(Le.stringify(t)||t)+"</span>"+e.innerHTML,e.style.visibility="visible",setTimeout(function(){e.childNodes.length>0&&e.removeChild(e.childNodes[e.childNodes.length-1]),0===e.childNodes.length&&(e.style.visibility="hidden")},3e3)}}$perform(t){if(!t)return!1;let e,i=!1,n=[],r=!1;if(Array.isArray(t)?(e=t[0],n=t.slice(1)):e=t,e=e.replace(/-\w/g,t=>t[1].toUpperCase()),e+="_","function"==typeof this.mathlist[e]){if(/^(delete|transpose|add)/.test(e)&&this._resetKeystrokeBuffer(),/^(delete|transpose|add)/.test(e)&&"command"!==this.mode&&(this.undoManager.pop(),this.undoManager.snapshot(this.config)),this.mathlist[e](...n),/^(delete|transpose|add)/.test(e)&&"command"!==this.mode&&this.undoManager.snapshot(this.config),/^(delete)/.test(e)&&"command"===this.mode){const t=this.mathlist.extractCommandStringAroundInsertionPoint(),e=Nt.suggest(t);0===e.length?oi.hidePopover(this):oi.showPopoverWithLatex(this,e[0].match,e.length>1)}r=!0,i=!0}else"function"==typeof this[e]&&(r=this[e](...n),i=!0);return this.mathlist.isCollapsed()&&!/^(transpose|paste|complete|((moveToNextChar|moveToPreviousChar|extend).*))_$/.test(e)||(this._resetKeystrokeBuffer(),this.style={}),r&&this._requestUpdate(),i}performWithFeedback_(t){return this.$focus(),this.config.keypressVibration&&navigator.vibrate&&navigator.vibrate(Cn),"moveToNextPlaceholder"===(t=t.replace(/-\w/g,t=>t[1].toUpperCase()))||"moveToPreviousPlaceholder"===t||"complete"===t?this.returnKeypressSound?(this.returnKeypressSound.load(),this.returnKeypressSound.play().catch(t=>void 0)):this.keypressSound&&(this.keypressSound.load(),this.keypressSound.play().catch(t=>void 0)):"deletePreviousChar"!==t&&"deleteNextChar"!==t&&"deletePreviousWord"!==t&&"deleteNextWord"!==t&&"deleteToGroupStart"!==t&&"deleteToGroupEnd"!==t&&"deleteToMathFieldStart"!==t&&"deleteToMathFieldEnd"!==t||!this.deleteKeypressSound?this.keypressSound&&(this.keypressSound.load(),this.keypressSound.play().catch(t=>void 0)):(this.deleteKeypressSound.load(),this.deleteKeypressSound.play().catch(t=>void 0)),this.$perform(t)}convertLastAtomsToText_(t,e){"function"==typeof t&&(e=t,t=1/0),void 0===t&&(t=1/0);let i=0,n=!1;for(this.mathlist.contentWillChange();!n;){const r=this.mathlist.sibling(i);(n=0===t||!r||"math"!==r.mode||!(/mord|textord|mpunct/.test(r.type)||"mop"===r.type&&/[a-zA-Z]+/.test(r.body))||r.superscript||r.subscript||e&&!e(r))||(r.applyStyle({mode:"text"}),r.latex=r.body),i-=1,t-=1}this.mathlist.contentDidChange()}convertLastAtomsToMath_(t,e){"function"==typeof t&&(e=t,t=1/0),void 0===t&&(t=1/0),this.mathlist.contentWillChange();let i=0,n=!1;for(;!n;){const r=this.mathlist.sibling(i);(n=0===t||!r||"text"!==r.mode||" "===r.body||e&&!e(r))||r.applyStyle({mode:"math",type:"mord"}),i-=1,t-=1}this.removeIsolatedSpace_(),this.mathlist.contentDidChange()}removeIsolatedSpace_(){let t=0;for(;this.mathlist.sibling(t)&&"math"===this.mathlist.sibling(t).mode;)t-=1;if(this.mathlist.sibling(t)&&"text"===this.mathlist.sibling(t).mode&&" "===this.mathlist.sibling(t).body&&(!this.mathlist.sibling(t-1)||"math"===this.mathlist.sibling(t-1).mode)){this.mathlist.contentWillChange(),this.mathlist.siblings().splice(t-1,1),this.mathlist.contentDidChange();const e=this.mathlist.suppressChangeNotifications;this.mathlist.suppressChangeNotifications=!0,this.mathlist.setSelection(this.mathlist.anchorOffset()-1),this.mathlist.suppressChangeNotifications=e}}getTextBeforeAnchor_(){let t="",e=0,i=!1;for(;!i;){const n=this.mathlist.sibling(e);(i=!(n&&("text"===n.mode&&!n.type||"math"===n.mode&&/mord|textord|mpunct/.test(n.type))))||(t=n.body+t),e-=1}return t}smartMode_(t,e){if(this.smartModeSuppressed)return!1;if(this.mathlist.endOffset()<this.mathlist.siblings().length-1)return!1;if(!e||e.ctrlKey||e.metaKey)return!1;const i=Je.eventToChar(e);if(i.length>1)return!1;if(!this.mathlist.isCollapsed())return!("text"!==this.mode||!/[/_^]/.test(i));const n=this.getTextBeforeAnchor_()+i;if("text"===this.mode){if("Esc"===t||/[/\\]/.test(i))return!0;if(/[\^_]/.test(i))return/(^|\s)[a-zA-Z][^_]$/.test(n)&&this.convertLastAtomsToMath_(1),!0;const e={")":"(","}":"{","]":"["}[i];if(e&&this.mathlist.parent()&&"leftright"===this.mathlist.parent().type&&this.mathlist.parent().leftDelim===e)return!0;if(/(^|[^a-zA-Z])(a|I)[ ]$/.test(n))return!1;if(/[$€£₤₺¥¤฿¢₡₧₨₹₩₱]/u.test(i))return!0;if(/(^|[^a-zA-Z'’])[a-zA-Z][ ]$/.test(n))return this.convertLastAtomsToMath_(1),!1;if(/[^0-9]\.[^0-9\s]$/.test(n)){this.convertLastAtomsToMath_(1);const t=this.mathlist.sibling(0);return t.body="⋅",t.autoFontFamily="cmr",t.latex="\\cdot",!0}if(/(^|\s)[a-zA-Z][^a-zA-Z]$/.test(n))return this.convertLastAtomsToMath_(1),!0;if(/\.[0-9]$/.test(n))return this.convertLastAtomsToMath_(1),!0;if(/[(][0-9+\-.]$/.test(n))return this.convertLastAtomsToMath_(1),!0;if(/[(][a-z][,;]$/.test(n))return this.convertLastAtomsToMath_(2),!0;if(/[0-9+\-=><*|]$/.test(i))return this.removeIsolatedSpace_(),!0}else{if("Spacebar"===t)return this.convertLastAtomsToText_(t=>/[a-z][:,;.]$/.test(t.body)),!0;if(/[a-zA-Z]{3,}$/.test(n)&&!/(dxd|abc|xyz|uvw)$/.test(n))return this.convertLastAtomsToText_(t=>/[a-zA-Z:,;.]/.test(t.body)),!0;if(/(^|\W)(if|If)$/i.test(n))return this.convertLastAtomsToText_(1),!0;if(/(\u0393|\u0394|\u0398|\u039b|\u039E|\u03A0|\u03A3|\u03a5|\u03a6|\u03a8|\u03a9|[\u03b1-\u03c9]|\u03d1|\u03d5|\u03d6|\u03f1|\u03f5){3,}$/u.test(n)&&!/(αβγ)$/.test(n))return this.convertLastAtomsToText_(t=>/(:|,|;|.|\u0393|\u0394|\u0398|\u039b|\u039E|\u03A0|\u03A3|\u03a5|\u03a6|\u03a8|\u03a9|[\u03b1-\u03c9]|\u03d1|\u03d5|\u03d6|\u03f1|\u03f5)/u.test(t.body)),!0;if(/\?|\./.test(i))return!0}return!1}_onKeystroke(t,e){if(this._showKeystroke(t),clearTimeout(this.keystrokeBufferResetTimer),this.config.onKeystroke&&!this.config.onKeystroke(this,t,e))return e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation()),!1;let i,n,r,s=!1;if("command"!==this.mode&&(!e||!e.ctrlKey&&!e.metaKey)){const t=Je.eventToChar(e);if("Backspace"!==t)if(!t||t.length>1)this._resetKeystrokeBuffer();else{const e=this.keystrokeBuffer+t;let r=0;for(;!i&&r<e.length;){let t;if(this.keystrokeBufferStates[r]){const e=new Ue.EditableMathlist;e.root=he.makeRoot("math",ve.parseTokens(v.tokenize(this.keystrokeBufferStates[r].latex),this.config.default,null,this.config.macros)),e.setPath(this.keystrokeBufferStates[r].selection),t=e.siblings()}else t=this.mathlist.siblings();i=Le.forString(this.mode,t,e.slice(r),this.config),r+=1}n=r-1,this.keystrokeBuffer+=t,this.keystrokeBufferStates.push(this.undoManager.save()),Le.startsWithString(e,this.config).length<=1?s=!0:this.config.inlineShortcutTimeout&&(this.keystrokeBufferResetTimer=setTimeout(()=>{this._resetKeystrokeBuffer()},this.config.inlineShortcutTimeout))}}if(this.config.smartMode){const n=this.mode;i?this.mode="math":this.smartMode_(t,e)&&(this.mode={math:"text",text:"math"}[this.mode],r=""),this.mode!==n&&"function"==typeof this.config.onModeChange&&this.config.onModeChange(this,this.mode)}if(i||r||(r=Le.selectorForKeystroke(this.mode,t)),!i&&!r)return!0;this.mathlist.decorateCommandStringAroundInsertionPoint(!1);const o=this.mathlist.parent();if("moveAfterParent"===r&&o&&"leftright"===o.type&&this.mathlist.endOffset()===this.mathlist.siblings().length-1&&this.config.smartFence&&this.mathlist._insertSmartFence(".")&&(r="",this._requestUpdate()),"math"===this.mode&&"Spacebar"===t&&!i){const t=this.mathlist.sibling(1),e=this.mathlist.sibling(-1);(t&&"text"===t.mode||e&&"text"===e.mode)&&this.mathlist.insert(" ",{mode:"text"})}if((r&&!this.$perform(r)||i)&&i){if(!/^(\\{|\\}|\\[|\\]|\\@|\\#|\\$|\\%|\\^|\\_|\\backslash)$/.test(i)){const t={...this.mathlist.anchorStyle(),...this.style};this.mathlist.insert(Je.eventToChar(e),{suppressChangeNotifications:!0,mode:this.mode,style:t});const i=this.mode;this.undoManager.snapshotAndCoalesce(this.config),this.undoManager.restore(this.keystrokeBufferStates[n],{...this.config,suppressChangeNotifications:!0}),this.mode=i}this.mathlist.contentWillChange();const t=this.mathlist.suppressChangeNotifications;this.mathlist.suppressChangeNotifications=!0;const r={...this.mathlist.anchorStyle(),...this.style};this.mathlist.insert(i,{format:"latex",mode:this.mode,style:r,smartFence:!0}),this.removeIsolatedSpace_(),i.endsWith(" ")&&(this.mode="text",this.mathlist.insert(" ",{mode:"text",style:r})),this.mathlist.suppressChangeNotifications=t,this.mathlist.contentDidChange(),this.undoManager.snapshot(this.config),this._requestUpdate(),this._announce("replacement"),s&&this._resetKeystrokeBuffer()}return this.scrollIntoView(),e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation()),!1}_onTypedText(t,e){if((e=e||{}).focus&&this.$focus(),e.feedback&&(this.config.keypressVibration&&navigator.vibrate&&navigator.vibrate(Cn),this.keypressSound&&(this.keypressSound.load(),this.keypressSound.play().catch(t=>void 0))),e.commandMode&&"command"!==this.mode&&this.switchMode_("command"),this.mathlist.decorateCommandStringAroundInsertionPoint(!1),e.simulateKeystroke){const e=t.charAt(0),i=Je.charToEvent(e);if(!this.$keystroke(Je.keyboardEventToString(i),i))return}let i="",n=!1;if(this.pasteInProgress)this.pasteInProgress=!1,this.mathlist.insert(t,{smartFence:this.config.smartFence,mode:"math"});else{const e={...this.mathlist.anchorStyle(),...this.style},r=g.splitGraphemes(t);for(const t of r)if("command"===this.mode){this.mathlist.removeSuggestion(),this.suggestionIndex=0;const e=this.mathlist.extractCommandStringAroundInsertionPoint(),r=Nt.suggest(e+t);n=r.length>1,0===r.length?(this.mathlist.insert(t,{mode:"command"}),/^\\[a-zA-Z\\*]+$/.test(e+t)&&this.mathlist.decorateCommandStringAroundInsertionPoint(!0),oi.hidePopover(this)):(this.mathlist.insert(t,{mode:"command"}),r[0].match!==e+t&&this.mathlist.insertSuggestion(r[0].match,-r[0].match.length+e.length+1),i=r[0].match)}else if("math"===this.mode){const i={"^":"moveToSuperscript",_:"moveToSubscript"," ":"moveAfterParent"}[t];if(i){if("moveToSuperscript"===i){if(this._superscriptDepth()>=this.config.scriptDepth[1])return void this._announce("plonk")}else if("moveToSubscript"===i&&this._subscriptDepth()>=this.config.scriptDepth[0])return void this._announce("plonk");this.$perform(i)}else this.config.smartSuperscript&&"superscript"===this.mathlist.relation()&&/[0-9]/.test(t)&&0===this.mathlist.siblings().filter(t=>"first"!==t.type).length?(this.mathlist.insert(t,{mode:"math",style:e}),this.mathlist.moveAfterParent_()):this.mathlist.insert(t,{mode:"math",style:e,smartFence:this.config.smartFence})}else"text"===this.mode&&this.mathlist.insert(t,{mode:"text",style:e})}"command"!==this.mode&&this.undoManager.snapshotAndCoalesce(this.config),this._requestUpdate(),this.scrollIntoView(),oi.showPopoverWithLatex(this,i,n)}_hash(){let t=0;const e=this.mathlist.root.toLatex(!1);for(let i=0;i<e.length;i++)t=31*t+e.charCodeAt(i),t|=0;return Math.abs(t)}_requestUpdate(){this.dirty||(this.dirty=!0,requestAnimationFrame(t=>Fn(this)&&this._render()))}_render(t){t=t||{},this.dirty=!1,window.mathlive||(window.mathlive={}),this.mathlist.anchor()||(this.mathlist.path=[{relation:"body",offset:0}]),this.mathlist.forEach(t=>{t.caret="",t.isSelected=!1});const e=this.$hasFocus();this.mathlist.isCollapsed()?this.mathlist.anchor().caret=e?this.mode:"":this.mathlist.forEachSelected(t=>{t.isSelected=!0});const i=he.decompose({mathstyle:"displaystyle",generateID:{seed:this._hash(),groupNumbers:t.forHighlighting},macros:this.config.macros},this.mathlist.root),n=tt.makeSpan(i,"ML__base");n.attributes={translate:"no","aria-hidden":"true"};const r=tt.makeSpan("","ML__strut");r.setStyle("height",n.height,"em");const s=[r];if(0!==n.depth){const t=tt.makeSpan("","ML__strut--bottom");t.setStyle("height",n.height+n.depth,"em"),t.setStyle("vertical-align",-n.depth,"em"),s.push(t)}s.push(n);const o=tt.makeSpan(s,"ML__mathlive");this.field.innerHTML=o.toMarkup(0,this.config.horizontalSpacingScale),this.field.classList.toggle("ML__focused",e),this.accessibleNode.innerHTML="<math xmlns='http://www.w3.org/1998/Math/MathML'>"+he.toMathML(this.mathlist.root,this.config)+"</math>";const a=this._getSelectionBounds();if(a){const t=document.createElement("div");t.classList.add("ML__selection"),t.style.position="absolute",t.style.left=a.left+"px",t.style.top=a.top+"px",t.style.width=Math.ceil(a.right-a.left)+"px",t.style.height=Math.ceil(a.bottom-a.top-1)+"px",this.field.insertBefore(t,this.field.childNodes[0])}}_onPaste(){return this.pasteInProgress=!0,!0}_onCut(){return setTimeout(function(){this.$clearSelection(),this._requestUpdate()}.bind(this),0),!0}_onCopy(t){this.mathlist.isCollapsed()?(t.clipboardData.setData("text/plain",this.$text("latex-expanded")),t.clipboardData.setData("application/json",this.$text("json")),t.clipboardData.setData("application/xml",this.$text("mathML"))):(t.clipboardData.setData("text/plain",this.$selectedText("latex-expanded")),t.clipboardData.setData("application/json",this.$selectedText("json")),t.clipboardData.setData("application/xml",this.$selectedText("mathML"))),t.preventDefault()}formatMathlist(t,e){let i="";if("latex"===(e=e||"latex")||"latex-expanded"===e)i=t.toLatex("latex-expanded"===e);else if("mathML"===e)i=t.toMathML(this.config);else if("spoken"===e)i=he.toSpeakableText(t,this.config);else if("spoken-text"===e){const e=this.config.textToSpeechMarkup;this.config.textToSpeechMarkup="",i=he.toSpeakableText(t,this.config),this.config.textToSpeechMarkup=e}else if("spoken-ssml"===e||"spoken-ssml-withHighlighting"===e){const n=this.config.textToSpeechMarkup,r=this.config.generateID;this.config.textToSpeechMarkup="ssml","spoken-ssml-withHighlighting"===e&&(this.config.generateID=!0),i=he.toSpeakableText(t,this.config),this.config.textToSpeechMarkup=n,this.config.generateID=r}else if("json"===e){const e=he.toAST(t,this.config);i=JSON.stringify(e)}else"ASCIIMath"===e&&(i=function t(e,i){if(!e)return"";if(Array.isArray(e)){let i="";if(0===e.length)return"";if("first"===e[0].type&&e.shift(),"text"===e[0].mode){let n=0;for(i='"';e[n]&&"text"===e[n].mode;)i+=e[n].body,n++;i+='"'+t(e.slice(n))}else{let n=0;for(;e[n]&&"math"===e[n].mode;)i+=t(e[n]),n++;i+=t(e.slice(n))}return i.trim()}let n="";const r=e.latex?e.latex.trim():null;let s;switch(e.type){case"group":case"root":n=t(e.body);break;case"array":break;case"genfrac":(e.leftDelim||e.rightDelim)&&(n+="."!==e.leftDelim&&e.leftDelim?e.leftDelim:"{:"),e.hasBarLine?(n+="(",n+=t(e.numer),n+=")/(",n+=t(e.denom),n+=")"):(n+="("+t(e.numer)+"),",n+="("+t(e.denom)+")"),(e.leftDelim||e.rightDelim)&&(n+="."!==e.rightDelim&&e.rightDelim?e.rightDelim:"{:");break;case"surd":e.index?n+="root("+t(e.index)+")("+t(e.body)+")":n+="sqrt("+t(e.body)+")";break;case"leftright":n+="."!==e.leftDelim&&e.leftDelim?e.leftDelim:"{:",n+=t(e.body),n+="."!==e.rightDelim&&e.rightDelim?e.rightDelim:"{:";break;case"sizeddelim":case"delim":case"accent":break;case"line":case"overlap":case"overunder":break;case"mord":"\\"===(n=bi[r]||r||("string"==typeof e.body?e.body:""))[0]&&(n+=""),(s=r?r.match(/[{]?\\char"([0-9abcdefABCDEF]*)[}]?/):null)?n=String.fromCharCode(parseInt("0x"+s[1])):n.length>0&&"\\"===n.charAt(0)&&(n="string"==typeof e.body?e.body.charAt(0):e.latex);break;case"mbin":case"mrel":case"textord":case"minner":n=r&&bi[r]?bi[r]:r&&xi[r]?xi[r]:e.body;break;case"mopen":case"mclose":n+=e.body;break;case"mpunct":n=xi[r]||r;break;case"mop":"​"!==e.body&&(n="",n+="\\operatorname"===r?e.body:e.body||r,n+=" ");break;case"mathstyle":case"box":case"spacing":case"enclose":break;case"space":n=" "}if(e.subscript){n+="_";const i=t(e.subscript);i.length>1&&!/^(-)?\d+(\.\d*)?$/.test(i)?n+="("+i+")":n+=i}if(e.superscript){n+="^";const i=t(e.superscript);i.length>1&&!/^(-)?\d+(\.\d*)?$/.test(i)?n+="("+i+")":n+=i}return n}(t,this.config));return i}$text(t){return this.formatMathlist(this.mathlist.root,t)}$selectedText(t){const e=this.mathlist.getSelectedAtoms();if(!e)return"";const i=he.makeRoot("math",e);return this.formatMathlist(i,t)}$selectionIsCollapsed(){return this.mathlist.isCollapsed()}$selectionDepth(){return this.mathlist.path.length}_superscriptDepth(){let t=0,e=0,i=this.mathlist.ancestor(e),n=!1;for(;i;)(i.superscript||i.subscript)&&(t+=1),i.superscript?n=!0:i.subscript&&(n=!1),e+=1,i=this.mathlist.ancestor(e);return n?t:0}_subscriptDepth(){let t=0,e=0,i=this.mathlist.ancestor(e),n=!1;for(;i;)(i.superscript||i.subscript)&&(t+=1),i.superscript?n=!1:i.subscript&&(n=!0),e+=1,i=this.mathlist.ancestor(e);return n?t:0}$selectionAtStart(){return 0===this.mathlist.startOffset()}$selectionAtEnd(){return this.mathlist.endOffset()>=this.mathlist.siblings().length-1}groupIsSelected(){return 0===this.mathlist.startOffset()&&this.mathlist.endOffset()>=this.mathlist.siblings().length-1}$latex(t,e){return t?(t!==this.mathlist.root.toLatex()&&(e=e||{},this.mathlist.insert(t,Object.assign({},this.config,{insertionMode:"replaceAll",selectionMode:"after",format:"latex",mode:"math",suppressChangeNotifications:e.suppressChangeNotifications})),this.undoManager.snapshot(this.config),this._requestUpdate()),t):this.mathlist.root.toLatex()}$el(){return this.element}undo(){return this.complete_(),this.undoManager.undo(this.config),!0}redo(){return this.complete_(),this.undoManager.redo(this.config),!0}scrollIntoView(){this.dirty&&this._render();let t=this._getCaretPosition();const e=this.field.getBoundingClientRect();if(!t){const i=this._getSelectionBounds();i&&(t={x:i.right+e.left-this.field.scrollLeft,y:i.top+e.top-this.field.scrollTop})}if(t){const i=t.x-window.scrollX;i<e.left?this.field.scroll({top:0,left:i-e.left+this.field.scrollLeft-20,behavior:"smooth"}):i>e.right&&this.field.scroll({top:0,left:i-e.right+this.field.scrollLeft+20,behavior:"smooth"})}}scrollToStart(){this.field.scroll(0,0)}scrollToEnd(){const t=this.field.getBoundingClientRect();this.field.scroll(t.left-window.scrollX,0)}enterCommandMode_(){this.switchMode_("command")}copyToClipboard_(){return this.$focus(),this.mathlist.isCollapsed()&&this.$select(),document.execCommand("copy"),!1}cutToClipboard_(){return this.$focus(),document.execCommand("cut"),!0}pasteFromClipboard_(){return this.$focus(),document.execCommand("paste"),!0}$insert(t,e){if("string"==typeof t&&t.length>0){if((e=e||{}).focus&&this.$focus(),e.feedback&&(this.config.keypressVibration&&navigator.vibrate&&navigator.vibrate(Cn),this.keypressSound&&(this.keypressSound.load(),this.keypressSound.play())),"\\\\"===t)this.mathlist.addRowAfter_();else if("&"===t)this.mathlist.addColumnAfter_();else{const i=this.style;this.mathlist.insert(t,{mode:this.mode,style:this.mathlist.anchorStyle(),...e}),e.resetStyle&&(this.style=i)}return this.undoManager.snapshot(this.config),this._requestUpdate(),!0}return!1}switchMode_(t,e,i){this._resetKeystrokeBuffer(),this.smartModeSuppressed=/text|math/.test(this.mode)&&/text|math/.test(t),e&&this.$insert(e,{format:"latex",mode:{math:"text",text:"math"}[t]}),this.mathlist.decorateCommandStringAroundInsertionPoint(!1),"command"===t?(this.mathlist.removeSuggestion(),oi.hidePopover(this),this.suggestionIndex=0,this.virtualKeyboardVisible&&this.switchKeyboardLayer_("lower-command"),this.mathlist.insert("",{mode:"math"})):this.mode=t,i&&this.$insert(i,{format:"latex",mode:t}),"function"==typeof this.config.onModeChange&&this.config.onModeChange(this,this.mode),this._requestUpdate()}complete_(t){if(t=t||{},oi.hidePopover(this),t.discard)return this.mathlist.spliceCommandStringAroundInsertionPoint(null),this.switchMode_("math"),!0;const e=this.mathlist.extractCommandStringAroundInsertionPoint(!t.acceptSuggestion);if(e){if("\\("===e||"\\)"===e)this.mathlist.spliceCommandStringAroundInsertionPoint([]),this.mathlist.insert(e.slice(1),{mode:this.mode});else{const t="math";if(Nt.commandAllowed(t,e)){const i=ve.parseTokens(v.tokenize(e),t,null,this.config.macros);this.mathlist.spliceCommandStringAroundInsertionPoint(i)}else{const i=ve.parseTokens(v.tokenize(e),t,null,this.config.macros);i?this.mathlist.spliceCommandStringAroundInsertionPoint(i):this.mathlist.decorateCommandStringAroundInsertionPoint(!0)}}return this.undoManager.snapshot(this.config),this._announce("replacement"),!0}return!1}_updateSuggestion(){this.mathlist.positionInsertionPointAfterCommitedCommand(),this.mathlist.removeSuggestion();const t=this.mathlist.extractCommandStringAroundInsertionPoint(),e=Nt.suggest(t);if(0===e.length)oi.hidePopover(this),this.mathlist.decorateCommandStringAroundInsertionPoint(!0);else{const i=this.suggestionIndex%e.length,n=t.length-e[i].match.length;0!==n&&this.mathlist.insertSuggestion(e[i].match,n),oi.showPopoverWithLatex(this,e[i].match,e.length>1)}this._requestUpdate()}nextSuggestion_(){return this.suggestionIndex+=1,this._updateSuggestion(),!1}previousSuggestion_(){if(this.suggestionIndex-=1,this.suggestionIndex<0){this.mathlist.removeSuggestion();const t=this.mathlist.extractCommandStringAroundInsertionPoint(),e=Nt.suggest(t);this.suggestionIndex=e.length-1}return this._updateSuggestion(),!1}_attachButtonHandlers(t,e){const i=this;let n,r,s,o,a;"object"==typeof e&&(e.default||e.pressed)?(e.default&&t.setAttribute("data-"+this.config.namespace+"command",JSON.stringify(e.default)),e.alt&&t.setAttribute("data-"+this.config.namespace+"command-alt",JSON.stringify(e.alt)),e.altshift&&t.setAttribute("data-"+this.config.namespace+"command-altshift",JSON.stringify(e.altshift)),e.shift&&t.setAttribute("data-"+this.config.namespace+"command-shift",JSON.stringify(e.shift)),e.pressed&&t.setAttribute("data-"+this.config.namespace+"command-pressed",JSON.stringify(e.pressed)),e.pressAndHoldStart&&t.setAttribute("data-"+this.config.namespace+"command-pressAndHoldStart",JSON.stringify(e.pressAndHoldStart)),e.pressAndHoldEnd&&t.setAttribute("data-"+this.config.namespace+"command-pressAndHoldEnd",JSON.stringify(e.pressAndHoldEnd))):t.setAttribute("data-"+this.config.namespace+"command",JSON.stringify(e)),Tn(t,"mousedown touchstart:passive",function(e){if("mousedown"!==e.type||1===e.buttons){e.stopPropagation(),e.preventDefault(),t.classList.add("pressed"),n=Date.now(),"touchstart"===e.type&&(s=e.changedTouches[0].identifier);const o=t.getAttribute("data-"+i.config.namespace+"command-pressed");o&&i.$perform(JSON.parse(o));const l=t.getAttribute("data-"+i.config.namespace+"command-pressAndHoldStart");l&&(r=t,a&&clearTimeout(a),a=window.setTimeout(function(){t.classList.contains("pressed")&&i.$perform(JSON.parse(l))},300))}}),Tn(t,"mouseleave touchcancel",function(){t.classList.remove("pressed")}),Tn(t,"touchmove:passive",function(t){t.preventDefault();for(let e=0;e<t.changedTouches.length;e++)if(t.changedTouches[e].identifier===s){const i=document.elementFromPoint(t.changedTouches[e].clientX,t.changedTouches[e].clientY);i!==o&&o&&(o.dispatchEvent(new MouseEvent("mouseleave"),{bubbles:!0}),o=null),i&&(o=i,i.dispatchEvent(new MouseEvent("mouseenter",{bubbles:!0,buttons:1})))}}),Tn(t,"mouseenter",function(e){1===e.buttons&&t.classList.add("pressed")}),Tn(t,"mouseup touchend click",function(e){if(o){e.stopPropagation(),e.preventDefault();const t=o;return o=null,void t.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0}))}if(t.classList.remove("pressed"),t.classList.add("active"),"click"===e.type&&0!==e.detail)return e.stopPropagation(),void e.preventDefault();window.setTimeout(function(){t.classList.remove("active")},150);let s=t.getAttribute("data-"+i.config.namespace+"command-pressAndHoldEnd");const a=Date.now();(t!==r||a<n+300)&&(s=void 0),!s&&e.altKey&&e.shiftKey&&(s=t.getAttribute("data-"+i.config.namespace+"command-altshift")),!s&&e.altKey&&(s=t.getAttribute("data-"+i.config.namespace+"command-alt")),!s&&e.shiftKey&&(s=t.getAttribute("data-"+i.config.namespace+"command-shift")),s||(s=t.getAttribute("data-"+i.config.namespace+"command")),s&&i.$perform(JSON.parse(s)),e.stopPropagation(),e.preventDefault()})}_makeButton(t,e,i,n){const r=document.createElement("span");return r.innerHTML=t,e&&r.classList.add([].slice.call(e.split(" "))),i&&r.setAttribute("aria-label",i),this._attachButtonHandlers(r,n),r}showAlternateKeys_(t,e){const i=Mn("mathlive-alternate-keys-panel","ML__keyboard alternate-keys");this.virtualKeyboard.classList.contains("material")&&i.classList.add("material"),e.length>=7?i.style.width="286px":4===e.length||2===e.length?i.style.width="146px":1===e.length?i.style.width="86px":i.style.width="146px",i.style.height="auto";let n="";for(const t of e)n+="<li","string"==typeof t?n+=' data-latex="'+t.replace(/"/g,"&quot;")+'"':(t.latex&&(n+=' data-latex="'+t.latex.replace(/"/g,"&quot;")+'"'),t.content&&(n+=' data-content="'+t.content.replace(/"/g,"&quot;")+'"'),t.insert&&(n+=' data-insert="'+t.insert.replace(/"/g,"&quot;")+'"'),t.command&&(n+=" data-command='"+t.command.replace(/"/g,"&quot;")+"'"),t.aside&&(n+=' data-aside="'+t.aside.replace(/"/g,"&quot;")+'"'),t.classes&&(n+=' data-classes="'+t.classes+'"')),n+=">",n+=t.label||"",n+="</li>";n="<ul>"+n+"</ul>",i.innerHTML=n,vi.makeKeycap(this,i.getElementsByTagName("li"),"performAlternateKeys");const r=this.virtualKeyboard.querySelector('div.keyboard-layer.is-visible div.rows ul li[data-alt-keys="'+t+'"]').getBoundingClientRect();if(r){r.top-i.clientHeight<0&&(i.style.width="auto",e.length<=6?i.style.height="56px":e.length<=12?i.style.height="108px":i.style.height="205px");const t=(r.top-i.clientHeight+5).toString()+"px",n=Math.max(0,Math.min(window.innerWidth-i.offsetWidth,(r.left+r.right-i.offsetWidth)/2))+"px";i.style.transform="translate("+n+","+t+")",i.classList.add("is-visible")}return!1}hideAlternateKeys_(){const t=document.getElementById("mathlive-alternate-keys-panel");return t&&(t.classList.remove("is-visible"),t.innerHTML="",Ln(t)),!1}performAlternateKeys_(t){return this.hideAlternateKeys_(),this.$perform(t)}switchKeyboardLayer_(t){if("off"!==this.config.virtualKeyboardMode){"lower-command"!==t&&"upper-command"!==t&&"symbols-command"!==t&&this.complete_(),this.showVirtualKeyboard_(),this.hideAlternateKeys_(),this.unshiftKeyboardLayer_();const e=this.virtualKeyboard.getElementsByClassName("keyboard-layer");let i=!1;for(let n=0;n<e.length;n++)if(e[n].dataset.layer===t){i=!0;break}if(i)for(let i=0;i<e.length;i++)e[i].dataset.layer===t?e[i].classList.add("is-visible"):e[i].classList.remove("is-visible");this.$focus()}return!0}shiftKeyboardLayer_(){const t=this.virtualKeyboard.querySelectorAll("div.keyboard-layer.is-visible .rows .keycap, div.keyboard-layer.is-visible .rows .action");if(t)for(let e=0;e<t.length;e++){const i=t[e];let n=i.getAttribute("data-shifted");if(n||/^[a-z]$/.test(i.innerHTML)){i.setAttribute("data-unshifted-content",i.innerHTML),n||(n=i.innerHTML.toUpperCase()),i.innerHTML=n;const t=i.getAttribute("data-"+this.config.namespace+"command");if(t){i.setAttribute("data-unshifted-command",t);const e=i.getAttribute("data-shifted-command");if(e)i.setAttribute("data-"+this.config.namespace+"command",e);else{const e=JSON.parse(t);Array.isArray(e)&&(e[1]=e[1].toUpperCase()),i.setAttribute("data-"+this.config.namespace+"command",JSON.stringify(e))}}}}return!1}unshiftKeyboardLayer_(){const t=this.virtualKeyboard.querySelectorAll("div.keyboard-layer.is-visible .rows .keycap, div.keyboard-layer.is-visible .rows .action");if(t)for(let e=0;e<t.length;e++){const i=t[e],n=i.getAttribute("data-unshifted-content");n&&(i.innerHTML=n);const r=i.getAttribute("data-unshifted-command");r&&i.setAttribute("data-"+this.config.namespace+"command",r)}return!1}insertAndUnshiftKeyboardLayer_(t){return this.$insert(t),this.unshiftKeyboardLayer_(),!0}toggleVirtualKeyboardAlt_(){let t=!1;return this.virtualKeyboard&&(t=this.virtualKeyboard.classList.contains("material"),this.virtualKeyboard.remove(),delete this.virtualKeyboard,this.virtualKeyboard=null),this.showVirtualKeyboard_(t?"":"material"),!1}toggleVirtualKeyboardShift_(){this.config.virtualKeyboardLayout={qwerty:"azerty",azerty:"qwertz",qwertz:"dvorak",dvorak:"colemak",colemak:"qwerty"}[this.config.virtualKeyboardLayout];let t=this.virtualKeyboard?this.virtualKeyboard.querySelector("div.keyboard-layer.is-visible"):null;return t=t?t.id:"",this.virtualKeyboard&&(this.virtualKeyboard.remove(),delete this.virtualKeyboard,this.virtualKeyboard=null),this.showVirtualKeyboard_(),t&&this.switchKeyboardLayer_(t),!1}showVirtualKeyboard_(t){return this.virtualKeyboardVisible=!1,this.toggleVirtualKeyboard_(t),!1}hideVirtualKeyboard_(){return this.virtualKeyboardVisible=!0,this.toggleVirtualKeyboard_(),!1}toggleVirtualKeyboard_(t){if(this.virtualKeyboardVisible=!this.virtualKeyboardVisible,this.virtualKeyboardVisible){this.virtualKeyboard?this.virtualKeyboard.classList.add("is-visible"):(this.virtualKeyboard=vi.make(this,t),Tn(this.virtualKeyboard,"touchstart:passive mousedown",function(){e.$focus()}),document.body.appendChild(this.virtualKeyboard));const e=this;window.setTimeout(function(){e.virtualKeyboard.classList.add("is-visible")},1)}else this.virtualKeyboard&&this.virtualKeyboard.classList.remove("is-visible");return"function"==typeof this.config.onVirtualKeyboardToggle&&this.config.onVirtualKeyboardToggle(this,this.virtualKeyboardVisible,this.virtualKeyboard),!1}$applyStyle(t){if(this._resetKeystrokeBuffer(),(t=function(t){const e={};return"string"==typeof t.mode&&(e.mode=t.mode.toLowerCase()),"string"==typeof t.color&&(e.color=t.color),"string"==typeof t.backgroundColor&&(e.backgroundColor=t.backgroundColor),"string"==typeof t.fontFamily&&(e.fontFamily=t.fontFamily),"string"==typeof t.series&&(e.fontSeries=t.series),"string"==typeof t.fontSeries&&(e.fontSeries=t.fontSeries.toLowerCase()),e.fontSeries&&(e.fontSeries={bold:"b",medium:"m",normal:"mn"}[e.fontSeries]||e.fontSeries),"string"==typeof t.shape&&(e.fontShape=t.shape),"string"==typeof t.fontShape&&(e.fontShape=t.fontShape.toLowerCase()),e.fontShape&&(e.fontShape={italic:"it",up:"n",upright:"n",normal:"n"}[e.fontShape]||e.fontShape),"string"==typeof t.size?e.fontSize=t.size:"number"==typeof t.size&&(e.fontSize="size"+Math.min(0,Math.max(10,t.size))),"string"==typeof t.fontSize&&(e.fontSize=t.fontSize.toLowerCase()),e.fontSize&&(e.fontSize={tiny:"size1",scriptsize:"size2",footnotesize:"size3",small:"size4",normal:"size5",normalsize:"size5",large:"size6",Large:"size7",LARGE:"size8",huge:"size9",Huge:"size10"}[e.fontSize]||e.fontSize),e}(t)).mode){if(this.mathlist.isCollapsed())this.switchMode_(t.mode);else{const t=this.mode,e="math"===(this.mathlist.anchorMode()||this.config.default)?"text":"math";let i=this.$selectedText("ASCIIMath");if("math"===e&&/^"[^"]+"$/.test(i)&&(i=i.slice(1,-1)),this.$insert(i,{mode:e,selectionMode:"item",format:"text"===e?"text":"ASCIIMath"}),this.mode=e,this.groupIsSelected()){const t=this.mathlist.parent();!t||"group"!==t.type&&"root"!==t.type||(t.mode=e)}this.mode!==t&&"function"==typeof this.config.onModeChange&&this.config.onModeChange(this,this.mode)}delete t.mode}return this.mathlist.isCollapsed()?(this.style.fontSeries&&t.fontSeries===this.style.fontSeries&&(t.fontSeries="auto"),t.fontShape&&t.fontShape===this.style.fontShape&&(t.fontShape="auto"),t.color&&t.color===this.style.color&&(t.color="none"),t.backgroundColor&&t.backgroundColor===this.style.backgroundColor&&(t.backgroundColor="none"),t.fontSize&&t.fontSize===this.style.fontSize&&(t.fontSize="auto"),this.style={...this.style,...t}):(this.mathlist._applyStyle(t),this.undoManager.snapshot(this.config)),!0}$hasFocus(){return document.hasFocus()&&document.activeElement===this.textarea}$focus(){this.$hasFocus()||(this.textarea.focus&&this.textarea.focus(),this._announce("line"))}$blur(){this.$hasFocus()&&this.textarea.blur&&this.textarea.blur()}$select(){this.mathlist.selectAll_()}$clearSelection(){this.mathlist.delete_()}$keystroke(t,e){return this._onKeystroke(t,e)}$typedText(t){this._onTypedText(t)}typedText_(t,e){return this._onTypedText(t,e)}$setConfig(t){if(this.config||(this.config={smartFence:!0,smartSuperscript:!0,scriptDepth:[1/0,1/0],removeExtraneousParentheses:!0,overrideDefaultInlineShortcuts:!1,virtualKeyboard:"",virtualKeyboardLayout:"qwerty",namespace:""}),this.config={...this.config,...t},void 0!==this.config.scriptDepth&&!Array.isArray(this.config.scriptDepth)){const t=parseInt(this.config.scriptDepth);this.config.scriptDepth=[t,t]}if(void 0===this.config.removeExtraneousParentheses&&(this.config.removeExtraneousParentheses=!0),this.config.onAnnounce=t.onAnnounce||Nn,this.config.macros=Object.assign({},Nt.MACROS,this.config.macros),!/^[a-z]*[-]?$/.test(this.config.namespace))throw Error("options.namespace must be a string of lowercase characters only");/-$/.test(this.config.namespace)||(this.config.namespace+="-"),li.locale=this.config.locale||li.locale,li.merge(this.config.strings),this.config.virtualKeyboardLayout=t.virtualKeyboardLayout||{fr:"azerty",be:"azerty",al:"qwertz",ba:"qwertz",cz:"qwertz",de:"qwertz",hu:"qwertz",sk:"qwertz",ch:"qwertz"}[li.locale.substring(0,2)]||"qwerty",this.keypressSound=void 0,this.spacebarKeypressSound=void 0,this.returnKeypressSound=void 0,this.deleteKeypressSound=void 0,this.config.keypressSound&&("string"==typeof this.config.keypressSound?(this.keypressSound=new Audio,this.keypressSound.preload="none",this.keypressSound.src=this.config.keypressSound,this.keypressSound.volume=An,this.spacebarKeypressSound=this.keypressSound,this.returnKeypressSound=this.keypressSound,this.deleteKeypressSound=this.keypressSound):(this.keypressSound=new Audio,this.keypressSound.preload="none",this.keypressSound.src=this.config.keypressSound.default,this.keypressSound.volume=An,this.spacebarKeypressSound=this.keypressSound,this.returnKeypressSound=this.keypressSound,this.deleteKeypressSound=this.keypressSound,this.config.keypressSound.spacebar&&(this.spacebarKeypressSound=new Audio,this.spacebarKeypressSound.preload="none",this.spacebarKeypressSound.src=this.config.keypressSound.spacebar,this.spacebarKeypressSound.volume=An),this.config.keypressSound.return&&(this.returnKeypressSound=new Audio,this.returnKeypressSound.preload="none",this.returnKeypressSound.src=this.config.keypressSound.return,this.returnKeypressSound.volume=An),this.config.keypressSound.delete&&(this.deleteKeypressSound=new Audio,this.deleteKeypressSound.preload="none",this.deleteKeypressSound.src=this.config.keypressSound.delete,this.deleteKeypressSound.volume=An))),this.config.plonkSound&&(this.plonkSound=new Audio,this.plonkSound.preload="none",this.plonkSound.src=this.config.plonkSound,this.plonkSound.volume=An)}speak_(t,e){e=e||{withHighlighting:!1};const i=function(t,e){let i=null;switch(e){case"all":i=t.mathlist.root;break;case"selection":t.mathlist.isCollapsed()||(i=t.mathlist.getSelectedAtoms());break;case"left":{const e=t.mathlist.siblings(),n=t.mathlist.startOffset();if(n>=1){i=[];for(let t=1;t<=n;t++)i.push(e[t])}break}case"right":{const e=t.mathlist.siblings(),n=t.mathlist.endOffset()+1;if(n<=e.length-1){i=[];for(let t=n;t<=e.length-1;t++)i.push(e[t])}break}case"start":case"end":break;case"group":i=t.mathlist.siblings();break;case"parent":{const e=t.mathlist.parent();e&&"root"!==e.type&&(i=t.mathlist.parent());break}}return i}(this,t);if(null===i)return this.config.handleSpeak(function(t){let e="";switch(t){case"all":break;case"selection":e="no selection";break;case"left":e="at start";break;case"right":e="at end";break;case"group":break;case"parent":e="no parent"}return e}(t)),!1;const n={...this.config};(e.withHighlighting||"amazon"===n.speechEngine)&&(n.textToSpeechMarkup=window.sre&&"sre"===n.textToSpeechRules?"ssml_step":"ssml",e.withHighlighting&&(n.generateID=!0));const r=he.toSpeakableText(i,n);return e.withHighlighting?(window.mathlive.readAloudMathField=this,this._render({forHighlighting:!0}),this.config.handleReadAloud&&this.config.handleReadAloud(this.field,r,this.config)):this.config.handleSpeak&&this.config.handleSpeak(r,n),!1}}let En,On=0;function In(t,e,i){const n=Object.assign({},t.config);return n.textToSpeechMarkup="",n.textToSpeechRulesOptions=n.textToSpeechRulesOptions||{},n.textToSpeechRulesOptions.markup="none",e+he.toSpeakableText(i,n)}function Nn(t,e,i,n){let r="";"plonk"===e?(t.plonkSound&&(t.plonkSound.load(),t.plonkSound.play().catch(t=>void 0)),t._resetKeystrokeBuffer()):"delete"===e?r=In(t,"deleted: ",n):"focus"===e||/move/.test(e)?r=(t.mathlist.isCollapsed()?"":"selected: ")+t._nextAtomSpeechText(i):"replacement"===e?r=In(t,"",t.mathlist.sibling(0)):"line"===e?(r=In(t,"",t.mathlist.root),t.accessibleNode.innerHTML='<math xmlns="http://www.w3.org/1998/Math/MathML">'+he.toMathML(t.mathlist.root,t.config)+"</math>",t.textarea.setAttribute("aria-label","after: "+r)):r=n?In(t,e+" ",n):e;const s=/\u00a0/.test(t.ariaLiveText.textContent)?"   ":"   ";t.ariaLiveText.textContent=r+s}Dn.prototype.undo_=Dn.prototype.undo,Dn.prototype.redo_=Dn.prototype.redo,Dn.prototype.scrollIntoView_=Dn.prototype.scrollIntoView,Dn.prototype.scrollToStart_=Dn.prototype.scrollToStart,Dn.prototype.scrollToEnd_=Dn.prototype.scrollToEnd,Dn.prototype.insert_=Dn.prototype.$insert;var zn={isValidMathfield:Fn,MathField:Dn};function Pn(t,e,i){let n=i,r=0;const s=t.length;for(;n<e.length;){const i=e[n];if(r<=0&&e.slice(n,n+s)===t)return n;"\\"===i?n++:"{"===i?r++:"}"===i&&r--,n++}return-1}function Rn(t,e,i,n){const r=[];for(let s=0;s<t.length;s++)if("text"===t[s].type){const o=t[s].data;let a,l=!0,c=0;-1!==(a=o.indexOf(e))&&((c=a)>0&&r.push({type:"text",data:o.slice(0,c)}),l=!1);let u=!1;for(;!u;){if(l){if(-1===(a=o.indexOf(e,c))){u=!0;break}c!==a&&r.push({type:"text",data:o.slice(c,a)}),c=a}else{if(-1===(a=Pn(i,o,c+e.length))){u=!0;break}r.push({type:"math",data:o.slice(c+e.length,a),rawData:o.slice(c,a+i.length),mathstyle:n}),c=a+i.length}l=!l}c<o.length&&r.push({type:"text",data:o.slice(c)})}else r.push(t[s]);return r}function Bn(t,e){let i=[{type:"text",data:t}];for(let t=0;t<e.inline.length;t++){const n=e.inline[t];i=Rn(i,n[0],n[1],"textstyle")}for(let t=0;t<e.display.length;t++){const n=e.display[t];i=Rn(i,n[0],n[1],"displaystyle")}return i}function qn(t,e,i,n){const r=function(t,e,i,n){let r=document.createElement("span");r.setAttribute("aria-hidden","true"),e.preserveOriginalContent&&(r.setAttribute("data-"+e.namespace+"original-content",t),i&&r.setAttribute("data-"+e.namespace+"original-mathstyle",i));try{r.innerHTML=e.renderToMarkup(t,i||"displaystyle","html",e.macros)}catch(e){if(!n)return null;r=document.createTextNode(t)}return r}(t,i,e,n);if(r&&/\b(mathml|speakable-text)\b/i.test(i.renderAccessibleContent)){const e=document.createDocumentFragment();if(/\bmathml\b/i.test(i.renderAccessibleContent)&&i.renderToMathML&&e.appendChild(function(t,e){const i=document.createElement("span");try{i.innerHTML="<math xmlns='http://www.w3.org/1998/Math/MathML'>"+e.renderToMathML(t,e)+"</math>"}catch(e){i.textContent=t}return i.className="sr-only",i}(t,i)),/\bspeakable-text\b/i.test(i.renderAccessibleContent)&&i.renderToSpeakableText){const n=document.createElement("span");n.innerHTML=i.renderToSpeakableText(t,i),n.className="sr-only",e.appendChild(n)}return e.appendChild(r),e}return r}function $n(t,e){let i=null;if(e.TeX.processEnvironments&&/^\s*\\begin/.test(t))(i=document.createDocumentFragment()).appendChild(qn(t,void 0,e,!0));else{const n=Bn(t,e.TeX.delimiters);if(1===n.length&&"text"===n[0].type)return null;i=document.createDocumentFragment();for(let t=0;t<n.length;t++)"text"===n[t].type?i.appendChild(document.createTextNode(n[t].data)):i.appendChild(qn(n[t].data,n[t].mathstyle,e,!0))}return i}const Hn={namespace:"",skipTags:["noscript","style","textarea","pre","code","annotation","annotation-xml"],processScriptType:"math/tex",ignoreClass:"tex2jax_ignore",processClass:"tex2jax_process",preserveOriginalContent:!0,renderAccessibleContent:"mathml",TeX:{disabled:!1,processEnvironments:!0,delimiters:{inline:[["\\(","\\)"]],display:[["$$","$$"],["\\[","\\]"]]}}};var Wn={renderMathInElement:function(t,e){try{if((e=Object.assign({},Hn,e)).ignoreClassPattern=new RegExp(e.ignoreClass),e.processClassPattern=new RegExp(e.processClass),e.processScriptTypePattern=new RegExp(e.processScriptType),e.macros=Nt.MACROS,e.namespace){if(!/^[a-z]+[-]?$/.test(e.namespace))throw Error("options.namespace must be a string of lowercase characters only");/-$/.test(e.namespace)||(e.namespace+="-")}!function t(e,i){const n=e.getAttribute("data-"+i.namespace+"original-content");if(n){const t=qn(n,e.getAttribute("data-"+i.namespace+"mathstyle"),i,!1);null!=t&&(e.textContent="",e.appendChild(t))}else{if(1===e.childNodes.length&&3===e.childNodes[0].nodeType){const t=e.childNodes[0].textContent;if(i.TeX.processEnvironments&&/^\s*\\begin/.test(t))return e.textContent="",void e.appendChild(qn(t,void 0,i,!0));const n=Bn(t,i.TeX.delimiters);if(1===n.length&&"math"===n[0].type)return e.textContent="",void e.appendChild(qn(n[0].data,n[0].mathstyle,i,!0));if(1===n.length&&"text"===n[0].type)return}for(let n=0;n<e.childNodes.length;n++){const r=e.childNodes[n];if(3===r.nodeType){const t=$n(r.textContent,i);t&&(n+=t.childNodes.length-1,e.replaceChild(t,r))}else if(1===r.nodeType){const e=r.nodeName.toLowerCase();if("script"===e&&i.processScriptTypePattern.test(r.type)){let t="displaystyle";for(const e of r.type.split(";")){const i=e.split("=");"mode"===i[0].toLowerCase()&&(t="display"===i[1].toLoweCase()?"displaystyle":"textstyle")}const e=qn(r.textContent,t,i,!0);r.parentNode.replaceChild(e,r)}else(i.processClassPattern.test(r.className)||!i.skipTags.includes(e)&&!i.ignoreClassPattern.test(r.className))&&t(r,i)}}}}(t,e)}catch(t){Error}}};function jn(t,e,i,n){e=e||"displaystyle";const r=v.tokenize(t),s=ve.parseTokens(r,"math",null,n);if("mathlist"===i)return s;let o=he.decompose({mathstyle:e},s);if(o=tt.coalesce(o),"span"===i)return o;const a=tt.makeSpan(o,"ML__base"),l=tt.makeSpan("","ML__strut");l.setStyle("height",a.height,"em");const c=[l];if(0!==a.depth){const t=tt.makeSpan("","ML__strut--bottom");t.setStyle("height",a.height+a.depth,"em"),t.setStyle("vertical-align",-a.depth,"em"),c.push(t)}return c.push(a),tt.makeSpan(c,"ML__mathlive").toMarkup()}function Kn(t,e){if(!he.toMathML)return"";(e=e||{}).macros=e.macros||{},Object.assign(e.macros,Nt.MACROS);const i=ve.parseTokens(v.tokenize(t),"math",null,e.macros);return he.toMathML(i,e)}function Un(t,e){if(!he.toSpeakableText)return"";(e=e||{}).macros=e.macros||{},Object.assign(e.macros,Nt.MACROS);const i=ve.parseTokens(v.tokenize(t),"math",null,e.macros);return he.toSpeakableText(i,e)}function Vn(t,e){if(!e&&window&&window.mathlive&&(e=window.mathlive.config),(e=e||{}).speechEngine&&"local"!==e.speechEngine)if("amazon"===e.speechEngine){if(window&&window.AWS){const i=new window.AWS.Polly({apiVersion:"2016-06-10"}),n={OutputFormat:"mp3",VoiceId:e.speechEngineVoice||"Joanna",Text:t,TextType:"ssml"};i.synthesizeSpeech(n,function(t,e){if(t);else if(e&&e.AudioStream){const t=new Uint8Array(e.AudioStream),i=new Blob([t.buffer],{type:"audio/mpeg"}),n=URL.createObjectURL(i);new Audio(n).play().catch(t=>void 0)}})}}else e.speechEngine;else{const e=new SpeechSynthesisUtterance(t);window&&window.speechSynthesis.speak(e)}}function Gn(t,e,i){if(!window)return;if(!i&&window.mathlive&&(i=window.mathlive.config),"amazon"!==(i=i||{}).speechEngine)return void(i.handleSpeak&&i.handleSpeak(e));if(!window.AWS)return;const n=new window.AWS.Polly({apiVersion:"2016-06-10"}),r={OutputFormat:"json",VoiceId:i.speechEngineVoice||"Joanna",Text:e,TextType:"ssml",SpeechMarkTypes:["ssml"]};window.mathlive=window.mathlive||{},window.mathlive.readAloudElement=t;const s=i.onReadAloudStatus||window.mathlive.onReadAloudStatus;n.synthesizeSpeech(r,function(t,e){if(t);else if(e&&e.AudioStream){const t=new TextDecoder("utf-8").decode(new Uint8Array(e.AudioStream));window.mathlive.readAloudMarks=t.split("\n").map(t=>t?JSON.parse(t):{}),window.mathlive.readAloudTokens=[];for(const t of window.mathlive.readAloudMarks)t.value&&window.mathlive.readAloudTokens.push(t.value);window.mathlive.readAloudCurrentMark="",r.OutputFormat="mp3",r.SpeechMarkTypes=[],n.synthesizeSpeech(r,function(t,e){if(t);else if(e&&e.AudioStream){const t=new Uint8Array(e.AudioStream),i=new Blob([t.buffer],{type:"audio/mpeg"}),n=URL.createObjectURL(i);window.mathlive.readAloudAudio?window.mathlive.readAloudAudio.pause():(window.mathlive.readAloudAudio=new Audio,window.mathlive.readAloudAudio.addEventListener("ended",()=>{s&&s(window.mathlive.readAloudMathField,"ended"),window.mathlive.readAloudMathField?(window.mathlive.readAloudMathField._render(),window.mathlive.readAloudElement=null,window.mathlive.readAloudMathField=null,window.mathlive.readAloudTokens=[],window.mathlive.readAloudMarks=[],window.mathlive.readAloudCurrentMark=""):function t(e){e.classList.remove("highlight"),e.children&&Array.from(e.children).forEach(e=>{t(e)})}(window.mathlive.readAloudElement)}),window.mathlive.readAloudAudio.addEventListener("timeupdate",()=>{let t="";const e=1e3*window.mathlive.readAloudAudio.currentTime+100;for(const i of window.mathlive.readAloudMarks)i.time<e&&(t=i.value);window.mathlive.readAloudCurrentMark!==t&&(window.mathlive.readAloudCurrentToken=t,t&&t===window.mathlive.readAloudFinalToken?window.mathlive.readAloudAudio.pause():(window.mathlive.readAloudCurrentMark=t,function t(e,i){i&&e.dataset.atomId!==i?(e.classList.remove("highlight"),e.children&&e.children.length>0&&Array.from(e.children).forEach(e=>{t(e,i)})):(e.classList.add("highlight"),e.children&&e.children.length>0&&Array.from(e.children).forEach(e=>{t(e)}))}(window.mathlive.readAloudElement,window.mathlive.readAloudCurrentMark)))})),window.mathlive.readAloudAudio.src=n,s&&s(window.mathlive.readAloudMathField,"playing"),window.mathlive.readAloudAudio.play()}})}})}function Xn(t){let e=t;if("string"==typeof t&&!(e=document.getElementById(t)))throw Error(`The element with ID "${t}" could not be found.`);return e}function Zn(t,e){Wn&&((e=e||{}).renderToMarkup=e.renderToMarkup||jn,e.renderToMathML=e.renderToMathML||Kn,e.renderToSpeakableText=e.renderToSpeakableText||Un,e.macros=e.macros||Nt.MACROS,Wn.renderMathInElement(Xn(t),e))}function Yn(t){if(t.namespace){if(!/^[a-z]+[-]?$/.test(t.namespace))throw Error("options.namespace must be a string of lowercase characters only");/-$/.test(t.namespace)||(t.namespace+="-")}}return{latexToMarkup:jn,latexToMathML:Kn,latexToSpeakableText:Un,latexToAST:function(t,e){if(!he.toAST)return{};(e=e||{}).macros=e.macros||{},Object.assign(e.macros,Nt.MACROS);const i=ve.parseTokens(v.tokenize(t),"math",null,e.macros);return he.toAST(i,e)},astToLatex:function(t,e){return function t(e,i){const n=Object.assign({precision:14,decimalMarker:".",groupSeparator:"\\, ",product:"\\cdot ",exponentProduct:"\\cdot ",exponentMarker:"",arcSeparator:"\\,",scientificNotation:"auto",beginRepeatingDigits:"\\overline{",endRepeatingDigits:"}"},i);let r="";if(void 0===e)return"";if("string"==typeof e&&(e=JSON.parse(e)),e.latex)r=e.latex;else if(Qi(e)){const i=Ji(e);if(i===-1/0)r="-\\infty ";else if(i===1/0)r="\\infty ";else if("object"!=typeof e.num||"string"!=typeof e.num.re&&"string"!=typeof e.num.im)r=isNaN(i)?"\\text{NaN}":xn(e.num,n);else{const t=tn(e),i=en(e);isNaN(t)||isNaN(i)?r="\\text{NaN}":Math.abs(i)<=Number.EPSILON&&Math.abs(t)<=Number.EPSILON?r="0":(Math.abs(t)>Number.EPSILON&&(r=xn(t,n)),Math.abs(i)>Number.EPSILON&&(Math.abs(t)>Number.EPSILON&&(r+=i>0?"+":""),r+=(1!==Math.abs(i)?xn(i,n):"")+"\\imaginaryI "))}nn(e)&&(r+="^{"+t(e.sup,n)+"}"),rn(e)&&(r+="_{"+t(e.sub,n)+"}")}else if(e.group)r=t(e.group,n),Qi(e.group)||Yi(e.group)?0!==en(e.group)&&(r=yn(e.fence||"(),",r)):r=yn(e.fence||"(),",r),nn(e)&&(r+="^{"+t(e.sup,n)+"}"),rn(e)&&(r+="_{"+t(e.sub,n)+"}");else if(e.fn)if("bind"===e.fn){if(r=t(Bi(e,0),n)+"|_{",e.arg&&2===e.arg.length)r+=t(Bi(e,1));else{let i="";for(let n=1;n<e.arg.length;n+=2)r+=i+t(Bi(e,n))+" = "+t(Bi(e,n+1)),i=", "}r+="}"}else if("divide"===e.fn)r="\\frac{"+t(Bi(e,0),n)+"}{"+t(Bi(e,1),n)+"}";else if("negate"===e.fn)r="-"+t(Bi(e,0),n);else if("subtract"===e.fn)r=t(Bi(e,0),n)+" - "+t(Bi(e,1),n);else if("add"!==e.fn&&"multiply"!==e.fn||!Array.isArray(e.arg))if("list"===e.fn||"list2"===e.fn){const i=[];for(const r of e.arg)i.push(t(r,n));r=i.join("list2"===e.fn?"; ":", ")}else if("pow"===e.fn&&Array.isArray(e.arg)&&e.arg.length>=2)r=t(Bi(e,0),n),Qi(Bi(e,0))||Yi(Bi(e,0))||(r=yn(e.fence||"(),",r)),r+="^{"+t(Bi(e,1),n)+"}";else if("equal"===e.fn&&e.arg&&e.arg.length>2)r=e.arg.map(e=>t(e,n)).join(" = ");else{const i=function(t){let e=Pi[t];return e||(e=t.length>1?"\\operatorname{"+t+"}%^%_ %":t+"%^%_ %"),e}(e.fn);r=i;let s="";if(/%(?![01_^])/.test(i)&&Array.isArray(e.arg)&&e.arg.length>1)r+=yn(e.fence||"(),",...e.arg.map(e=>t(e,n)));else if(Array.isArray(e.arg)&&e.arg.length>0){const o=t(Bi(e,0),n),a=t(Bi(e,1),n),l=[...e.arg];/%0/.test(i)&&(r=r.replace("%0",o),l.shift()),/%1/.test(i)&&(r=r.replace("%1",a),l.shift()),l.length>0&&(s=yn(e.fence||"(),",...l.map(e=>t(e,n))))}else s=yn(e.fence||"(),","");r=nn(e)?r.replace("%^","^{"+t(e.sup,n)+"}"):r.replace("%^",""),r=(r=(r=rn(e)?r.replace("%_","_{"+t(e.sub,n)+"}"):r.replace("%_","")).replace(/%(?![01_^])/,s)).replace("%0","").replace("%1","")}else{const i=[];for(const r of e.arg)"add"===r.fn||"subtract"===r.fn?i.push(yn("() ",t(r,n))):0!==tn(s=r)&&0!==en(s)?i.push(yn("() ",t(r,n))):nn(e)&&0!==en(r)&&1!==en(r)?i.push(yn("() ",t(r,n))):i.push(t(r,n));if("multiply"===e.fn)r=!e.arg||2!==e.arg.length||!Qi(e.arg[0])&&"divide"!==e.arg[0].fn||Qi(e.arg[1])&&(0!==tn(e.arg[1])||1!==en(e.arg[1]))?i.join(" \\times "):i[0]+i[1];else if(e.arg&&1===e.arg.length)r="negate"===e.arg[0].fn||Qi(e.arg[0])&&Ji(e.arg[0])<0?i[0]:"+"+i[0];else{r=i[0];for(let t=1;t<e.arg.length;t++)"negate"===e.arg[t].fn||Qi(e.arg[t])&&Ji(e.arg[t])<0?r+=i[t]:r+=" + "+i[t]}}else if("string"==typeof e.sym){let i=(r=Yi(e)).match(/^&#x([0-9a-f]+);$/i);i&&i[1]?r=String.fromCodePoint(parseInt(i[1],16)):(i=r.match(/^&#([0-9]+);$/i))&&i[1]&&(r=String.fromCodePoint(parseInt(i[1]))),"string"==typeof e.variant&&(r="\\"+{normal:"mathrm","double-struck":"mathbb",bold:"mathbf",fraktur:"mathfrak",script:"mathscr","sans-serif":"mathsf",monospace:"mathtt"}[e.variant]+"{"+r+"}"),nn(e)&&(r+="^{"+t(e.sup,n)+"}"),rn(e)&&(r+="_{"+t(e.sub,n)+"}")}else"string"==typeof e.text&&(r="\\text{"+e.text+"}");var s;return"string"==typeof e.error&&(r="\\bbox[#F56165]{"+r+"}"),r}(t,e)},makeMathField:function(t,e){if(!zn)throw Error("The MathField module is not loaded.");return(e=e||{}).handleSpeak=e.handleSpeak||Vn,e.handleReadAloud=e.handleReadAloud||Gn,new zn.MathField(Xn(t),e)},renderMathInDocument:function(t){Zn(document.body,t)},renderMathInElement:Zn,revertToOriginalContent:function(t,e){(t=(t=Xn(t)).children[1])instanceof zn.MathField?t.revertToOriginalContent():(Yn(e=e||{}),t.innerHTML=t.getAttribute("data-"+(e.namespace||"")+"original-content"))},getOriginalContent:function(t,e){return(t=(t=Xn(t)).children[1])instanceof zn.MathField?t.originalContent:(Yn(e=e||{}),t.getAttribute("data-"+(e.namespace||"")+"original-content"))},readAloud:Gn,readAloudStatus:function(){return window?(window.mathlive=window.mathlive||{},window.mathlive.readAloudAudio?window.mathlive.readAloudAudio.paused?"paused":window.mathlive.readAloudAudio.ended?"ready":"playing":"ready"):"unavailable"},pauseReadAloud:function(){window&&(window.mathlive=window.mathlive||{},window.mathlive.readAloudAudio&&(window.mathlive.onReadAloudStatus&&window.mathlive.onReadAloudStatus(window.mathlive.readAloudMathField,"paused"),window.mathlive.readAloudAudio.pause()))},resumeReadAloud:function(){window&&(window.mathlive=window.mathlive||{},window.mathlive.readAloudAudio&&(window.mathlive.onReadAloudStatus&&window.mathlive.onReadAloudStatus(window.mathlive.readAloudMathField,"playing"),window.mathlive.readAloudAudio.play()))},playReadAloud:function(t,e){if(window&&(window.mathlive=window.mathlive||{},window.mathlive.readAloudAudio)){let i=0;if(window.mathlive.readAloudFinalToken=null,t){window.mathlive.readAloudMarks=window.mathlive.readAloudMarks||[];for(const e of window.mathlive.readAloudMarks)e.value===t&&(i=e.time/1e3);let n=window.mathlive.readAloudTokens.indexOf(t);n>=0&&((n+=e)<window.mathlive.readAloudTokens.length&&(window.mathlive.readAloudFinalToken=n))}window.mathlive.readAloudAudio.currentTime=i,window.mathlive.onReadAloudStatus&&window.mathlive.onReadAloudStatus(window.mathlive.readAloudMathField,"playing"),window.mathlive.readAloudAudio.play()}}}},t.exports=n()},function(t,e,i){"use strict";i(107);var n=i(2),r=i(36),s=i(3),o=/./.toString,a=function(t){i(9)(RegExp.prototype,"toString",t,!0)};i(4)(function(){return"/a/b"!=o.call({source:"a",flags:"b"})})?a(function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!s&&t instanceof RegExp?r.call(t):void 0)}):"toString"!=o.name&&a(function(){return o.call(this)})},function(t,e,i){"use strict";var n=i(18),r=i(6),s=i(14),o=i(98),a=i(97),l=i(16),c=i(68),u=i(96);r(r.S+r.F*!i(90)(function(t){Array.from(t)}),"Array",{from:function(t){var e,i,r,h,d=s(t),p="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,g=void 0!==m,y=0,v=u(d);if(g&&(m=n(m,f>2?arguments[2]:void 0,2)),void 0==v||p==Array&&a(v))for(i=new p(e=l(d.length));e>y;y++)c(i,y,g?m(d[y],y):d[y]);else for(h=v.call(d),i=new p;!(r=h.next()).done;y++)c(i,y,g?o(h,m,[r.value,y],!0):r.value);return i.length=y,i}})},function(t,e,i){"use strict";var n=i(87)(!0);i(66)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})})},function(t,e,i){"use strict";var n=i(30),r=i(6),s=i(9),o=i(12),a=i(27),l=i(114),c=i(37),u=i(113),h=i(0)("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,i,f,m,g,y){l(i,e,f);var v,b,x,k=function(t){if(!d&&t in A)return A[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},w=e+" Iterator",S="values"==m,C=!1,A=t.prototype,T=A[h]||A["@@iterator"]||m&&A[m],_=T||k(m),M=m?S?k("entries"):_:void 0,L="Array"==e&&A.entries||T;if(L&&(x=u(L.call(new t)))!==Object.prototype&&x.next&&(c(x,w,!0),n||"function"==typeof x[h]||o(x,h,p)),S&&T&&"values"!==T.name&&(C=!0,_=function(){return T.call(this)}),n&&!y||!d&&!C&&A[h]||o(A,h,_),a[e]=_,a[w]=p,m)if(v={values:S?_:k("values"),keys:g?_:k("keys"),entries:M},y)for(b in v)b in A||s(A,b,v[b]);else r(r.P+r.F*(d||C),e,v);return v}},function(t,e,i){"use strict";var n=i(49),r=i(115),s=i(27),o=i(15);t.exports=i(66)(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])},"values"),s.Arguments=s.Array,n("keys"),n("values"),n("entries")},function(t,e,i){"use strict";var n=i(5),r=i(28);t.exports=function(t,e,i){e in t?n.f(t,e,r(0,i)):t[e]=i}},function(t,e){t.exports=class{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}text(t){return t}link(t,e,i){return""+i}image(t,e,i){return""+i}br(){return""}}},function(t,e,i){const n=i(48),{defaults:r}=i(23),{inline:s}=i(72),{findClosingBracket:o,escape:a}=i(20);t.exports=class t{constructor(t,e){if(this.options=e||r,this.links=t,this.rules=s.normal,this.options.renderer=this.options.renderer||new n,this.renderer=this.options.renderer,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=s.pedantic:this.options.gfm&&(this.options.breaks?this.rules=s.breaks:this.rules=s.gfm)}static get rules(){return s}static output(e,i,n){return new t(i,n).output(e)}output(e){let i,n,r,s,l,c,u="";for(;e;)if(l=this.rules.escape.exec(e))e=e.substring(l[0].length),u+=a(l[1]);else if(l=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(l[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(l[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(l[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(l[0])&&(this.inRawBlock=!1),e=e.substring(l[0].length),u+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(l[0]):a(l[0]):l[0];else if(l=this.rules.link.exec(e)){const n=o(l[2],"()");if(n>-1){const t=(0===l[0].indexOf("!")?5:4)+l[1].length+n;l[2]=l[2].substring(0,n),l[0]=l[0].substring(0,t).trim(),l[3]=""}e=e.substring(l[0].length),this.inLink=!0,r=l[2],this.options.pedantic?(i=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r))?(r=i[1],s=i[3]):s="":s=l[3]?l[3].slice(1,-1):"",r=r.trim().replace(/^<([\s\S]*)>$/,"$1"),u+=this.outputLink(l,{href:t.escapes(r),title:t.escapes(s)}),this.inLink=!1}else if((l=this.rules.reflink.exec(e))||(l=this.rules.nolink.exec(e))){if(e=e.substring(l[0].length),i=(l[2]||l[1]).replace(/\s+/g," "),!(i=this.links[i.toLowerCase()])||!i.href){u+=l[0].charAt(0),e=l[0].substring(1)+e;continue}this.inLink=!0,u+=this.outputLink(l,i),this.inLink=!1}else if(l=this.rules.strong.exec(e))e=e.substring(l[0].length),u+=this.renderer.strong(this.output(l[4]||l[3]||l[2]||l[1]));else if(l=this.rules.em.exec(e))e=e.substring(l[0].length),u+=this.renderer.em(this.output(l[6]||l[5]||l[4]||l[3]||l[2]||l[1]));else if(l=this.rules.code.exec(e))e=e.substring(l[0].length),u+=this.renderer.codespan(a(l[2].trim(),!0));else if(l=this.rules.br.exec(e))e=e.substring(l[0].length),u+=this.renderer.br();else if(l=this.rules.del.exec(e))e=e.substring(l[0].length),u+=this.renderer.del(this.output(l[1]));else if(l=this.rules.autolink.exec(e))e=e.substring(l[0].length),r="@"===l[2]?"mailto:"+(n=a(this.mangle(l[1]))):n=a(l[1]),u+=this.renderer.link(r,null,n);else if(this.inLink||!(l=this.rules.url.exec(e))){if(l=this.rules.text.exec(e))e=e.substring(l[0].length),this.inRawBlock?u+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(l[0]):a(l[0]):l[0]):u+=this.renderer.text(a(this.smartypants(l[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else{if("@"===l[2])r="mailto:"+(n=a(l[0]));else{do{c=l[0],l[0]=this.rules._backpedal.exec(l[0])[0]}while(c!==l[0]);n=a(l[0]),r="www."===l[1]?"http://"+n:n}e=e.substring(l[0].length),u+=this.renderer.link(r,null,n)}return u}static escapes(e){return e?e.replace(t.rules._escapes,"$1"):e}outputLink(t,e){const i=e.href,n=e.title?a(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(i,n,this.output(t[1])):this.renderer.image(i,n,a(t[1]))}smartypants(t){return this.options.smartypants?t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):t}mangle(t){if(!this.options.mangle)return t;const e=t.length;let i,n="",r=0;for(;r<e;r++)i=t.charCodeAt(r),Math.random()>.5&&(i="x"+i.toString(16)),n+="&#"+i+";";return n}}},function(t,e){t.exports=class{constructor(){this.seen={}}slug(t){let e=t.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(e)){const t=e;do{this.seen[t]++,e=t+"-"+this.seen[t]}while(this.seen.hasOwnProperty(e))}return this.seen[e]=0,e}}},function(t,e,i){const{noopTest:n,edit:r,merge:s}=i(20),o={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}|~{3,})([^`~\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:n,table:n,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};o.def=r(o.def).replace("label",o._label).replace("title",o._title).getRegex(),o.bullet=/(?:[*+-]|\d{1,9}\.)/,o.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,o.item=r(o.item,"gm").replace(/bull/g,o.bullet).getRegex(),o.list=r(o.list).replace(/bull/g,o.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+o.def.source+")").getRegex(),o._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",o._comment=/<!--(?!-?>)[\s\S]*?-->/,o.html=r(o.html,"i").replace("comment",o._comment).replace("tag",o._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),o.paragraph=r(o._paragraph).replace("hr",o.hr).replace("heading"," {0,3}#{1,6} +").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}|~{3,})[^`\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",o._tag).getRegex(),o.blockquote=r(o.blockquote).replace("paragraph",o.paragraph).getRegex(),o.normal=s({},o),o.gfm=s({},o.normal,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),o.pedantic=s({},o.normal,{html:r("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",o._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:n,paragraph:r(o.normal._paragraph).replace("hr",o.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",o.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const a={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:n,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:n,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/,_punctuation:"!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~"};a.em=r(a.em).replace(/punctuation/g,a._punctuation).getRegex(),a._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,a._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,a._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,a.autolink=r(a.autolink).replace("scheme",a._scheme).replace("email",a._email).getRegex(),a._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,a.tag=r(a.tag).replace("comment",o._comment).replace("attribute",a._attribute).getRegex(),a._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,a._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,a._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,a.link=r(a.link).replace("label",a._label).replace("href",a._href).replace("title",a._title).getRegex(),a.reflink=r(a.reflink).replace("label",a._label).getRegex(),a.normal=s({},a),a.pedantic=s({},a.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:r(/^!?\[(label)\]\((.*?)\)/).replace("label",a._label).getRegex(),reflink:r(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",a._label).getRegex()}),a.gfm=s({},a.normal,{escape:r(a.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),a.gfm.url=r(a.gfm.url,"i").replace("email",a.gfm._extended_email).getRegex(),a.breaks=s({},a.gfm,{br:r(a.br).replace("{2,}","*").getRegex(),text:r(a.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),t.exports={block:o,inline:a}},function(t,e,i){!function(t){"use strict";t.overlayMode=function(e,i,n){return{startState:function(){return{base:t.startState(e),overlay:t.startState(i),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(n){return{base:t.copyState(e,n.base),overlay:t.copyState(i,n.overlay),basePos:n.basePos,baseCur:null,overlayPos:n.overlayPos,overlayCur:null}},token:function(t,r){return(t!=r.streamSeen||Math.min(r.basePos,r.overlayPos)<t.start)&&(r.streamSeen=t,r.basePos=r.overlayPos=t.start),t.start==r.basePos&&(r.baseCur=e.token(t,r.base),r.basePos=t.pos),t.start==r.overlayPos&&(t.pos=t.start,r.overlayCur=i.token(t,r.overlay),r.overlayPos=t.pos),t.pos=Math.min(r.basePos,r.overlayPos),null==r.overlayCur?r.baseCur:null!=r.baseCur&&r.overlay.combineTokens||n&&null==r.overlay.combineTokens?r.baseCur+" "+r.overlayCur:r.overlayCur},indent:e.indent&&function(t,i,n){return e.indent(t.base,i,n)},electricChars:e.electricChars,innerMode:function(t){return{state:t.base,mode:e}},blankLine:function(t){var r,s;return e.blankLine&&(r=e.blankLine(t.base)),i.blankLine&&(s=i.blankLine(t.overlay)),null==s?r:n&&null!=r?r+" "+s:s}}}}(i(7))},function(t,e,i){!function(t){"use strict";var e={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},i={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};t.defineMode("xml",function(n,r){var s,o,a=n.indentUnit,l={},c=r.htmlMode?e:i;for(var u in c)l[u]=c[u];for(var u in r)l[u]=r[u];function h(t,e){function i(i){return e.tokenize=i,i(t,e)}var n=t.next();return"<"==n?t.eat("!")?t.eat("[")?t.match("CDATA[")?i(p("atom","]]>")):null:t.match("--")?i(p("comment","--\x3e")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),i(function t(e){return function(i,n){for(var r;null!=(r=i.next());){if("<"==r)return n.tokenize=t(e+1),n.tokenize(i,n);if(">"==r){if(1==e){n.tokenize=h;break}return n.tokenize=t(e-1),n.tokenize(i,n)}}return"meta"}}(1))):null:t.eat("?")?(t.eatWhile(/[\w\._\-]/),e.tokenize=p("meta","?>"),"meta"):(s=t.eat("/")?"closeTag":"openTag",e.tokenize=d,"tag bracket"):"&"==n?(t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";"))?"atom":"error":(t.eatWhile(/[^&<]/),null)}function d(t,e){var i,n,r=t.next();if(">"==r||"/"==r&&t.eat(">"))return e.tokenize=h,s=">"==r?"endTag":"selfcloseTag","tag bracket";if("="==r)return s="equals",null;if("<"==r){e.tokenize=h,e.state=g,e.tagName=e.tagStart=null;var o=e.tokenize(t,e);return o?o+" tag error":"tag error"}return/[\'\"]/.test(r)?(e.tokenize=(i=r,(n=function(t,e){for(;!t.eol();)if(t.next()==i){e.tokenize=d;break}return"string"}).isInAttribute=!0,n),e.stringStartCol=t.column(),e.tokenize(t,e)):(t.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function p(t,e){return function(i,n){for(;!i.eol();){if(i.match(e)){n.tokenize=h;break}i.next()}return t}}function f(t){t.context&&(t.context=t.context.prev)}function m(t,e){for(var i;;){if(!t.context)return;if(i=t.context.tagName,!l.contextGrabbers.hasOwnProperty(i)||!l.contextGrabbers[i].hasOwnProperty(e))return;f(t)}}function g(t,e,i){return"openTag"==t?(i.tagStart=e.column(),y):"closeTag"==t?v:g}function y(t,e,i){return"word"==t?(i.tagName=e.current(),o="tag",k):l.allowMissingTagName&&"endTag"==t?(o="tag bracket",k(t,0,i)):(o="error",y)}function v(t,e,i){if("word"==t){var n=e.current();return i.context&&i.context.tagName!=n&&l.implicitlyClosed.hasOwnProperty(i.context.tagName)&&f(i),i.context&&i.context.tagName==n||!1===l.matchClosing?(o="tag",b):(o="tag error",x)}return l.allowMissingTagName&&"endTag"==t?(o="tag bracket",b(t,0,i)):(o="error",x)}function b(t,e,i){return"endTag"!=t?(o="error",b):(f(i),g)}function x(t,e,i){return o="error",b(t,0,i)}function k(t,e,i){if("word"==t)return o="attribute",w;if("endTag"==t||"selfcloseTag"==t){var n=i.tagName,r=i.tagStart;return i.tagName=i.tagStart=null,"selfcloseTag"==t||l.autoSelfClosers.hasOwnProperty(n)?m(i,n):(m(i,n),i.context=new function(t,e,i){this.prev=t.context,this.tagName=e,this.indent=t.indented,this.startOfLine=i,(l.doNotIndent.hasOwnProperty(e)||t.context&&t.context.noIndent)&&(this.noIndent=!0)}(i,n,r==i.indented)),g}return o="error",k}function w(t,e,i){return"equals"==t?S:(l.allowMissing||(o="error"),k(t,0,i))}function S(t,e,i){return"string"==t?C:"word"==t&&l.allowUnquoted?(o="string",k):(o="error",k(t,0,i))}function C(t,e,i){return"string"==t?C:k(t,0,i)}return h.isInText=!0,{startState:function(t){var e={tokenize:h,state:g,indented:t||0,tagName:null,tagStart:null,context:null};return null!=t&&(e.baseIndent=t),e},token:function(t,e){if(!e.tagName&&t.sol()&&(e.indented=t.indentation()),t.eatSpace())return null;s=null;var i=e.tokenize(t,e);return(i||s)&&"comment"!=i&&(o=null,e.state=e.state(s||i,t,e),o&&(i="error"==o?i+" error":o)),i},indent:function(e,i,n){var r=e.context;if(e.tokenize.isInAttribute)return e.tagStart==e.indented?e.stringStartCol+1:e.indented+a;if(r&&r.noIndent)return t.Pass;if(e.tokenize!=d&&e.tokenize!=h)return n?n.match(/^(\s*)/)[0].length:0;if(e.tagName)return!1!==l.multilineTagIndentPastTag?e.tagStart+e.tagName.length+2:e.tagStart+a*(l.multilineTagIndentFactor||1);if(l.alignCDATA&&/<!\[CDATA\[/.test(i))return 0;var s=i&&/^<(\/)?([\w_:\.-]*)/.exec(i);if(s&&s[1])for(;r;){if(r.tagName==s[2]){r=r.prev;break}if(!l.implicitlyClosed.hasOwnProperty(r.tagName))break;r=r.prev}else if(s)for(;r;){var o=l.contextGrabbers[r.tagName];if(!o||!o.hasOwnProperty(s[2]))break;r=r.prev}for(;r&&r.prev&&!r.startOfLine;)r=r.prev;return r?r.indent+a:e.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:l.htmlMode?"html":"xml",helperType:l.htmlMode?"html":"xml",skipAttribute:function(t){t.state==S&&(t.state=k)},xmlCurrentTag:function(t){return t.tagName?{name:t.tagName,close:"closeTag"==t.type}:null},xmlCurrentContext:function(t){for(var e=[],i=t.context;i;i=i.prev)i.tagName&&e.push(i.tagName);return e.reverse()}}}),t.defineMIME("text/xml","xml"),t.defineMIME("application/xml","xml"),t.mimeModes.hasOwnProperty("text/html")||t.defineMIME("text/html",{name:"xml",htmlMode:!0})}(i(7))},function(t,e,i){!function(t){"use strict";t.defineMode("markdown",function(e,i){var n=t.getMode(e,"text/html"),r="null"==n.name;void 0===i.highlightFormatting&&(i.highlightFormatting=!1),void 0===i.maxBlockquoteDepth&&(i.maxBlockquoteDepth=0),void 0===i.taskLists&&(i.taskLists=!1),void 0===i.strikethrough&&(i.strikethrough=!1),void 0===i.emoji&&(i.emoji=!1),void 0===i.fencedCodeBlockHighlighting&&(i.fencedCodeBlockHighlighting=!0),void 0===i.xml&&(i.xml=!0),void 0===i.tokenTypeOverrides&&(i.tokenTypeOverrides={});var s={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var o in s)s.hasOwnProperty(o)&&i.tokenTypeOverrides[o]&&(s[o]=i.tokenTypeOverrides[o]);var a=/^([*\-_])(?:\s*\1){2,}\s*$/,l=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,c=/^\[(x| )\](?=\s)/i,u=i.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,h=/^ *(?:\={1,}|-{1,})\s*$/,d=/^[^#!\[\]*_\\<>` "'(~:]+/,p=/^(~~~+|```+)[ \t]*([\w+#-]*)[^\n`]*$/,f=/^\s*\[[^\]]+?\]:.*$/,m=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/;function g(t,e,i){return e.f=e.inline=i,i(t,e)}function y(t,e,i){return e.f=e.block=i,i(t,e)}function v(e){if(e.linkTitle=!1,e.linkHref=!1,e.linkText=!1,e.em=!1,e.strong=!1,e.strikethrough=!1,e.quote=0,e.indentedCode=!1,e.f==x){var i=r;if(!i){var s=t.innerMode(n,e.htmlState);i="xml"==s.mode.name&&null===s.state.tagStart&&!s.state.context&&s.state.tokenize.isInText}i&&(e.f=C,e.block=b,e.htmlState=null)}return e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.prevLine=e.thisLine,e.thisLine={stream:null},null}function b(n,r){var o,d=n.column()===r.indentation,m=!(o=r.prevLine.stream)||!/\S/.test(o.string),y=r.indentedCode,v=r.prevLine.hr,b=!1!==r.list,x=(r.listStack[r.listStack.length-1]||0)+3;r.indentedCode=!1;var S=r.indentation;if(null===r.indentationDiff&&(r.indentationDiff=r.indentation,b)){for(r.list=null;S<r.listStack[r.listStack.length-1];)r.listStack.pop(),r.listStack.length?r.indentation=r.listStack[r.listStack.length-1]:r.list=!1;!1!==r.list&&(r.indentationDiff=S-r.listStack[r.listStack.length-1])}var C=!(m||v||r.prevLine.header||b&&y||r.prevLine.fencedCodeEnd),A=(!1===r.list||v||m)&&r.indentation<=x&&n.match(a),T=null;if(r.indentationDiff>=4&&(y||r.prevLine.fencedCodeEnd||r.prevLine.header||m))return n.skipToEnd(),r.indentedCode=!0,s.code;if(n.eatSpace())return null;if(d&&r.indentation<=x&&(T=n.match(u))&&T[1].length<=6)return r.quote=0,r.header=T[1].length,r.thisLine.header=!0,i.highlightFormatting&&(r.formatting="header"),r.f=r.inline,w(r);if(r.indentation<=x&&n.eat(">"))return r.quote=d?1:r.quote+1,i.highlightFormatting&&(r.formatting="quote"),n.eatSpace(),w(r);if(!A&&!r.setext&&d&&r.indentation<=x&&(T=n.match(l))){var _=T[1]?"ol":"ul";return r.indentation=S+n.current().length,r.list=!0,r.quote=0,r.listStack.push(r.indentation),r.em=!1,r.strong=!1,r.code=!1,r.strikethrough=!1,i.taskLists&&n.match(c,!1)&&(r.taskList=!0),r.f=r.inline,i.highlightFormatting&&(r.formatting=["list","list-"+_]),w(r)}return d&&r.indentation<=x&&(T=n.match(p,!0))?(r.quote=0,r.fencedEndRE=new RegExp(T[1]+"+ *$"),r.localMode=i.fencedCodeBlockHighlighting&&function(i){if(t.findModeByName){var n=t.findModeByName(i);n&&(i=n.mime||n.mimes[0])}var r=t.getMode(e,i);return"null"==r.name?null:r}(T[2]),r.localMode&&(r.localState=t.startState(r.localMode)),r.f=r.block=k,i.highlightFormatting&&(r.formatting="code-block"),r.code=-1,w(r)):r.setext||!(C&&b||r.quote||!1!==r.list||r.code||A||f.test(n.string))&&(T=n.lookAhead(1))&&(T=T.match(h))?(r.setext?(r.header=r.setext,r.setext=0,n.skipToEnd(),i.highlightFormatting&&(r.formatting="header")):(r.header="="==T[0].charAt(0)?1:2,r.setext=r.header),r.thisLine.header=!0,r.f=r.inline,w(r)):A?(n.skipToEnd(),r.hr=!0,r.thisLine.hr=!0,s.hr):"["===n.peek()?g(n,r,M):g(n,r,r.inline)}function x(e,i){var s=n.token(e,i.htmlState);if(!r){var o=t.innerMode(n,i.htmlState);("xml"==o.mode.name&&null===o.state.tagStart&&!o.state.context&&o.state.tokenize.isInText||i.md_inside&&e.current().indexOf(">")>-1)&&(i.f=C,i.block=b,i.htmlState=null)}return s}function k(t,e){var n,r=e.listStack[e.listStack.length-1]||0,o=e.indentation<r,a=r+3;return e.fencedEndRE&&e.indentation<=a&&(o||t.match(e.fencedEndRE))?(i.highlightFormatting&&(e.formatting="code-block"),o||(n=w(e)),e.localMode=e.localState=null,e.block=b,e.f=C,e.fencedEndRE=null,e.code=0,e.thisLine.fencedCodeEnd=!0,o?y(t,e,e.block):n):e.localMode?e.localMode.token(t,e.localState):(t.skipToEnd(),s.code)}function w(t){var e=[];if(t.formatting){e.push(s.formatting),"string"==typeof t.formatting&&(t.formatting=[t.formatting]);for(var n=0;n<t.formatting.length;n++)e.push(s.formatting+"-"+t.formatting[n]),"header"===t.formatting[n]&&e.push(s.formatting+"-"+t.formatting[n]+"-"+t.header),"quote"===t.formatting[n]&&(!i.maxBlockquoteDepth||i.maxBlockquoteDepth>=t.quote?e.push(s.formatting+"-"+t.formatting[n]+"-"+t.quote):e.push("error"))}if(t.taskOpen)return e.push("meta"),e.length?e.join(" "):null;if(t.taskClosed)return e.push("property"),e.length?e.join(" "):null;if(t.linkHref?e.push(s.linkHref,"url"):(t.strong&&e.push(s.strong),t.em&&e.push(s.em),t.strikethrough&&e.push(s.strikethrough),t.emoji&&e.push(s.emoji),t.linkText&&e.push(s.linkText),t.code&&e.push(s.code),t.image&&e.push(s.image),t.imageAltText&&e.push(s.imageAltText,"link"),t.imageMarker&&e.push(s.imageMarker)),t.header&&e.push(s.header,s.header+"-"+t.header),t.quote&&(e.push(s.quote),!i.maxBlockquoteDepth||i.maxBlockquoteDepth>=t.quote?e.push(s.quote+"-"+t.quote):e.push(s.quote+"-"+i.maxBlockquoteDepth)),!1!==t.list){var r=(t.listStack.length-1)%3;r?1===r?e.push(s.list2):e.push(s.list3):e.push(s.list1)}return t.trailingSpaceNewLine?e.push("trailing-space-new-line"):t.trailingSpace&&e.push("trailing-space-"+(t.trailingSpace%2?"a":"b")),e.length?e.join(" "):null}function S(t,e){if(t.match(d,!0))return w(e)}function C(e,r){var o=r.text(e,r);if(void 0!==o)return o;if(r.list)return r.list=null,w(r);if(r.taskList){var a=" "===e.match(c,!0)[1];return a?r.taskOpen=!0:r.taskClosed=!0,i.highlightFormatting&&(r.formatting="task"),r.taskList=!1,w(r)}if(r.taskOpen=!1,r.taskClosed=!1,r.header&&e.match(/^#+$/,!0))return i.highlightFormatting&&(r.formatting="header"),w(r);var l=e.next();if(r.linkTitle){r.linkTitle=!1;var u=l;"("===l&&(u=")");var h="^\\s*(?:[^"+(u=(u+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"))+"\\\\]+|\\\\\\\\|\\\\.)"+u;if(e.match(new RegExp(h),!0))return s.linkHref}if("`"===l){var d=r.formatting;i.highlightFormatting&&(r.formatting="code"),e.eatWhile("`");var p=e.current().length;if(0!=r.code||r.quote&&1!=p){if(p==r.code){var f=w(r);return r.code=0,f}return r.formatting=d,w(r)}return r.code=p,w(r)}if(r.code)return w(r);if("\\"===l&&(e.next(),i.highlightFormatting)){var g=w(r),v=s.formatting+"-escape";return g?g+" "+v:v}if("!"===l&&e.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return r.imageMarker=!0,r.image=!0,i.highlightFormatting&&(r.formatting="image"),w(r);if("["===l&&r.imageMarker&&e.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return r.imageMarker=!1,r.imageAltText=!0,i.highlightFormatting&&(r.formatting="image"),w(r);if("]"===l&&r.imageAltText){i.highlightFormatting&&(r.formatting="image");var g=w(r);return r.imageAltText=!1,r.image=!1,r.inline=r.f=T,g}if("["===l&&!r.image)return r.linkText&&e.match(/^.*?\]/)?w(r):(r.linkText=!0,i.highlightFormatting&&(r.formatting="link"),w(r));if("]"===l&&r.linkText){i.highlightFormatting&&(r.formatting="link");var g=w(r);return r.linkText=!1,r.inline=r.f=e.match(/\(.*?\)| ?\[.*?\]/,!1)?T:C,g}if("<"===l&&e.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){r.f=r.inline=A,i.highlightFormatting&&(r.formatting="link");var g=w(r);return g?g+=" ":g="",g+s.linkInline}if("<"===l&&e.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){r.f=r.inline=A,i.highlightFormatting&&(r.formatting="link");var g=w(r);return g?g+=" ":g="",g+s.linkEmail}if(i.xml&&"<"===l&&e.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var b=e.string.indexOf(">",e.pos);if(-1!=b){var k=e.string.substring(e.start,b);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(k)&&(r.md_inside=!0)}return e.backUp(1),r.htmlState=t.startState(n),y(e,r,x)}if(i.xml&&"<"===l&&e.match(/^\/\w*?>/))return r.md_inside=!1,"tag";if("*"===l||"_"===l){for(var S=1,_=1==e.pos?" ":e.string.charAt(e.pos-2);S<3&&e.eat(l);)S++;var M=e.peek()||" ",L=!/\s/.test(M)&&(!m.test(M)||/\s/.test(_)||m.test(_)),F=!/\s/.test(_)&&(!m.test(_)||/\s/.test(M)||m.test(M)),D=null,E=null;if(S%2&&(r.em||!L||"*"!==l&&F&&!m.test(_)?r.em!=l||!F||"*"!==l&&L&&!m.test(M)||(D=!1):D=!0),S>1&&(r.strong||!L||"*"!==l&&F&&!m.test(_)?r.strong!=l||!F||"*"!==l&&L&&!m.test(M)||(E=!1):E=!0),null!=E||null!=D){i.highlightFormatting&&(r.formatting=null==D?"strong":null==E?"em":"strong em"),!0===D&&(r.em=l),!0===E&&(r.strong=l);var f=w(r);return!1===D&&(r.em=!1),!1===E&&(r.strong=!1),f}}else if(" "===l&&(e.eat("*")||e.eat("_"))){if(" "===e.peek())return w(r);e.backUp(1)}if(i.strikethrough)if("~"===l&&e.eatWhile(l)){if(r.strikethrough){i.highlightFormatting&&(r.formatting="strikethrough");var f=w(r);return r.strikethrough=!1,f}if(e.match(/^[^\s]/,!1))return r.strikethrough=!0,i.highlightFormatting&&(r.formatting="strikethrough"),w(r)}else if(" "===l&&e.match(/^~~/,!0)){if(" "===e.peek())return w(r);e.backUp(2)}if(i.emoji&&":"===l&&e.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){r.emoji=!0,i.highlightFormatting&&(r.formatting="emoji");var O=w(r);return r.emoji=!1,O}return" "===l&&(e.match(/^ +$/,!1)?r.trailingSpace++:r.trailingSpace&&(r.trailingSpaceNewLine=!0)),w(r)}function A(t,e){var n=t.next();if(">"===n){e.f=e.inline=C,i.highlightFormatting&&(e.formatting="link");var r=w(e);return r?r+=" ":r="",r+s.linkInline}return t.match(/^[^>]+/,!0),s.linkInline}function T(t,e){if(t.eatSpace())return null;var n,r=t.next();return"("===r||"["===r?(e.f=e.inline=(n="("===r?")":"]",function(t,e){var r=t.next();if(r===n){e.f=e.inline=C,i.highlightFormatting&&(e.formatting="link-string");var s=w(e);return e.linkHref=!1,s}return t.match(_[n]),e.linkHref=!0,w(e)}),i.highlightFormatting&&(e.formatting="link-string"),e.linkHref=!0,w(e)):"error"}var _={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function M(t,e){return t.match(/^([^\]\\]|\\.)*\]:/,!1)?(e.f=L,t.next(),i.highlightFormatting&&(e.formatting="link"),e.linkText=!0,w(e)):g(t,e,C)}function L(t,e){if(t.match(/^\]:/,!0)){e.f=e.inline=F,i.highlightFormatting&&(e.formatting="link");var n=w(e);return e.linkText=!1,n}return t.match(/^([^\]\\]|\\.)+/,!0),s.linkText}function F(t,e){return t.eatSpace()?null:(t.match(/^[^\s]+/,!0),void 0===t.peek()?e.linkTitle=!0:t.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),e.f=e.inline=C,s.linkHref+" url")}var D={startState:function(){return{f:b,prevLine:{stream:null},thisLine:{stream:null},block:b,htmlState:null,indentation:0,inline:C,text:S,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(e){return{f:e.f,prevLine:e.prevLine,thisLine:e.thisLine,block:e.block,htmlState:e.htmlState&&t.copyState(n,e.htmlState),indentation:e.indentation,localMode:e.localMode,localState:e.localMode?t.copyState(e.localMode,e.localState):null,inline:e.inline,text:e.text,formatting:!1,linkText:e.linkText,linkTitle:e.linkTitle,linkHref:e.linkHref,code:e.code,em:e.em,strong:e.strong,strikethrough:e.strikethrough,emoji:e.emoji,header:e.header,setext:e.setext,hr:e.hr,taskList:e.taskList,list:e.list,listStack:e.listStack.slice(0),quote:e.quote,indentedCode:e.indentedCode,trailingSpace:e.trailingSpace,trailingSpaceNewLine:e.trailingSpaceNewLine,md_inside:e.md_inside,fencedEndRE:e.fencedEndRE}},token:function(t,e){if(e.formatting=!1,t!=e.thisLine.stream){if(e.header=0,e.hr=!1,t.match(/^\s*$/,!0))return v(e),null;if(e.prevLine=e.thisLine,e.thisLine={stream:t},e.taskList=!1,e.trailingSpace=0,e.trailingSpaceNewLine=!1,!e.localState&&(e.f=e.block,e.f!=x)){var i=t.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(e.indentation=i,e.indentationDiff=null,i>0)return null}}return e.f(t,e)},innerMode:function(t){return t.block==x?{state:t.htmlState,mode:n}:t.localState?{state:t.localState,mode:t.localMode}:{state:t,mode:D}},indent:function(e,i,r){return e.block==x&&n.indent?n.indent(e.htmlState,i,r):e.localState&&e.localMode.indent?e.localMode.indent(e.localState,i,r):t.Pass},blankLine:v,getType:w,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return D},"xml"),t.defineMIME("text/markdown","markdown"),t.defineMIME("text/x-markdown","markdown")}(i(7),i(74),i(127))},function(t,e,i){var n=i(18),r=i(54),s=i(14),o=i(16),a=i(132);t.exports=function(t,e){var i=1==t,l=2==t,c=3==t,u=4==t,h=6==t,d=5==t||h,p=e||a;return function(e,a,f){for(var m,g,y=s(e),v=r(y),b=n(a,f,3),x=o(v.length),k=0,w=i?p(e,x):l?p(e,0):void 0;x>k;k++)if((d||k in v)&&(g=b(m=v[k],k,y),t))if(i)w[k]=g;else if(g)switch(t){case 3:return!0;case 5:return m;case 6:return k;case 2:w.push(m)}else if(u)return!1;return h?-1:c||u?u:w}}},function(t,e,i){"use strict";var n=i(6),r=i(76)(6),s="findIndex",o=!0;s in[]&&Array(1)[s](function(){o=!1}),n(n.P+n.F*o,"Array",{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(49)(s)},function(t,e,i){var n=i(79).Symbol;t.exports=n},function(t,e,i){var n=i(142),r="object"==typeof self&&self&&self.Object===Object&&self,s=n||r||Function("return this")();t.exports=s},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,i){var n=i(8),r=i(146).set;t.exports=function(t,e,i){var s,o=e.constructor;return o!==i&&"function"==typeof o&&(s=o.prototype)!==i.prototype&&n(s)&&r&&r(t,s),t}},function(t,e,i){var n=i(1),r=i(81),s=i(5).f,o=i(24).f,a=i(88),l=i(36),c=n.RegExp,u=c,h=c.prototype,d=/a/g,p=/a/g,f=new c(d)!==d;if(i(3)&&(!f||i(4)(function(){return p[i(0)("match")]=!1,c(d)!=d||c(p)==p||"/a/i"!=c(d,"i")}))){c=function(t,e){var i=this instanceof c,n=a(t),s=void 0===e;return!i&&n&&t.constructor===c&&s?t:r(f?new u(n&&!s?t.source:t,e):u((n=t instanceof c)?t.source:t,n&&s?l.call(t):e),i?this:h,c)};for(var m=function(t){t in c||s(c,t,{configurable:!0,get:function(){return u[t]},set:function(e){u[t]=e}})},g=o(u),y=0;g.length>y;)m(g[y++]);h.constructor=c,c.prototype=h,i(9)(n,"RegExp",c)}i(91)("RegExp")},function(t,e,i){var n=i(17);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,i){var n=i(11),r=i(15),s=i(153)(!1),o=i(53)("IE_PROTO");t.exports=function(t,e){var i,a=r(t),l=0,c=[];for(i in a)i!=o&&n(a,i)&&c.push(i);for(;e.length>l;)n(a,i=e[l++])&&(~s(c,i)||c.push(i));return c}},function(t,e,i){e.f=i(0)},function(t,e,i){var n=i(1),r=i(13),s=i(30),o=i(85),a=i(5).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=s?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:o.f(t)})}},function(t,e,i){var n=i(38),r=i(26);t.exports=function(t){return function(e,i){var s,o,a=String(r(e)),l=n(i),c=a.length;return l<0||l>=c?t?"":void 0:(s=a.charCodeAt(l))<55296||s>56319||l+1===c||(o=a.charCodeAt(l+1))<56320||o>57343?t?a.charAt(l):s:t?a.slice(l,l+2):o-56320+(s-55296<<10)+65536}}},function(t,e,i){var n=i(8),r=i(17),s=i(0)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==r(t))}},function(t,e,i){"use strict";var n=i(88),r=i(2),s=i(60),o=i(58),a=i(16),l=i(57),c=i(56),u=i(4),h=Math.min,d=[].push,p=!u(function(){RegExp(4294967295,"y")});i(55)("split",2,function(t,e,i,u){var f;return f="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var r=String(this);if(void 0===t&&0===e)return[];if(!n(t))return i.call(r,t,e);for(var s,o,a,l=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,p=void 0===e?4294967295:e>>>0,f=new RegExp(t.source,u+"g");(s=c.call(f,r))&&!((o=f.lastIndex)>h&&(l.push(r.slice(h,s.index)),s.length>1&&s.index<r.length&&d.apply(l,s.slice(1)),a=s[0].length,h=o,l.length>=p));)f.lastIndex===s.index&&f.lastIndex++;return h===r.length?!a&&f.test("")||l.push(""):l.push(r.slice(h)),l.length>p?l.slice(0,p):l}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,n){var r=t(this),s=void 0==i?void 0:i[e];return void 0!==s?s.call(i,r,n):f.call(String(r),i,n)},function(t,e){var n=u(f,t,this,e,f!==i);if(n.done)return n.value;var c=r(t),d=String(this),m=s(c,RegExp),g=c.unicode,y=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(p?"y":"g"),v=new m(p?c:"^(?:"+c.source+")",y),b=void 0===e?4294967295:e>>>0;if(0===b)return[];if(0===d.length)return null===l(v,d)?[d]:[];for(var x=0,k=0,w=[];k<d.length;){v.lastIndex=p?k:0;var S,C=l(v,p?d:d.slice(k));if(null===C||(S=h(a(v.lastIndex+(p?0:k)),d.length))===x)k=o(d,k,g);else{if(w.push(d.slice(x,k)),w.length===b)return w;for(var A=1;A<=C.length-1;A++)if(w.push(C[A]),w.length===b)return w;k=x=S}}return w.push(d.slice(x)),w}]})},function(t,e,i){var n=i(0)("iterator"),r=!1;try{var s=[7][n]();s.return=function(){r=!0},Array.from(s,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var i=!1;try{var s=[7],o=s[n]();o.next=function(){return{done:i=!0}},s[n]=function(){return o},t(s)}catch(t){}return i}},function(t,e,i){"use strict";var n=i(1),r=i(5),s=i(3),o=i(0)("species");t.exports=function(t){var e=n[t];s&&e&&!e[o]&&r.f(e,o,{configurable:!0,get:function(){return this}})}},function(t,e,i){var n=i(2),r=i(8),s=i(93);t.exports=function(t,e){if(n(t),r(e)&&e.constructor===t)return e;var i=s.f(t);return(0,i.resolve)(e),i.promise}},function(t,e,i){"use strict";var n=i(42);t.exports.f=function(t){return new function(t){var e,i;this.promise=new t(function(t,n){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=n}),this.resolve=n(e),this.reject=n(i)}(t)}},function(t,e,i){var n=i(1).document;t.exports=n&&n.documentElement},function(t,e,i){var n,r,s,o=i(18),a=i(161),l=i(94),c=i(61),u=i(1),h=u.process,d=u.setImmediate,p=u.clearImmediate,f=u.MessageChannel,m=u.Dispatch,g=0,y={},v=function(){var t=+this;if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},b=function(t){v.call(t.data)};d&&p||(d=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return y[++g]=function(){a("function"==typeof t?t:Function(t),e)},n(g),g},p=function(t){delete y[t]},"process"==i(17)(h)?n=function(t){h.nextTick(o(v,t,1))}:m&&m.now?n=function(t){m.now(o(v,t,1))}:f?(s=(r=new f).port2,r.port1.onmessage=b,n=o(s.postMessage,s,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(n=function(t){u.postMessage(t+"","*")},u.addEventListener("message",b,!1)):n="onreadystatechange"in c("script")?function(t){l.appendChild(c("script")).onreadystatechange=function(){l.removeChild(this),v.call(t)}}:function(t){setTimeout(o(v,t,1),0)}),t.exports={set:d,clear:p}},function(t,e,i){var n=i(41),r=i(0)("iterator"),s=i(27);t.exports=i(13).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||s[n(t)]}},function(t,e,i){var n=i(27),r=i(0)("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||s[r]===t)}},function(t,e,i){var n=i(2);t.exports=function(t,e,i,r){try{return r?e(n(i)[0],i[1]):e(i)}catch(e){var s=t.return;throw void 0!==s&&n(s.call(t)),e}}},function(t,e,i){t.exports=!i(3)&&!i(4)(function(){return 7!=Object.defineProperty(i(61)("div"),"a",{get:function(){return 7}}).a})},function(t,e,i){"use strict";var n=i(7);i(130),i(129),i(128),i(75),i(73),i(126),i(125),i(124),i(74);var r=i(123),s=i(120),o=/Mac/.test(navigator.platform),a={toggleBold:g,toggleItalic:y,drawLink:L,toggleHeadingSmaller:k,toggleHeadingBigger:w,drawImage:F,toggleBlockquote:x,toggleOrderedList:_,toggleUnorderedList:T,toggleCodeBlock:b,togglePreview:z,toggleStrikethrough:v,toggleHeading1:S,toggleHeading2:C,toggleHeading3:A,cleanBlock:M,drawTable:D,drawHorizontalRule:E,undo:O,redo:I,toggleSideBySide:N,toggleFullScreen:m},l={toggleBold:"Cmd-B",toggleItalic:"Cmd-I",drawLink:"Cmd-K",toggleHeadingSmaller:"Cmd-H",toggleHeadingBigger:"Shift-Cmd-H",cleanBlock:"Cmd-E",drawImage:"Cmd-Alt-I",toggleBlockquote:"Cmd-'",toggleOrderedList:"Cmd-Alt-L",toggleUnorderedList:"Cmd-L",toggleCodeBlock:"Cmd-Alt-C",togglePreview:"Cmd-P",toggleSideBySide:"F9",toggleFullScreen:"F11"},c=function(t){for(var e in a)if(a[e]===t)return e;return null};function u(t){return t=o?t.replace("Ctrl","Cmd"):t.replace("Cmd","Ctrl")}function h(t,e,i){t=t||{};var n=document.createElement("a");return e=void 0==e||e,t.title&&e&&(n.title=function(t,e,i){var n,r=t;e&&(n=c(e),i[n]&&(r+=" ("+u(i[n])+")"));return r}(t.title,t.action,i),o&&(n.title=n.title.replace("Ctrl","⌘"),n.title=n.title.replace("Alt","⌥"))),n.tabIndex=-1,n.className=t.className,n}function d(){var t=document.createElement("i");return t.className="separator",t.innerHTML="|",t}function p(t,e){e=e||t.getCursor("start");var i=t.getTokenAt(e);if(!i.type)return{};for(var n,r,s=i.type.split(" "),o={},a=0;a<s.length;a++)"strong"===(n=s[a])?o.bold=!0:"variable-2"===n?(r=t.getLine(e.line),/^\s*\d+\.\s/.test(r)?o["ordered-list"]=!0:o["unordered-list"]=!0):"atom"===n?o.quote=!0:"em"===n?o.italic=!0:"quote"===n?o.quote=!0:"strikethrough"===n?o.strikethrough=!0:"comment"===n?o.code=!0:"link"===n?o.link=!0:"tag"===n?o.image=!0:n.match(/^header(\-[1-6])?$/)&&(o[n.replace("header","heading")]=!0);return o}var f="";function m(t){var e=t.codemirror;e.setOption("fullScreen",!e.getOption("fullScreen")),e.getOption("fullScreen")?(f=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=f;var i=e.getWrapperElement();/fullscreen/.test(i.previousSibling.className)?i.previousSibling.className=i.previousSibling.className.replace(/\s*fullscreen\b/,""):i.previousSibling.className+=" fullscreen";var n=t.toolbarElements.fullscreen;/active/.test(n.className)?n.className=n.className.replace(/\s*active\s*/g,""):n.className+=" active";var r=e.getWrapperElement().nextSibling;/editor-preview-active-side/.test(r.className)&&N(t)}function g(t){q(t,"bold",t.options.blockStyles.bold)}function y(t){q(t,"italic",t.options.blockStyles.italic)}function v(t){q(t,"strikethrough","~~")}function b(t){var e=t.options.blockStyles.code;function i(t){if("object"!=typeof t)throw"fencing_line() takes a 'line' object (not a line number, or line text).  Got: "+typeof t+": "+t;return t.styles&&t.styles[2]&&-1!==t.styles[2].indexOf("formatting-code-block")}function n(t){return t.state.base.base||t.state.base}function r(t,e,r,s,o){r=r||t.getLineHandle(e),s=s||t.getTokenAt({line:e,ch:1}),o=o||!!r.text&&t.getTokenAt({line:e,ch:r.text.length-1});var a=s.type?s.type.split(" "):[];return o&&n(o).indentedCode?"indented":-1!==a.indexOf("comment")&&(n(s).fencedChars||n(o).fencedChars||i(r)?"fenced":"single")}var s,o,a,l=t.codemirror,c=l.getCursor("start"),u=l.getCursor("end"),h=l.getTokenAt({line:c.line,ch:c.ch||1}),d=l.getLineHandle(c.line),p=r(l,c.line,d,h);if("single"===p){var f=d.text.slice(0,c.ch).replace("`",""),m=d.text.slice(c.ch).replace("`","");l.replaceRange(f+m,{line:c.line,ch:0},{line:c.line,ch:99999999999999}),c.ch--,c!==u&&u.ch--,l.setSelection(c,u),l.focus()}else if("fenced"===p)if(c.line!==u.line||c.ch!==u.ch){for(s=c.line;s>=0&&!i(d=l.getLineHandle(s));s--);var g,y,v,b,x=n(l.getTokenAt({line:s,ch:1})).fencedChars;i(l.getLineHandle(c.line))?(g="",y=c.line):i(l.getLineHandle(c.line-1))?(g="",y=c.line-1):(g=x+"\n",y=c.line),i(l.getLineHandle(u.line))?(v="",b=u.line,0===u.ch&&(b+=1)):0!==u.ch&&i(l.getLineHandle(u.line+1))?(v="",b=u.line+1):(v=x+"\n",b=u.line+1),0===u.ch&&(b-=1),l.operation(function(){l.replaceRange(v,{line:b,ch:0},{line:b+(v?0:1),ch:0}),l.replaceRange(g,{line:y,ch:0},{line:y+(g?0:1),ch:0})}),l.setSelection({line:y+(g?1:0),ch:0},{line:b+(g?1:-1),ch:0}),l.focus()}else{var k=c.line;if(i(l.getLineHandle(c.line))&&("fenced"===r(l,c.line+1)?(s=c.line,k=c.line+1):(o=c.line,k=c.line-1)),void 0===s)for(s=k;s>=0&&!i(d=l.getLineHandle(s));s--);if(void 0===o)for(a=l.lineCount(),o=k;o<a&&!i(d=l.getLineHandle(o));o++);l.operation(function(){l.replaceRange("",{line:s,ch:0},{line:s+1,ch:0}),l.replaceRange("",{line:o-1,ch:0},{line:o,ch:0})}),l.focus()}else if("indented"===p){if(c.line!==u.line||c.ch!==u.ch)s=c.line,o=u.line,0===u.ch&&o--;else{for(s=c.line;s>=0;s--)if(!(d=l.getLineHandle(s)).text.match(/^\s*$/)&&"indented"!==r(l,s,d)){s+=1;break}for(a=l.lineCount(),o=c.line;o<a;o++)if(!(d=l.getLineHandle(o)).text.match(/^\s*$/)&&"indented"!==r(l,o,d)){o-=1;break}}var w=l.getLineHandle(o+1),S=w&&l.getTokenAt({line:o+1,ch:w.text.length-1});S&&n(S).indentedCode&&l.replaceRange("\n",{line:o+1,ch:0});for(var C=s;C<=o;C++)l.indentLine(C,"subtract");l.focus()}else{var A=c.line===u.line&&c.ch===u.ch&&0===c.ch,T=c.line!==u.line;A||T?function(t,e,i,n){var r=e.line+1,s=i.line+1,o=e.line!==i.line,a=n+"\n",l="\n"+n;o&&s++,o&&0===i.ch&&(l=n+"\n",s--),P(t,!1,[a,l]),t.setSelection({line:r,ch:0},{line:s,ch:0})}(l,c,u,e):P(l,!1,["`","`"])}}function x(t){B(t.codemirror,"quote")}function k(t){R(t.codemirror,"smaller")}function w(t){R(t.codemirror,"bigger")}function S(t){R(t.codemirror,void 0,1)}function C(t){R(t.codemirror,void 0,2)}function A(t){R(t.codemirror,void 0,3)}function T(t){B(t.codemirror,"unordered-list")}function _(t){B(t.codemirror,"ordered-list")}function M(t){!function(t){if(/editor-preview-active/.test(t.getWrapperElement().lastChild.className))return;for(var e,i=t.getCursor("start"),n=t.getCursor("end"),r=i.line;r<=n.line;r++)e=(e=t.getLine(r)).replace(/^[ ]*([# ]+|\*|\-|[> ]+|[0-9]+(.|\)))[ ]*/,""),t.replaceRange(e,{line:r,ch:0},{line:r,ch:99999999999999})}(t.codemirror)}function L(t){var e=t.codemirror,i=p(e),n=t.options,r="http://";if(n.promptURLs&&!(r=prompt(n.promptTexts.link)))return!1;P(e,i.link,n.insertTexts.link,r)}function F(t){var e=t.codemirror,i=p(e),n=t.options,r="http://";if(n.promptURLs&&!(r=prompt(n.promptTexts.image)))return!1;P(e,i.image,n.insertTexts.image,r)}function D(t){var e=t.codemirror,i=p(e),n=t.options;P(e,i.table,n.insertTexts.table)}function E(t){var e=t.codemirror,i=p(e),n=t.options;P(e,i.image,n.insertTexts.horizontalRule)}function O(t){var e=t.codemirror;e.undo(),e.focus()}function I(t){var e=t.codemirror;e.redo(),e.focus()}function N(t){var e=t.codemirror,i=e.getWrapperElement(),n=i.nextSibling,r=t.toolbarElements["side-by-side"],s=!1;/editor-preview-active-side/.test(n.className)?(n.className=n.className.replace(/\s*editor-preview-active-side\s*/g,""),r.className=r.className.replace(/\s*active\s*/g,""),i.className=i.className.replace(/\s*CodeMirror-sided\s*/g," ")):(setTimeout(function(){e.getOption("fullScreen")||m(t),n.className+=" editor-preview-active-side"},1),r.className+=" active",i.className+=" CodeMirror-sided",s=!0);var o=i.lastChild;if(/editor-preview-active/.test(o.className)){o.className=o.className.replace(/\s*editor-preview-active\s*/g,"");var a=t.toolbarElements.preview,l=i.previousSibling;a.className=a.className.replace(/\s*active\s*/g,""),l.className=l.className.replace(/\s*disabled-for-preview*/g,"")}e.sideBySideRenderingFunction||(e.sideBySideRenderingFunction=function(){n.innerHTML=t.options.previewRender(t.value(),n)}),s?(n.innerHTML=t.options.previewRender(t.value(),n),e.on("update",e.sideBySideRenderingFunction)):e.off("update",e.sideBySideRenderingFunction),e.refresh()}function z(t){var e=t.codemirror,i=e.getWrapperElement(),n=i.previousSibling,r=!!t.options.toolbar&&t.toolbarElements.preview,s=i.lastChild;s&&/editor-preview/.test(s.className)||((s=document.createElement("div")).className="editor-preview",i.appendChild(s)),/editor-preview-active/.test(s.className)?(s.className=s.className.replace(/\s*editor-preview-active\s*/g,""),r&&(r.className=r.className.replace(/\s*active\s*/g,""),n.className=n.className.replace(/\s*disabled-for-preview*/g,""))):(setTimeout(function(){s.className+=" editor-preview-active"},1),r&&(r.className+=" active",n.className+=" disabled-for-preview")),s.innerHTML=t.options.previewRender(t.value(),s);var o=e.getWrapperElement().nextSibling;/editor-preview-active-side/.test(o.className)&&N(t)}function P(t,e,i,n){if(!/editor-preview-active/.test(t.getWrapperElement().lastChild.className)){var r,s=i[0],o=i[1],a=t.getCursor("start"),l=t.getCursor("end");n&&(o=o.replace("#url#",n)),e?(s=(r=t.getLine(a.line)).slice(0,a.ch),o=r.slice(a.ch),t.replaceRange(s+o,{line:a.line,ch:0})):(r=t.getSelection(),t.replaceSelection(s+r+o),a.ch+=s.length,a!==l&&(l.ch+=s.length)),t.setSelection(a,l),t.focus()}}function R(t,e,i){if(!/editor-preview-active/.test(t.getWrapperElement().lastChild.className)){for(var n=t.getCursor("start"),r=t.getCursor("end"),s=n.line;s<=r.line;s++)!function(n){var r=t.getLine(n),s=r.search(/[^#]/);r=void 0!==e?s<=0?"bigger"==e?"###### "+r:"# "+r:6==s&&"smaller"==e?r.substr(7):1==s&&"bigger"==e?r.substr(2):"bigger"==e?r.substr(1):"#"+r:1==i?s<=0?"# "+r:s==i?r.substr(s+1):"# "+r.substr(s+1):2==i?s<=0?"## "+r:s==i?r.substr(s+1):"## "+r.substr(s+1):s<=0?"### "+r:s==i?r.substr(s+1):"### "+r.substr(s+1),t.replaceRange(r,{line:n,ch:0},{line:n,ch:99999999999999})}(s);t.focus()}}function B(t,e){if(!/editor-preview-active/.test(t.getWrapperElement().lastChild.className)){for(var i=p(t),n=t.getCursor("start"),r=t.getCursor("end"),s={quote:/^(\s*)\>\s+/,"unordered-list":/^(\s*)(\*|\-|\+)\s+/,"ordered-list":/^(\s*)\d+\.\s+/},o={quote:"> ","unordered-list":"* ","ordered-list":"1. "},a=n.line;a<=r.line;a++)!function(n){var r=t.getLine(n);r=i[e]?r.replace(s[e],"$1"):o[e]+r,t.replaceRange(r,{line:n,ch:0},{line:n,ch:99999999999999})}(a);t.focus()}}function q(t,e,i,n){if(!/editor-preview-active/.test(t.codemirror.getWrapperElement().lastChild.className)){n=void 0===n?i:n;var r,s=t.codemirror,o=p(s),a=i,l=n,c=s.getCursor("start"),u=s.getCursor("end");o[e]?(a=(r=s.getLine(c.line)).slice(0,c.ch),l=r.slice(c.ch),"bold"==e?(a=a.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),l=l.replace(/(\*\*|__)/,"")):"italic"==e?(a=a.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),l=l.replace(/(\*|_)/,"")):"strikethrough"==e&&(a=a.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),l=l.replace(/(\*\*|~~)/,"")),s.replaceRange(a+l,{line:c.line,ch:0},{line:c.line,ch:99999999999999}),"bold"==e||"strikethrough"==e?(c.ch-=2,c!==u&&(u.ch-=2)):"italic"==e&&(c.ch-=1,c!==u&&(u.ch-=1))):(r=s.getSelection(),"bold"==e?r=(r=r.split("**").join("")).split("__").join(""):"italic"==e?r=(r=r.split("*").join("")).split("_").join(""):"strikethrough"==e&&(r=r.split("~~").join("")),s.replaceSelection(a+r+l),c.ch+=i.length,u.ch=c.ch+r.length),s.setSelection(c,u),s.focus()}}function $(t,e){for(var i in e)e.hasOwnProperty(i)&&(e[i]instanceof Array?t[i]=e[i].concat(t[i]instanceof Array?t[i]:[]):null!==e[i]&&"object"==typeof e[i]&&e[i].constructor===Object?t[i]=$(t[i]||{},e[i]):t[i]=e[i]);return t}function H(t){for(var e=1;e<arguments.length;e++)t=$(t,arguments[e]);return t}function W(t){var e=t.match(/[a-zA-Z0-9_\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g),i=0;if(null===e)return i;for(var n=0;n<e.length;n++)e[n].charCodeAt(0)>=19968?i+=e[n].length:i+=1;return i}var j={bold:{name:"bold",action:g,className:"fa fa-bold",title:"Bold",default:!0},italic:{name:"italic",action:y,className:"fa fa-italic",title:"Italic",default:!0},strikethrough:{name:"strikethrough",action:v,className:"fa fa-strikethrough",title:"Strikethrough"},heading:{name:"heading",action:k,className:"fa fa-header",title:"Heading",default:!0},"heading-smaller":{name:"heading-smaller",action:k,className:"fa fa-header fa-header-x fa-header-smaller",title:"Smaller Heading"},"heading-bigger":{name:"heading-bigger",action:w,className:"fa fa-header fa-header-x fa-header-bigger",title:"Bigger Heading"},"heading-1":{name:"heading-1",action:S,className:"fa fa-header fa-header-x fa-header-1",title:"Big Heading"},"heading-2":{name:"heading-2",action:C,className:"fa fa-header fa-header-x fa-header-2",title:"Medium Heading"},"heading-3":{name:"heading-3",action:A,className:"fa fa-header fa-header-x fa-header-3",title:"Small Heading"},"separator-1":{name:"separator-1"},code:{name:"code",action:b,className:"fa fa-code",title:"Code"},quote:{name:"quote",action:x,className:"fa fa-quote-left",title:"Quote",default:!0},"unordered-list":{name:"unordered-list",action:T,className:"fa fa-list-ul",title:"Generic List",default:!0},"ordered-list":{name:"ordered-list",action:_,className:"fa fa-list-ol",title:"Numbered List",default:!0},"clean-block":{name:"clean-block",action:M,className:"fa fa-eraser fa-clean-block",title:"Clean block"},"separator-2":{name:"separator-2"},link:{name:"link",action:L,className:"fa fa-link",title:"Create Link",default:!0},image:{name:"image",action:F,className:"fa fa-picture-o",title:"Insert Image",default:!0},table:{name:"table",action:D,className:"fa fa-table",title:"Insert Table"},"horizontal-rule":{name:"horizontal-rule",action:E,className:"fa fa-minus",title:"Insert Horizontal Line"},"separator-3":{name:"separator-3"},preview:{name:"preview",action:z,className:"fa fa-eye no-disable",title:"Toggle Preview",default:!0},"side-by-side":{name:"side-by-side",action:N,className:"fa fa-columns no-disable no-mobile",title:"Toggle Side by Side",default:!0},fullscreen:{name:"fullscreen",action:m,className:"fa fa-arrows-alt no-disable no-mobile",title:"Toggle Fullscreen",default:!0},"separator-4":{name:"separator-4"},guide:{name:"guide",action:"https://simplemde.com/markdown-guide",className:"fa fa-question-circle",title:"Markdown Guide",default:!0},"separator-5":{name:"separator-5"},undo:{name:"undo",action:O,className:"fa fa-undo no-disable",title:"Undo"},redo:{name:"redo",action:I,className:"fa fa-repeat no-disable",title:"Redo"}},K={link:["[","](#url#)"],image:["![](","#url#)"],table:["","\n\n| Column 1 | Column 2 | Column 3 |\n| -------- | -------- | -------- |\n| Text     | Text     | Text     |\n\n"],horizontalRule:["","\n\n-----\n\n"]},U={link:"URL for the link:",image:"URL of the image:"},V={bold:"**",code:"```",italic:"*"};function G(t){(t=t||{}).parent=this;var e=!0;if(!1===t.autoDownloadFontAwesome&&(e=!1),!0!==t.autoDownloadFontAwesome)for(var i=document.styleSheets,n=0;n<i.length;n++)i[n].href&&i[n].href.indexOf("//maxcdn.bootstrapcdn.com/font-awesome/")>-1&&(e=!1);if(e){var r=document.createElement("link");r.rel="stylesheet",r.href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",document.getElementsByTagName("head")[0].appendChild(r)}if(t.element)this.element=t.element;else if(null===t.element)return void console.log("SimpleMDE: Error. No element was found.");if(void 0===t.toolbar)for(var s in t.toolbar=[],j)j.hasOwnProperty(s)&&(-1!=s.indexOf("separator-")&&t.toolbar.push("|"),(!0===j[s].default||t.showIcons&&t.showIcons.constructor===Array&&-1!=t.showIcons.indexOf(s))&&t.toolbar.push(s));t.hasOwnProperty("status")||(t.status=["autosave","lines","words","cursor"]),t.previewRender||(t.previewRender=function(t){return this.parent.markdown(t)}),t.parsingConfig=H({highlightFormatting:!0},t.parsingConfig||{}),t.insertTexts=H({},K,t.insertTexts||{}),t.promptTexts=U,t.blockStyles=H({},V,t.blockStyles||{}),t.shortcuts=H({},l,t.shortcuts||{}),void 0!=t.autosave&&void 0!=t.autosave.unique_id&&""!=t.autosave.unique_id&&(t.autosave.uniqueId=t.autosave.unique_id),this.options=t,this.render(),!t.initialValue||this.options.autosave&&!0===this.options.autosave.foundSavedValue||this.value(t.initialValue)}function X(){if("object"!=typeof localStorage)return!1;try{localStorage.setItem("smde_localStorage",1),localStorage.removeItem("smde_localStorage")}catch(t){return!1}return!0}G.prototype.markdown=function(t){if(s){var e={};return this.options&&this.options.renderingConfig&&!1===this.options.renderingConfig.singleLineBreaks?e.breaks=!1:e.breaks=!0,this.options&&this.options.renderingConfig&&!0===this.options.renderingConfig.codeSyntaxHighlighting&&window.hljs&&(e.highlight=function(t){return window.hljs.highlightAuto(t).value}),s.setOptions(e),s(t)}},G.prototype.render=function(t){if(t||(t=this.element||document.getElementsByTagName("textarea")[0]),!this._rendered||this._rendered!==t){this.element=t;var e,i,s=this.options,o=this,l={};for(var c in s.shortcuts)null!==s.shortcuts[c]&&null!==a[c]&&function(t){l[u(s.shortcuts[t])]=function(){a[t](o)}}(c);if(l.Enter="newlineAndIndentContinueMarkdownList",l.Tab="tabAndIndentMarkdownList",l["Shift-Tab"]="shiftTabAndUnindentMarkdownList",l.Esc=function(t){t.getOption("fullScreen")&&m(o)},document.addEventListener("keydown",function(t){27==(t=t||window.event).keyCode&&o.codemirror.getOption("fullScreen")&&m(o)},!1),!1!==s.spellChecker?(e="spell-checker",(i=s.parsingConfig).name="gfm",i.gitHubSpice=!1,r({codeMirrorInstance:n})):((e=s.parsingConfig).name="gfm",e.gitHubSpice=!1),this.codemirror=n.fromTextArea(t,{mode:e,backdrop:i,theme:"paper",tabSize:void 0!=s.tabSize?s.tabSize:2,indentUnit:void 0!=s.tabSize?s.tabSize:2,indentWithTabs:!1!==s.indentWithTabs,lineNumbers:!1,autofocus:!0===s.autofocus,extraKeys:l,lineWrapping:!1!==s.lineWrapping,allowDropFileTypes:["text/plain"],placeholder:s.placeholder||t.getAttribute("placeholder")||"",styleSelectedText:void 0==s.styleSelectedText||s.styleSelectedText}),!0===s.forceSync){var h=this.codemirror;h.on("change",function(){h.save()})}this.gui={},!1!==s.toolbar&&(this.gui.toolbar=this.createToolbar()),!1!==s.status&&(this.gui.statusbar=this.createStatusbar()),void 0!=s.autosave&&!0===s.autosave.enabled&&this.autosave(),this.gui.sideBySide=this.createSideBySide(),this._rendered=this.element;var d=this.codemirror;setTimeout(function(){d.refresh()}.bind(d),0)}},G.prototype.autosave=function(){if(X()){var t=this;if(void 0==this.options.autosave.uniqueId||""==this.options.autosave.uniqueId)return void console.log("SimpleMDE: You must set a uniqueId to use the autosave feature");null!=t.element.form&&void 0!=t.element.form&&t.element.form.addEventListener("submit",function(){localStorage.removeItem("smde_"+t.options.autosave.uniqueId)}),!0!==this.options.autosave.loaded&&("string"==typeof localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&""!=localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&(this.codemirror.setValue(localStorage.getItem("smde_"+this.options.autosave.uniqueId)),this.options.autosave.foundSavedValue=!0),this.options.autosave.loaded=!0),localStorage.setItem("smde_"+this.options.autosave.uniqueId,t.value());var e=document.getElementById("autosaved");if(null!=e&&void 0!=e&&""!=e){var i=new Date,n=i.getHours(),r=i.getMinutes(),s="am",o=n;o>=12&&(o=n-12,s="pm"),0==o&&(o=12),r=r<10?"0"+r:r,e.innerHTML="Autosaved: "+o+":"+r+" "+s}this.autosaveTimeoutId=setTimeout(function(){t.autosave()},this.options.autosave.delay||1e4)}else console.log("SimpleMDE: localStorage not available, cannot autosave")},G.prototype.clearAutosavedValue=function(){if(X()){if(void 0==this.options.autosave||void 0==this.options.autosave.uniqueId||""==this.options.autosave.uniqueId)return void console.log("SimpleMDE: You must set a uniqueId to clear the autosave value");localStorage.removeItem("smde_"+this.options.autosave.uniqueId)}else console.log("SimpleMDE: localStorage not available, cannot autosave")},G.prototype.createSideBySide=function(){var t=this.codemirror,e=t.getWrapperElement(),i=e.nextSibling;i&&/editor-preview-side/.test(i.className)||((i=document.createElement("div")).className="editor-preview-side",e.parentNode.insertBefore(i,e.nextSibling));var n=!1,r=!1;return t.on("scroll",function(t){if(n)n=!1;else{r=!0;var e=t.getScrollInfo().height-t.getScrollInfo().clientHeight,s=parseFloat(t.getScrollInfo().top)/e,o=(i.scrollHeight-i.clientHeight)*s;i.scrollTop=o}}),i.onscroll=function(){if(r)r=!1;else{n=!0;var e=i.scrollHeight-i.clientHeight,s=parseFloat(i.scrollTop)/e,o=(t.getScrollInfo().height-t.getScrollInfo().clientHeight)*s;t.scrollTo(0,o)}},i},G.prototype.createToolbar=function(t){if((t=t||this.options.toolbar)&&0!==t.length){var e;for(e=0;e<t.length;e++)void 0!=j[t[e]]&&(t[e]=j[t[e]]);var i=document.createElement("div");i.className="editor-toolbar";var n,r,s=this,o={};for(s.toolbar=t,e=0;e<t.length;e++)if(("guide"!=t[e].name||!1!==s.options.toolbarGuideIcon)&&!(s.options.hideIcons&&-1!=s.options.hideIcons.indexOf(t[e].name)||("fullscreen"==t[e].name||"side-by-side"==t[e].name)&&(n=void 0,r=void 0,r=!1,n=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4)))&&(r=!0),r))){if("|"===t[e]){for(var a=!1,l=e+1;l<t.length;l++)"|"===t[l]||s.options.hideIcons&&-1!=s.options.hideIcons.indexOf(t[l].name)||(a=!0);if(!a)continue}!function(t){var e;e="|"===t?d():h(t,s.options.toolbarTips,s.options.shortcuts),t.action&&("function"==typeof t.action?e.onclick=function(e){e.preventDefault(),t.action(s)}:"string"==typeof t.action&&(e.href=t.action,e.target="_blank")),o[t.name||t]=e,i.appendChild(e)}(t[e])}s.toolbarElements=o;var c=this.codemirror;c.on("cursorActivity",function(){var t=p(c);for(var e in o)!function(e){var i=o[e];t[e]?i.className+=" active":"fullscreen"!=e&&"side-by-side"!=e&&(i.className=i.className.replace(/\s*active\s*/g,""))}(e)});var u=c.getWrapperElement();return u.parentNode.insertBefore(i,u),i}},G.prototype.createStatusbar=function(t){t=t||this.options.status;var e=this.options,i=this.codemirror;if(t&&0!==t.length){var n,r,s,o=[];for(n=0;n<t.length;n++)if(r=void 0,s=void 0,"object"==typeof t[n])o.push({className:t[n].className,defaultValue:t[n].defaultValue,onUpdate:t[n].onUpdate});else{var a=t[n];"words"===a?(s=function(t){t.innerHTML=W(i.getValue())},r=function(t){t.innerHTML=W(i.getValue())}):"lines"===a?(s=function(t){t.innerHTML=i.lineCount()},r=function(t){t.innerHTML=i.lineCount()}):"cursor"===a?(s=function(t){t.innerHTML="0:0"},r=function(t){var e=i.getCursor();t.innerHTML=e.line+":"+e.ch}):"autosave"===a&&(s=function(t){void 0!=e.autosave&&!0===e.autosave.enabled&&t.setAttribute("id","autosaved")}),o.push({className:a,defaultValue:s,onUpdate:r})}var l=document.createElement("div");for(l.className="editor-statusbar",n=0;n<o.length;n++){var c=o[n],u=document.createElement("span");u.className=c.className,"function"==typeof c.defaultValue&&c.defaultValue(u),"function"==typeof c.onUpdate&&this.codemirror.on("update",function(t,e){return function(){e.onUpdate(t)}}(u,c)),l.appendChild(u)}var h=this.codemirror.getWrapperElement();return h.parentNode.insertBefore(l,h.nextSibling),l}},G.prototype.value=function(t){return void 0===t?this.codemirror.getValue():(this.codemirror.getDoc().setValue(t),this)},G.toggleBold=g,G.toggleItalic=y,G.toggleStrikethrough=v,G.toggleBlockquote=x,G.toggleHeadingSmaller=k,G.toggleHeadingBigger=w,G.toggleHeading1=S,G.toggleHeading2=C,G.toggleHeading3=A,G.toggleCodeBlock=b,G.toggleUnorderedList=T,G.toggleOrderedList=_,G.cleanBlock=M,G.drawLink=L,G.drawImage=F,G.drawTable=D,G.drawHorizontalRule=E,G.undo=O,G.redo=I,G.togglePreview=z,G.toggleSideBySide=N,G.toggleFullScreen=m,G.prototype.toggleBold=function(){g(this)},G.prototype.toggleItalic=function(){y(this)},G.prototype.toggleStrikethrough=function(){v(this)},G.prototype.toggleBlockquote=function(){x(this)},G.prototype.toggleHeadingSmaller=function(){k(this)},G.prototype.toggleHeadingBigger=function(){w(this)},G.prototype.toggleHeading1=function(){S(this)},G.prototype.toggleHeading2=function(){C(this)},G.prototype.toggleHeading3=function(){A(this)},G.prototype.toggleCodeBlock=function(){b(this)},G.prototype.toggleUnorderedList=function(){T(this)},G.prototype.toggleOrderedList=function(){_(this)},G.prototype.cleanBlock=function(){M(this)},G.prototype.drawLink=function(){L(this)},G.prototype.drawImage=function(){F(this)},G.prototype.drawTable=function(){D(this)},G.prototype.drawHorizontalRule=function(){E(this)},G.prototype.undo=function(){O(this)},G.prototype.redo=function(){I(this)},G.prototype.togglePreview=function(){z(this)},G.prototype.toggleSideBySide=function(){N(this)},G.prototype.toggleFullScreen=function(){m(this)},G.prototype.isPreviewActive=function(){var t=this.codemirror.getWrapperElement().lastChild;return/editor-preview-active/.test(t.className)},G.prototype.isSideBySideActive=function(){var t=this.codemirror.getWrapperElement().nextSibling;return/editor-preview-active-side/.test(t.className)},G.prototype.isFullscreenActive=function(){return this.codemirror.getOption("fullScreen")},G.prototype.getState=function(){return p(this.codemirror)},G.prototype.toTextArea=function(){var t=this.codemirror,e=t.getWrapperElement();e.parentNode&&(this.gui.toolbar&&e.parentNode.removeChild(this.gui.toolbar),this.gui.statusbar&&e.parentNode.removeChild(this.gui.statusbar),this.gui.sideBySide&&e.parentNode.removeChild(this.gui.sideBySide)),t.toTextArea(),this.autosaveTimeoutId&&(clearTimeout(this.autosaveTimeoutId),this.autosaveTimeoutId=void 0,this.clearAutosavedValue())},t.exports=G},function(t,e,i){var n=i(80),r=i(143),s=i(140),o="Expected a function",a=Math.max,l=Math.min;t.exports=function(t,e,i){var c,u,h,d,p,f,m=0,g=!1,y=!1,v=!0;if("function"!=typeof t)throw new TypeError(o);function b(e){var i=c,n=u;return c=u=void 0,m=e,d=t.apply(n,i)}function x(t){var i=t-f;return void 0===f||i>=e||i<0||y&&t-m>=h}function k(){var t=r();if(x(t))return w(t);p=setTimeout(k,function(t){var i=e-(t-f);return y?l(i,h-(t-m)):i}(t))}function w(t){return p=void 0,v&&c?b(t):(c=u=void 0,d)}function S(){var t=r(),i=x(t);if(c=arguments,u=this,f=t,i){if(void 0===p)return function(t){return m=t,p=setTimeout(k,e),g?b(t):d}(f);if(y)return clearTimeout(p),p=setTimeout(k,e),b(f)}return void 0===p&&(p=setTimeout(k,e)),d}return e=s(e)||0,n(i)&&(g=!!i.leading,h=(y="maxWait"in i)?a(s(i.maxWait)||0,e):h,v="trailing"in i?!!i.trailing:v),S.cancel=function(){void 0!==p&&clearTimeout(p),m=0,c=f=u=p=void 0},S.flush=function(){return void 0===p?d:w(r())},S}},function(t,e,i){"use strict";i.r(e);var n={};i.d(n,"CookwareList",function(){return g}),i.d(n,"CommentWidget",function(){return u}),i.d(n,"CookwareInput",function(){return p}),i.d(n,"DurationInput",function(){return b}),i.d(n,"FollowButton",function(){return nt}),i.d(n,"FollowWidget",function(){return kt}),i.d(n,"MarkdownTextarea",function(){return lt}),i.d(n,"MathField",function(){return gt}),i.d(n,"ImageHolder",function(){return Ct}),i.d(n,"InstructionList",function(){return _t}),i.d(n,"IngredientTagInput",function(){return Ft}),i.d(n,"RecipeTagInput",function(){return J}),i.d(n,"RecipeIngredient",function(){return Bt}),i.d(n,"QuantityInput",function(){return Kt}),i.d(n,"StarRating",function(){return Xt});var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{display:"block"}},[t._l(t.comments,function(e,n){return i("article",{key:n,staticClass:"media"},[i("figure",{staticClass:"media-left"},[i("p",{staticClass:"image is-64x64"},[i("img",{attrs:{src:e.author.user.avatar.content}})])]),t._v(" "),i("div",{staticClass:"media-content"},[i("div",{staticClass:"content"},[i("p",[i("strong",[t._v(t._s(e.author.qualified_name))]),t._v(" "),e.id?i("star-rating",{attrs:{"read-only":e.author.id===t.authorId,"rate-url":t.rateURL.format(e.id),"item-id":e.id,initial:e.aggregate_rating.rating_value}}):t._e(),t._v(" "),i("span",{domProps:{innerHTML:t._s(e.rendered)}}),t._v(" "),i("small",[i("a",{on:{click:function(t){e.showReplies=!e.showReplies}}},[e.showReplies?i("span",[t._v("Hide replies")]):i("span",[e.replies?i("span",[t._v(t._s(e.replies))]):t._e(),t._v("Reply\n              ")])]),t._v("\n            · "+t._s(t._f("time-passed")(e.date_published))+"\n          ")])],1)]),t._v(" "),i("comments-widget",{directives:[{name:"show",rawName:"v-show",value:e.showReplies,expression:"comment.showReplies"}],attrs:{"author-id":t.authorId,"is-reply":"true","item-id":e.id,"item-name":"this comment"},on:{declare_replies:function(t){e.replies=t}}})],1)])}),t._v(" "),i("article",{staticClass:"media"},[t._m(0),t._v(" "),i("div",{staticClass:"media-content",attrs:{id:"comments"}},[i("form",{attrs:{method:"post",novalidate:""},on:{submit:function(e){return e.preventDefault(),t.postComment()}}},[i("strong",[t._v("What do you think about "+t._s(t.itemName)+"?")]),t._v(" "),i("div",{staticClass:"field"},[i("p",{staticClass:"control"},[i("formatted-textarea-md",{staticClass:"textarea",attrs:{placeholder:"Add a comment...",required:"required"},model:{value:t.comment.body,callback:function(e){t.$set(t.comment,"body",e)},expression:"comment.body"}})],1),t._v(" "),i("b-loading",{attrs:{"is-full-page":!1,active:t.pending},on:{"update:active":function(e){t.pending=e}}})],1),t._v(" "),t._m(1)])])])],2)};r._withStripped=!0;i(19),i(10),i(22);function s(t,e,i,n,r,s,o){try{var a=t[s](o),l=a.value}catch(t){return void i(t)}a.done?e(l):Promise.resolve(l).then(n,r)}function o(t){return function(){var e=this,i=arguments;return new Promise(function(n,r){var o=t.apply(e,i);function a(t){s(o,n,r,a,l,"next",t)}function l(t){s(o,n,r,a,l,"throw",t)}a(void 0)})}}var a={GET:"/comments/{0}",POST:"/comments/{0}/comment",PATCH:"/comments/{0}",rate:{POST:"/comments/{0}/rate"}};function l(t,e,i,n,r,s,o,a){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=i,c._compiled=!0),n&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=l):r&&(l=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:c}}var c=l({name:"comments-widget",data:function(){return{comment_endpoints:COMMENTS_ENDPOINTS,replies:0,rateURL:a.rate.POST,comments:[],comment:{body:""},pending:!1}},props:["itemId","itemName","isReply","customUrl","authorId"],mounted:function(){var t=o(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.prefetchData();case 2:e=t.sent,Array.isArray(e)&&(e.forEach(function(t){t.showReplies=!1,t.replies=0}),this.isReply&&this.$emit("declare_replies",e.length),this.comments=e);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{prefetchData:function(){var t=o(regeneratorRuntime.mark(function t(){var e,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.pending=!0,this.comment_endpoints=this.isReply?a:COMMENTS_ENDPOINTS,e=this.isReply||this.customUrl?this.comment_endpoints.GET.format(this.itemId):this.comment_endpoints.GET,t.next=5,fetch(e);case 5:return i=t.sent.json(),this.pending=!1,t.next=9,i;case 9:return t.abrupt("return",t.sent.current);case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),postComment:function(){var t=o(regeneratorRuntime.mark(function t(){var e,i,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.pending){t.next=2;break}return t.abrupt("return");case 2:return this.pending=!0,this.customUrl,e=this.comment_endpoints.POST.format(this.itemId),(i=new FormData).set("body",this.comment.body),i.set("item_id",this.itemId),t.next=9,fetch(e,{body:new URLSearchParams(i),method:"POST",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-CSRFToken":getCookie("csrftoken")}});case 9:if(!(n=t.sent).ok){t.next=20;break}return this.pending=!1,this.$buefy.toast.open({message:"Successfully commented!",type:"is-success"}),t.t0=this.comments,t.next=16,n.json();case 16:t.t1=t.sent.current,t.t0.push.call(t.t0,t.t1),t.next=22;break;case 20:this.pending=!1,this.$buefy.toast.open({message:"Commenting failed! Try again",type:"is-danger"});case 22:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},r,[function(){var t=this.$createElement,e=this._self._c||t;return e("figure",{staticClass:"media-left"},[e("p",{staticClass:"image is-64x64"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"field"},[e("p",{staticClass:"control"},[e("button",{staticClass:"button is-primary",attrs:{type:"submit"}},[this._v("Post comment")])])])}],!1,null,null,null);c.options.__file="src/CommentWidget.vue";var u=c.exports,h=function(){var t=this.$createElement;return(this._self._c||t)("div")};h._withStripped=!0;var d=l({},h,[],!1,null,null,null);d.options.__file="src/CookwareTagInput.vue";var p=d.exports,f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.itemsAsStr,expression:"itemsAsStr"}],attrs:{type:"hidden",name:"cookware_list",id:"id_cookware_list"},domProps:{value:t.itemsAsStr},on:{input:function(e){e.target.composing||(t.itemsAsStr=e.target.value)}}}),t._v(" "),i("b-table",{attrs:{draggable:"",data:t.items,columns:t.columns},on:{dragstart:t.dragstart,drop:t.drop,dragover:t.dragover,dragleave:t.dragleave},scopedSlots:t._u([{key:"default",fn:function(e){return[i("td",{staticClass:"has-text-centered"},[t._v(t._s(e.index+1)+".")]),t._v(" "),e.row.editing?i("td",[i("b-field",[i("b-input",{attrs:{expanded:"",placeholder:"Enter your cookware name",type:"textarea",required:""},model:{value:e.row.name,callback:function(i){t.$set(e.row,"name",i)},expression:"props.row.name"}}),t._v(" "),i("p",{staticClass:"control"},[i("b-button",{attrs:{size:"is-small"},on:{click:function(i){return t.toggleEditing(e.index)}}},[i("b-icon",{attrs:{icon:"check"}})],1)],1)],1)],1):t._e(),t._v(" "),e.row.editing?t._e():i("td",[t._v("\n        "+t._s(e.row.name)+"\n        "),i("b-button",{attrs:{size:"is-small",type:"is-light"},on:{click:function(i){return t.toggleEditing(e.index)}}},[i("b-icon",{attrs:{icon:"pencil"}})],1),t._v(" "),i("button",{staticClass:"button is-small",attrs:{type:"button"},on:{click:function(i){return t.doDelete(e.index)}}},[i("b-icon",{attrs:{icon:"close"}})],1)],1)]}}])},[t._v(" "),i("template",{slot:"footer"},[i("th",{staticClass:"is-hidden-mobile",attrs:{colspan:"2"}},[i("button",{staticClass:"button add-url-row",attrs:{type:"button"},on:{click:function(e){return t.addInstruction()}}},[i("b-icon",{attrs:{icon:"plus",size:"is-medium"}})],1)])]),t._v(" "),i("template",{slot:"empty"},[i("section",{staticClass:"section"},[i("div",{staticClass:"content has-text-grey has-text-centered"},[i("p",[i("b-icon",{attrs:{icon:"emoticon-sad",size:"is-large"}})],1),t._v(" "),i("p",[t._v("No cookware has been added.")])])])])],2)],1)};f._withStripped=!0;i(59);var m=l({name:"cookware-list",props:["initial"],methods:{addInstruction:function(){this.items.push({text:"",editing:!0})},toggleEditing:function(t){this.items[t].editing=!this.items[t].editing},doDelete:function(t){this.items[t].deleted=!0,this.items=this.items.splice(t,t)},dragstart:function(t){this.draggingRow=t.row,this.draggingRowIndex=t.index,t.event.dataTransfer.effectAllowed="copy"},dragover:function(t){t.event.dataTransfer.dropEffect="copy",t.event.target.closest("tr").classList.add("is-selected"),t.event.preventDefault()},dragleave:function(t){t.event.target.closest("tr").classList.remove("is-selected"),t.event.preventDefault()},drop:function(t){t.event.target.closest("tr").classList.remove("is-selected");var e=t.index,i=this.items[e],n=i.name;this.items[e]=this.items[this.draggingRowIndex],this.items[this.draggingRowIndex]=i,this.items[this.draggingRowIndex].name=i.name+"changed",this.items[this.draggingRowIndex].name=n,this.$forceUpdate()}},computed:{itemsAsStr:function(){return JSON.stringify(this.items)}},directives:{replaceParent:{inserted:function(t){var e=t.parentElement;t.parentElement;e.replaceWith(t)}}},data:function(){return{items:this.initial?this.initial:[{name:"",editing:!0}],columns:[{field:"true",label:"#",width:"40",centered:!0},{field:"text",label:"Equipment name"}]}}},f,[],!1,null,null,null);m.options.__file="src/CookwareList.vue";var g=m.exports,y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.duration,expression:"duration"}],attrs:{name:t.name,type:"hidden"},domProps:{value:t.duration},on:{input:function(e){e.target.composing||(t.duration=e.target.value)}}}),t._v(" "),i("b-timepicker",{attrs:{"enable-seconds":t.enableSeconds,inline:""},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1)};y._withStripped=!0;i(89);var v=l({props:{name:{type:String,default:function(){return""}},initial:{type:String,default:function(){return"00:00:00"}},enableSeconds:{type:Boolean,default:function(){return!1}}},name:"duration-input",computed:{duration:{get:function(){return this.convertDateToDuration(this.time)},set:function(t){this.time=this.convertDurationToDate(t)}}},data:function(){return{time:this.convertDurationToDate(this.initial)}},methods:{convertDurationToDate:function(t){var e=t.split(":"),i=parseInt(e[0],10),n=parseInt(e[1],10),r=this.enableSeconds?parseInt(e[2],10):0,s=new Date;return s.setMilliseconds(0),s.setSeconds(r),s.setMinutes(n),s.setHours(i),s},convertDateToDuration:function(t){return"".concat(t.getHours(),":").concat(t.getMinutes(),":").concat(t.getSeconds())}}},y,[],!1,null,null,null);v.options.__file="src/DurationInput.vue";var b=v.exports,x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"taginput control",class:t.rootClasses},[i("div",{staticClass:"taginput-container",class:[t.statusType,t.size,t.containerClasses],attrs:{disabled:t.disabled},on:{click:function(e){t.hasInput&&t.focus(e)}}},[t._l(t.tags,function(e,n){return i("b-taglist",{key:n,attrs:{attached:""}},[e.deleted?t._e():i("b-tag",{attrs:{type:t.type,size:t.size,attached:t.attached,tabstop:!1,disabled:t.disabled,ellipsis:t.ellipsis,title:t.ellipsis&&t.getNormalizedTagText(e.name)},on:{close:function(e){return t.removeTag(n)}}},[t._v("\n                "+t._s(t.getNormalizedTagText(e.name))+"\n            ")]),t._v(" "),e.label.name&&e.done&&!e.deleted?i("b-tag",{attrs:{type:t.labelStyle[e.label.level-1],size:t.size,rounded:t.rounded,tabstop:!1,disabled:t.disabled,ellipsis:t.ellipsis,closable:t.closable,title:t.ellipsis&&t.getNormalizedTagText(e.label.name)},on:{close:function(e){return t.removeTag(n)}}},[t._v("\n                "+t._s(t.getNormalizedTagText(e.label.name))+"\n            ")]):e.deleted?t._e():i("b-dropdown",{attrs:{position:"is-top-right","trap-focus":"","close-on-click":!1}},[i("b-tag",{staticClass:"add",attrs:{slot:"trigger",type:"is-success",role:"button"},slot:"trigger"},[i("b-icon",{attrs:{icon:"plus",size:"is-small"},on:{click:function(i){return t.editLabel(e)}}})],1),t._v(" "),i("b-dropdown-item",{attrs:{custom:!0,"aria-role":"listitem"}},[i("p",[t._v("Label")]),t._v(" "),i("b-field",[i("b-input",{attrs:{size:"is-small"},model:{value:e.label.name,callback:function(i){t.$set(e.label,"name",i)},expression:"tag.label.name"}}),t._v(" "),i("p",{staticClass:"control"},[i("b-button",{attrs:{size:"is-small",type:"is-primary"},on:{click:function(i){return t.editLabel(e)}}},[t._v("Done")])],1)],1),t._v(" "),i("p",[t._v("Color")]),t._v(" "),i("b-field",[i("RecipeRadioButton",{attrs:{"native-value":"1",type:"is-info"},model:{value:e.label.level,callback:function(i){t.$set(e.label,"level",i)},expression:"tag.label.level"}}),t._v(" "),i("RecipeRadioButton",{attrs:{"native-value":"2",type:"is-success"},model:{value:e.label.level,callback:function(i){t.$set(e.label,"level",i)},expression:"tag.label.level"}}),t._v(" "),i("RecipeRadioButton",{attrs:{"native-value":"3",type:"is-warning"},model:{value:e.label.level,callback:function(i){t.$set(e.label,"level",i)},expression:"tag.label.level"}}),t._v(" "),i("RecipeRadioButton",{attrs:{"native-value":"4",type:"is-danger"},model:{value:e.label.level,callback:function(i){t.$set(e.label,"level",i)},expression:"tag.label.level"}})],1)],1)],1)],1)}),t._v(" "),t.hasInput?i("b-autocomplete",t._b({ref:"autocomplete",attrs:{data:t.internalData,field:t.field,icon:t.icon,"icon-pack":t.iconPack,maxlength:t.maxlength,"has-counter":!1,size:t.size,disabled:t.disabled,loading:t.loading,autocomplete:t.nativeAutocomplete,"keep-first":!t.allowNew,"use-html5-validation":t.useHtml5Validation},on:{typing:t.onTyping,focus:t.onFocus,blur:t.customOnBlur,select:t.onSelect},nativeOn:{keydown:function(e){return t.keydown(e)}},scopedSlots:t._u([{key:t.defaultSlotName,fn:function(e){return[i("b-field",{attrs:{grouped:""}},[t._t("default",null,{option:e.option,index:e.id}),t._v(" "),i("div",{staticClass:"control"},[i("b-taglist",{attrs:{attached:""}},[i("b-tag",{attrs:{type:"is-dark"}},[t._v(t._s(e.option.name))]),t._v(" "),e.option.label?i("b-tag",{attrs:{type:t.labelStyle[e.option.label.level-1]}},[t._v(t._s(e.option.label.name))]):t._e()],1)],1)],2)]}}],null,!0),model:{value:t.newTag,callback:function(e){t.newTag=e},expression:"newTag"}},"b-autocomplete",t.$attrs,!1),[i("template",{slot:t.headerSlotName},[t._t("header")],2),t._v(" "),t._v(" "),i("template",{slot:t.emptySlotName},[t._t("empty")],2),t._v(" "),i("template",{slot:t.footerSlotName},[t._t("footer")],2)],2):t._e()],2),t._v(" "),t.hasCounter&&(t.maxtags||t.maxlength)?i("small",{staticClass:"help counter"},[t.maxlength&&t.valueLength>0?[t._v("\n            "+t._s(t.valueLength)+" / "+t._s(t.maxlength)+"\n        ")]:t.maxtags?[t._v("\n            "+t._s(t.tagsLength)+" / "+t._s(t.maxtags)+"\n        ")]:t._e()],2):t._e()])};x._withStripped=!0;i(35),i(25),i(149),i(148),i(147),i(82),i(31);var k=i(101),w=i.n(k);function S(t,e){return e.split(".").reduce((t,e)=>t?t[e]:null,t)}const C=t=>"object"==typeof t&&!Array.isArray(t),A=(t,e,i=!1)=>{if(i||!Object.assign){const n=i=>C(e[i])&&null!==t&&t.hasOwnProperty(i)&&C(t[i]),r=Object.getOwnPropertyNames(e).map(r=>({[r]:n(r)?A(t[r],e[r],i):e[r]})).reduce((t,e)=>({...t,...e}),{});return{...t,...r}}return Object.assign(t,e)},T=A;var _=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.attached&&t.closable?i("div",{staticClass:"tags has-addons"},[i("span",{staticClass:"tag",class:[t.type,t.size,{"is-rounded":t.rounded}]},[i("span",{class:{"has-ellipsis":t.ellipsis}},[t._t("default")],2)]),t._v(" "),i("a",{staticClass:"tag is-delete",class:[t.size,{"is-rounded":t.rounded}],attrs:{role:"button","aria-label":t.ariaCloseLabel,tabindex:!!t.tabstop&&0,disabled:t.disabled},on:{click:function(e){return t.close()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:(e.preventDefault(),t.close())}}})]):i("span",{staticClass:"tag",class:[t.type,t.size,{"is-rounded":t.rounded}]},[i("span",{class:{"has-ellipsis":t.ellipsis}},[t._t("default")],2),t._v(" "),t.closable?i("a",{staticClass:"delete is-small",attrs:{role:"button","aria-label":t.ariaCloseLabel,disabled:t.disabled,tabindex:!!t.tabstop&&0},on:{click:function(e){return t.close()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:(e.preventDefault(),t.close())}}}):t._e()])};_._withStripped=!0;var M=l({name:"BTag",props:{attached:Boolean,closable:Boolean,type:String,size:String,rounded:Boolean,disabled:Boolean,ellipsis:Boolean,tabstop:{type:Boolean,default:!0},ariaCloseLabel:String},methods:{close(){this.disabled||this.$emit("close")}}},_,[],!1,null,null,null);M.options.__file="node_modules/Buefy/src/components/tag/Tag.vue";var L=M.exports,F=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"autocomplete control",class:{"is-expanded":t.expanded}},[i("b-input",t._b({ref:"input",attrs:{type:"text",size:t.size,loading:t.loading,rounded:t.rounded,icon:t.icon,"icon-pack":t.iconPack,maxlength:t.maxlength,autocomplete:t.newAutocomplete,"use-html5-validation":t.useHtml5Validation},on:{input:t.onInput,focus:t.focused,blur:t.onBlur},nativeOn:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;e.preventDefault(),t.isActive=!1},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab")?null:t.tabPressed(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.enterPressed(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.preventDefault(),t.keyArrows("up"))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.keyArrows("down"))}]},model:{value:t.newValue,callback:function(e){t.newValue=e},expression:"newValue"}},"b-input",t.$attrs,!1)),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive&&(t.data.length>0||t.hasEmptySlot||t.hasHeaderSlot),expression:"isActive && (data.length > 0 || hasEmptySlot || hasHeaderSlot)"}],ref:"dropdown",staticClass:"dropdown-menu",class:{"is-opened-top":!t.isListInViewportVertically}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],staticClass:"dropdown-content"},[t.hasHeaderSlot?i("div",{staticClass:"dropdown-item"},[t._t("header")],2):t._e(),t._v(" "),t._l(t.data,function(e,n){return i("a",{key:n,staticClass:"dropdown-item",class:{"is-hovered":e===t.hovered},on:{click:function(i){return t.setSelected(e)}}},[t.hasDefaultSlot?t._t("default",null,{option:e,index:n}):i("span",[t._v("\n                        "+t._s(t.getValue(e,!0))+"\n                    ")])],2)}),t._v(" "),0===t.data.length&&t.hasEmptySlot?i("div",{staticClass:"dropdown-item is-disabled"},[t._t("empty")],2):t._e(),t._v(" "),t.hasFooterSlot?i("div",{staticClass:"dropdown-item"},[t._t("footer")],2):t._e()],2)])])],1)};F._withStripped=!0;let D={defaultContainerElement:null,defaultIconPack:"mdi",defaultIconComponent:null,defaultIconPrev:"chevron-left",defaultIconNext:"chevron-right",defaultDialogConfirmText:null,defaultDialogCancelText:null,defaultSnackbarDuration:3500,defaultSnackbarPosition:null,defaultToastDuration:2e3,defaultToastPosition:null,defaultNotificationDuration:2e3,defaultNotificationPosition:null,defaultTooltipType:"is-primary",defaultTooltipAnimated:!1,defaultTooltipDelay:0,defaultInputAutocomplete:"on",defaultDateFormatter:null,defaultDateParser:null,defaultDateCreator:null,defaultTimeCreator:null,defaultDayNames:null,defaultMonthNames:null,defaultFirstDayOfWeek:null,defaultUnselectableDaysOfWeek:null,defaultTimeFormatter:null,defaultTimeParser:null,defaultModalCanCancel:["escape","x","outside","button"],defaultModalScroll:null,defaultDatepickerMobileNative:!0,defaultTimepickerMobileNative:!0,defaultNoticeQueue:!0,defaultInputHasCounter:!0,defaultTaginputHasCounter:!0,defaultUseHtml5Validation:!0,defaultDropdownMobileModal:!0,defaultFieldLabelPosition:null,defaultDatepickerYearsRange:[-100,3],defaultDatepickerNearbyMonthDays:!0,defaultDatepickerNearbySelectableMonthDays:!1,defaultDatepickerShowWeekNumber:!1,defaultDatepickerMobileModal:!0,defaultTrapFocus:!1,defaultButtonRounded:!1,defaultCarouselInterval:3500,customIconPacks:null};var E={props:{size:String,expanded:Boolean,loading:Boolean,rounded:Boolean,icon:String,iconPack:String,autocomplete:String,maxlength:[Number,String],useHtml5Validation:{type:Boolean,default:()=>D.defaultUseHtml5Validation},validationMessage:String},data(){return{isValid:!0,isFocused:!1,newIconPack:this.iconPack||D.defaultIconPack}},computed:{parentField(){let t=this.$parent;for(let e=0;e<3;e++)t&&!t.$data._isField&&(t=t.$parent);return t},statusType(){if(this.parentField&&this.parentField.newType){if("string"==typeof this.parentField.newType)return this.parentField.newType;for(let t in this.parentField.newType)if(this.parentField.newType[t])return t}},statusMessage(){if(this.parentField)return this.parentField.newMessage},iconSize(){switch(this.size){case"is-small":return this.size;case"is-medium":return;case"is-large":return"mdi"===this.newIconPack?"is-medium":""}}},methods:{focus(){void 0!==this.$data._elementRef&&this.$nextTick(()=>{const t=this.$el.querySelector(this.$data._elementRef);t&&t.focus()})},onBlur(t){this.isFocused=!1,this.$emit("blur",t),this.checkHtml5Validity()},onFocus(t){this.isFocused=!0,this.$emit("focus",t)},getElement(){return this.$el.querySelector(this.$data._elementRef)},setInvalid(){let t=this.validationMessage||this.getElement().validationMessage;this.setValidity("is-danger",t)},setValidity(t,e){this.$nextTick(()=>{this.parentField&&(this.parentField.type||(this.parentField.newType=t),this.parentField.message||(this.parentField.newMessage=e))})},checkHtml5Validity(){if(this.useHtml5Validation&&void 0!==this.$refs[this.$data._elementRef])return this.getElement().checkValidity()?(this.setValidity(null,null),this.isValid=!0):(this.setInvalid(),this.isValid=!1),this.isValid}}},O=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"control",class:t.rootClasses},["textarea"!==t.type?i("input",t._b({ref:"input",staticClass:"input",class:[t.inputClasses,t.customClass],attrs:{type:t.newType,autocomplete:t.newAutocomplete,maxlength:t.maxlength},domProps:{value:t.computedValue},on:{input:t.onInput,blur:t.onBlur,focus:t.onFocus}},"input",t.$attrs,!1)):i("textarea",t._b({ref:"textarea",staticClass:"textarea",class:[t.inputClasses,t.customClass],attrs:{maxlength:t.maxlength},domProps:{value:t.computedValue},on:{input:t.onInput,blur:t.onBlur,focus:t.onFocus}},"textarea",t.$attrs,!1)),t._v(" "),t.icon?i("b-icon",{staticClass:"is-left",class:{"is-clickable":t.iconClickable},attrs:{icon:t.icon,pack:t.iconPack,size:t.iconSize},nativeOn:{click:function(e){return t.iconClick(e)}}}):t._e(),t._v(" "),t.loading||!t.passwordReveal&&!t.statusTypeIcon?t._e():i("b-icon",{staticClass:"is-right",class:{"is-clickable":t.passwordReveal},attrs:{icon:t.passwordReveal?t.passwordVisibleIcon:t.statusTypeIcon,pack:t.iconPack,size:t.iconSize,type:t.passwordReveal?"is-primary":t.statusType,both:""},nativeOn:{click:function(e){return t.togglePasswordVisibility(e)}}}),t._v(" "),t.maxlength&&t.hasCounter&&"number"!==t.type?i("small",{staticClass:"help counter",class:{"is-invisible":!t.isFocused}},[t._v("\n        "+t._s(t.valueLength)+" / "+t._s(t.maxlength)+"\n    ")]):t._e()],1)};O._withStripped=!0;var I=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon",class:[t.newType,t.size]},[t.useIconComponent?i(t.useIconComponent,{tag:"component",class:[t.customClass],attrs:{icon:[t.newPack,t.newIcon],size:t.newCustomSize}}):i("i",{class:[t.newPack,t.newIcon,t.newCustomSize,t.customClass]})],1)};I._withStripped=!0;const N={sizes:{default:"mdi-24px","is-small":null,"is-medium":"mdi-36px","is-large":"mdi-48px"},iconPrefix:"mdi-"},z=()=>{const t=D&&D.defaultIconComponent?"":"fa-";return{sizes:{default:t+"lg","is-small":null,"is-medium":t+"2x","is-large":t+"3x"},iconPrefix:t,internalIcons:{information:"info-circle",alert:"exclamation-triangle","alert-circle":"exclamation-circle","chevron-right":"angle-right","chevron-left":"angle-left","chevron-down":"angle-down","eye-off":"eye-slash","menu-down":"caret-down","menu-up":"caret-up"}}};var P=()=>{let t={mdi:N,fa:z(),fas:z(),far:z(),fad:z(),fab:z(),fal:z()};return D&&D.customIconPacks&&(t=T(t,D.customIconPacks,!0)),t},R=l({name:"BIcon",props:{type:[String,Object],component:String,pack:String,icon:String,size:String,customSize:String,customClass:String,both:Boolean},computed:{iconConfig(){return P()[this.newPack]},iconPrefix(){return this.iconConfig&&this.iconConfig.iconPrefix?this.iconConfig.iconPrefix:""},newIcon(){return`${this.iconPrefix}${this.getEquivalentIconOf(this.icon)}`},newPack(){return this.pack||D.defaultIconPack},newType(){if(!this.type)return;let t=[];if("string"==typeof this.type)t=this.type.split("-");else for(let e in this.type)if(this.type[e]){t=e.split("-");break}return t.length<=1?void 0:`has-text-${t[1]}`},newCustomSize(){return this.customSize||this.customSizeByPack},customSizeByPack(){if(this.iconConfig&&this.iconConfig.sizes){if(this.size&&void 0!==this.iconConfig.sizes[this.size])return this.iconConfig.sizes[this.size];if(this.iconConfig.sizes.default)return this.iconConfig.sizes.default}return null},useIconComponent(){return this.component||D.defaultIconComponent}},methods:{getEquivalentIconOf(t){return this.both&&this.iconConfig&&this.iconConfig.internalIcons&&this.iconConfig.internalIcons[t]?this.iconConfig.internalIcons[t]:t}}},I,[],!1,null,null,null);R.options.__file="node_modules/Buefy/src/components/icon/Icon.vue";var B=R.exports,q=l({name:"BInput",components:{[B.name]:B},mixins:[E],inheritAttrs:!1,props:{value:[Number,String],type:{type:String,default:"text"},passwordReveal:Boolean,iconClickable:Boolean,hasCounter:{type:Boolean,default:()=>D.defaultInputHasCounter},customClass:{type:String,default:""}},data(){return{newValue:this.value,newType:this.type,newAutocomplete:this.autocomplete||D.defaultInputAutocomplete,isPasswordVisible:!1,_elementRef:"textarea"===this.type?"textarea":"input"}},computed:{computedValue:{get(){return this.newValue},set(t){this.newValue=t,this.$emit("input",t),!this.isValid&&this.checkHtml5Validity()}},rootClasses(){return[this.iconPosition,this.size,{"is-expanded":this.expanded,"is-loading":this.loading,"is-clearfix":!this.hasMessage}]},inputClasses(){return[this.statusType,this.size,{"is-rounded":this.rounded}]},hasIconRight(){return this.passwordReveal||this.loading||this.statusTypeIcon},iconPosition(){return this.icon&&this.hasIconRight?"has-icons-left has-icons-right":!this.icon&&this.hasIconRight?"has-icons-right":this.icon?"has-icons-left":void 0},statusTypeIcon(){switch(this.statusType){case"is-success":return"check";case"is-danger":return"alert-circle";case"is-info":return"information";case"is-warning":return"alert"}},hasMessage(){return!!this.statusMessage},passwordVisibleIcon(){return this.isPasswordVisible?"eye-off":"eye"},valueLength(){return"string"==typeof this.computedValue?this.computedValue.length:"number"==typeof this.computedValue?this.computedValue.toString().length:0}},watch:{value(t){this.newValue=t}},methods:{togglePasswordVisibility(){this.isPasswordVisible=!this.isPasswordVisible,this.newType=this.isPasswordVisible?"text":"password",this.$nextTick(()=>{this.$refs.input.focus()})},onInput(t){this.$nextTick(()=>{t.target&&(this.computedValue=t.target.value)})},iconClick(t){this.$emit("icon-click",t),this.$nextTick(()=>{this.$refs.input.focus()})}}},O,[],!1,null,null,null);q.options.__file="node_modules/Buefy/src/components/input/Input.vue";var $=q.exports,H=l({name:"BAutocomplete",components:{[$.name]:$},mixins:[E],inheritAttrs:!1,props:{value:[Number,String],data:{type:Array,default:()=>[]},field:{type:String,default:"value"},keepFirst:Boolean,clearOnSelect:Boolean,openOnFocus:Boolean,customFormatter:Function},data(){return{selected:null,hovered:null,isActive:!1,newValue:this.value,newAutocomplete:this.autocomplete||"off",isListInViewportVertically:!0,hasFocus:!1,_isAutocomplete:!0,_elementRef:"input"}},computed:{whiteList(){const t=[];if(t.push(this.$refs.input.$el.querySelector("input")),t.push(this.$refs.dropdown),void 0!==this.$refs.dropdown){const e=this.$refs.dropdown.querySelectorAll("*");for(const i of e)t.push(i)}if(this.$parent.$data._isTaginput){t.push(this.$parent.$el);const e=this.$parent.$el.querySelectorAll("*");for(const i of e)t.push(i)}return t},hasDefaultSlot(){return!!this.$scopedSlots.default},hasEmptySlot(){return!!this.$slots.empty},hasHeaderSlot(){return!!this.$slots.header},hasFooterSlot(){return!!this.$slots.footer}},watch:{isActive(t){t?this.calcDropdownInViewportVertical():(this.$nextTick(()=>this.setHovered(null)),setTimeout(()=>{this.calcDropdownInViewportVertical()},100))},newValue(t){this.$emit("input",t);const e=this.getValue(this.selected);e&&e!==t&&this.setSelected(null,!1),!this.hasFocus||this.openOnFocus&&!t||(this.isActive=!!t)},value(t){this.newValue=t,!this.isValid&&this.$refs.input.checkHtml5Validity()},data(t){this.keepFirst&&this.selectFirstOption(t)}},methods:{setHovered(t){void 0!==t&&(this.hovered=t)},setSelected(t,e=!0){void 0!==t&&(this.selected=t,this.$emit("select",this.selected),null!==this.selected&&(this.newValue=this.clearOnSelect?"":this.getValue(this.selected)),e&&this.$nextTick(()=>{this.isActive=!1}))},selectFirstOption(t){this.$nextTick(()=>{t.length?(this.openOnFocus||""!==this.newValue&&this.hovered!==t[0])&&this.setHovered(t[0]):this.setHovered(null)})},enterPressed(){null!==this.hovered&&this.setSelected(this.hovered)},tabPressed(){null!==this.hovered?this.setSelected(this.hovered):this.isActive=!1},clickedOutside(t){this.whiteList.indexOf(t.target)<0&&(this.isActive=!1)},getValue(t){if(null!==t)return void 0!==this.customFormatter?this.customFormatter(t):"object"==typeof t?S(t,this.field):t},calcDropdownInViewportVertical(){this.$nextTick(()=>{if(void 0===this.$refs.dropdown)return;const t=this.$refs.dropdown.getBoundingClientRect();this.isListInViewportVertically=t.top>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)})},keyArrows(t){const e="down"===t?1:-1;if(this.isActive){let t=this.data.indexOf(this.hovered)+e;t=(t=t>this.data.length-1?this.data.length:t)<0?0:t,this.setHovered(this.data[t]);const i=this.$refs.dropdown.querySelector(".dropdown-content"),n=i.querySelectorAll("a.dropdown-item:not(.is-disabled)")[t];if(!n)return;const r=i.scrollTop,s=i.scrollTop+i.clientHeight-n.clientHeight;n.offsetTop<r?i.scrollTop=n.offsetTop:n.offsetTop>=s&&(i.scrollTop=n.offsetTop-i.clientHeight+n.clientHeight)}else this.isActive=!0},focused(t){this.getValue(this.selected)===this.newValue&&this.$el.querySelector("input").select(),this.openOnFocus&&(this.isActive=!0,this.keepFirst&&this.selectFirstOption(this.data)),this.hasFocus=!0,this.$emit("focus",t)},onBlur(t){this.hasFocus=!1,this.$emit("blur",t)},onInput(t){const e=this.getValue(this.selected);e&&e===this.newValue||this.$emit("typing",this.newValue)}},created(){"undefined"!=typeof window&&(document.addEventListener("click",this.clickedOutside),window.addEventListener("resize",this.calcDropdownInViewportVertical))},beforeDestroy(){"undefined"!=typeof window&&(document.removeEventListener("click",this.clickedOutside),window.removeEventListener("resize",this.calcDropdownInViewportVertical))}},F,[],!1,null,null,null);H.options.__file="node_modules/Buefy/src/components/autocomplete/Autocomplete.vue";var W=H.exports,j=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"control",class:{"is-expanded":t.expanded}},[i("label",{ref:"label",staticClass:"b-radio radio button has-text-centered",class:[t.type,t.size,{"is-disabled":t.disabled,"is-focused":t.isFocused}],attrs:{disabled:t.disabled},on:{click:t.focus,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.$refs.label.click())}}},[t._t("default"),t._v(" "),t.newValue===t.nativeValue?i("b-icon",{attrs:{icon:"check-circle",type:"is-white"}}):i("b-icon",{attrs:{icon:"check-circle",type:t.type}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.computedValue,expression:"computedValue"}],ref:"input",attrs:{type:"radio",disabled:t.disabled,required:t.required,name:t.name},domProps:{value:t.nativeValue,checked:t._q(t.computedValue,t.nativeValue)},on:{click:function(t){t.stopPropagation()},focus:function(e){t.isFocused=!0},blur:function(e){t.isFocused=!1},change:function(e){t.computedValue=t.nativeValue}}})],2)])};j._withStripped=!0;var K=l({name:"RecipeRadioButton",mixins:[{props:{value:[String,Number,Boolean,Function,Object,Array],nativeValue:[String,Number,Boolean,Function,Object,Array],type:String,disabled:Boolean,required:Boolean,name:String,size:String},data:function(){return{newValue:this.value}},computed:{computedValue:{get:function(){return this.newValue},set:function(t){this.newValue=t,this.$emit("input",t)}}},watch:{value:function(t){this.newValue=t}},methods:{focus:function(){this.$refs.input.focus()}}}],props:{type:{type:String,default:"is-primary"},expanded:Boolean},data:function(){return{isFocused:!1}}},j,[],!1,null,null,null);K.options.__file="src/components/RecipeRadioButton.vue";var U,V=K.exports;function G(t){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Z={name:"recipe-tag-input",components:(U={},X(U,W.name,W),X(U,L.name,L),X(U,V.name,V),U),mixins:[E],inheritAttrs:!1,props:{value:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}},type:{type:String,default:"is-light"},rounded:{type:Boolean,default:!1},attached:{type:Boolean,default:!1},maxtags:{type:[Number,String],required:!1},hasCounter:{type:Boolean,default:function(){return D.defaultTaginputHasCounter}},field:{type:String,default:"value"},autocomplete:Boolean,nativeAutocomplete:String,disabled:Boolean,ellipsis:Boolean,closable:{type:Boolean,default:!0},confirmKeyCodes:{type:Array,default:function(){return[13,188]}},removeOnKeys:{type:Array,default:function(){return[8]}},allowNew:Boolean,onPasteSeparators:{type:Array,default:function(){return[","]}},beforeAdding:{type:Function,default:function(){return!0}},allowDuplicates:{type:Boolean,default:!1},careDeleted:{type:Boolean,default:!1},labelStyle:{type:Array,default:function(){return["is-info","is-success","is-warning","is-danger"]}}},data:function(){return{tags:Array.isArray(this.value)?this.value.slice(0):this.value||[],typing:!1,newTag:"",isFetching:!1,internalData:this.data,_elementRef:"input",_isTaginput:!0}},computed:{rootClasses:function(){return{"is-expanded":this.expanded}},containerClasses:function(){return{"is-focused":this.isFocused,"is-focusable":this.hasInput}},valueLength:function(){return this.newTag.trim().length},defaultSlotName:function(){return this.hasDefaultSlot?"default":"dontrender"},emptySlotName:function(){return this.hasEmptySlot?"empty":"dontrender"},headerSlotName:function(){return this.hasHeaderSlot?"header":"dontrender"},footerSlotName:function(){return this.hasFooterSlot?"footer":"dontrender"},hasDefaultSlot:function(){return!!this.$scopedSlots.default},hasEmptySlot:function(){return!!this.$slots.empty},hasHeaderSlot:function(){return!!this.$slots.header},hasFooterSlot:function(){return!!this.$slots.footer},hasInput:function(){return null==this.maxtags||this.tagsLength<this.maxtags},tagsLength:function(){return this.tags.length},separatorsAsRegExp:function(){var t=this.onPasteSeparators;return t.length?new RegExp(t.map(function(t){return t?t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):null}).join("|"),"g"):null}},watch:{value:function(t){this.tags=t},hasInput:function(){this.hasInput||this.onBlur()}},methods:{getAsyncData:w()(function(t){var e=this;t.length?(this.isFetching=!0,this.$http.get("/recipes/tags?name=".concat(t)).then(function(t){var i=t.data;e.internalData=[],i.current.forEach(function(t){return e.internalData.push(t)})}).catch(function(t){throw e.internalData=[],t}).finally(function(){e.isFetching=!1})):this.internalData=[]},500),editLabel:function(t){this.$set(t,"done",!0)},addTag:function(t){var e=t||this.newTag;if(e){if(!this.autocomplete){var i=this.separatorsAsRegExp;if(i&&e.match(i))return void e.split(i).map(function(t){return t.trim()}).filter(function(t){return 0!==t.length}).map(this.addTag)}(!!this.allowDuplicates||-1===this.tags.map(function(t){return t.name}).indexOf(e.name))&&this.beforeAdding(e)&&("string"==typeof e?this.tags.push({name:e,label:{name:"",level:1}}):(e.label||(e.label={name:""}),this.tags.push(e)),this.$emit("input",this.tags),this.$emit("add",e))}this.newTag=""},getNormalizedTagText:function(t){return"object"===G(t)?S(t,this.field):t},customOnBlur:function(t){this.autocomplete||this.addTag(),this.onBlur(t)},onSelect:function(t){var e=this;t&&(this.addTag(t),this.$nextTick(function(){e.newTag=""}))},removeTag:function(t){var e=this.tags[t];return this.tags[t].id&&this.careDeleted?e.deleted=!0:e=this.tags.splice(t,1)[0],this.$emit("input",this.tags),this.$emit("remove",e),e},removeLastTag:function(){this.tagsLength>0&&this.removeTag(this.tagsLength-1)},keydown:function(t){-1===this.removeOnKeys.indexOf(t.keyCode)||this.newTag.length||this.removeLastTag(),this.autocomplete&&!this.allowNew||this.confirmKeyCodes.indexOf(t.keyCode)>=0&&(t.preventDefault(),this.addTag())},onTyping:function(t){this.$emit("typing",t.trim()),this.getAsyncData(t)}}},Y=(i(134),l(Z,x,[],!1,null,"57917537",null));Y.options.__file="src/RecipeTagInput.vue";var J=Y.exports,Q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.following?i("span",[i("small",{staticClass:"has-text-primary is-size-6"},[t._v("Following")]),t._v(" "),i("b-dropdown",{staticStyle:{width:"30px"},attrs:{position:"is-bottom-left",hoverable:"","aria-role":"list"}},[i("b-icon",{attrs:{slot:"trigger",icon:"chevron-down",size:"is-small"},slot:"trigger"}),t._v(" "),i("b-dropdown-item",{attrs:{"aria-role":"listitem"},on:{click:t.unfollow}},[t._v("Unfollow")])],1)],1):i("b-button",{attrs:{type:"is-outlined-primary",size:"is-small"},on:{click:t.follow}},[t._v("Follow")])};Q._withStripped=!0;i(77);function tt(t,e,i,n,r,s,o){try{var a=t[s](o),l=a.value}catch(t){return void i(t)}a.done?e(l):Promise.resolve(l).then(n,r)}function et(t){return function(){var e=this,i=arguments;return new Promise(function(n,r){var s=t.apply(e,i);function o(t){tt(s,n,r,o,a,"next",t)}function a(t){tt(s,n,r,o,a,"throw",t)}o(void 0)})}}var it=l({name:"follow-widget",computed:{following:function(){var t=this;return-1!==this.followees.findIndex(function(e){return e.id===t.followeeId})}},methods:{follow:function(){var t=et(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/profile/follow/",{body:"followee_id="+this.followeeId,method:"POST",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-CSRFToken":getCookie("csrftoken")}});case 2:if(!(e=t.sent).ok){t.next=11;break}return t.t0=this.followees,t.next=7,e.json();case 7:t.t1=t.sent.current,t.t0.push.call(t.t0,t.t1),t.next=12;break;case 11:this.$buefy.toast.open({message:"Failed to follow! Try again",type:"is-danger"});case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),unfollow:function(){var t=et(regeneratorRuntime.mark(function t(){var e,i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/profile/unfollow/",{body:"followee_id="+this.followeeId,method:"POST",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-CSRFToken":getCookie("csrftoken")}});case 2:t.sent.ok?(e=this.followees.findIndex(function(t){return t.id===i.followeeId}),this.followees.splice(e,1)):this.$buefy.toast.open({message:"Failed to follow! Try again",type:"is-danger"});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},data:function(){return{followee:{}}},props:["followeeId","followees"]},Q,[],!1,null,null,null);it.options.__file="src/FollowButton.vue";var nt=it.exports,rt=function(){var t=this.$createElement;return(this._self._c||t)("textarea",{ref:"area",attrs:{placeholder:this.placeholder,required:"",autofocus:""}})};rt._withStripped=!0;var st=i(100),ot=i.n(st),at=l({name:"formatted-textarea-md",props:["value","placeholder","required"],mounted:function(){this.mde=new ot.a({hideIcons:["quote","guide","side-by-side","fullscreen"],element:this.$refs.area,forceSync:!0,spellChecker:!0}),this.mde.value(this.value);var t=this;this.mde.codemirror.on("change",function(){t.$emit("input",t.mde.value())})},watch:{value:function(t){t!==this.mde.value()&&this.mde.value(t)}},beforeDestroy:function(){this.mde.toTextArea()}},rt,[],!1,null,null,null);at.options.__file="src/MarkdownTextarea.vue";var lt=at.exports,ct=function(){var t=this.$createElement;return(this._self._c||t)("span",{staticClass:"mathfield",attrs:{id:this.id}},[this._t("default")],2)};ct._withStripped=!0;i(117),i(47),i(67),i(112);var ut=i(62),ht=i.n(ut);function dt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function pt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}ht.a.renderMathInDocument();var ft={name:"mathfield",props:{id:{type:String,default:""},value:{type:String,default:""},config:{type:Object,default:function(){return{}}},onKeystroke:{type:Function,default:function(t,e){return!0}},onMoveOutOf:{type:Function,default:function(t){return!0}},onTabOutOf:{type:Function,default:function(t){return!0}}},watch:{value:function(t,e){t!==e&&this.$el.mathfield.$latex(t)},config:{deep:!0,handler:function(t){this.$el.mathfield.$setConfig(t)}}},mounted:function(){var t=this;this.$mathlive=ht.a,this.$nextTick(function(){t.$mathlive.makeMathField(t.$el,function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?dt(i,!0).forEach(function(e){pt(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):dt(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}({},t.config,{virtualKeyboardMode:"onfocus",onContentDidChange:function(e){t.$emit("input",t.$el.mathfield.$text())},onFocus:function(e){t.$emit("focus")},onBlur:function(e){t.$emit("blur")},onContentWillChange:function(e){t.$emit("content-will-change")},onSelectionWillChange:function(e){t.$emit("selection-will-change")},onUndoStateWillChange:function(e,i){t.$emit("undo-state-will-change",i)},onUndoStateDidChange:function(e,i){t.$emit("undo-state-did-change",i)},onVirtualKeyboardToggle:function(e,i,n){t.$emit("virtual-keyboard-toggle",i,n)},onReadAloudStatus:function(e,i){t.$emit("read-aloud-status",i)},onKeystroke:function(e,i,n){return t.onKeystroke(i,n)},onMoveOutOf:function(e,i){return t.onMoveOutOf(i)},onTabOutOf:function(e,i){return t.onTabOutOf(i)}}))})},methods:{perform:function(t){this.$el.mathfield.$perform(t)},hasFocus:function(){return this.$el.mathfield.$hasFocus()},focus:function(){this.$el.mathfield.$focus()},blur:function(){this.$el.mathfield.$blur()},text:function(t){return this.$el.mathfield.$text(t)},selectedText:function(t){return this.$el.mathfield.$selectedText(t)},insert:function(t,e){this.$el.mathfield.$insert(t,e)},keystroke:function(t,e){return this.$el.mathfield.$keystroke(t,e)},typedText:function(t){this.$el.mathfield.$keystroke(t)},selectionIsCollapsed:function(){return this.$el.mathfield.$selectionIsCollapsed()},selectionDepth:function(){return this.$el.mathfield.$selectionDepth()},selectionAtStart:function(){return this.$el.mathfield.$selectionAtStart()},selectionAtEnd:function(){return this.$el.mathfield.$selectionAtEnd()},select:function(){this.$el.mathfield.$select()},clearSelection:function(){this.$el.mathfield.$clearSelection()}}},mt=(i(110),l(ft,ct,[],!1,null,null,null));mt.options.__file="src/MathField.vue";var gt=mt.exports,yt=function(){var t=this.$createElement;return(this._self._c||t)("div")};function vt(t){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bt(t,e,i,n,r,s,o){try{var a=t[s](o),l=a.value}catch(t){return void i(t)}a.done?e(l):Promise.resolve(l).then(n,r)}yt._withStripped=!0;var xt=l({name:"followee-list",data:function(){return{followees:[]}},mounted:function(){var t,e=(t=regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/profile/follow/",{method:"GET",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-CSRFToken":getCookie("csrftoken")}});case 2:if(!(e=t.sent).ok){t.next=17;break}return t.next=6,e.clone().json();case 6:if(t.t0=vt(t.sent.current),"undefined"!=t.t0){t.next=11;break}this.$data.followees=[],t.next=14;break;case 11:return t.next=13,e.clone().json();case 13:this.$data.followees=t.sent.current;case 14:this.$forceUpdate(),t.next=18;break;case 17:this.$buefy.toast.open({message:"Failed to follow! Try again",type:"is-danger"});case 18:case"end":return t.stop()}},t,this)}),function(){var e=this,i=arguments;return new Promise(function(n,r){var s=t.apply(e,i);function o(t){bt(s,n,r,o,a,"next",t)}function a(t){bt(s,n,r,o,a,"throw",t)}o(void 0)})});return function(){return e.apply(this,arguments)}}()},yt,[],!1,null,null,null);xt.options.__file="src/FollowWidget.vue";var kt=xt.exports,wt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.mediaAsStr,expression:"mediaAsStr"}],attrs:{type:"hidden",name:"image",id:"id_image"},domProps:{value:t.mediaAsStr},on:{input:function(e){e.target.composing||(t.mediaAsStr=e.target.value)}}}),t._v(" "),i("input",{attrs:{type:"hidden",name:"video",id:"id_video"}}),t._v(" "),t.showAttach?i("form",{staticClass:"holder-form",attrs:{"use-html5-validation":""},on:{submit:function(e){return e.preventDefault(),t.addImage(e)}}},[i("span",{staticClass:"details"},[i("a",{staticClass:"delete",on:{click:function(e){return t.hideAttachDialog()}}}),t._v(" "),i("div",{staticClass:"content"},[t._l(t.attachmentUrls,function(e,n){return i("span",[t._v("\n          Image "+t._s(n+1)+" URL:\n          "),i("b-field",[i("b-input",{attrs:{placeholder:"Enter the URL of an image",size:"is-small",icon:"link",type:"url",required:""},model:{value:e.src,callback:function(i){t.$set(e,"src",i)},expression:"url.src"}})],1)],1)}),t._v(" "),i("button",{staticClass:"button add-url-row",attrs:{type:"button"},on:{click:function(e){return t.addUrl()}}},[i("b-icon",{attrs:{icon:"plus",size:"is-medium"}})],1),t._v(" "),i("button",{attrs:{type:"submit"}},[t._v("Attach links")])],2)])]):t._e(),t._v(" "),t.carousels.length>0?i("b-carousel",{attrs:{indicator:!0,"indicator-inside":t.indicatorInside,"indicator-mode":t.indicatorMode,"indicator-style":t.indicatorStyle}},[t._l(t.carousels,function(e,n){return i("b-carousel-item",{key:n},[e.src?i("span",{staticClass:"image"},[i("img",{staticClass:"recipe-image-carousel",attrs:{src:e.src}})]):i("section",{class:"hero is-medium is-"+e.color},[i("div",{staticClass:"hero-body has-text-centered"},[i("h1",{staticClass:"title"},[t._v(t._s(e.title))])])])])}),t._v(" "),i("button",{staticClass:"add-another-image-btn",attrs:{type:"button"},on:{click:function(e){return t.showAttachDialog()}}},[t._v("Customise links")])],2):i("div",{class:t.showAttach?"dashed-placeholder expanded":"dashed-placeholder",on:{click:function(e){return t.showAttachDialog()}}},[i("div",[i("div",{staticClass:"is-horizontal-center"},[i("img",{attrs:{src:"https://image.flaticon.com/icons/svg/1515/1515601.svg",width:"75px"}})]),t._v(" "),i("div",[t._v("No image attached. Please attach at least one.")])])])],1)};wt._withStripped=!0;var St=l({name:"image-holder",data:function(){return{images:[],showAttach:!1,expandedClass:"expanded",indicator:!0,indicatorInside:!0,indicatorMode:"hover",indicatorStyle:"is-dots",attachmentUrls:[],carousels:[]}},computed:{mediaAsStr:function(){return JSON.stringify(this.carousels.map(function(t){return t.src}))}},mounted:function(){var t=this;this.initial&&(this.initial.forEach(function(e){return t.attachmentUrls.push({src:e})}),this.carousels=this.attachmentUrls)},methods:{showAttachDialog:function(){0==this.attachmentUrls.length&&(this.attachmentUrls=[{src:""}]),this.showAttach=!0,this.indicator=!0},hideAttachDialog:function(){this.showAttach=!1,this.indicator=!1},addImage:function(){this.carousels=this.attachmentUrls,this.images=[],this.showAttach=!1},addUrl:function(){this.attachmentUrls.push({src:""})}},props:["videos","initial"]},wt,[],!1,null,null,null);St.options.__file="src/ImageHolder.vue";var Ct=St.exports,At=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.itemsAsStr,expression:"itemsAsStr"}],attrs:{type:"hidden",name:"recipe_instructions",id:"id_recipe_instructions"},domProps:{value:t.itemsAsStr},on:{input:function(e){e.target.composing||(t.itemsAsStr=e.target.value)}}}),t._v(" "),i("b-table",{attrs:{draggable:"",data:t.items,columns:t.columns},on:{dragstart:t.dragstart,drop:t.drop,dragover:t.dragover,dragleave:t.dragleave},scopedSlots:t._u([{key:"default",fn:function(e){return[i("td",{staticClass:"has-text-centered"},[t._v(t._s(e.index+1)+".")]),t._v(" "),e.row.editing?i("td",[i("b-field",[i("b-input",{attrs:{expanded:"",placeholder:"Enter your instruction step",type:"textarea",required:""},model:{value:e.row.text,callback:function(i){t.$set(e.row,"text",i)},expression:"props.row.text"}}),t._v(" "),i("p",{staticClass:"control"},[i("b-button",{attrs:{size:"is-small"},on:{click:function(i){return t.toggleEditing(e.index)}}},[i("b-icon",{attrs:{icon:"check"}})],1)],1)],1)],1):t._e(),t._v(" "),e.row.editing?t._e():i("td",[t._v("\n        "+t._s(e.row.text)+"\n        "),i("b-button",{attrs:{size:"is-small",type:"is-light"},on:{click:function(i){return t.toggleEditing(e.index)}}},[i("b-icon",{attrs:{icon:"pencil"}})],1),t._v(" "),i("button",{staticClass:"button is-small",attrs:{type:"button"},on:{click:function(i){return t.doDelete(e.index)}}},[i("b-icon",{attrs:{icon:"close"}})],1)],1)]}}])},[t._v(" "),i("template",{slot:"footer"},[i("th",{staticClass:"is-hidden-mobile",attrs:{colspan:"2"}},[i("button",{staticClass:"button add-url-row",attrs:{type:"button"},on:{click:function(e){return t.addInstruction()}}},[i("b-icon",{attrs:{icon:"plus",size:"is-medium"}})],1)])]),t._v(" "),i("template",{slot:"empty"},[i("section",{staticClass:"section"},[i("div",{staticClass:"content has-text-grey has-text-centered"},[i("p",[i("b-icon",{attrs:{icon:"emoticon-sad",size:"is-large"}})],1),t._v(" "),i("p",[t._v("No instruction step has been added. Consider adding one.")])])])])],2)],1)};At._withStripped=!0;var Tt=l({name:"instruction-list",props:["initial"],methods:{addInstruction:function(){this.items.push({text:"",editing:!0})},toggleEditing:function(t){this.items[t].editing=!this.items[t].editing},doDelete:function(t){this.items[t].deleted=!0,this.items=this.items.splice(t,t)},dragstart:function(t){this.draggingRow=t.row,this.draggingRowIndex=t.index,t.event.dataTransfer.effectAllowed="copy"},dragover:function(t){t.event.dataTransfer.dropEffect="copy",t.event.target.closest("tr").classList.add("is-selected"),t.event.preventDefault()},dragleave:function(t){t.event.target.closest("tr").classList.remove("is-selected"),t.event.preventDefault()},drop:function(t){t.event.target.closest("tr").classList.remove("is-selected");var e=t.index,i=this.items[e],n=i.text;this.items[e]=this.items[this.draggingRowIndex],this.items[this.draggingRowIndex]=i,this.items[this.draggingRowIndex].text=i.text+"changed",this.items[this.draggingRowIndex].text=n,this.$forceUpdate()}},computed:{itemsAsStr:function(){return JSON.stringify(this.items.map(function(t){return t.text}))}},directives:{replaceParent:{inserted:function(t){var e=t.parentElement;t.parentElement;e.replaceWith(t)}}},data:function(){return{items:this.initial?this.initial:[{text:"",editing:!0}],columns:[{field:"true",label:"Step #",width:"40",centered:!0},{field:"text",label:"Instruction"}]}}},At,[],!1,null,null,null);Tt.options.__file="src/InstructionList.vue";var _t=Tt.exports,Mt=function(){var t=this.$createElement;return(this._self._c||t)("div")};Mt._withStripped=!0;var Lt=l({},Mt,[],!1,null,null,null);Lt.options.__file="src/IngredientTagInput.vue";var Ft=Lt.exports,Dt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ingredient-table"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.itemsAsStr,expression:"itemsAsStr"}],attrs:{name:"ingredients",type:"hidden"},domProps:{value:t.itemsAsStr},on:{input:function(e){e.target.composing||(t.itemsAsStr=e.target.value)}}}),t._v(" "),i("b-table",{attrs:{draggable:"",data:t.liveIngredients,columns:t.columns},on:{dragstart:t.dragstart,drop:t.drop,dragover:t.dragover,dragleave:t.dragleave},scopedSlots:t._u([{key:"default",fn:function(e){return[i("td",{staticClass:"has-text-centered"},[t._v(t._s(e.index+1)+".")]),t._v(" "),e.row.editing?i("td",[i("b-field",[i("b-input",{attrs:{placeholder:"Enter a ingredient name",type:"text",size:"is-small",required:""},model:{value:e.row.name,callback:function(i){t.$set(e.row,"name",i)},expression:"props.row.name"}}),t._v(" "),i("p",{staticClass:"control"},[i("mathfield",{model:{value:e.row.quantity.rendered,callback:function(i){t.$set(e.row.quantity,"rendered",i)},expression:"props.row.quantity.rendered"}},[t._v(t._s(e.row.quantity.rendered))])],1),t._v(" "),i("p",{staticClass:"control"},[i("b-select",{staticClass:"is-inline",attrs:{size:"is-small"},model:{value:e.row.quantity.unit,callback:function(i){t.$set(e.row.quantity,"unit",i)},expression:"props.row.quantity.unit"}},t._l(t.selectables,function(n){return i("option",{domProps:{value:n.symbol}},[t._v(t._s(t._f("pluralize")(n,e.row.quantity.number)))])}),0)],1),t._v(" "),i("p",{staticClass:"control"},[i("b-button",{attrs:{size:"is-small"},on:{click:function(i){return t.toggleEditing(e.row)}}},[i("b-icon",{attrs:{icon:"check"}})],1)],1),t._v(" "),i("p",{staticClass:"control"},[i("button",{staticClass:"button is-small",attrs:{type:"button"},on:{click:function(i){return t.removeIngredient(e.row)}}},[i("b-icon",{attrs:{icon:"close"}})],1)])],1)],1):i("td",[t._v("\n        "+t._s(e.row.name)+"\n        "),i("mathfield",{model:{value:e.row.quantity.rendered,callback:function(i){t.$set(e.row.quantity,"rendered",i)},expression:"props.row.quantity.rendered"}},[t._v(t._s(e.row.quantity.rendered))]),t._v(" "),i("b-select",{staticClass:"is-inline",attrs:{size:"is-small"},model:{value:e.row.quantity.unit,callback:function(i){t.$set(e.row.quantity,"unit",i)},expression:"props.row.quantity.unit"}},t._l(t.selectables,function(n){return i("option",{domProps:{value:n.symbol}},[t._v(t._s(t._f("pluralize")(n,e.row.quantity.number)))])}),0),t._v(" "),i("b-button",{attrs:{size:"is-small",type:"is-light"},on:{click:function(i){return t.toggleEditing(e.row)}}},[i("b-icon",{attrs:{icon:"pencil"}})],1),t._v(" "),i("button",{staticClass:"button is-small",attrs:{type:"button"},on:{click:function(i){return t.removeIngredient(e.row)}}},[i("b-icon",{attrs:{icon:"close"}})],1)],1)]}}])},[t._v(" "),i("template",{slot:"footer"},[i("th",{staticClass:"is-hidden-mobile",attrs:{colspan:"2"}},[i("button",{staticClass:"button add-url-row",attrs:{type:"button"},on:{click:t.addIngredient}},[i("b-icon",{attrs:{icon:"plus",size:"is-medium"}})],1)])]),t._v(" "),i("template",{slot:"empty"},[i("section",{staticClass:"section"},[i("div",{staticClass:"content has-text-grey has-text-centered"},[i("p",[i("b-icon",{attrs:{icon:"food-croissant",size:"is-large"}})],1),t._v(" "),i("p",[t._v("No ingredients have been added. Consider adding one.")])])])])],2)],1)};Dt._withStripped=!0;i(65),i(64),i(108),i(63),i(106),String,String,Object,Function,Function,Function;function Et(t){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ot(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function It(t,e,i,n,r,s,o){try{var a=t[s](o),l=a.value}catch(t){return void i(t)}a.done?e(l):Promise.resolve(l).then(n,r)}function Nt(t){return function(){var e=this,i=arguments;return new Promise(function(n,r){var s=t.apply(e,i);function o(t){It(s,n,r,o,a,"next",t)}function a(t){It(s,n,r,o,a,"throw",t)}o(void 0)})}}var zt=math,Pt={name:"ingredient-chooser",props:{selectableUnits:{type:Object},initial:{type:Array,default:function(){return[]}},defaultQty:{type:Number,default:1}},computed:{liveIngredients:function(){var t=this,e=!0,i=!1,n=void 0;try{for(var r,s=function(){var e=r.value;(function(){var i=Nt(regeneratorRuntime.mark(function i(){var n,r,s,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t.convertToFactor(e.quantity,t.conversionTable);case 2:if(n=i.sent,r=n.number,s=n.type,e.name,e.removed,e.repr=1===e.quantity?e.singular:e.plural,e.type=s,!r){i.next=25;break}if(i.prev=10,e.quantity.number=math.format(math.fraction(r),{fraction:"ratio"}),!(.001<(o=math.number(math.fraction(r)))<9e4)){i.next=17;break}e.quantity.rendered=o<.01||o%1==0?math.format(r,{fraction:"decimal",notation:"fixed"}):math.parse(e.quantity.number).toTex(),i.next=18;break;case 17:throw"Exceeded limit";case 18:i.next=25;break;case 20:i.prev=20,i.t0=i.catch(10),console.log(i.t0),e.quantity.rendered=t.defaultQty,e.quantity.number=t.defaultQty;case 25:e.quantity.prevUnit=e.quantity.unit;case 26:case"end":return i.stop()}},i,null,[[10,20]])}));return function(){return i.apply(this,arguments)}})()()},o=this.ingredients[Symbol.iterator]();!(e=(r=o.next()).done);e=!0)s()}catch(t){i=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(i)throw n}}return this.ingredients.filter(function(t){return!t.removed})},itemsAsStr:function(){var t=[],e={};return this.ingredients.forEach(function(i){return t.push(Object.assign(e,i))}),t.forEach(function(t){return delete t.editing}),JSON.stringify(t)}},methods:{addIngredient:function(){this.ingredients.length<12&&this.ingredients.push({name:"",type:"massUnit",quantity:{unit:"g",number:this.defaultQty,prevUnit:"g",rendered:this.defaultQty.toString()},added:!0,editing:!0})},toggleEditing:function(t){t.editing=!t.editing,this.$forceUpdate()},removeIngredient:function(t){t.removed=!0;var e=this.ingredients.findIndex(function(e){return e===t});t.added&&this.ingredients.splice(e,1),this.ingredients.push({}),this.ingredients.pop()},getTypeByUnit:function(t,e){for(var i in e)if(e.hasOwnProperty(i)&&e[i].find(function(e){return e.symbol===t}))return i},convertToFactor:function(){var t=Nt(regeneratorRuntime.mark(function t(e){var i,n,r,s,o,a,l,c,u,h,d,p=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=p.length>1&&void 0!==p[1]?p[1]:CONVERSION_FACTORS,n=e.unit,r=e.prevUnit,s=this.toValidLiteral(e.rendered),o=zt.evaluate(s),a=o,l=this.getTypeByUnit(n,i),t.prev=6,c=i[l].filter(function(t){return t.symbol===r})[0].value,"REQ_FUNC"!=(u=i[l].filter(function(t){return t.symbol===n})[0].value)){t.next=16;break}return t.next=12,this.calculateDynamic(r,n,a,l);case 12:return h=t.sent,t.abrupt("return",{number:h,type:l});case 16:if(u){t.next=20;break}return t.abrupt("return",{number:a,type:l});case 20:return d=(c/u).toFixed(8),console.log(d),t.abrupt("return",{number:a*d,type:l});case 23:t.next=28;break;case 25:return t.prev=25,t.t0=t.catch(6),t.abrupt("return",{number:a,type:l});case 28:case"end":return t.stop()}},t,this,[[6,25]])}));return function(e){return t.apply(this,arguments)}}(),toValidLiteral:function(t){try{if(!t)return this.defaultQty;var e=new RegExp("\\\\frac{(.*?)}{(.*?)}").exec(t);if(e)return 2==e.length?"".concat(e[1]):3==e.length?"".concat(e[1],"/").concat(e[2]):this.defaultQty;try{return parseFloat(t)}catch(t){return this.defaultQty}}catch(t){return this.defaultQty}},dragstart:function(t){this.draggingRow=t.row,this.draggingRowIndex=t.index,t.event.dataTransfer.effectAllowed="copy"},dragover:function(t){t.event.dataTransfer.dropEffect="copy",t.event.target.closest("tr").classList.add("is-selected"),t.event.preventDefault()},dragleave:function(t){t.event.target.closest("tr").classList.remove("is-selected"),t.event.preventDefault()},drop:function(t){t.event.target.closest("tr").classList.remove("is-selected");var e=t.index,i=this.ingredients[e];this.ingredients[e]=this.ingredients[this.draggingRowIndex],this.ingredients[this.draggingRowIndex]=i;var n=i.name;this.ingredients[this.draggingRowIndex].name=i.name+"changed",this.ingredients[this.draggingRowIndex].name=n},calculateDynamic:function(){var t=Nt(regeneratorRuntime.mark(function t(e,i,n,r){var s,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(s=new FormData).set("type",r),s.set("value",n),s.set("base_unit",e),s.set("quote_unit",i),t.next=7,fetch("/recipes/unit_conv",{body:new URLSearchParams(s),method:"POST",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-CSRFToken":getCookie("csrftoken")}});case 7:if(!(o=t.sent).ok){t.next=14;break}return t.t0=parseFloat,t.next=12,o.clone().json();case 12:return t.t1=t.sent.current,t.abrupt("return",(0,t.t0)(t.t1));case 14:case"end":return t.stop()}},t)}));return function(e,i,n,r){return t.apply(this,arguments)}}()},data:function(){return{ingredients:this.initial,selectables:[],conversionTable:[],columns:[{field:"true",label:"Ing. #",width:"40",centered:!0},{field:"text",label:"Ingredient"}]}},created:function(){var t=Nt(regeneratorRuntime.mark(function t(){var e,i,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/recipes/unit_conv",{method:"GET",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-CSRFToken":getCookie("csrftoken")}});case 2:if(!(e=t.sent).ok){t.next=15;break}return t.next=6,e.clone().json();case 6:if(t.t0=Et(t.sent.current),"undefined"!=t.t0){t.next=11;break}this.selectables=[],t.next=15;break;case 11:return t.next=13,e.clone().json();case 13:for(i in this.conversionTable=t.sent.current,this.conversionTable)r=this.conversionTable[i],(n=this.selectables).push.apply(n,Ot(r));case 15:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},Rt=(i(104),l(Pt,Dt,[],!1,null,"355bf134",null));Rt.options.__file="src/RecipeIngredientTable.vue";var Bt=Rt.exports,qt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-field",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.asString,expression:"asString"}],attrs:{name:t.name,type:"hidden"},domProps:{value:t.asString},on:{input:function(e){e.target.composing||(t.asString=e.target.value)}}}),t._v(" "),i("p",{staticClass:"control"},[i("b-input",{attrs:{size:"is-small",type:"number",step:"any",autofocus:""},model:{value:t.number,callback:function(e){t.number=e},expression:"number"}})],1),t._v(" "),i("p",{staticClass:"control"},[i("b-select",{staticClass:"is-inline",attrs:{size:"is-small"},model:{value:t.selectedUnit,callback:function(e){t.selectedUnit=e},expression:"selectedUnit"}},t._l(t.units,function(e,n){return i("option",{key:n,domProps:{value:e.unit}},[t._v(t._s(t._f("pluralize")(e,t.number)))])}),0)],1)])};function $t(t){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ht(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Wt(t,e,i,n,r,s,o){try{var a=t[s](o),l=a.value}catch(t){return void i(t)}a.done?e(l):Promise.resolve(l).then(n,r)}qt._withStripped=!0;var jt=l({props:["section","name","initial"],name:"quantity-input",computed:{asString:function(){return"".concat(this.number," ").concat(this.selectedUnit)}},data:function(){return{conversionTable:[],selectedUnit:"serving",units:[],number:0}},created:function(){var t,e=(t=regeneratorRuntime.mark(function t(){var e,i,n,r,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.initial&&(this.number=this.initial.amount,this.selectedUnit=this.initial.unit),e=new FormData,this.section&&e.set("section",this.section),t.next=5,fetch("/recipes/unit_conv",{body:new URLSearchParams(e),method:"POST",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-CSRFToken":getCookie("csrftoken")}});case 5:if(!(i=t.sent).ok){t.next=18;break}return t.next=9,i.clone().json();case 9:if(t.t0=$t(t.sent.current),"undefined"!=t.t0){t.next=14;break}this.units=[],t.next=18;break;case 14:return t.next=16,i.clone().json();case 16:for(n in this.conversionTable=t.sent.current,this.conversionTable)s=this.conversionTable[n],(r=this.units).push.apply(r,Ht(s));case 18:case"end":return t.stop()}},t,this)}),function(){var e=this,i=arguments;return new Promise(function(n,r){var s=t.apply(e,i);function o(t){Wt(s,n,r,o,a,"next",t)}function a(t){Wt(s,n,r,o,a,"throw",t)}o(void 0)})});return function(){return e.apply(this,arguments)}}()},qt,[],!1,null,null,null);jt.options.__file="src/QuantityInput.vue";var Kt=jt.exports,Ut=function(){var t=this,e=t.$createElement;return(t._self._c||e)("b-rate",{attrs:{icon:"star",max:t.max,disabled:t.readOnly},on:{change:function(e){t.change=!0}},model:{value:t.ratingScore,callback:function(e){t.ratingScore=e},expression:"ratingScore"}})};function Vt(t,e,i,n,r,s,o){try{var a=t[s](o),l=a.value}catch(t){return void i(t)}a.done?e(l):Promise.resolve(l).then(n,r)}Ut._withStripped=!0;var Gt=l({name:"star-rating",props:{itemId:Number,initial:{type:[Number,String],default:0},rateUrl:String,recipeName:String,readOnly:{type:Boolean,default:!1}},data:function(){return{ratingScore:parseFloat(this.initial),max:5,change:!1}},methods:{notifyChange:function(){}},watch:{ratingScore:function(){var t,e=(t=regeneratorRuntime.mark(function t(e,i){var n,r,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.rateUrl&&this.itemId?this.rateUrl:"/recipes/".concat(this.itemId,"/rate"),!(e<1)&&this.change){t.next=5;break}return t.abrupt("return");case 5:if(parseFloat(e)!==parseFloat(i)){t.next=7;break}return t.abrupt("return");case 7:return(r=new FormData).set("rating_score",parseInt(e)),t.next=11,fetch(n,{body:new URLSearchParams(r),method:"POST",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-CSRFToken":getCookie("csrftoken")}});case 11:if(!(s=t.sent).ok){t.next=23;break}return this.change=!1,t.t0=parseFloat,t.next=17,s.json();case 17:t.t1=t.sent.current.rating_value,this.ratingScore=(0,t.t0)(t.t1),this.$emit("change-score",this.ratingScore.toFixed(1)),this.$buefy.toast.open({message:this.recipeName?"Rated ".concat(this.recipeName,"!"):"Rated!",type:"is-success"}),t.next=24;break;case 23:this.$buefy.toast.open({message:this.recipeName?"Failed to rate ".concat(this.recipeName,"! Try again"):"Failed to rate! Try again",type:"is-danger"});case 24:case"end":return t.stop()}},t,this)}),function(){var e=this,i=arguments;return new Promise(function(n,r){var s=t.apply(e,i);function o(t){Vt(s,n,r,o,a,"next",t)}function a(t){Vt(s,n,r,o,a,"throw",t)}o(void 0)})});return function(t,i){return e.apply(this,arguments)}}()}},Ut,[],!1,null,null,null);Gt.options.__file="src/StarRating.vue";var Xt=Gt.exports;Object.entries(n).forEach(([t,e])=>Vue.component(e.name,e))},function(t,e,i){(t.exports=i(50)(!1)).push([t.i,"\n.ingredient-table[data-v-355bf134] {\n  max-height: 300px;\n  overflow: auto;\n}\n.is-small[data-v-355bf134],\n.mathfield[data-v-355bf134] {\n  font-size: 1.25rem;\n}\n",""])},function(t,e,i){"use strict";var n=i(43);i.n(n).a},function(t,e,i){"use strict";var n=i(3),r=i(21),s=i(34),o=i(33),a=i(14),l=i(54),c=Object.assign;t.exports=!c||i(4)(function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach(function(t){e[t]=t}),7!=c({},t)[i]||Object.keys(c({},e)).join("")!=n})?function(t,e){for(var i=a(t),c=arguments.length,u=1,h=s.f,d=o.f;c>u;)for(var p,f=l(arguments[u++]),m=h?r(f).concat(h(f)):r(f),g=m.length,y=0;g>y;)p=m[y++],n&&!d.call(f,p)||(i[p]=f[p]);return i}:c},function(t,e,i){var n=i(6);n(n.S+n.F,"Object",{assign:i(105)})},function(t,e,i){i(3)&&"g"!=/./g.flags&&i(5).f(RegExp.prototype,"flags",{configurable:!0,get:i(36)})},function(t,e,i){"use strict";var n=i(6),r=i(76)(5),s=!0;"find"in[]&&Array(1).find(function(){s=!1}),n(n.P+n.F*s,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(49)("find")},function(t,e,i){(t.exports=i(50)(!1)).push([t.i,"\n.frac-line {\n  border: solid 0.04em;\n}\n.ML__fieldcontainer {\n  display: inline;\n}\n.ML__mathrm {\n  font-family: inherit;\n}\n",""])},function(t,e,i){"use strict";var n=i(44);i.n(n).a},function(t,e,i){var n=i(6),r=i(13),s=i(4);t.exports=function(t,e){var i=(r.Object||{})[t]||Object[t],o={};o[t]=e(i),n(n.S+n.F*s(function(){i(1)}),"Object",o)}},function(t,e,i){var n=i(14),r=i(21);i(111)("keys",function(){return function(t){return r(n(t))}})},function(t,e,i){var n=i(11),r=i(14),s=i(53)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),n(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},function(t,e,i){"use strict";var n=i(51),r=i(28),s=i(37),o={};i(12)(o,i(0)("iterator"),function(){return this}),t.exports=function(t,e,i){t.prototype=n(o,{next:r(1,i)}),s(t,e+" Iterator")}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,i){var n=i(24),r=i(34),s=i(2),o=i(1).Reflect;t.exports=o&&o.ownKeys||function(t){var e=n.f(s(t)),i=r.f;return i?e.concat(i(t)):e}},function(t,e,i){var n=i(6),r=i(116),s=i(15),o=i(32),a=i(68);n(n.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,i,n=s(t),l=o.f,c=r(n),u={},h=0;c.length>h;)void 0!==(i=l(n,e=c[h++]))&&a(u,e,i);return u}})},function(t,e,i){const n=i(48),r=i(71),s=i(70),o=i(69),{defaults:a}=i(23),{merge:l,unescape:c}=i(20);t.exports=class t{constructor(t){this.tokens=[],this.token=null,this.options=t||a,this.options.renderer=this.options.renderer||new n,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new r}static parse(e,i){return new t(i).parse(e)}parse(t){this.inline=new s(t.links,this.options),this.inlineText=new s(t.links,l({},this.options,{renderer:new o})),this.tokens=t.reverse();let e="";for(;this.next();)e+=this.tok();return e}next(){return this.token=this.tokens.pop(),this.token}peek(){return this.tokens[this.tokens.length-1]||0}parseText(){let t=this.token.text;for(;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)}tok(){let t="";switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,c(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":{let e,i,n,r,s="";for(n="",e=0;e<this.token.header.length;e++)n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(s+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(i=this.token.cells[e],n="",r=0;r<i.length;r++)n+=this.renderer.tablecell(this.inline.output(i[r]),{header:!1,align:this.token.align[r]});t+=this.renderer.tablerow(n)}return this.renderer.table(s,t)}case"blockquote_start":for(t="";"blockquote_end"!==this.next().type;)t+=this.tok();return this.renderer.blockquote(t);case"list_start":{t="";const e=this.token.ordered,i=this.token.start;for(;"list_end"!==this.next().type;)t+=this.tok();return this.renderer.list(t,e,i)}case"list_item_start":{t="";const e=this.token.loose,i=this.token.checked,n=this.token.task;if(this.token.task)if(e)if("text"===this.peek().type){const t=this.peek();t.text=this.renderer.checkbox(i)+" "+t.text}else this.tokens.push({type:"text",text:this.renderer.checkbox(i)});else t+=this.renderer.checkbox(i);for(;"list_item_end"!==this.next().type;)t+=e||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(t,n,i)}case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:{const t='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(t);console.log(t)}}}}},function(t,e,i){const{defaults:n}=i(23),{block:r}=i(72),{rtrim:s,splitCells:o,escape:a}=i(20);t.exports=class t{constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||n,this.rules=r.normal,this.options.pedantic?this.rules=r.pedantic:this.options.gfm&&(this.rules=r.gfm)}static get rules(){return r}static lex(e,i){return new t(i).lex(e)}lex(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.token(t,!0)}token(t,e){let i,n,l,c,u,h,d,p,f,m,g,y,v,b,x,k;for(t=t.replace(/^ +$/gm,"");t;)if((l=this.rules.newline.exec(t))&&(t=t.substring(l[0].length),l[0].length>1&&this.tokens.push({type:"space"})),l=this.rules.code.exec(t)){const e=this.tokens[this.tokens.length-1];t=t.substring(l[0].length),e&&"paragraph"===e.type?e.text+="\n"+l[0].trimRight():(l=l[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?l:s(l,"\n")}))}else if(l=this.rules.fences.exec(t))t=t.substring(l[0].length),this.tokens.push({type:"code",lang:l[2]?l[2].trim():l[2],text:l[3]||""});else if(l=this.rules.heading.exec(t))t=t.substring(l[0].length),this.tokens.push({type:"heading",depth:l[1].length,text:l[2]});else if((l=this.rules.nptable.exec(t))&&(h={type:"table",header:o(l[1].replace(/^ *| *\| *$/g,"")),align:l[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:l[3]?l[3].replace(/\n$/,"").split("\n"):[]}).header.length===h.align.length){for(t=t.substring(l[0].length),g=0;g<h.align.length;g++)/^ *-+: *$/.test(h.align[g])?h.align[g]="right":/^ *:-+: *$/.test(h.align[g])?h.align[g]="center":/^ *:-+ *$/.test(h.align[g])?h.align[g]="left":h.align[g]=null;for(g=0;g<h.cells.length;g++)h.cells[g]=o(h.cells[g],h.header.length);this.tokens.push(h)}else if(l=this.rules.hr.exec(t))t=t.substring(l[0].length),this.tokens.push({type:"hr"});else if(l=this.rules.blockquote.exec(t))t=t.substring(l[0].length),this.tokens.push({type:"blockquote_start"}),l=l[0].replace(/^ *> ?/gm,""),this.token(l,e),this.tokens.push({type:"blockquote_end"});else if(l=this.rules.list.exec(t)){for(t=t.substring(l[0].length),d={type:"list_start",ordered:b=(c=l[2]).length>1,start:b?+c:"",loose:!1},this.tokens.push(d),p=[],i=!1,v=(l=l[0].match(this.rules.item)).length,g=0;g<v;g++)m=(h=l[g]).length,~(h=h.replace(/^ *([*+-]|\d+\.) */,"")).indexOf("\n ")&&(m-=h.length,h=this.options.pedantic?h.replace(/^ {1,4}/gm,""):h.replace(new RegExp("^ {1,"+m+"}","gm"),"")),g!==v-1&&(u=r.bullet.exec(l[g+1])[0],(c.length>1?1===u.length:u.length>1||this.options.smartLists&&u!==c)&&(t=l.slice(g+1).join("\n")+t,g=v-1)),n=i||/\n\n(?!\s*$)/.test(h),g!==v-1&&(i="\n"===h.charAt(h.length-1),n||(n=i)),n&&(d.loose=!0),k=void 0,(x=/^\[[ xX]\] /.test(h))&&(k=" "!==h[1],h=h.replace(/^\[[ xX]\] +/,"")),f={type:"list_item_start",task:x,checked:k,loose:n},p.push(f),this.tokens.push(f),this.token(h,!1),this.tokens.push({type:"list_item_end"});if(d.loose)for(v=p.length,g=0;g<v;g++)p[g].loose=!0;this.tokens.push({type:"list_end"})}else if(l=this.rules.html.exec(t))t=t.substring(l[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===l[1]||"script"===l[1]||"style"===l[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(l[0]):a(l[0]):l[0]});else if(e&&(l=this.rules.def.exec(t)))t=t.substring(l[0].length),l[3]&&(l[3]=l[3].substring(1,l[3].length-1)),y=l[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[y]||(this.tokens.links[y]={href:l[2],title:l[3]});else if((l=this.rules.table.exec(t))&&(h={type:"table",header:o(l[1].replace(/^ *| *\| *$/g,"")),align:l[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:l[3]?l[3].replace(/\n$/,"").split("\n"):[]}).header.length===h.align.length){for(t=t.substring(l[0].length),g=0;g<h.align.length;g++)/^ *-+: *$/.test(h.align[g])?h.align[g]="right":/^ *:-+: *$/.test(h.align[g])?h.align[g]="center":/^ *:-+ *$/.test(h.align[g])?h.align[g]="left":h.align[g]=null;for(g=0;g<h.cells.length;g++)h.cells[g]=o(h.cells[g].replace(/^ *\| *| *\| *$/g,""),h.header.length);this.tokens.push(h)}else if(l=this.rules.lheading.exec(t))t=t.substring(l[0].length),this.tokens.push({type:"heading",depth:"="===l[2].charAt(0)?1:2,text:l[1]});else if(e&&(l=this.rules.paragraph.exec(t)))t=t.substring(l[0].length),this.tokens.push({type:"paragraph",text:"\n"===l[1].charAt(l[1].length-1)?l[1].slice(0,-1):l[1]});else if(l=this.rules.text.exec(t))t=t.substring(l[0].length),this.tokens.push({type:"text",text:l[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens}}},function(t,e,i){const n=i(119),r=i(118),s=i(48),o=i(69),a=i(70),l=i(71),{merge:c,checkSanitizeDeprecation:u,escape:h}=i(20),{getDefaults:d,changeDefaults:p,defaults:f}=i(23);function m(t,e,i){if(void 0===t||null===t)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(i||"function"==typeof e){i||(i=e,e=null),e=c({},m.defaults,e||{}),u(e);const s=e.highlight;let o,a,l=0;try{o=n.lex(t,e)}catch(t){return i(t)}a=o.length;const h=function(t){if(t)return e.highlight=s,i(t);let n;try{n=r.parse(o,e)}catch(e){t=e}return e.highlight=s,t?i(t):i(null,n)};if(!s||s.length<3)return h();if(delete e.highlight,!a)return h();for(;l<o.length;l++)!function(t){"code"!==t.type?--a||h():s(t.text,t.lang,function(e,i){return e?h(e):null==i||i===t.text?--a||h():(t.text=i,t.escaped=!0,void(--a||h()))})}(o[l])}else try{return e=c({},m.defaults,e||{}),u(e),r.parse(n.lex(t,e),e)}catch(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",(e||m.defaults).silent)return"<p>An error occurred:</p><pre>"+h(t.message+"",!0)+"</pre>";throw t}}m.options=m.setOptions=function(t){return c(m.defaults,t),p(m.defaults),m},m.getDefaults=d,m.defaults=f,m.Parser=r,m.parser=r.parse,m.Renderer=s,m.TextRenderer=o,m.Lexer=n,m.lexer=n.lex,m.InlineLexer=a,m.inlineLexer=a.output,m.Slugger=l,m.parse=m,t.exports=m},function(t,e){},function(t,e,i){(function(e){var n;!function(){"use strict";(n=function(t,i,n,r){r=r||{},this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=r.flags||{},this.memoized={},this.loaded=!1;var s,o,a,l,c,u=this;function h(t,e){var i=u._readFile(t,null,r.asyncLoad);r.asyncLoad?i.then(function(t){e(t)}):e(i)}function d(t){i=t,n&&f()}function p(t){n=t,i&&f()}function f(){for(u.rules=u._parseAFF(i),u.compoundRuleCodes={},o=0,l=u.compoundRules.length;o<l;o++){var t=u.compoundRules[o];for(a=0,c=t.length;a<c;a++)u.compoundRuleCodes[t[a]]=[]}for(o in"ONLYINCOMPOUND"in u.flags&&(u.compoundRuleCodes[u.flags.ONLYINCOMPOUND]=[]),u.dictionaryTable=u._parseDIC(n),u.compoundRuleCodes)0===u.compoundRuleCodes[o].length&&delete u.compoundRuleCodes[o];for(o=0,l=u.compoundRules.length;o<l;o++){var e=u.compoundRules[o],s="";for(a=0,c=e.length;a<c;a++){var h=e[a];h in u.compoundRuleCodes?s+="("+u.compoundRuleCodes[h].join("|")+")":s+=h}u.compoundRules[o]=new RegExp(s,"i")}u.loaded=!0,r.asyncLoad&&r.loadedCallback&&r.loadedCallback(u)}return t&&(u.dictionary=t,i&&n?f():"undefined"!=typeof window&&"chrome"in window&&"extension"in window.chrome&&"getURL"in window.chrome.extension?(s=r.dictionaryPath?r.dictionaryPath:"typo/dictionaries",i||h(chrome.extension.getURL(s+"/"+t+"/"+t+".aff"),d),n||h(chrome.extension.getURL(s+"/"+t+"/"+t+".dic"),p)):(s=r.dictionaryPath?r.dictionaryPath:e+"/dictionaries",i||h(s+"/"+t+"/"+t+".aff",d),n||h(s+"/"+t+"/"+t+".dic",p))),this}).prototype={load:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);return this},_readFile:function(t,e,n){if(e=e||"utf8","undefined"!=typeof XMLHttpRequest){var r,s=new XMLHttpRequest;return s.open("GET",t,n),n&&(r=new Promise(function(t,e){s.onload=function(){200===s.status?t(s.responseText):e(s.statusText)},s.onerror=function(){e(s.statusText)}})),s.overrideMimeType&&s.overrideMimeType("text/plain; charset="+e),s.send(null),n?r:s.responseText}var o=i(121);try{if(o.existsSync(t))return o.readFileSync(t,e);console.log("Path "+t+" does not exist.")}catch(t){return console.log(t),""}},_parseAFF:function(t){var e,i,n,r,s,o,a,l={},c=(t=this._removeAffixComments(t)).split(/\r?\n/);for(r=0,o=c.length;r<o;r++){var u=(e=c[r]).split(/\s+/),h=u[0];if("PFX"==h||"SFX"==h){var d=u[1],p=u[2],f=[];for(s=r+1,a=r+1+(i=parseInt(u[3],10));s<a;s++){var m=(n=c[s].split(/\s+/))[2],g=n[3].split("/"),y=g[0];"0"===y&&(y="");var v=this.parseRuleCodes(g[1]),b=n[4],x={};x.add=y,v.length>0&&(x.continuationClasses=v),"."!==b&&(x.match="SFX"===h?new RegExp(b+"$"):new RegExp("^"+b)),"0"!=m&&(x.remove="SFX"===h?new RegExp(m+"$"):m),f.push(x)}l[d]={type:h,combineable:"Y"==p,entries:f},r+=i}else if("COMPOUNDRULE"===h){for(s=r+1,a=r+1+(i=parseInt(u[1],10));s<a;s++)n=(e=c[s]).split(/\s+/),this.compoundRules.push(n[1]);r+=i}else"REP"===h?3===(n=e.split(/\s+/)).length&&this.replacementTable.push([n[1],n[2]]):this.flags[h]=u[1]}return l},_removeAffixComments:function(t){return t=(t=(t=(t=t.replace(/^\s*#.*$/gm,"")).replace(/^\s\s*/m,"").replace(/\s\s*$/m,"")).replace(/\n{2,}/g,"\n")).replace(/^\s\s*/,"").replace(/\s\s*$/,"")},_parseDIC:function(t){var e=(t=this._removeDicComments(t)).split(/\r?\n/),i={};function n(t,e){i.hasOwnProperty(t)||(i[t]=null),e.length>0&&(null===i[t]&&(i[t]=[]),i[t].push(e))}for(var r=1,s=e.length;r<s;r++){var o=e[r];if(o){var a=o.split("/",2),l=a[0];if(a.length>1){var c=this.parseRuleCodes(a[1]);"NEEDAFFIX"in this.flags&&-1!=c.indexOf(this.flags.NEEDAFFIX)||n(l,c);for(var u=0,h=c.length;u<h;u++){var d=c[u],p=this.rules[d];if(p)for(var f=this._applyRule(l,p),m=0,g=f.length;m<g;m++){var y=f[m];if(n(y,[]),p.combineable)for(var v=u+1;v<h;v++){var b=c[v],x=this.rules[b];if(x&&x.combineable&&p.type!=x.type)for(var k=this._applyRule(y,x),w=0,S=k.length;w<S;w++){n(k[w],[])}}}d in this.compoundRuleCodes&&this.compoundRuleCodes[d].push(l)}}else n(l.trim(),[])}}return i},_removeDicComments:function(t){return t=t.replace(/^\t.*$/gm,"")},parseRuleCodes:function(t){if(!t)return[];if(!("FLAG"in this.flags))return t.split("");if("long"===this.flags.FLAG){for(var e=[],i=0,n=t.length;i<n;i+=2)e.push(t.substr(i,2));return e}return"num"===this.flags.FLAG?t.split(","):void 0},_applyRule:function(t,e){for(var i=e.entries,n=[],r=0,s=i.length;r<s;r++){var o=i[r];if(!o.match||t.match(o.match)){var a=t;if(o.remove&&(a=a.replace(o.remove,"")),"SFX"===e.type?a+=o.add:a=o.add+a,n.push(a),"continuationClasses"in o)for(var l=0,c=o.continuationClasses.length;l<c;l++){var u=this.rules[o.continuationClasses[l]];u&&(n=n.concat(this._applyRule(a,u)))}}}return n},check:function(t){if(!this.loaded)throw"Dictionary not loaded.";var e=t.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.checkExact(e))return!0;if(e.toUpperCase()===e){var i=e[0]+e.substring(1).toLowerCase();if(this.hasFlag(i,"KEEPCASE"))return!1;if(this.checkExact(i))return!0}var n=e.toLowerCase();if(n!==e){if(this.hasFlag(n,"KEEPCASE"))return!1;if(this.checkExact(n))return!0}return!1},checkExact:function(t){if(!this.loaded)throw"Dictionary not loaded.";var e,i,n=this.dictionaryTable[t];if(void 0===n){if("COMPOUNDMIN"in this.flags&&t.length>=this.flags.COMPOUNDMIN)for(e=0,i=this.compoundRules.length;e<i;e++)if(t.match(this.compoundRules[e]))return!0}else{if(null===n)return!0;if("object"==typeof n)for(e=0,i=n.length;e<i;e++)if(!this.hasFlag(t,"ONLYINCOMPOUND",n[e]))return!0}return!1},hasFlag:function(t,e,i){if(!this.loaded)throw"Dictionary not loaded.";return!!(e in this.flags&&(void 0===i&&(i=Array.prototype.concat.apply([],this.dictionaryTable[t])),i&&-1!==i.indexOf(this.flags[e])))},alphabet:"",suggest:function(t,e){if(!this.loaded)throw"Dictionary not loaded.";if(e=e||5,this.memoized.hasOwnProperty(t)){var i=this.memoized[t].limit;if(e<=i||this.memoized[t].suggestions.length<i)return this.memoized[t].suggestions.slice(0,e)}if(this.check(t))return[];for(var n=0,r=this.replacementTable.length;n<r;n++){var s=this.replacementTable[n];if(-1!==t.indexOf(s[0])){var o=t.replace(s[0],s[1]);if(this.check(o))return[o]}}var a=this;function l(t,e){var i,n,r,s,o,l={};if("string"==typeof t){var c=t;(t={})[c]=!0}for(var c in t)for(i=0,r=c.length+1;i<r;i++){var u=[c.substring(0,i),c.substring(i)];if(u[1]&&(o=u[0]+u[1].substring(1),e&&!a.check(o)||(o in l?l[o]+=1:l[o]=1)),u[1].length>1&&u[1][1]!==u[1][0]&&(o=u[0]+u[1][1]+u[1][0]+u[1].substring(2),e&&!a.check(o)||(o in l?l[o]+=1:l[o]=1)),u[1])for(n=0,s=a.alphabet.length;n<s;n++)a.alphabet[n]!=u[1].substring(0,1)&&(o=u[0]+a.alphabet[n]+u[1].substring(1),e&&!a.check(o)||(o in l?l[o]+=1:l[o]=1));if(u[1])for(n=0,s=a.alphabet.length;n<s;n++)o=u[0]+a.alphabet[n]+u[1],e&&!a.check(o)||(o in l?l[o]+=1:l[o]=1)}return l}return a.alphabet="abcdefghijklmnopqrstuvwxyz",this.memoized[t]={suggestions:function(t){var i,n=l(t),r=l(n,!0);for(var s in n)a.check(s)&&(s in r?r[s]+=n[s]:r[s]=n[s]);var o=[];for(i in r)r.hasOwnProperty(i)&&o.push([i,r[i]]);o.sort(function(t,e){var i=t[1],n=e[1];return i<n?-1:i>n?1:e[0].localeCompare(t[0])}).reverse();var c=[],u="lowercase";t.toUpperCase()===t?u="uppercase":t.substr(0,1).toUpperCase()+t.substr(1).toLowerCase()===t&&(u="capitalized");var h=e;for(i=0;i<Math.min(h,o.length);i++)"uppercase"===u?o[i][0]=o[i][0].toUpperCase():"capitalized"===u&&(o[i][0]=o[i][0].substr(0,1).toUpperCase()+o[i][0].substr(1)),a.hasFlag(o[i][0],"NOSUGGEST")||-1!=c.indexOf(o[i][0])?h++:c.push(o[i][0]);return c}(t),limit:e},this.memoized[t].suggestions}}}(),t.exports=n}).call(this,"/")},function(t,e,i){"use strict";var n=i(122);function r(t){"function"==typeof(t=t||{}).codeMirrorInstance&&"function"==typeof t.codeMirrorInstance.defineMode?(String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),t.codeMirrorInstance.defineMode("spell-checker",function(e){if(!r.aff_loading){r.aff_loading=!0;var i=new XMLHttpRequest;i.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff",!0),i.onload=function(){4===i.readyState&&200===i.status&&(r.aff_data=i.responseText,r.num_loaded++,2==r.num_loaded&&(r.typo=new n("en_US",r.aff_data,r.dic_data,{platform:"any"})))},i.send(null)}if(!r.dic_loading){r.dic_loading=!0;var s=new XMLHttpRequest;s.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic",!0),s.onload=function(){4===s.readyState&&200===s.status&&(r.dic_data=s.responseText,r.num_loaded++,2==r.num_loaded&&(r.typo=new n("en_US",r.aff_data,r.dic_data,{platform:"any"})))},s.send(null)}var o='!"#$%&()*+,-./:;<=>?@[\\]^_`{|}~ ',a={token:function(t){var e=t.peek(),i="";if(o.includes(e))return t.next(),null;for(;null!=(e=t.peek())&&!o.includes(e);)i+=e,t.next();return r.typo&&!r.typo.check(i)?"spell-error":null}},l=t.codeMirrorInstance.getMode(e,e.backdrop||"text/plain");return t.codeMirrorInstance.overlayMode(l,a,!0)})):console.log("CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`")}r.num_loaded=0,r.aff_loading=!1,r.dic_loading=!1,r.aff_data="",r.dic_data="",r.typo,t.exports=r},function(t,e,i){!function(t){"use strict";var e=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?«»“”‘’]))/i;t.defineMode("gfm",function(i,n){var r=0,s={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(t){return{code:t.code,codeBlock:t.codeBlock,ateSpace:t.ateSpace}},token:function(t,i){if(i.combineTokens=null,i.codeBlock)return t.match(/^```+/)?(i.codeBlock=!1,null):(t.skipToEnd(),null);if(t.sol()&&(i.code=!1),t.sol()&&t.match(/^```+/))return t.skipToEnd(),i.codeBlock=!0,null;if("`"===t.peek()){t.next();var s=t.pos;t.eatWhile("`");var o=1+t.pos-s;return i.code?o===r&&(i.code=!1):(r=o,i.code=!0),null}if(i.code)return t.next(),null;if(t.eatSpace())return i.ateSpace=!0,null;if((t.sol()||i.ateSpace)&&(i.ateSpace=!1,!1!==n.gitHubSpice)){if(t.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?=.{0,6}\d)(?:[a-f0-9]{7,40}\b)/))return i.combineTokens=!0,"link";if(t.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))return i.combineTokens=!0,"link"}return t.match(e)&&"]("!=t.string.slice(t.start-2,t.start)&&(0==t.start||/\W/.test(t.string.charAt(t.start-1)))?(i.combineTokens=!0,"link"):(t.next(),null)},blankLine:function(t){return t.code=!1,null}},o={taskLists:!0,strikethrough:!0,emoji:!0};for(var a in n)o[a]=n[a];return o.name="markdown",t.overlayMode(t.getMode(i,o),s)},"markdown"),t.defineMIME("text/x-gfm","gfm")}(i(7),i(75),i(73))},function(t,e,i){!function(t){"use strict";function e(t){t.state.markedSelection&&t.operation(function(){!function(t){if(!t.somethingSelected())return a(t);if(t.listSelections().length>1)return l(t);var e=t.getCursor("start"),i=t.getCursor("end"),r=t.state.markedSelection;if(!r.length)return o(t,e,i);var c=r[0].find(),u=r[r.length-1].find();if(!c||!u||i.line-e.line<=n||s(e,u.to)>=0||s(i,c.from)<=0)return l(t);for(;s(e,c.from)>0;)r.shift().clear(),c=r[0].find();for(s(e,c.from)<0&&(c.to.line-e.line<n?(r.shift().clear(),o(t,e,c.to,0)):o(t,e,c.from,0));s(i,u.to)<0;)r.pop().clear(),u=r[r.length-1].find();s(i,u.to)>0&&(i.line-u.from.line<n?(r.pop().clear(),o(t,u.from,i)):o(t,u.to,i))}(t)})}function i(t){t.state.markedSelection&&t.state.markedSelection.length&&t.operation(function(){a(t)})}t.defineOption("styleSelectedText",!1,function(n,r,s){var o=s&&s!=t.Init;r&&!o?(n.state.markedSelection=[],n.state.markedSelectionStyle="string"==typeof r?r:"CodeMirror-selectedtext",l(n),n.on("cursorActivity",e),n.on("change",i)):!r&&o&&(n.off("cursorActivity",e),n.off("change",i),a(n),n.state.markedSelection=n.state.markedSelectionStyle=null)});var n=8,r=t.Pos,s=t.cmpPos;function o(t,e,i,o){if(0!=s(e,i))for(var a=t.state.markedSelection,l=t.state.markedSelectionStyle,c=e.line;;){var u=c==e.line?e:r(c,0),h=c+n,d=h>=i.line,p=d?i:r(h,0),f=t.markText(u,p,{className:l});if(null==o?a.push(f):a.splice(o++,0,f),d)break;c=h}}function a(t){for(var e=t.state.markedSelection,i=0;i<e.length;++i)e[i].clear();e.length=0}function l(t){a(t);for(var e=t.listSelections(),i=0;i<e.length;i++)o(t,e[i].from(),e[i].to())}}(i(7))},function(t,e,i){!function(t){function e(t){t.state.placeholder&&(t.state.placeholder.parentNode.removeChild(t.state.placeholder),t.state.placeholder=null)}function i(t){e(t);var i=t.state.placeholder=document.createElement("pre");i.style.cssText="height: 0; overflow: visible",i.style.direction=t.getOption("direction"),i.className="CodeMirror-placeholder CodeMirror-line-like";var n=t.getOption("placeholder");"string"==typeof n&&(n=document.createTextNode(n)),i.appendChild(n),t.display.lineSpace.insertBefore(i,t.display.lineSpace.firstChild)}function n(t){s(t)&&i(t)}function r(t){var n=t.getWrapperElement(),r=s(t);n.className=n.className.replace(" CodeMirror-empty","")+(r?" CodeMirror-empty":""),r?i(t):e(t)}function s(t){return 1===t.lineCount()&&""===t.getLine(0)}t.defineOption("placeholder","",function(i,s,o){var a=o&&o!=t.Init;if(s&&!a)i.on("blur",n),i.on("change",r),i.on("swapDoc",r),r(i);else if(!s&&a){i.off("blur",n),i.off("change",r),i.off("swapDoc",r),e(i);var l=i.getWrapperElement();l.className=l.className.replace(" CodeMirror-empty","")}s&&!i.hasFocus()&&n(i)})}(i(7))},function(t,e,i){!function(t){"use strict";t.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki ",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]}];for(var e=0;e<t.modeInfo.length;e++){var i=t.modeInfo[e];i.mimes&&(i.mime=i.mimes[0])}t.findModeByMIME=function(e){e=e.toLowerCase();for(var i=0;i<t.modeInfo.length;i++){var n=t.modeInfo[i];if(n.mime==e)return n;if(n.mimes)for(var r=0;r<n.mimes.length;r++)if(n.mimes[r]==e)return n}return/\+xml$/.test(e)?t.findModeByMIME("application/xml"):/\+json$/.test(e)?t.findModeByMIME("application/json"):void 0},t.findModeByExtension=function(e){for(var i=0;i<t.modeInfo.length;i++){var n=t.modeInfo[i];if(n.ext)for(var r=0;r<n.ext.length;r++)if(n.ext[r]==e)return n}},t.findModeByFileName=function(e){for(var i=0;i<t.modeInfo.length;i++){var n=t.modeInfo[i];if(n.file&&n.file.test(e))return n}var r=e.lastIndexOf("."),s=r>-1&&e.substring(r+1,e.length);if(s)return t.findModeByExtension(s)},t.findModeByName=function(e){e=e.toLowerCase();for(var i=0;i<t.modeInfo.length;i++){var n=t.modeInfo[i];if(n.name.toLowerCase()==e)return n;if(n.alias)for(var r=0;r<n.alias.length;r++)if(n.alias[r].toLowerCase()==e)return n}}}(i(7))},function(t,e,i){!function(t){"use strict";t.defineOption("fullScreen",!1,function(e,i,n){n==t.Init&&(n=!1),!n!=!i&&(i?function(t){var e=t.getWrapperElement();t.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:e.style.width,height:e.style.height},e.style.width="",e.style.height="auto",e.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",t.refresh()}(e):function(t){var e=t.getWrapperElement();e.className=e.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var i=t.state.fullScreenRestore;e.style.width=i.width,e.style.height=i.height,window.scrollTo(i.scrollLeft,i.scrollTop),t.refresh()}(e))})}(i(7))},function(t,e,i){var n=i(7);n.commands.tabAndIndentMarkdownList=function(t){var e=t.listSelections()[0].head;if(!1!==t.getStateAfter(e.line).list)t.execCommand("indentMore");else if(t.options.indentWithTabs)t.execCommand("insertTab");else{var i=Array(t.options.tabSize+1).join(" ");t.replaceSelection(i)}},n.commands.shiftTabAndUnindentMarkdownList=function(t){var e=t.listSelections()[0].head;if(!1!==t.getStateAfter(e.line).list)t.execCommand("indentLess");else if(t.options.indentWithTabs)t.execCommand("insertTab");else{var i=Array(t.options.tabSize+1).join(" ");t.replaceSelection(i)}}},function(t,e,i){!function(t){"use strict";var e=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,i=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,n=/[*+-]\s/;function r(t,i){var n=i.line,r=0,s=0,o=e.exec(t.getLine(n)),a=o[1];do{var l=n+(r+=1),c=t.getLine(l),u=e.exec(c);if(u){var h=u[1],d=parseInt(o[3],10)+r-s,p=parseInt(u[3],10),f=p;if(a!==h||isNaN(p)){if(a.length>h.length)return;if(a.length<h.length&&1===r)return;s+=1}else d===p&&(f=p+1),d>p&&(f=d+1),t.replaceRange(c.replace(e,h+f+u[4]+u[5]),{line:l,ch:0},{line:l,ch:c.length})}}while(u)}t.commands.newlineAndIndentContinueMarkdownList=function(s){if(s.getOption("disableInput"))return t.Pass;for(var o=s.listSelections(),a=[],l=0;l<o.length;l++){var c=o[l].head,u=s.getStateAfter(c.line),h=t.innerMode(s.getMode(),u);if("markdown"!==h.mode.name)return void s.execCommand("newlineAndIndent");var d=!1!==(u=h.state).list,p=0!==u.quote,f=s.getLine(c.line),m=e.exec(f),g=/^\s*$/.test(f.slice(0,c.ch));if(!o[l].empty()||!d&&!p||!m||g)return void s.execCommand("newlineAndIndent");if(i.test(f))/>\s*$/.test(f)||s.replaceRange("",{line:c.line,ch:0},{line:c.line,ch:c.ch+1}),a[l]="\n";else{var y=m[1],v=m[5],b=!(n.test(m[2])||m[2].indexOf(">")>=0),x=b?parseInt(m[3],10)+1+m[4]:m[2].replace("x"," ");a[l]="\n"+y+x+v,b&&r(s,c)}}s.replaceSelections(a)}}(i(7))},function(t,e,i){var n=i(8),r=i(83),s=i(0)("species");t.exports=function(t){var e;return r(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!r(e.prototype)||(e=void 0),n(e)&&null===(e=e[s])&&(e=void 0)),void 0===e?Array:e}},function(t,e,i){var n=i(131);t.exports=function(t,e){return new(n(t))(e)}},function(t,e,i){(t.exports=i(50)(!1)).push([t.i,"\n.add[data-v-57917537] {\n    cursor: pointer;\n}\n.add[data-v-57917537]:focus, .add[data-v-57917537]:hover {\n    background-color: rgba(10,10,10,.3);\n}\n",""])},function(t,e,i){"use strict";var n=i(45);i.n(n).a},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e){var i=Object.prototype.toString;t.exports=function(t){return i.call(t)}},function(t,e,i){var n=i(78),r=Object.prototype,s=r.hasOwnProperty,o=r.toString,a=n?n.toStringTag:void 0;t.exports=function(t){var e=s.call(t,a),i=t[a];try{t[a]=void 0;var n=!0}catch(t){}var r=o.call(t);return n&&(e?t[a]=i:delete t[a]),r}},function(t,e,i){var n=i(78),r=i(137),s=i(136),o="[object Null]",a="[object Undefined]",l=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?a:o:l&&l in Object(t)?r(t):s(t)}},function(t,e,i){var n=i(138),r=i(135),s="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||r(t)&&n(t)==s}},function(t,e,i){var n=i(80),r=i(139),s=NaN,o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(r(t))return s;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var i=l.test(t);return i||c.test(t)?u(t.slice(2),i?2:8):a.test(t)?s:+t}},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){(function(e){var i="object"==typeof e&&e&&e.Object===Object&&e;t.exports=i}).call(this,i(141))},function(t,e,i){var n=i(79);t.exports=function(){return n.Date.now()}},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,i){var n=i(6),r=i(26),s=i(4),o=i(144),a="["+o+"]",l=RegExp("^"+a+a+"*"),c=RegExp(a+a+"*$"),u=function(t,e,i){var r={},a=s(function(){return!!o[t]()||"​"!="​"[t]()}),l=r[t]=a?e(h):o[t];i&&(r[i]=l),n(n.P+n.F*a,"String",r)},h=u.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(c,"")),t};t.exports=u},function(t,e,i){var n=i(8),r=i(2),s=function(t,e){if(r(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=i(18)(Function.call,i(32).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return s(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:s}},function(t,e,i){"use strict";var n=i(2),r=i(14),s=i(16),o=i(38),a=i(58),l=i(57),c=Math.max,u=Math.min,h=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;i(55)("replace",2,function(t,e,i,f){return[function(n,r){var s=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,s,r):i.call(String(s),n,r)},function(t,e){var r=f(i,t,this,e);if(r.done)return r.value;var h=n(t),d=String(this),p="function"==typeof e;p||(e=String(e));var g=h.global;if(g){var y=h.unicode;h.lastIndex=0}for(var v=[];;){var b=l(h,d);if(null===b)break;if(v.push(b),!g)break;""===String(b[0])&&(h.lastIndex=a(d,s(h.lastIndex),y))}for(var x,k="",w=0,S=0;S<v.length;S++){b=v[S];for(var C=String(b[0]),A=c(u(o(b.index),d.length),0),T=[],_=1;_<b.length;_++)T.push(void 0===(x=b[_])?x:String(x));var M=b.groups;if(p){var L=[C].concat(T,A,d);void 0!==M&&L.push(M);var F=String(e.apply(void 0,L))}else F=m(C,d,A,T,M,e);A>=w&&(k+=d.slice(w,A)+F,w=A+C.length)}return k+d.slice(w)}];function m(t,e,n,s,o,a){var l=n+t.length,c=s.length,u=p;return void 0!==o&&(o=r(o),u=d),i.call(a,u,function(i,r){var a;switch(r.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(l);case"<":a=o[r.slice(1,-1)];break;default:var u=+r;if(0===u)return i;if(u>c){var d=h(u/10);return 0===d?i:d<=c?void 0===s[d-1]?r.charAt(1):s[d-1]+r.charAt(1):i}a=s[u-1]}return void 0===a?"":a})}})},function(t,e,i){"use strict";var n=i(6),r=i(13),s=i(1),o=i(60),a=i(92);n(n.P+n.R,"Promise",{finally:function(t){var e=o(this,r.Promise||s.Promise),i="function"==typeof t;return this.then(i?function(i){return a(e,t()).then(function(){return i})}:t,i?function(i){return a(e,t()).then(function(){throw i})}:t)}})},function(t,e,i){"use strict";var n=i(2),r=i(16),s=i(58),o=i(57);i(55)("match",1,function(t,e,i,a){return[function(i){var n=t(this),r=void 0==i?void 0:i[e];return void 0!==r?r.call(i,n):new RegExp(i)[e](String(n))},function(t){var e=a(i,t,this);if(e.done)return e.value;var l=n(t),c=String(this);if(!l.global)return o(l,c);var u=l.unicode;l.lastIndex=0;for(var h,d=[],p=0;null!==(h=o(l,c));){var f=String(h[0]);d[p]=f,""===f&&(l.lastIndex=s(c,r(l.lastIndex),u)),p++}return 0===p?null:d}]})},function(t,e,i){var n=i(15),r=i(24).f,s={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return o&&"[object Window]"==s.call(t)?function(t){try{return r(t)}catch(t){return o.slice()}}(t):r(n(t))}},function(t,e,i){var n=i(5),r=i(2),s=i(21);t.exports=i(3)?Object.defineProperties:function(t,e){r(t);for(var i,o=s(e),a=o.length,l=0;a>l;)n.f(t,i=o[l++],e[i]);return t}},function(t,e,i){var n=i(38),r=Math.max,s=Math.min;t.exports=function(t,e){return(t=n(t))<0?r(t+e,0):s(t,e)}},function(t,e,i){var n=i(15),r=i(16),s=i(152);t.exports=function(t){return function(e,i,o){var a,l=n(e),c=r(l.length),u=s(o,c);if(t&&i!=i){for(;c>u;)if((a=l[u++])!=a)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===i)return t||u||0;return!t&&-1}}},function(t,e,i){var n=i(21),r=i(34),s=i(33);t.exports=function(t){var e=n(t),i=r.f;if(i)for(var o,a=i(t),l=s.f,c=0;a.length>c;)l.call(t,o=a[c++])&&e.push(o);return e}},function(t,e,i){var n=i(29)("meta"),r=i(8),s=i(11),o=i(5).f,a=0,l=Object.isExtensible||function(){return!0},c=!i(4)(function(){return l(Object.preventExtensions({}))}),u=function(t){o(t,n,{value:{i:"O"+ ++a,w:{}}})},h=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!s(t,n)){if(!l(t))return"F";if(!e)return"E";u(t)}return t[n].i},getWeak:function(t,e){if(!s(t,n)){if(!l(t))return!0;if(!e)return!1;u(t)}return t[n].w},onFreeze:function(t){return c&&h.NEED&&l(t)&&!s(t,n)&&u(t),t}}},function(t,e,i){"use strict";var n=i(56);i(6)({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},function(t,e,i){var n=i(9);t.exports=function(t,e,i){for(var r in e)n(t,r,e[r],i);return t}},function(t,e,i){var n=i(1).navigator;t.exports=n&&n.userAgent||""},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,i){var n=i(1),r=i(95).set,s=n.MutationObserver||n.WebKitMutationObserver,o=n.process,a=n.Promise,l="process"==i(17)(o);t.exports=function(){var t,e,i,c=function(){var n,r;for(l&&(n=o.domain)&&n.exit();t;){r=t.fn,t=t.next;try{r()}catch(n){throw t?i():e=void 0,n}}e=void 0,n&&n.enter()};if(l)i=function(){o.nextTick(c)};else if(!s||n.navigator&&n.navigator.standalone)if(a&&a.resolve){var u=a.resolve(void 0);i=function(){u.then(c)}}else i=function(){r.call(n,c)};else{var h=!0,d=document.createTextNode("");new s(c).observe(d,{characterData:!0}),i=function(){d.data=h=!h}}return function(n){var r={fn:n,next:void 0};e&&(e.next=r),t||(t=r,i()),e=r}}},function(t,e){t.exports=function(t,e,i){var n=void 0===i;switch(e.length){case 0:return n?t():t.call(i);case 1:return n?t(e[0]):t.call(i,e[0]);case 2:return n?t(e[0],e[1]):t.call(i,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(i,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(i,e[0],e[1],e[2],e[3])}return t.apply(i,e)}},function(t,e,i){var n=i(18),r=i(98),s=i(97),o=i(2),a=i(16),l=i(96),c={},u={};(e=t.exports=function(t,e,i,h,d){var p,f,m,g,y=d?function(){return t}:l(t),v=n(i,h,e?2:1),b=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(s(y)){for(p=a(t.length);p>b;b++)if((g=e?v(o(f=t[b])[0],f[1]):v(t[b]))===c||g===u)return g}else for(m=y.call(t);!(f=m.next()).done;)if((g=r(m,v,f.value,e))===c||g===u)return g}).BREAK=c,e.RETURN=u},function(t,e){t.exports=function(t,e,i,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(i+": incorrect invocation!");return t}},function(t,e,i){t.exports=i(40)("native-function-to-string",Function.toString)}]);